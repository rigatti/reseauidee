 /**
  * $Desc
  *
  * @author     Gavias <gaviasthemes@gmail.com>
  * @copyright  Copyright (C) 2015. All Rights Reserved.
  * @license    GNU/GPL v2 or later http://www.gnu.org/licenses/gpl-2.0.html
  * @addition this license does not allow theme provider using in themes to sell on marketplaces.
  * 
  */
!function(e){function t(t,i){this.element=t,this.options=e.extend({},n,i),this._defaults=n,this._name=r}var r="serializeObject",n={requiredFormat:{}};t.prototype.toJsonObject=function(){var t=this,r=t.replaceEmptyBracketWithNumericBracket(e(t.element).serializeArray()),n=t.options.requiredFormat;return e.each(r,function(r,i){var a=i.name.replace(/]/g,"").split("["),o=t.stringArrayKeyToVariable(a,i.value);n=e.extend(!0,{},n,o)}),n},t.prototype.replaceEmptyBracketWithNumericBracket=function(t){var r={},n=t;return e.each(n,function(e,t){var i=t.name,a=i.indexOf("[]");a>-1&&(r[i]="undefined"==typeof r[i]?0:++r[i],n[e].name=t.name.replace("[]","["+r[i]+"]"))}),n},t.prototype.stringArrayKeyToVariable=function(e,t){var r,n=this;if(e.length>0){var i=e.shift().trim();r=isNaN(i)&&""!=i?{}:[],r[i]=e.length>0?n.stringArrayKeyToVariable(e,t):t}return r},e.fn[r]=function(e){return new t(this,e).toJsonObject()}}(jQuery,window,document);

!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n.w={},n(n.s=16)}([function(e,t,n){var r;!function(t,n){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,i){"use strict";var o=[],a=n.document,s=Object.getPrototypeOf,u=o.slice,l=o.concat,c=o.push,f=o.indexOf,d={},h=d.toString,p=d.hasOwnProperty,m=p.toString,g=m.call(Object),v={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},b=function(e){return null!=e&&e===e.window},w={type:!0,src:!0,noModule:!0};function x(e,t,n){var r,i=(t=t||a).createElement("script");if(i.text=e,n)for(r in w)n[r]&&(i[r]=n[r]);t.head.appendChild(i).parentNode.removeChild(i)}function C(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[h.call(e)]||"object":typeof e}var _=function(e,t){return new _.fn.init(e,t)},S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function k(e){var t=!!e&&"length"in e&&e.length,n=C(e);return!y(e)&&!b(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}_.fn=_.prototype={jquery:"3.3.1",constructor:_,length:0,toArray:function(){return u.call(this)},get:function(e){return null==e?u.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=_.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return _.each(this,e)},map:function(e){return this.pushStack(_.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:o.sort,splice:o.splice},_.extend=_.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||y(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(l&&r&&(_.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&_.isPlainObject(n)?n:{},a[t]=_.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},_.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==h.call(e)||(t=s(e))&&("function"!=typeof(n=p.call(t,"constructor")&&t.constructor)||m.call(n)!==g))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){x(e)},each:function(e,t){var n,r=0;if(k(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(S,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(k(Object(e))?_.merge(n,"string"==typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:f.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(k(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return l.apply([],a)},guid:1,support:v}),"function"==typeof Symbol&&(_.fn[Symbol.iterator]=o[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){d["[object "+t+"]"]=t.toLowerCase()});var T=function(e){var t,n,r,i,o,a,s,u,l,c,f,d,h,p,m,g,v,y,b,w="sizzle"+1*new Date,x=e.document,C=0,_=0,S=ae(),k=ae(),T=ae(),E=function(e,t){return e===t&&(f=!0),0},N={}.hasOwnProperty,A=[],R=A.pop,O=A.push,D=A.push,P=A.slice,I=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",H="\\["+M+"*("+L+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+M+"*\\]",F=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+H+")*)|.*)\\)|)",z=new RegExp(M+"+","g"),j=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),W=new RegExp("^"+M+"*,"+M+"*"),U=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),$=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),q=new RegExp(F),V=new RegExp("^"+L+"$"),X={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+H),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){d()},ie=ye(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{D.apply(A=P.call(x.childNodes),x.childNodes),A[x.childNodes.length].nodeType}catch(e){D={apply:A.length?function(e,t){O.apply(e,P.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function oe(e,t,r,i){var o,s,l,c,f,p,v,y=t&&t.ownerDocument,C=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==C&&9!==C&&11!==C)return r;if(!i&&((t?t.ownerDocument||t:x)!==h&&d(t),t=t||h,m)){if(11!==C&&(f=G.exec(e)))if(o=f[1]){if(9===C){if(!(l=t.getElementById(o)))return r;if(l.id===o)return r.push(l),r}else if(y&&(l=y.getElementById(o))&&b(t,l)&&l.id===o)return r.push(l),r}else{if(f[2])return D.apply(r,t.getElementsByTagName(e)),r;if((o=f[3])&&n.getElementsByClassName&&t.getElementsByClassName)return D.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!T[e+" "]&&(!g||!g.test(e))){if(1!==C)y=t,v=e;else if("object"!==t.nodeName.toLowerCase()){for((c=t.getAttribute("id"))?c=c.replace(te,ne):t.setAttribute("id",c=w),s=(p=a(e)).length;s--;)p[s]="#"+c+" "+ve(p[s]);v=p.join(","),y=Q.test(e)&&me(t.parentNode)||t}if(v)try{return D.apply(r,y.querySelectorAll(v)),r}catch(e){}finally{c===w&&t.removeAttribute("id")}}}return u(e.replace(j,"$1"),t,r,i)}function ae(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function se(e){return e[w]=!0,e}function ue(e){var t=h.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function ce(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function de(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function he(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function pe(e){return se(function(t){return t=+t,se(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},d=oe.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:x;return a!==h&&9===a.nodeType&&a.documentElement?(p=(h=a).documentElement,m=!o(h),x!==h&&(i=h.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",re,!1):i.attachEvent&&i.attachEvent("onunload",re)),n.attributes=ue(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ue(function(e){return e.appendChild(h.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=J.test(h.getElementsByClassName),n.getById=ue(function(e){return p.appendChild(e).id=w,!h.getElementsByName||!h.getElementsByName(w).length}),n.getById?(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&m){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&m)return t.getElementsByClassName(e)},v=[],g=[],(n.qsa=J.test(h.querySelectorAll))&&(ue(function(e){p.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+M+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+w+"-]").length||g.push("~="),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||g.push(".#.+[+~]")}),ue(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=h.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(n.matchesSelector=J.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ue(function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",F)}),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=J.test(p.compareDocumentPosition),b=t||J.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},E=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===h||e.ownerDocument===x&&b(x,e)?-1:t===h||t.ownerDocument===x&&b(x,t)?1:c?I(c,e)-I(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===h?-1:t===h?1:i?-1:o?1:c?I(c,e)-I(c,t):0;if(i===o)return ce(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?ce(a[r],s[r]):a[r]===x?-1:s[r]===x?1:0},h):h},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&d(e),t=t.replace($,"='$1']"),n.matchesSelector&&m&&!T[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return oe(t,h,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==h&&d(e),b(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==h&&d(e);var i=r.attrHandle[t.toLowerCase()],o=i&&N.call(r.attrHandle,t.toLowerCase())?i(e,t,!m):void 0;return void 0!==o?o:n.attributes||!m?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.escape=function(e){return(e+"").replace(te,ne)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,r=[],i=0,o=0;if(f=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(E),f){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return c=null,e},i=oe.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=oe.selectors={cacheLength:50,createPseudo:se,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return X.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&q.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&S(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=oe.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(z," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,d,h,p,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!u&&!s,b=!1;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&y){for(b=(h=(l=(c=(f=(d=g)[w]||(d[w]={}))[d.uniqueID]||(f[d.uniqueID]={}))[e]||[])[0]===C&&l[1])&&l[2],d=h&&g.childNodes[h];d=++h&&d&&d[m]||(b=h=0)||p.pop();)if(1===d.nodeType&&++b&&d===t){c[e]=[C,h,b];break}}else if(y&&(b=h=(l=(c=(f=(d=t)[w]||(d[w]={}))[d.uniqueID]||(f[d.uniqueID]={}))[e]||[])[0]===C&&l[1]),!1===b)for(;(d=++h&&d&&d[m]||(b=h=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(y&&((c=(f=d[w]||(d[w]={}))[d.uniqueID]||(f[d.uniqueID]={}))[e]=[C,b]),d!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=I(e,o[a])]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:se(function(e){var t=[],n=[],r=s(e.replace(j,"$1"));return r[w]?se(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:se(function(e){return function(t){return oe(e,t).length>0}}),contains:se(function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:se(function(e){return V.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do{if(n=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:he(!1),disabled:he(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,n){return[n<0?n+t:n]}),even:pe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:pe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:pe(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:pe(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=de(t);function ge(){}function ve(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ye(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=_++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var l,c,f,d=[C,s];if(u){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(c=(f=t[w]||(t[w]={}))[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[o])&&l[0]===C&&l[1]===s)return d[2]=l[2];if(c[o]=d,d[2]=e(t,n,u))return!0}return!1}}function be(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function we(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function xe(e,t,n,r,i,o){return r&&!r[w]&&(r=xe(r)),i&&!i[w]&&(i=xe(i,o)),se(function(o,a,s,u){var l,c,f,d=[],h=[],p=a.length,m=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)oe(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),g=!e||!o&&t?m:we(m,d,e,s,u),v=n?i||(o?e:p||r)?[]:a:g;if(n&&n(g,v,s,u),r)for(l=we(v,h),r(l,[],s,u),c=l.length;c--;)(f=l[c])&&(v[h[c]]=!(g[h[c]]=f));if(o){if(i||e){if(i){for(l=[],c=v.length;c--;)(f=v[c])&&l.push(g[c]=f);i(null,v=[],l,u)}for(c=v.length;c--;)(f=v[c])&&(l=i?I(o,f):d[c])>-1&&(o[l]=!(a[l]=f))}}else v=we(v===a?v.splice(p,v.length):v),i?i(null,a,v,u):D.apply(a,v)})}function Ce(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],u=a?1:0,c=ye(function(e){return e===t},s,!0),f=ye(function(e){return I(t,e)>-1},s,!0),d=[function(e,n,r){var i=!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):f(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])d=[ye(be(d),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[w]){for(i=++u;i<o&&!r.relative[e[i].type];i++);return xe(u>1&&be(d),u>1&&ve(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(j,"$1"),n,u<i&&Ce(e.slice(u,i)),i<o&&Ce(e=e.slice(i)),i<o&&ve(e))}d.push(n)}return be(d)}return ge.prototype=r.filters=r.pseudos,r.setFilters=new ge,a=oe.tokenize=function(e,t){var n,i,o,a,s,u,l,c=k[e+" "];if(c)return t?0:c.slice(0);for(s=e,u=[],l=r.preFilter;s;){for(a in n&&!(i=W.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=U.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(j," ")}),s=s.slice(n.length)),r.filter)!(i=X[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?oe.error(e):k(e,u).slice(0)},s=oe.compile=function(e,t){var n,i=[],o=[],s=T[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=Ce(t[n]))[w]?i.push(s):o.push(s);(s=T(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,u,c){var f,p,g,v=0,y="0",b=o&&[],w=[],x=l,_=o||i&&r.find.TAG("*",c),S=C+=null==x?1:Math.random()||.1,k=_.length;for(c&&(l=a===h||a||c);y!==k&&null!=(f=_[y]);y++){if(i&&f){for(p=0,a||f.ownerDocument===h||(d(f),s=!m);g=e[p++];)if(g(f,a||h,s)){u.push(f);break}c&&(C=S)}n&&((f=!g&&f)&&v--,o&&b.push(f))}if(v+=y,n&&y!==v){for(p=0;g=t[p++];)g(b,w,a,s);if(o){if(v>0)for(;y--;)b[y]||w[y]||(w[y]=R.call(u));w=we(w)}D.apply(u,w),c&&!o&&w.length>0&&v+t.length>1&&oe.uniqueSort(u)}return c&&(C=S,l=x),b};return n?se(o):o}(o,i))).selector=e}return s},u=oe.select=function(e,t,n,i){var o,u,l,c,f,d="function"==typeof e&&e,h=!i&&a(e=d.selector||e);if(n=n||[],1===h.length){if((u=h[0]=h[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===t.nodeType&&m&&r.relative[u[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(Z,ee),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(o=X.needsContext.test(e)?0:u.length;o--&&(l=u[o],!r.relative[c=l.type]);)if((f=r.find[c])&&(i=f(l.matches[0].replace(Z,ee),Q.test(u[0].type)&&me(t.parentNode)||t))){if(u.splice(o,1),!(e=i.length&&ve(u)))return D.apply(n,i),n;break}}return(d||s(e,h))(i,t,!m,n,!t||Q.test(e)&&me(t.parentNode)||t),n},n.sortStable=w.split("").sort(E).join("")===w,n.detectDuplicates=!!f,d(),n.sortDetached=ue(function(e){return 1&e.compareDocumentPosition(h.createElement("fieldset"))}),ue(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),n.attributes&&ue(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ue(function(e){return null==e.getAttribute("disabled")})||le(B,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),oe}(n);_.find=T,_.expr=T.selectors,_.expr[":"]=_.expr.pseudos,_.uniqueSort=_.unique=T.uniqueSort,_.text=T.getText,_.isXMLDoc=T.isXML,_.contains=T.contains,_.escapeSelector=T.escape;var E=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&_(e).is(n))break;r.push(e)}return r},N=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},A=_.expr.match.needsContext;function R(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var O=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,t,n){return y(t)?_.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?_.grep(e,function(e){return e===t!==n}):"string"!=typeof t?_.grep(e,function(e){return f.call(t,e)>-1!==n}):_.filter(t,e,n)}_.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?_.find.matchesSelector(r,e)?[r]:[]:_.find.matches(e,_.grep(t,function(e){return 1===e.nodeType}))},_.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(_(e).filter(function(){for(t=0;t<r;t++)if(_.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)_.find(e,i[t],n);return r>1?_.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,"string"==typeof e&&A.test(e)?_(e):e||[],!1).length}});var P,I=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(_.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||P,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:I.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof _?t[0]:t,_.merge(this,_.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:a,!0)),O.test(r[1])&&_.isPlainObject(t))for(r in t)y(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=a.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(_):_.makeArray(e,this)}).prototype=_.fn,P=_(a);var B=/^(?:parents|prev(?:Until|All))/,M={children:!0,contents:!0,next:!0,prev:!0};function L(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}_.fn.extend({has:function(e){var t=_(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(_.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&_(e);if(!A.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&_.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?_.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?f.call(_(e),this[0]):f.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),_.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return E(e,"parentNode")},parentsUntil:function(e,t,n){return E(e,"parentNode",n)},next:function(e){return L(e,"nextSibling")},prev:function(e){return L(e,"previousSibling")},nextAll:function(e){return E(e,"nextSibling")},prevAll:function(e){return E(e,"previousSibling")},nextUntil:function(e,t,n){return E(e,"nextSibling",n)},prevUntil:function(e,t,n){return E(e,"previousSibling",n)},siblings:function(e){return N((e.parentNode||{}).firstChild,e)},children:function(e){return N(e.firstChild)},contents:function(e){return R(e,"iframe")?e.contentDocument:(R(e,"template")&&(e=e.content||e),_.merge([],e.childNodes))}},function(e,t){_.fn[e]=function(n,r){var i=_.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=_.filter(r,i)),this.length>1&&(M[e]||_.uniqueSort(i),B.test(e)&&i.reverse()),this.pushStack(i)}});var H=/[^\x20\t\r\n\f]+/g;function F(e){return e}function z(e){throw e}function j(e,t,n,r){var i;try{e&&y(i=e.promise)?i.call(e).done(t).fail(n):e&&y(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}_.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return _.each(e.match(H)||[],function(e,n){t[n]=!0}),t}(e):_.extend({},e);var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){_.each(n,function(n,r){y(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==C(r)&&t(r)})}(arguments),n&&!t&&u()),this},remove:function(){return _.each(arguments,function(e,t){for(var n;(n=_.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?_.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},_.extend({Deferred:function(e){var t=[["notify","progress",_.Callbacks("memory"),_.Callbacks("memory"),2],["resolve","done",_.Callbacks("once memory"),_.Callbacks("once memory"),0,"resolved"],["reject","fail",_.Callbacks("once memory"),_.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return _.Deferred(function(n){_.each(t,function(t,r){var i=y(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(e,r,i){var o=0;function a(e,t,r,i){return function(){var s=this,u=arguments,l=function(){var n,l;if(!(e<o)){if((n=r.apply(s,u))===t.promise())throw new TypeError("Thenable self-resolution");l=n&&("object"==typeof n||"function"==typeof n)&&n.then,y(l)?i?l.call(n,a(o,t,F,i),a(o,t,z,i)):(o++,l.call(n,a(o,t,F,i),a(o,t,z,i),a(o,t,F,t.notifyWith))):(r!==F&&(s=void 0,u=[n]),(i||t.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(n){_.Deferred.exceptionHook&&_.Deferred.exceptionHook(n,c.stackTrace),e+1>=o&&(r!==z&&(s=void 0,u=[n]),t.rejectWith(s,u))}};e?c():(_.Deferred.getStackHook&&(c.stackTrace=_.Deferred.getStackHook()),n.setTimeout(c))}}return _.Deferred(function(n){t[0][3].add(a(0,n,y(i)?i:F,n.notifyWith)),t[1][3].add(a(0,n,y(e)?e:F)),t[2][3].add(a(0,n,y(r)?r:z))}).promise()},promise:function(e){return null!=e?_.extend(e,i):i}},o={};return _.each(t,function(e,n){var a=n[2],s=n[5];i[n[1]]=a.add,s&&a.add(function(){r=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=a.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=u.call(arguments),o=_.Deferred(),a=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?u.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(j(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||y(i[n]&&i[n].then)))return o.then();for(;n--;)j(i[n],a(n),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&W.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},_.readyException=function(e){n.setTimeout(function(){throw e})};var U=_.Deferred();function $(){a.removeEventListener("DOMContentLoaded",$),n.removeEventListener("load",$),_.ready()}_.fn.ready=function(e){return U.then(e).catch(function(e){_.readyException(e)}),this},_.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--_.readyWait:_.isReady)||(_.isReady=!0,!0!==e&&--_.readyWait>0||U.resolveWith(a,[_]))}}),_.ready.then=U.then,"complete"===a.readyState||"loading"!==a.readyState&&!a.documentElement.doScroll?n.setTimeout(_.ready):(a.addEventListener("DOMContentLoaded",$),n.addEventListener("load",$));var q=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===C(n))for(s in i=!0,n)q(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,y(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(_(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},V=/^-ms-/,X=/-([a-z])/g;function Y(e,t){return t.toUpperCase()}function K(e){return e.replace(V,"ms-").replace(X,Y)}var J=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=_.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},J(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[K(t)]=n;else for(r in t)i[K(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][K(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(K):(t=K(t))in r?[t]:t.match(H)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||_.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!_.isEmptyObject(t)}};var Q=new G,Z=new G,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(e){}Z.set(e,t,n)}else n=void 0;return n}_.extend({hasData:function(e){return Z.hasData(e)||Q.hasData(e)},data:function(e,t,n){return Z.access(e,t,n)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),_.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=Z.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=K(r.slice(5)),ne(o,r,i[r]));Q.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){Z.set(this,e)}):q(this,function(t){var n;if(o&&void 0===t)return void 0!==(n=Z.get(o,e))?n:void 0!==(n=ne(o,e))?n:void 0;this.each(function(){Z.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Z.remove(this,e)})}}),_.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Q.get(e,t),n&&(!r||Array.isArray(n)?r=Q.access(e,t,_.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=_.queue(e,t),r=n.length,i=n.shift(),o=_._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){_.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:_.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",n])})})}}),_.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?_.queue(this[0],e):void 0===t?this:this.each(function(){var n=_.queue(this,e,t);_._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&_.dequeue(this,e)})},dequeue:function(e){return this.each(function(){_.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=_.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=Q.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&_.contains(e.ownerDocument,e)&&"none"===_.css(e,"display")},se=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i};function ue(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return _.css(e,t,"")},u=s(),l=n&&n[3]||(_.cssNumber[t]?"":"px"),c=(_.cssNumber[t]||"px"!==l&&+u)&&ie.exec(_.css(e,t));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;a--;)_.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,_.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var le={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,i=le[r];return i||(t=n.body.appendChild(n.createElement(r)),i=_.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),le[r]=i,i)}function fe(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=Q.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[o]=ce(r))):"none"!==n&&(i[o]="none",Q.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}_.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?_(this).show():_(this).hide()})}});var de=/^(?:checkbox|radio)$/i,he=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,pe=/^$|^module$|\/(?:java|ecma)script/i,me={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ge(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&R(e,t)?_.merge([e],n):n}function ve(e,t){for(var n=0,r=e.length;n<r;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}me.optgroup=me.option,me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td;var ye,be,we=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),d=[],h=0,p=e.length;h<p;h++)if((o=e[h])||0===o)if("object"===C(o))_.merge(d,o.nodeType?[o]:o);else if(we.test(o)){for(a=a||f.appendChild(t.createElement("div")),s=(he.exec(o)||["",""])[1].toLowerCase(),u=me[s]||me._default,a.innerHTML=u[1]+_.htmlPrefilter(o)+u[2],c=u[0];c--;)a=a.lastChild;_.merge(d,a.childNodes),(a=f.firstChild).textContent=""}else d.push(t.createTextNode(o));for(f.textContent="",h=0;o=d[h++];)if(r&&_.inArray(o,r)>-1)i&&i.push(o);else if(l=_.contains(o.ownerDocument,o),a=ge(f.appendChild(o),"script"),l&&ve(a),n)for(c=0;o=a[c++];)pe.test(o.type||"")&&n.push(o);return f}ye=a.createDocumentFragment().appendChild(a.createElement("div")),(be=a.createElement("input")).setAttribute("type","radio"),be.setAttribute("checked","checked"),be.setAttribute("name","t"),ye.appendChild(be),v.checkClone=ye.cloneNode(!0).cloneNode(!0).lastChild.checked,ye.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!ye.cloneNode(!0).lastChild.defaultValue;var Ce=a.documentElement,_e=/^key/,Se=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ke=/^([^.]*)(?:\.(.+)|)/;function Te(){return!0}function Ee(){return!1}function Ne(){try{return a.activeElement}catch(e){}}function Ae(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ae(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ee;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return _().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=_.guid++)),e.each(function(){_.event.add(this,t,i,r,n)})}_.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,f,d,h,p,m,g=Q.get(e);if(g)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&_.find.matchesSelector(Ce,i),n.guid||(n.guid=_.guid++),(u=g.events)||(u=g.events={}),(a=g.handle)||(a=g.handle=function(t){return void 0!==_&&_.event.triggered!==t.type?_.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(H)||[""]).length;l--;)h=m=(s=ke.exec(t[l])||[])[1],p=(s[2]||"").split(".").sort(),h&&(f=_.event.special[h]||{},h=(i?f.delegateType:f.bindType)||h,f=_.event.special[h]||{},c=_.extend({type:h,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&_.expr.match.needsContext.test(i),namespace:p.join(".")},o),(d=u[h])||((d=u[h]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,r,p,a)||e.addEventListener&&e.addEventListener(h,a)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),_.event.global[h]=!0)},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,d,h,p,m,g=Q.hasData(e)&&Q.get(e);if(g&&(u=g.events)){for(l=(t=(t||"").match(H)||[""]).length;l--;)if(h=m=(s=ke.exec(t[l])||[])[1],p=(s[2]||"").split(".").sort(),h){for(f=_.event.special[h]||{},d=u[h=(r?f.delegateType:f.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)c=d[o],!i&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(o,1),c.selector&&d.delegateCount--,f.remove&&f.remove.call(e,c));a&&!d.length&&(f.teardown&&!1!==f.teardown.call(e,p,g.handle)||_.removeEvent(e,h,g.handle),delete u[h])}else for(h in u)_.event.remove(e,h+t[l],n,r,!0);_.isEmptyObject(u)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=_.event.fix(e),u=new Array(arguments.length),l=(Q.get(this,"events")||{})[s.type]||[],c=_.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(a=_.event.handlers.call(this,s,l),t=0;(i=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((_.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?_(i,this).index(l)>-1:_.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(_.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[_.expando]?e:new _.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ne()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ne()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&R(this,"input"))return this.click(),!1},_default:function(e){return R(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},_.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},_.Event=function(e,t){if(!(this instanceof _.Event))return new _.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Te:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&_.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[_.expando]=!0},_.Event.prototype={constructor:_.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Te,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Te,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Te,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},_.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&_e.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Se.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},_.event.addProp),_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){_.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||_.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),_.fn.extend({on:function(e,t,n,r){return Ae(this,e,t,n,r)},one:function(e,t,n,r){return Ae(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,_(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ee),this.each(function(){_.event.remove(this,e,n,t)})}});var Re=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Oe=/<script|<style|<link/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,Pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Ie(e,t){return R(e,"table")&&R(11!==t.nodeType?t:t.firstChild,"tr")&&_(e).children("tbody")[0]||e}function Be(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Me(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(Q.hasData(e)&&(o=Q.access(e),a=Q.set(t,o),l=o.events))for(i in delete a.handle,a.events={},l)for(n=0,r=l[i].length;n<r;n++)_.event.add(t,i,l[i][n]);Z.hasData(e)&&(s=Z.access(e),u=_.extend({},s),Z.set(t,u))}}function He(e,t,n,r){t=l.apply([],t);var i,o,a,s,u,c,f=0,d=e.length,h=d-1,p=t[0],m=y(p);if(m||d>1&&"string"==typeof p&&!v.checkClone&&De.test(p))return e.each(function(i){var o=e.eq(i);m&&(t[0]=p.call(this,i,o.html())),He(o,t,n,r)});if(d&&(o=(i=xe(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=(a=_.map(ge(i,"script"),Be)).length;f<d;f++)u=i,f!==h&&(u=_.clone(u,!0,!0),s&&_.merge(a,ge(u,"script"))),n.call(e[f],u,f);if(s)for(c=a[a.length-1].ownerDocument,_.map(a,Me),f=0;f<s;f++)u=a[f],pe.test(u.type||"")&&!Q.access(u,"globalEval")&&_.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?_._evalUrl&&_._evalUrl(u.src):x(u.textContent.replace(Pe,""),c,u))}return e}function Fe(e,t,n){for(var r,i=t?_.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||_.cleanData(ge(r)),r.parentNode&&(n&&_.contains(r.ownerDocument,r)&&ve(ge(r,"script")),r.parentNode.removeChild(r));return e}_.extend({htmlPrefilter:function(e){return e.replace(Re,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=_.contains(e.ownerDocument,e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||_.isXMLDoc(e)))for(a=ge(c),r=0,i=(o=ge(e)).length;r<i;r++)s=o[r],"input"===(l=(u=a[r]).nodeName.toLowerCase())&&de.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ge(e),a=a||ge(c),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,c);return(a=ge(c,"script")).length>0&&ve(a,!f&&ge(e,"script")),c},cleanData:function(e){for(var t,n,r,i=_.event.special,o=0;void 0!==(n=e[o]);o++)if(J(n)){if(t=n[Q.expando]){if(t.events)for(r in t.events)i[r]?_.event.remove(n,r):_.removeEvent(n,r,t.handle);n[Q.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),_.fn.extend({detach:function(e){return Fe(this,e,!0)},remove:function(e){return Fe(this,e)},text:function(e){return q(this,function(e){return void 0===e?_.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ie(this,e).appendChild(e)})},prepend:function(){return He(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ie(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(_.cleanData(ge(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return _.clone(this,e,t)})},html:function(e){return q(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!me[(he.exec(e)||["",""])[1].toLowerCase()]){e=_.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(_.cleanData(ge(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return He(this,arguments,function(t){var n=this.parentNode;_.inArray(this,e)<0&&(_.cleanData(ge(this)),n&&n.replaceChild(t,this))},e)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){_.fn[e]=function(e){for(var n,r=[],i=_(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),_(i[a])[t](n),c.apply(r,n.get());return this.pushStack(r)}});var ze=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),je=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},We=new RegExp(oe.join("|"),"i");function Ue(e,t,n){var r,i,o,a,s=e.style;return(n=n||je(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||_.contains(e.ownerDocument,e)||(a=_.style(e,t)),!v.pixelBoxStyles()&&ze.test(a)&&We.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function $e(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ce.appendChild(l).appendChild(c);var e=n.getComputedStyle(c);r="1%"!==e.top,u=12===t(e.marginLeft),c.style.right="60%",s=36===t(e.right),i=36===t(e.width),c.style.position="absolute",o=36===c.offsetWidth||"absolute",Ce.removeChild(l),c=null}}function t(e){return Math.round(parseFloat(e))}var r,i,o,s,u,l=a.createElement("div"),c=a.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===c.style.backgroundClip,_.extend(v,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),o}}))}();var qe=/^(none|table(?!-c[ea]).+)/,Ve=/^--/,Xe={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:"0",fontWeight:"400"},Ke=["Webkit","Moz","ms"],Je=a.createElement("div").style;function Ge(e){var t=_.cssProps[e];return t||(t=_.cssProps[e]=function(e){if(e in Je)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Ke.length;n--;)if((e=Ke[n]+t)in Je)return e}(e)||e),t}function Qe(e,t,n){var r=ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ze(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=_.css(e,n+oe[a],!0,i)),r?("content"===n&&(u-=_.css(e,"padding"+oe[a],!0,i)),"margin"!==n&&(u-=_.css(e,"border"+oe[a]+"Width",!0,i))):(u+=_.css(e,"padding"+oe[a],!0,i),"padding"!==n?u+=_.css(e,"border"+oe[a]+"Width",!0,i):s+=_.css(e,"border"+oe[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))),u}function et(e,t,n){var r=je(e),i=Ue(e,t,r),o="border-box"===_.css(e,"boxSizing",!1,r),a=o;if(ze.test(i)){if(!n)return i;i="auto"}return a=a&&(v.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===_.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(i=parseFloat(i)||0)+Ze(e,t,n||(o?"border":"content"),a,r,i)+"px"}function tt(e,t,n,r,i){return new tt.prototype.init(e,t,n,r,i)}_.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ue(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=K(t),u=Ve.test(t),l=e.style;if(u||(t=Ge(s)),a=_.cssHooks[t]||_.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"==(o=typeof n)&&(i=ie.exec(n))&&i[1]&&(n=ue(e,t,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(_.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=K(t);return Ve.test(t)||(t=Ge(s)),(a=_.cssHooks[t]||_.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Ue(e,t,r)),"normal"===i&&t in Ye&&(i=Ye[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),_.each(["height","width"],function(e,t){_.cssHooks[t]={get:function(e,n,r){if(n)return!qe.test(_.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,r):se(e,Xe,function(){return et(e,t,r)})},set:function(e,n,r){var i,o=je(e),a="border-box"===_.css(e,"boxSizing",!1,o),s=r&&Ze(e,t,r,a,o);return a&&v.scrollboxSize()===o.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Ze(e,t,"border",!1,o)-.5)),s&&(i=ie.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=_.css(e,t)),Qe(0,n,s)}}}),_.cssHooks.marginLeft=$e(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Ue(e,"marginLeft"))||e.getBoundingClientRect().left-se(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),_.each({margin:"",padding:"",border:"Width"},function(e,t){_.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+oe[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(_.cssHooks[e+t].set=Qe)}),_.fn.extend({css:function(e,t){return q(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=je(e),i=t.length;a<i;a++)o[t[a]]=_.css(e,t[a],!1,r);return o}return void 0!==n?_.style(e,t,n):_.css(e,t)},e,t,arguments.length>1)}}),_.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||_.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(_.cssNumber[n]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,n=tt.propHooks[this.prop];return this.options.duration?this.pos=t=_.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=_.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){_.fx.step[e.prop]?_.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[_.cssProps[e.prop]]&&!_.cssHooks[e.prop]?e.elem[e.prop]=e.now:_.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},_.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},_.fx=tt.prototype.init,_.fx.step={};var nt,rt,it=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function at(){rt&&(!1===a.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(at):n.setTimeout(at,_.fx.interval),_.fx.tick())}function st(){return n.setTimeout(function(){nt=void 0}),nt=Date.now()}function ut(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=oe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function lt(e,t,n){for(var r,i=(ct.tweeners[t]||[]).concat(ct.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ct(e,t,n){var r,i,o=0,a=ct.prefilters.length,s=_.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=nt||st(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(e,[l,r,n]),r<1&&a?n:(a||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:_.extend({},t),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},n),originalProperties:t,originalOptions:n,startTime:nt||st(),duration:n.duration,tweens:[],createTween:function(t,n){var r=_.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=K(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=_.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);o<a;o++)if(r=ct.prefilters[o].call(l,e,c,l.opts))return y(r.stop)&&(_._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return _.map(c,lt,l),y(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),_.fx.timer(_.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}_.Animation=_.extend(ct,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ue(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(H);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ct.tweeners[n]=ct.tweeners[n]||[],ct.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,d=this,h={},p=e.style,m=e.nodeType&&ae(e),g=Q.get(e,"fxshow");for(r in n.queue||(null==(a=_._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,_.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],it.test(i)){if(delete t[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;m=!0}h[r]=g&&g[r]||_.style(e,r)}if((u=!_.isEmptyObject(t))||!_.isEmptyObject(h))for(r in f&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=g&&g.display)&&(l=Q.get(e,"display")),"none"===(c=_.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=_.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===_.css(e,"float")&&(u||(d.done(function(){p.display=l}),null==l&&(c=p.display,l="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),u=!1,h)u||(g?"hidden"in g&&(m=g.hidden):g=Q.access(e,"fxshow",{display:l}),o&&(g.hidden=!m),m&&fe([e],!0),d.done(function(){for(r in m||fe([e]),Q.remove(e,"fxshow"),h)_.style(e,r,h[r])})),u=lt(m?g[r]:0,r,d),r in g||(g[r]=u.start,m&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?ct.prefilters.unshift(e):ct.prefilters.push(e)}}),_.speed=function(e,t,n){var r=e&&"object"==typeof e?_.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return _.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in _.fx.speeds?r.duration=_.fx.speeds[r.duration]:r.duration=_.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&_.dequeue(this,r.queue)},r},_.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=_.isEmptyObject(e),o=_.speed(t,n,r),a=function(){var t=ct(this,_.extend({},e),o);(i||Q.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=_.timers,a=Q.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ot.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||_.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=Q.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=_.timers,a=r?r.length:0;for(n.finish=!0,_.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),_.each(["toggle","show","hide"],function(e,t){var n=_.fn[t];_.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ut(t,!0),e,r,i)}}),_.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){_.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),_.timers=[],_.fx.tick=function(){var e,t=0,n=_.timers;for(nt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||_.fx.stop(),nt=void 0},_.fx.timer=function(e){_.timers.push(e),_.fx.start()},_.fx.interval=13,_.fx.start=function(){rt||(rt=!0,at())},_.fx.stop=function(){rt=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(e,t){return e=_.fx&&_.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,r){var i=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(i)}})},function(){var e=a.createElement("input"),t=a.createElement("select").appendChild(a.createElement("option"));e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=t.selected,(e=a.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value}();var ft,dt=_.expr.attrHandle;_.fn.extend({attr:function(e,t){return q(this,_.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){_.removeAttr(this,e)})}}),_.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?_.prop(e,t,n):(1===o&&_.isXMLDoc(e)||(i=_.attrHooks[t.toLowerCase()]||(_.expr.match.bool.test(t)?ft:void 0)),void 0!==n?null===n?void _.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=_.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&R(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(H);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),ft={set:function(e,t,n){return!1===t?_.removeAttr(e,n):e.setAttribute(n,n),n}},_.each(_.expr.match.bool.source.match(/\w+/g),function(e,t){var n=dt[t]||_.find.attr;dt[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=dt[a],dt[a]=i,i=null!=n(e,t,r)?a:null,dt[a]=o),i}});var ht=/^(?:input|select|textarea|button)$/i,pt=/^(?:a|area)$/i;function mt(e){return(e.match(H)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(H)||[]}_.fn.extend({prop:function(e,t){return q(this,_.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[_.propFix[e]||e]})}}),_.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&_.isXMLDoc(e)||(t=_.propFix[t]||t,i=_.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=_.find.attr(e,"tabindex");return t?parseInt(t,10):ht.test(e.nodeName)||pt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(_.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this}),_.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(y(e))return this.each(function(t){_(this).addClass(e.call(this,t,gt(this)))});if((t=vt(e)).length)for(;n=this[u++];)if(i=gt(n),r=1===n.nodeType&&" "+mt(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(y(e))return this.each(function(t){_(this).removeClass(e.call(this,t,gt(this)))});if(!arguments.length)return this.attr("class","");if((t=vt(e)).length)for(;n=this[u++];)if(i=gt(n),r=1===n.nodeType&&" "+mt(i)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):y(e)?this.each(function(n){_(this).toggleClass(e.call(this,n,gt(this),t),t)}):this.each(function(){var t,i,o,a;if(r)for(i=0,o=_(this),a=vt(e);t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=gt(this))&&Q.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Q.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+mt(gt(n))+" ").indexOf(t)>-1)return!0;return!1}});var yt=/\r/g;_.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=y(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,_(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=_.map(i,function(e){return null==e?"":e+""})),(t=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=_.valHooks[i.type]||_.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(yt,""):null==n?"":n:void 0}}),_.extend({valHooks:{option:{get:function(e){var t=_.find.attr(e,"value");return null!=t?t:mt(_.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!R(n.parentNode,"optgroup"))){if(t=_(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=_.makeArray(t),a=i.length;a--;)((r=i[a]).selected=_.inArray(_.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=_.inArray(_(e).val(),t)>-1}},v.checkOn||(_.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),v.focusin="onfocusin"in n;var bt=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};_.extend(_.event,{trigger:function(e,t,r,i){var o,s,u,l,c,f,d,h,m=[r||a],g=p.call(e,"type")?e.type:e,v=p.call(e,"namespace")?e.namespace.split("."):[];if(s=h=u=r=r||a,3!==r.nodeType&&8!==r.nodeType&&!bt.test(g+_.event.triggered)&&(g.indexOf(".")>-1&&(g=(v=g.split(".")).shift(),v.sort()),c=g.indexOf(":")<0&&"on"+g,(e=e[_.expando]?e:new _.Event(g,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:_.makeArray(t,[e]),d=_.event.special[g]||{},i||!d.trigger||!1!==d.trigger.apply(r,t))){if(!i&&!d.noBubble&&!b(r)){for(l=d.delegateType||g,bt.test(l+g)||(s=s.parentNode);s;s=s.parentNode)m.push(s),u=s;u===(r.ownerDocument||a)&&m.push(u.defaultView||u.parentWindow||n)}for(o=0;(s=m[o++])&&!e.isPropagationStopped();)h=s,e.type=o>1?l:d.bindType||g,(f=(Q.get(s,"events")||{})[e.type]&&Q.get(s,"handle"))&&f.apply(s,t),(f=c&&s[c])&&f.apply&&J(s)&&(e.result=f.apply(s,t),!1===e.result&&e.preventDefault());return e.type=g,i||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(m.pop(),t)||!J(r)||c&&y(r[g])&&!b(r)&&((u=r[c])&&(r[c]=null),_.event.triggered=g,e.isPropagationStopped()&&h.addEventListener(g,wt),r[g](),e.isPropagationStopped()&&h.removeEventListener(g,wt),_.event.triggered=void 0,u&&(r[c]=u)),e.result}},simulate:function(e,t,n){var r=_.extend(new _.Event,n,{type:e,isSimulated:!0});_.event.trigger(r,null,t)}}),_.fn.extend({trigger:function(e,t){return this.each(function(){_.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return _.event.trigger(e,t,n,!0)}}),v.focusin||_.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){_.event.simulate(t,e.target,_.event.fix(e))};_.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=Q.access(r,t);i||r.addEventListener(e,n,!0),Q.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Q.access(r,t)-1;i?Q.access(r,t,i):(r.removeEventListener(e,n,!0),Q.remove(r,t))}}});var xt=n.location,Ct=Date.now(),_t=/\?/;_.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||_.error("Invalid XML: "+e),t};var St=/\[\]$/,kt=/\r?\n/g,Tt=/^(?:submit|button|image|reset|file)$/i,Et=/^(?:input|select|textarea|keygen)/i;function Nt(e,t,n,r){var i;if(Array.isArray(t))_.each(t,function(t,i){n||St.test(e)?r(e,i):Nt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==C(t))r(e,t);else for(i in t)Nt(e+"["+i+"]",t[i],n,r)}_.param=function(e,t){var n,r=[],i=function(e,t){var n=y(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.jquery&&!_.isPlainObject(e))_.each(e,function(){i(this.name,this.value)});else for(n in e)Nt(n,e[n],t,i);return r.join("&")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=_.prop(this,"elements");return e?_.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!_(this).is(":disabled")&&Et.test(this.nodeName)&&!Tt.test(e)&&(this.checked||!de.test(e))}).map(function(e,t){var n=_(this).val();return null==n?null:Array.isArray(n)?_.map(n,function(e){return{name:t.name,value:e.replace(kt,"\r\n")}}):{name:t.name,value:n.replace(kt,"\r\n")}}).get()}});var At=/%20/g,Rt=/#.*$/,Ot=/([?&])_=[^&]*/,Dt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pt=/^(?:GET|HEAD)$/,It=/^\/\//,Bt={},Mt={},Lt="*/".concat("*"),Ht=a.createElement("a");function Ft(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(H)||[];if(y(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function zt(e,t,n,r){var i={},o=e===Mt;function a(s){var u;return i[s]=!0,_.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),a(l),!1)}),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function jt(e,t){var n,r,i=_.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&_.extend(!0,e,r),e}Ht.href=xt.href,_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Lt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?jt(jt(e,_.ajaxSettings),t):jt(_.ajaxSettings,e)},ajaxPrefilter:Ft(Bt),ajaxTransport:Ft(Mt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,s,u,l,c,f,d,h,p=_.ajaxSetup({},t),m=p.context||p,g=p.context&&(m.nodeType||m.jquery)?_(m):_.event,v=_.Deferred(),y=_.Callbacks("once memory"),b=p.statusCode||{},w={},x={},C="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=Dt.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(e,t){return null==c&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)S.always(e[S.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||C;return r&&r.abort(t),k(0,t),this}};if(v.promise(S),p.url=((e||p.url||xt.href)+"").replace(It,xt.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(H)||[""],null==p.crossDomain){l=a.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Ht.protocol+"//"+Ht.host!=l.protocol+"//"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=_.param(p.data,p.traditional)),zt(Bt,p,t,S),c)return S;for(d in(f=_.event&&p.global)&&0==_.active++&&_.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Pt.test(p.type),i=p.url.replace(Rt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(At,"+")):(h=p.url.slice(i.length),p.data&&(p.processData||"string"==typeof p.data)&&(i+=(_t.test(i)?"&":"?")+p.data,delete p.data),!1===p.cache&&(i=i.replace(Ot,"$1"),h=(_t.test(i)?"&":"?")+"_="+Ct+++h),p.url=i+h),p.ifModified&&(_.lastModified[i]&&S.setRequestHeader("If-Modified-Since",_.lastModified[i]),_.etag[i]&&S.setRequestHeader("If-None-Match",_.etag[i])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&S.setRequestHeader("Content-Type",p.contentType),S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Lt+"; q=0.01":""):p.accepts["*"]),p.headers)S.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(m,S,p)||c))return S.abort();if(C="abort",y.add(p.complete),S.done(p.success),S.fail(p.error),r=zt(Mt,p,t,S)){if(S.readyState=1,f&&g.trigger("ajaxSend",[S,p]),c)return S;p.async&&p.timeout>0&&(u=n.setTimeout(function(){S.abort("timeout")},p.timeout));try{c=!1,r.send(w,k)}catch(e){if(c)throw e;k(-1,e)}}else k(-1,"No Transport");function k(e,t,a,s){var l,d,h,w,x,C=t;c||(c=!0,u&&n.clearTimeout(u),r=void 0,o=s||"",S.readyState=e>0?4:0,l=e>=200&&e<300||304===e,a&&(w=function(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(p,S,a)),w=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(p,w,S,l),l?(p.ifModified&&((x=S.getResponseHeader("Last-Modified"))&&(_.lastModified[i]=x),(x=S.getResponseHeader("etag"))&&(_.etag[i]=x)),204===e||"HEAD"===p.type?C="nocontent":304===e?C="notmodified":(C=w.state,d=w.data,l=!(h=w.error))):(h=C,!e&&C||(C="error",e<0&&(e=0))),S.status=e,S.statusText=(t||C)+"",l?v.resolveWith(m,[d,C,S]):v.rejectWith(m,[S,C,h]),S.statusCode(b),b=void 0,f&&g.trigger(l?"ajaxSuccess":"ajaxError",[S,p,l?d:h]),y.fireWith(m,[S,C]),f&&(g.trigger("ajaxComplete",[S,p]),--_.active||_.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return _.get(e,t,n,"json")},getScript:function(e,t){return _.get(e,void 0,t,"script")}}),_.each(["get","post"],function(e,t){_[t]=function(e,n,r,i){return y(n)&&(i=i||r,r=n,n=void 0),_.ajax(_.extend({url:e,type:t,dataType:i,data:n,success:r},_.isPlainObject(e)&&e))}}),_._evalUrl=function(e){return _.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},_.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=_(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return y(e)?this.each(function(t){_(this).wrapInner(e.call(this,t))}):this.each(function(){var t=_(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=y(e);return this.each(function(n){_(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){_(this).replaceWith(this.childNodes)}),this}}),_.expr.pseudos.hidden=function(e){return!_.expr.pseudos.visible(e)},_.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},_.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Wt={0:200,1223:204},Ut=_.ajaxSettings.xhr();v.cors=!!Ut&&"withCredentials"in Ut,v.ajax=Ut=!!Ut,_.ajaxTransport(function(e){var t,r;if(v.cors||Ut&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);t=function(e){return function(){t&&(t=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Wt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),r=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout(function(){t&&r()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),_.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return _.globalEval(e),e}}}),_.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),_.ajaxTransport("script",function(e){var t,n;if(e.crossDomain)return{send:function(r,i){t=_("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),a.head.appendChild(t[0])},abort:function(){n&&n()}}});var $t,qt=[],Vt=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=qt.pop()||_.expando+"_"+Ct++;return this[e]=!0,e}}),_.ajaxPrefilter("json jsonp",function(e,t,r){var i,o,a,s=!1!==e.jsonp&&(Vt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Vt,"$1"+i):!1!==e.jsonp&&(e.url+=(_t.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||_.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always(function(){void 0===o?_(n).removeProp(i):n[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,qt.push(i)),a&&y(o)&&o(a[0]),a=o=void 0}),"script"}),v.createHTMLDocument=(($t=a.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===$t.childNodes.length),_.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((r=(t=a.implementation.createHTMLDocument("")).createElement("base")).href=a.location.href,t.head.appendChild(r)):t=a),i=O.exec(e),o=!n&&[],i?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&_(o).remove(),_.merge([],i.childNodes)));var r,i,o},_.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=mt(e.slice(s)),e=e.slice(0,s)),y(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&_.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?_("<div>").append(_.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){_.fn[t]=function(e){return this.on(t,e)}}),_.expr.pseudos.animated=function(e){return _.grep(_.timers,function(t){return e===t.elem}).length},_.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=_.css(e,"position"),c=_(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=_.css(e,"top"),u=_.css(e,"left"),("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),y(t)&&(t=t.call(e,n,_.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},_.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){_.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===_.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===_.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=_(e).offset()).top+=_.css(e,"borderTopWidth",!0),i.left+=_.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-_.css(r,"marginTop",!0),left:t.left-i.left-_.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===_.css(e,"position");)e=e.offsetParent;return e||Ce})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;_.fn[e]=function(r){return q(this,function(e,r,i){var o;if(b(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i},e,r,arguments.length)}}),_.each(["top","left"],function(e,t){_.cssHooks[t]=$e(v.pixelPosition,function(e,n){if(n)return n=Ue(e,t),ze.test(n)?_(e).position()[t]+"px":n})}),_.each({Height:"height",Width:"width"},function(e,t){_.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){_.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return q(this,function(t,n,i){var o;return b(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?_.css(t,n,s):_.style(t,n,i,s)},t,a?i:void 0,a)}})}),_.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){_.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),_.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),_.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),_.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return r=u.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(u.call(arguments)))}).guid=e.guid=e.guid||_.guid++,i},_.holdReady=function(e){e?_.readyWait++:_.ready(!0)},_.isArray=Array.isArray,_.parseJSON=JSON.parse,_.nodeName=R,_.isFunction=y,_.isWindow=b,_.camelCase=K,_.type=C,_.now=Date.now,_.isNumeric=function(e){var t=_.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},void 0===(r=function(){return _}.apply(t,[]))||(e.exports=r);var Xt=n.jQuery,Yt=n.$;return _.noConflict=function(e){return n.$===_&&(n.$=Yt),e&&n.jQuery===_&&(n.jQuery=Xt),_},i||(n.jQuery=n.$=_),_})},function(e,t,n){var r;(function(){var n=this,i=n._,o=Array.prototype,a=Object.prototype,s=Function.prototype,u=o.push,l=o.slice,c=a.toString,f=a.hasOwnProperty,d=Array.isArray,h=Object.keys,p=s.bind,m=Object.create,g=function(){},v=function(e){return e instanceof v?e:this instanceof v?void(this._wrapped=e):new v(e)};void 0!==e&&e.exports&&(t=e.exports=v),t._=v,v.VERSION="1.8.3";var y=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},b=function(e,t,n){return null==e?v.identity:v.isFunction(e)?y(e,t,n):v.isObject(e)?v.matcher(e):v.property(e)};v.iteratee=function(e,t){return b(e,t,1/0)};var w=function(e,t){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=e(o),s=a.length,u=0;u<s;u++){var l=a[u];t&&void 0!==n[l]||(n[l]=o[l])}return n}},x=function(e){if(!v.isObject(e))return{};if(m)return m(e);g.prototype=e;var t=new g;return g.prototype=null,t},C=function(e){return function(t){return null==t?void 0:t[e]}},_=Math.pow(2,53)-1,S=C("length"),k=function(e){var t=S(e);return"number"==typeof t&&t>=0&&t<=_};function T(e){return function(t,n,r,i){n=y(n,i,4);var o=!k(t)&&v.keys(t),a=(o||t).length,s=e>0?0:a-1;return arguments.length<3&&(r=t[o?o[s]:s],s+=e),function(t,n,r,i,o,a){for(;o>=0&&o<a;o+=e){var s=i?i[o]:o;r=n(r,t[s],s,t)}return r}(t,n,r,o,s,a)}}v.each=v.forEach=function(e,t,n){var r,i;if(t=y(t,n),k(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=v.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},v.map=v.collect=function(e,t,n){t=b(t,n);for(var r=!k(e)&&v.keys(e),i=(r||e).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=t(e[s],s,e)}return o},v.reduce=v.foldl=v.inject=T(1),v.reduceRight=v.foldr=T(-1),v.find=v.detect=function(e,t,n){var r;if(void 0!==(r=k(e)?v.findIndex(e,t,n):v.findKey(e,t,n))&&-1!==r)return e[r]},v.filter=v.select=function(e,t,n){var r=[];return t=b(t,n),v.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},v.reject=function(e,t,n){return v.filter(e,v.negate(b(t)),n)},v.every=v.all=function(e,t,n){t=b(t,n);for(var r=!k(e)&&v.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(!t(e[a],a,e))return!1}return!0},v.some=v.any=function(e,t,n){t=b(t,n);for(var r=!k(e)&&v.keys(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(t(e[a],a,e))return!0}return!1},v.contains=v.includes=v.include=function(e,t,n,r){return k(e)||(e=v.values(e)),("number"!=typeof n||r)&&(n=0),v.indexOf(e,t,n)>=0},v.invoke=function(e,t){var n=l.call(arguments,2),r=v.isFunction(t);return v.map(e,function(e){var i=r?t:e[t];return null==i?i:i.apply(e,n)})},v.pluck=function(e,t){return v.map(e,v.property(t))},v.where=function(e,t){return v.filter(e,v.matcher(t))},v.findWhere=function(e,t){return v.find(e,v.matcher(t))},v.max=function(e,t,n){var r,i,o=-1/0,a=-1/0;if(null==t&&null!=e)for(var s=0,u=(e=k(e)?e:v.values(e)).length;s<u;s++)(r=e[s])>o&&(o=r);else t=b(t,n),v.each(e,function(e,n,r){((i=t(e,n,r))>a||i===-1/0&&o===-1/0)&&(o=e,a=i)});return o},v.min=function(e,t,n){var r,i,o=1/0,a=1/0;if(null==t&&null!=e)for(var s=0,u=(e=k(e)?e:v.values(e)).length;s<u;s++)(r=e[s])<o&&(o=r);else t=b(t,n),v.each(e,function(e,n,r){((i=t(e,n,r))<a||i===1/0&&o===1/0)&&(o=e,a=i)});return o},v.shuffle=function(e){for(var t,n=k(e)?e:v.values(e),r=n.length,i=Array(r),o=0;o<r;o++)(t=v.random(0,o))!==o&&(i[o]=i[t]),i[t]=n[o];return i},v.sample=function(e,t,n){return null==t||n?(k(e)||(e=v.values(e)),e[v.random(e.length-1)]):v.shuffle(e).slice(0,Math.max(0,t))},v.sortBy=function(e,t,n){return t=b(t,n),v.pluck(v.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var E=function(e){return function(t,n,r){var i={};return n=b(n,r),v.each(t,function(r,o){var a=n(r,o,t);e(i,r,a)}),i}};v.groupBy=E(function(e,t,n){v.has(e,n)?e[n].push(t):e[n]=[t]}),v.indexBy=E(function(e,t,n){e[n]=t}),v.countBy=E(function(e,t,n){v.has(e,n)?e[n]++:e[n]=1}),v.toArray=function(e){return e?v.isArray(e)?l.call(e):k(e)?v.map(e,v.identity):v.values(e):[]},v.size=function(e){return null==e?0:k(e)?e.length:v.keys(e).length},v.partition=function(e,t,n){t=b(t,n);var r=[],i=[];return v.each(e,function(e,n,o){(t(e,n,o)?r:i).push(e)}),[r,i]},v.first=v.head=v.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:v.initial(e,e.length-t)},v.initial=function(e,t,n){return l.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},v.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:v.rest(e,Math.max(0,e.length-t))},v.rest=v.tail=v.drop=function(e,t,n){return l.call(e,null==t||n?1:t)},v.compact=function(e){return v.filter(e,v.identity)};var N=function(e,t,n,r){for(var i=[],o=0,a=r||0,s=S(e);a<s;a++){var u=e[a];if(k(u)&&(v.isArray(u)||v.isArguments(u))){t||(u=N(u,t,n));var l=0,c=u.length;for(i.length+=c;l<c;)i[o++]=u[l++]}else n||(i[o++]=u)}return i};function A(e){return function(t,n,r){n=b(n,r);for(var i=S(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}}function R(e,t,n){return function(r,i,o){var a=0,s=S(r);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=t(l.call(r,a,s),v.isNaN))>=0?o+a:-1;for(o=e>0?a:s-1;o>=0&&o<s;o+=e)if(r[o]===i)return o;return-1}}v.flatten=function(e,t){return N(e,t,!1)},v.without=function(e){return v.difference(e,l.call(arguments,1))},v.uniq=v.unique=function(e,t,n,r){v.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=b(n,r));for(var i=[],o=[],a=0,s=S(e);a<s;a++){var u=e[a],l=n?n(u,a,e):u;t?(a&&o===l||i.push(u),o=l):n?v.contains(o,l)||(o.push(l),i.push(u)):v.contains(i,u)||i.push(u)}return i},v.union=function(){return v.uniq(N(arguments,!0,!0))},v.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=S(e);r<i;r++){var o=e[r];if(!v.contains(t,o)){for(var a=1;a<n&&v.contains(arguments[a],o);a++);a===n&&t.push(o)}}return t},v.difference=function(e){var t=N(arguments,!0,!0,1);return v.filter(e,function(e){return!v.contains(t,e)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(e){for(var t=e&&v.max(e,S).length||0,n=Array(t),r=0;r<t;r++)n[r]=v.pluck(e,r);return n},v.object=function(e,t){for(var n={},r=0,i=S(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},v.findIndex=A(1),v.findLastIndex=A(-1),v.sortedIndex=function(e,t,n,r){for(var i=(n=b(n,r,1))(t),o=0,a=S(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<i?o=s+1:a=s}return o},v.indexOf=R(1,v.findIndex,v.sortedIndex),v.lastIndexOf=R(-1,v.findLastIndex),v.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i};var O=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=x(e.prototype),a=e.apply(o,i);return v.isObject(a)?a:o};v.bind=function(e,t){if(p&&e.bind===p)return p.apply(e,l.call(arguments,1));if(!v.isFunction(e))throw new TypeError("Bind must be called on a function");var n=l.call(arguments,2),r=function(){return O(e,r,t,this,n.concat(l.call(arguments)))};return r},v.partial=function(e){var t=l.call(arguments,1),n=function(){for(var r=0,i=t.length,o=Array(i),a=0;a<i;a++)o[a]=t[a]===v?arguments[r++]:t[a];for(;r<arguments.length;)o.push(arguments[r++]);return O(e,n,this,this,o)};return n},v.bindAll=function(e){var t,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++)e[n=arguments[t]]=v.bind(e[n],e);return e},v.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return v.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},v.delay=function(e,t){var n=l.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},v.defer=v.partial(v.delay,v,1),v.throttle=function(e,t,n){var r,i,o,a=null,s=0;n||(n={});var u=function(){s=!1===n.leading?0:v.now(),a=null,o=e.apply(r,i),a||(r=i=null)};return function(){var l=v.now();s||!1!==n.leading||(s=l);var c=t-(l-s);return r=this,i=arguments,c<=0||c>t?(a&&(clearTimeout(a),a=null),s=l,o=e.apply(r,i),a||(r=i=null)):a||!1===n.trailing||(a=setTimeout(u,c)),o}},v.debounce=function(e,t,n){var r,i,o,a,s,u=function(){var l=v.now()-a;l<t&&l>=0?r=setTimeout(u,t-l):(r=null,n||(s=e.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=v.now();var l=n&&!r;return r||(r=setTimeout(u,t)),l&&(s=e.apply(o,i),o=i=null),s}},v.wrap=function(e,t){return v.partial(t,e)},v.negate=function(e){return function(){return!e.apply(this,arguments)}},v.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},v.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},v.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},v.once=v.partial(v.before,2);var D=!{toString:null}.propertyIsEnumerable("toString"),P=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function I(e,t){var n=P.length,r=e.constructor,i=v.isFunction(r)&&r.prototype||a,o="constructor";for(v.has(e,o)&&!v.contains(t,o)&&t.push(o);n--;)(o=P[n])in e&&e[o]!==i[o]&&!v.contains(t,o)&&t.push(o)}v.keys=function(e){if(!v.isObject(e))return[];if(h)return h(e);var t=[];for(var n in e)v.has(e,n)&&t.push(n);return D&&I(e,t),t},v.allKeys=function(e){if(!v.isObject(e))return[];var t=[];for(var n in e)t.push(n);return D&&I(e,t),t},v.values=function(e){for(var t=v.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},v.mapObject=function(e,t,n){t=b(t,n);for(var r,i=v.keys(e),o=i.length,a={},s=0;s<o;s++)a[r=i[s]]=t(e[r],r,e);return a},v.pairs=function(e){for(var t=v.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},v.invert=function(e){for(var t={},n=v.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},v.functions=v.methods=function(e){var t=[];for(var n in e)v.isFunction(e[n])&&t.push(n);return t.sort()},v.extend=w(v.allKeys),v.extendOwn=v.assign=w(v.keys),v.findKey=function(e,t,n){t=b(t,n);for(var r,i=v.keys(e),o=0,a=i.length;o<a;o++)if(t(e[r=i[o]],r,e))return r},v.pick=function(e,t,n){var r,i,o={},a=e;if(null==a)return o;v.isFunction(t)?(i=v.allKeys(a),r=y(t,n)):(i=N(arguments,!1,!1,1),r=function(e,t,n){return t in n},a=Object(a));for(var s=0,u=i.length;s<u;s++){var l=i[s],c=a[l];r(c,l,a)&&(o[l]=c)}return o},v.omit=function(e,t,n){if(v.isFunction(t))t=v.negate(t);else{var r=v.map(N(arguments,!1,!1,1),String);t=function(e,t){return!v.contains(r,t)}}return v.pick(e,t,n)},v.defaults=w(v.allKeys,!0),v.create=function(e,t){var n=x(e);return t&&v.extendOwn(n,t),n},v.clone=function(e){return v.isObject(e)?v.isArray(e)?e.slice():v.extend({},e):e},v.tap=function(e,t){return t(e),e},v.isMatch=function(e,t){var n=v.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var a=n[o];if(t[a]!==i[a]||!(a in i))return!1}return!0};var B=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof v&&(e=e._wrapped),t instanceof v&&(t=t._wrapped);var i=c.call(e);if(i!==c.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(v.isFunction(a)&&a instanceof a&&v.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var u=n.length;u--;)if(n[u]===e)return r[u]===t;if(n.push(e),r.push(t),o){if((u=e.length)!==t.length)return!1;for(;u--;)if(!B(e[u],t[u],n,r))return!1}else{var l,f=v.keys(e);if(u=f.length,v.keys(t).length!==u)return!1;for(;u--;)if(l=f[u],!v.has(t,l)||!B(e[l],t[l],n,r))return!1}return n.pop(),r.pop(),!0};v.isEqual=function(e,t){return B(e,t)},v.isEmpty=function(e){return null==e||(k(e)&&(v.isArray(e)||v.isString(e)||v.isArguments(e))?0===e.length:0===v.keys(e).length)},v.isElement=function(e){return!(!e||1!==e.nodeType)},v.isArray=d||function(e){return"[object Array]"===c.call(e)},v.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){v["is"+e]=function(t){return c.call(t)==="[object "+e+"]"}}),v.isArguments(arguments)||(v.isArguments=function(e){return v.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(v.isFunction=function(e){return"function"==typeof e||!1}),v.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},v.isNaN=function(e){return v.isNumber(e)&&e!==+e},v.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===c.call(e)},v.isNull=function(e){return null===e},v.isUndefined=function(e){return void 0===e},v.has=function(e,t){return null!=e&&f.call(e,t)},v.noConflict=function(){return n._=i,this},v.identity=function(e){return e},v.constant=function(e){return function(){return e}},v.noop=function(){},v.property=C,v.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},v.matcher=v.matches=function(e){return e=v.extendOwn({},e),function(t){return v.isMatch(t,e)}},v.times=function(e,t,n){var r=Array(Math.max(0,e));t=y(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},v.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},v.now=Date.now||function(){return(new Date).getTime()};var M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},L=v.invert(M),H=function(e){var t=function(t){return e[t]},n="(?:"+v.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};v.escape=H(M),v.unescape=H(L),v.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),v.isFunction(r)?r.call(e):r};var F=0;v.uniqueId=function(e){var t=++F+"";return e?e+t:t},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},W=/\\|'|\r|\n|\u2028|\u2029/g,U=function(e){return"\\"+j[e]};v.template=function(e,t,n){!t&&n&&(t=n),t=v.defaults({},t,v.templateSettings);var r=RegExp([(t.escape||z).source,(t.interpolate||z).source,(t.evaluate||z).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,a,s){return o+=e.slice(i,s).replace(W,U),i=s+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(t.variable||"obj","_",o)}catch(e){throw e.source=o,e}var s=function(e){return a.call(this,e,v)},u=t.variable||"obj";return s.source="function("+u+"){\n"+o+"}",s},v.chain=function(e){var t=v(e);return t._chain=!0,t};var $=function(e,t){return e._chain?v(t).chain():t};v.mixin=function(e){v.each(v.functions(e),function(t){var n=v[t]=e[t];v.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),$(this,n.apply(v,e))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];v.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],$(this,n)}}),v.each(["concat","join","slice"],function(e){var t=o[e];v.prototype[e]=function(){return $(this,t.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},void 0===(r=function(){return v}.apply(t,[]))||(e.exports=r)}).call(this)},function(e,t,n){var r,i,o;o="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,r=[n(1),n(0),t],void 0===(i=function(e,t,n){o.Backbone=function(e,t,n,r){var i=e.Backbone,o=Array.prototype.slice;t.VERSION="1.3.3",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=function(e,t,r){n.each(t,function(t,i){n[i]&&(e.prototype[i]=function(e,t,r){switch(e){case 1:return function(){return n[t](this[r])};case 2:return function(e){return n[t](this[r],e)};case 3:return function(e,i){return n[t](this[r],s(e,this),i)};case 4:return function(e,i,o){return n[t](this[r],s(e,this),i,o)};default:return function(){var e=o.call(arguments);return e.unshift(this[r]),n[t].apply(n,e)}}}(t,i,r))})},s=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?u(e):n.isString(e)?function(t){return t.get(e)}:e},u=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},l=t.Events={},c=/\s+/,f=function(e,t,r,i,o){var a,s=0;if(r&&"object"==typeof r){void 0!==i&&"context"in o&&void 0===o.context&&(o.context=i);for(a=n.keys(r);s<a.length;s++)t=f(e,t,a[s],r[a[s]],o)}else if(r&&c.test(r))for(a=r.split(c);s<a.length;s++)t=e(t,a[s],i,o);else t=e(t,r,i,o);return t};l.on=function(e,t,n){return d(this,e,t,n)};var d=function(e,t,n,r,i){(e._events=f(h,e._events||{},t,n,{context:r,ctx:e,listening:i}),i)&&((e._listeners||(e._listeners={}))[i.id]=i);return e};l.listenTo=function(e,t,r){if(!e)return this;var i=e._listenId||(e._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),a=o[i];if(!a){var s=this._listenId||(this._listenId=n.uniqueId("l"));a=o[i]={obj:e,objId:i,id:s,listeningTo:o,count:0}}return d(e,t,r,this,a),this};var h=function(e,t,n,r){if(n){var i=e[t]||(e[t]=[]),o=r.context,a=r.ctx,s=r.listening;s&&s.count++,i.push({callback:n,context:o,ctx:o||a,listening:s})}return e};l.off=function(e,t,n){return this._events?(this._events=f(p,this._events,e,t,{context:n,listeners:this._listeners}),this):this},l.stopListening=function(e,t,r){var i=this._listeningTo;if(!i)return this;for(var o=e?[e._listenId]:n.keys(i),a=0;a<o.length;a++){var s=i[o[a]];if(!s)break;s.obj.off(t,r,this)}return this};var p=function(e,t,r,i){if(e){var o,a=0,s=i.context,u=i.listeners;if(t||r||s){for(var l=t?[t]:n.keys(e);a<l.length;a++){var c=e[t=l[a]];if(!c)break;for(var f=[],d=0;d<c.length;d++){var h=c[d];r&&r!==h.callback&&r!==h.callback._callback||s&&s!==h.context?f.push(h):(o=h.listening)&&0==--o.count&&(delete u[o.id],delete o.listeningTo[o.objId])}f.length?e[t]=f:delete e[t]}return e}for(var p=n.keys(u);a<p.length;a++)delete u[(o=u[p[a]]).id],delete o.listeningTo[o.objId]}};l.once=function(e,t,r){var i=f(m,{},e,t,n.bind(this.off,this));return"string"==typeof e&&null==r&&(t=void 0),this.on(i,t,r)},l.listenToOnce=function(e,t,r){var i=f(m,{},t,r,n.bind(this.stopListening,this,e));return this.listenTo(e,i)};var m=function(e,t,r,i){if(r){var o=e[t]=n.once(function(){i(t,o),r.apply(this,arguments)});o._callback=r}return e};l.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),r=0;r<t;r++)n[r]=arguments[r+1];return f(g,this._events,e,void 0,n),this};var g=function(e,t,n,r){if(e){var i=e[t],o=e.all;i&&o&&(o=o.slice()),i&&v(i,r),o&&v(o,[t].concat(r))}return e},v=function(e,t){var n,r=-1,i=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t);return}};l.bind=l.on,l.unbind=l.off,n.extend(t,l);var y=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{});var i=n.result(this,"defaults");r=n.defaults(n.extend({},i,r),i),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(y.prototype,l,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,r){if(null==e)return this;var i;if("object"==typeof e?(i=e,r=t):(i={})[e]=t,r||(r={}),!this._validate(i,r))return!1;var o=r.unset,a=r.silent,s=[],u=this._changing;this._changing=!0,u||(this._previousAttributes=n.clone(this.attributes),this.changed={});var l=this.attributes,c=this.changed,f=this._previousAttributes;for(var d in i)t=i[d],n.isEqual(l[d],t)||s.push(d),n.isEqual(f[d],t)?delete c[d]:c[d]=t,o?delete l[d]:l[d]=t;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!a){s.length&&(this._pending=r);for(var h=0;h<s.length;h++)this.trigger("change:"+s[h],this,l[s[h]],r)}if(u)return this;if(!a)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t=this._changing?this._previousAttributes:this.attributes,r={};for(var i in e){var o=e[i];n.isEqual(t[i],o)||(r[i]=o)}return!!n.size(r)&&r},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){var t=this,r=(e=n.extend({parse:!0},e)).success;return e.success=function(n){var i=e.parse?t.parse(n,e):n;if(!t.set(i,e))return!1;r&&r.call(e.context,t,n,e),t.trigger("sync",t,n,e)},L(this,e),this.sync("read",this,e)},save:function(e,t,r){var i;null==e||"object"==typeof e?(i=e,r=t):(i={})[e]=t;var o=(r=n.extend({validate:!0,parse:!0},r)).wait;if(i&&!o){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;var a=this,s=r.success,u=this.attributes;r.success=function(e){a.attributes=u;var t=r.parse?a.parse(e,r):e;if(o&&(t=n.extend({},i,t)),t&&!a.set(t,r))return!1;s&&s.call(r.context,a,e,r),a.trigger("sync",a,e,r)},L(this,r),i&&o&&(this.attributes=n.extend({},u,i));var l=this.isNew()?"create":r.patch?"patch":"update";"patch"!==l||r.attrs||(r.attrs=i);var c=this.sync(l,this,r);return this.attributes=u,c},destroy:function(e){var t=this,r=(e=e?n.clone(e):{}).success,i=e.wait,o=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){i&&o(),r&&r.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var a=!1;return this.isNew()?n.defer(e.success):(L(this,e),a=this.sync("delete",this,e)),i||o(),a},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||M();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return!r||(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1)}}),a(y,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var b=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},w={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},C=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var r,i=Array(e.length-n),o=t.length;for(r=0;r<i.length;r++)i[r]=e[r+n];for(r=0;r<o;r++)e[r+n]=t[r];for(r=0;r<i.length;r++)e[r+o+n]=i[r]};n.extend(b.prototype,l,{model:y,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,x))},remove:function(e,t){t=n.extend({},t);var r=!n.isArray(e);e=r?[e]:e.slice();var i=this._removeModels(e,t);return!t.silent&&i.length&&(t.changes={added:[],merged:[],removed:i},this.trigger("update",this,t)),r?i[0]:i},set:function(e,t){if(null!=e){(t=n.extend({},w,t)).parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var r=!n.isArray(e);e=r?[e]:e.slice();var i=t.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var o,a,s=[],u=[],l=[],c=[],f={},d=t.add,h=t.merge,p=t.remove,m=!1,g=this.comparator&&null==i&&!1!==t.sort,v=n.isString(this.comparator)?this.comparator:null;for(a=0;a<e.length;a++){o=e[a];var y=this.get(o);if(y){if(h&&o!==y){var b=this._isModel(o)?o.attributes:o;t.parse&&(b=y.parse(b,t)),y.set(b,t),l.push(y),g&&!m&&(m=y.hasChanged(v))}f[y.cid]||(f[y.cid]=!0,s.push(y)),e[a]=y}else d&&(o=e[a]=this._prepareModel(o,t))&&(u.push(o),this._addReference(o,t),f[o.cid]=!0,s.push(o))}if(p){for(a=0;a<this.length;a++)f[(o=this.models[a]).cid]||c.push(o);c.length&&this._removeModels(c,t)}var x=!1,_=!g&&d&&p;if(s.length&&_?(x=this.length!==s.length||n.some(this.models,function(e,t){return e!==s[t]}),this.models.length=0,C(this.models,s,0),this.length=this.models.length):u.length&&(g&&(m=!0),C(this.models,u,null==i?this.length:i),this.length=this.models.length),m&&this.sort({silent:!0}),!t.silent){for(a=0;a<u.length;a++)null!=i&&(t.index=i+a),(o=u[a]).trigger("add",o,this,t);(m||x)&&this.trigger("sort",this,t),(u.length||c.length||l.length)&&(t.changes={added:u,removed:c,merged:l},this.trigger("update",this,t))}return r?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var r=0;r<this.models.length;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return o.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var r=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),1===r||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){var t=(e=n.extend({parse:!0},e)).success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t.call(e.context,r,n,e),r.trigger("sync",r,n,e)},L(this,e),this.sync("read",this,e)},create:function(e,t){var r=(t=t?n.clone(t):{}).wait;if(!(e=this._prepareModel(e,t)))return!1;r||this.add(e,t);var i=this,o=t.success;return t.success=function(e,t,n){r&&i.add(e,n),o&&o.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;(t=t?n.clone(t):{}).collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_removeModels:function(e,t){for(var n=[],r=0;r<e.length;r++){var i=this.get(e[r]);if(i){var o=this.indexOf(i);this.models.splice(o,1),this.length--,delete this._byId[i.cid];var a=this.modelId(i.attributes);null!=a&&delete this._byId[a],t.silent||(t.index=o,i.trigger("remove",i,this,t)),n.push(i),this._removeReference(i,t)}}return n},_isModel:function(e){return e instanceof y},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,r),"change"===e){var i=this.modelId(t.previousAttributes()),o=this.modelId(t.attributes);i!==o&&(null!=i&&delete this._byId[i],null!=o&&(this._byId[o]=t))}}this.trigger.apply(this,arguments)}}),a(b,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var _=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,k)),this._ensureElement(),this.initialize.apply(this,arguments)},S=/^(\S+)\s*(.*)$/,k=["model","collection","el","id","attributes","className","tagName","events"];n.extend(_.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;for(var t in this.undelegateEvents(),e){var r=e[t];if(n.isFunction(r)||(r=this[r]),r){var i=t.match(S);this.delegate(i[1],i[2],n.bind(r,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,r,i){var o=T[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:o,dataType:"json"};if(i.url||(a.url=n.result(r,"url")||M()),null!=i.data||!r||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",i.emulateJSON&&(a.data._method=o);var s=i.beforeSend;i.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),s)return s.apply(this,arguments)}}"GET"===a.type||i.emulateJSON||(a.processData=!1);var u=i.error;i.error=function(e,t,n){i.textStatus=t,i.errorThrown=n,u&&u.call(i.context,e,t,n)};var l=i.xhr=t.ajax(n.extend(a,i));return r.trigger("request",r,l,i),l};var T={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var E=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},N=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,R=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(E.prototype,l,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var o=this;return t.history.route(e,function(n){var a=o._extractParameters(e,n);!1!==o.execute(i,a,r)&&(o.trigger.apply(o,["route:"+r].concat(a)),o.trigger("route",r,a),t.history.trigger("route",o,r,a))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(N,"(?:$1)?").replace(A,function(e,t){return t?e:"([^/?]+)"}).replace(R,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var D=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},P=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,B=/#.*$/;D.started=!1,n.extend(D.prototype,l,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(P,"")},start:function(e){if(D.started)throw new Error("Backbone.history has already been started");if(D.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(I,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var r=document.body,i=r.insertBefore(this.iframe,r.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash="#"+this.fragment}var o=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!D.started)return!1;t&&!0!==t||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;""!==e&&"?"!==e.charAt(0)||(n=n.slice(0,-1)||"/");var r=n+e;if(e=this.decodeFragment(e.replace(B,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,r);else{if(!this._wantsHashChange)return this.location.assign(r);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var i=this.iframe.contentWindow;t.replace||(i.document.open(),i.document.close()),this._updateHash(i.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new D,y.extend=b.extend=E.extend=_.extend=D.extend=function(e,t){var r,i=this;return r=e&&n.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,t),r.prototype=n.create(i.prototype,e),r.prototype.constructor=r,r.__super__=i.prototype,r};var M=function(){throw new Error('A "url" property or function must be specified')},L=function(e,t){var n=t.error;t.error=function(r){n&&n.call(t.context,e,r,t),e.trigger("error",e,r,t)}};return t}(o,n,e,t)}.apply(t,r))||(e.exports=i)},function(e,t,n){var r,i,o;i=[n(0)],void 0===(o="function"==typeof(r=function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=(a(n(0)),a(n(1))),o=a(n(2));function a(e){return e&&e.__esModule?e:{default:e}}a(n(8)),t.default={toJSON:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0==n.length&&(n=["specifix_id"]),t instanceof o.default.Collection){var a=[];return t=t.models,i.default.map(t,function(t,i){a[i]=r({},e(t,n))}),a}var s={};return t instanceof o.default.Model&&(void 0!==t.cid&&t.cid,t=r({},t.toJSON())),i.default.map(t,function(t,r){-1==n.indexOf(r)&&(t instanceof Object||t instanceof Array?s[r]=e(t,n):""!==t&&(s[r]=t))}),s}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(2)),a=(s(n(1)),s(n(12)));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}s(n(5));var f=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,o.default.Model),i(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{settings:{styles:{}},elements:[]},t=r({},this.toJSON().settings);this.set("settings",t),this.set("elements",new a.default.ElementsCollection(e.elements))}},{key:"defaults",value:function(){return{settings:{element:"gva_column"},col_lg:12,elements:new a.default.ElementsCollection,editing:!1,adding:!1,reRender:!1,element_name:"gva_column"}}}]),t}(),d=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,o.default.Model),i(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{settings:{},columns:[],editing:!1},t=r({},e.settings);this.set("settings",t);var n=new a.default.ColumnsCollection(e.columns);this.set("columns",n)}},{key:"defaults",value:function(){return{settings:{element:"gva_row"},columns:new a.default.ColumnsCollection,editing:!1,element_name:"gva_row"}}}]),t}(),h=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,o.default.Model),i(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{settings:{},row:{},columns:{}};e.row&&(this.set("row",new d(e.row)),e.columns&&this.get("row").add(e.columns));var t=r({},e.settings);this.set("settings",t)}},{key:"defaults",value:function(){return{settings:{},editing:!1}}}]),t}();t.default={ColumnModel:f,ElementModel:h,RowModel:d}},function(e,t,n){var r,i,o;i=[n(0),n(3)],void 0===(o="function"==typeof(r=function(e){var t,n=0,r=Array.prototype.slice;return e.cleanData=(t=e.cleanData,function(n){var r,i,o;for(o=0;null!=(i=n[o]);o++)try{(r=e._data(i,"events"))&&r.remove&&e(i).triggerHandler("remove")}catch(e){}t(n)}),e.widget=function(t,n,r){var i,o,a,s={},u=t.split(".")[0],l=u+"-"+(t=t.split(".")[1]);return r||(r=n,n=e.Widget),e.isArray(r)&&(r=e.extend.apply(null,[{}].concat(r))),e.expr[":"][l.toLowerCase()]=function(t){return!!e.data(t,l)},e[u]=e[u]||{},i=e[u][t],o=e[u][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,i,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),(a=new n).options=e.widget.extend({},a.options),e.each(r,function(t,r){e.isFunction(r)?s[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function i(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=i,t=r.apply(this,arguments),this._super=n,this._superApply=o,t}}():s[t]=r}),o.prototype=e.widget.extend(a,{widgetEventPrefix:i&&a.widgetEventPrefix||t},s,{constructor:o,namespace:u,widgetName:t,widgetFullName:l}),i?(e.each(i._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete i._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var n,i,o=r.call(arguments,1),a=0,s=o.length;a<s;a++)for(n in o[a])i=o[a][n],o[a].hasOwnProperty(n)&&void 0!==i&&(e.isPlainObject(i)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],i):e.widget.extend({},i):t[n]=i);return t},e.widget.bridge=function(t,n){var i=n.prototype.widgetFullName||t;e.fn[t]=function(o){var a="string"==typeof o,s=r.call(arguments,1),u=this;return a?this.length||"instance"!==o?this.each(function(){var n,r=e.data(this,i);return"instance"===o?(u=r,!1):r?e.isFunction(r[o])&&"_"!==o.charAt(0)?(n=r[o].apply(r,s))!==r&&void 0!==n?(u=n&&n.jquery?u.pushStack(n.get()):n,!1):void 0:e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}):u=void 0:(s.length&&(o=e.widget.extend.apply(null,[o].concat(s))),this.each(function(){var t=e.data(this,i);t?(t.option(o||{}),t._init&&t._init()):e.data(this,i,new n(o,this))})),u}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,n){t._removeClass(n,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r,i,o,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},t=(r=t.split(".")).shift(),r.length){for(i=a[t]=e.widget.extend({},this.options[t]),o=0;o<r.length-1;o++)i[r[o]]=i[r[o]]||{},i=i[r[o]];if(t=r.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,r,i;for(n in t)i=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&i&&i.length&&(r=e(i.get()),this._removeClass(i,n),r.addClass(this._classes({element:r,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var n=[],r=this;function i(i,o){var a,s;for(s=0;s<i.length;s++)a=r.classesElementLookup[i[s]]||e(),a=t.add?e(e.unique(a.get().concat(t.element.get()))):e(a.not(t.element).get()),r.classesElementLookup[i[s]]=a,n.push(i[s]),o&&t.classes[i[s]]&&n.push(t.classes[i[s]])}return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&i(t.keys.match(/\S+/g)||[],!0),t.extra&&i(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,function(r,i){-1!==e.inArray(t.target,i)&&(n.classesElementLookup[r]=e(i.not(t.target).get()))})},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,r){r="boolean"==typeof r?r:n;var i="string"==typeof e||null===e,o={extra:i?t:n,keys:i?e:t,element:i?this.element:e,add:r};return o.element.toggleClass(this._classes(o),r),this},_on:function(t,n,r){var i,o=this;"boolean"!=typeof t&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,a){function s(){if(t||!0!==o.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var u=r.match(/^([\w:-]*)\s*(.*)$/),l=u[1]+o.eventNamespace,c=u[2];c?i.on(l,c,s):n.on(l,s)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var n=this;return setTimeout(function(){return("string"==typeof e?n[e]:e).apply(n,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,r){var i,o,a=this.options[t];if(r=r||{},(n=e.Event(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(i in o)i in n||(n[i]=o[i]);return this.element.trigger(n,r),!(e.isFunction(a)&&!1===a.apply(this.element[0],[n].concat(r))||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,o){var a;"string"==typeof i&&(i={effect:i});var s=i?!0===i||"number"==typeof i?n:i.effect||n:t;"number"==typeof(i=i||{})&&(i={duration:i}),a=!e.isEmptyObject(i),i.complete=o,i.delay&&r.delay(i.delay),a&&e.effects&&e.effects.effect[s]?r[t](i):s!==t&&r[s]?r[s](i.duration,i.easing,o):r.queue(function(n){e(this)[t](),o&&o.call(r[0]),n()})}}),e.widget})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=f(n(2)),a=f(n(1)),s=(f(n(4)),f(n(5))),u=(f(n(14)),f(n(23))),l=f(n(24)),c=f(n(8));function f(e){return e&&e.__esModule?e:{default:e}}n(25),n(26),n(27),n(28),n(29),n(30),n(31),n(32),n(33),n(34),n(35),n(36),n(37),n(38),n(39),n(40),n(41),n(42),n(43);var d=function(t){function n(){return function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.default.View),i(n,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{settings:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.data=e,this.title=t,this.fields=n;var r='<div class="edit-form-content-wrapper">';r+='<div class="modal gva-modal"><div class="modal-dialog gpb-modal">',r+='<div class="edit-form-content">',r+='<form method="POST" class="form-horizontal" id="gpb_form-edit-configs"></form>',r+="</div>",r+="</div></div>",r+='<div class="form-action"><div class="content-inner">',r+='<a type="button" class="button button-action button--warning button--small gpb_btn-close"><%= drupalSettings.gavias_content_builder.text_translate.cancel %></a>',r+='<a type="button" class="button button-action button--primary button--small gpb_btn-update" form="gpb_form-edit-configs"><%= drupalSettings.gavias_content_builder.text_translate.update %></a>',r+="</div></div>",r+="</div>",this.template=a.default.template(r,{variable:"data"}),this.listenTo(this.data,"change:editing",this._toggle_form),this.listenTo(this.data,"destroy",this.remove),this.listenTo(this.data,"change:editing",this.render)}},{key:"events",value:function(){return{"click .button.gpb_btn-close":"fn_close","click .button.gpb_btn-update":"fn_update","click .imce-url-button":"fn_open_imce","click .gavias-field-upload-remove":"fn_remove_image","change .change_value_admin select":"fn_change_select_title"}}},{key:"render",value:function(){var t=this;if(1==this.data.get("editing")){var n=this.data.toJSON();n.edit_title=this.title;var r=this.template(n);this.setElement(r),0===e("body").find(this.$el).length&&e("body").append(this.el),e(this.$el).find(".gva-modal").modal({backdrop:"static",keyboard:!0,show:!0}),e(this.$el).find(".gva-modal").on("show.bs.modal",function(t){e("body").addClass("modal-open")}),e(this.$el).find(".gva-modal").on("hidden.bs.modal",function(e){t.data.set("editing",!1)}),this.renderFields()}else this._close();return this}},{key:"renderFields",value:function(){var t=this,n=r({},this.data.get("settings"));void 0!==this.data.get("element_name")&&0==this.fields.length&&void 0!==drupalSettings.gavias_content_builder.element_fields[this.data.get("element_name")]&&(this.fields=drupalSettings.gavias_content_builder.element_fields[this.data.get("element_name")],this.$("#gpb_form-edit-configs").addClass(this.data.get("element_name")));var i=r({},n),o=this.fields;a.default.map(o.fields,function(e,n){var o=r({},e);o.value=void 0!==i[o.id]?i[o.id]:void 0!==o.default?o.default:"",o.value=o.value?o.value:"";var s="";"text"==o.type?s=u.default.template_field_text():"select"==o.type?s=u.default.template_field_select():"textarea"==o.type?s=u.default.template_field_textarea():"textarea_without_html"==o.type?s=u.default.template_field_textarea_without_html():"upload"==o.type?s=u.default.template_field_upload():"info"==o.type&&(s=u.default.template_field_info()),s&&t.$("#gpb_form-edit-configs").append(a.default.template(s,{variable:"data"})({field:o,settings:i,element_name:t.data.get("element_name"),_rid:c.default.process()}))}),l.default.init({selector:"#gpb_form-edit-configs textarea.code_html_tiny",height:200,skin:!1,plugins:["advlist autolink lists link image charmap anchor contextmenu pagebreak media searchreplace code fullscreen table","emoticons textcolor textpattern colorpicker"],toolbar1:"insertfile undo redo | styleselect | bullist numlist outdent indent | link image | forecolor backcolor emoticons"}),"undefined"!=typeof tinyMCE&&(null!=tinyMCE.activeEditor&&0==tinyMCE.activeEditor.isHidden()||(tinyMCE.editors=[])),e(".imce-url-input").not(".imce-url-processed").addClass("imce-url-processed").each(function(){var t=e(this);t.attr("id"),t.before('<a href="#" class="imce-url-button"><span>Open File Browser</span></a>')})}},{key:"_toggle_form",value:function(t){!1===t.get("editing")&&(e(this.$el).find(".gva-modal").modal("hide"),this.remove())}},{key:"fn_close",value:function(e){return e.preventDefault(),this._close(),!1}},{key:"_close",value:function(){l.default.remove(),e(this.$el).find(".gva-modal").modal("hide"),e("body").find(".sp-container").remove(),this.data.set("editing",!1)}},{key:"fn_update",value:function(e){var t=this;return e.preventDefault(),new Promise(function(e,n){l.default.remove();var i=t.$el.find("#gpb_form-edit-configs").serializeJSON(),o=r({},t.data.get("settings"),{});a.default.map(t.fields.fields,function(e){o[e.id]=void 0!==i[e.id]?i[e.id]:""}),t.data.set("settings",o),t.data instanceof s.default.ElementModel&&t.data.set("reRender",!0),t.data instanceof s.default.RowModel&&t.data.set("row_name",o.row_name),e()}).then(function(){t._close()}),!1}},{key:"fn_open_imce",value:function(t){t.preventDefault();var n=Drupal.url("imce"),r="gva-upload-"+e(t.target).parents(".gva-upload-input").attr("data-id");return n+=(-1===n.indexOf("?")?"?":"&")+"sendto=gvaImceInput.urlSendto&inputId="+r+"&type=link",e("#gva-upload-"+r).focus(),window.open(n,"","width="+Math.min(1e3,parseInt(.8*screen.availWidth,10))+",height="+Math.min(800,parseInt(.8*screen.availHeight,10))+",resizable=1"),!1}},{key:"fn_remove_image",value:function(t){t.preventDefault();var n=e(t.target).data("src");return e(t.target).parents(".gva-upload-input").find(".gavias-image-demo").attr("src",n),e(t.target).parents(".gva-upload-input").find("input.imce-url-input").val(""),!1}},{key:"fn_change_select_title",value:function(t){var n=e(t.target),r=(n.val(),n.find(":selected").text());e(n).parents("#gpb_form-edit-configs").find("input#title_admin").first().val(r)}}]),n}();t.default=d}).call(this,n(0))},function(e,t,n){(function(e){function t(){var e=Date.now(),n=t.last||e;return t.last=e>n?e:n+1}e.exports=function(e){return(e||"")+""+t().toString(36)},e.exports.process=function(e){return(e||"")+""+t().toString(36)},e.exports.time=function(e){return(e||"")+t().toString(36)}}).call(this,n(13)(e))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(2)),a=l(n(1)),s=l(n(19)),u=l(n(7));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}l(n(46)),l(n(4));var f=function(t){function n(){return function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.default.View),i(n,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{settings:{},columns:{}};this.row=e,this.customModal=!1,this.listenTo(this.row.get("columns"),"add",this._add_column),this.listenTo(this.row,"destroy",this.remove),this.listenTo(this.row,"change:row_name",this.fn_change_row_name)}},{key:"events",value:function(){return{"click .gpb-action_delete_row":"fn_delete_row","click .gpb-add-column":"fn_add_column","click .gpb-action_edit_row":"fn_set_edit_row","click .gpb_drap-order, .pa-set-column":function(){return!1}}}},{key:"render",value:function(){var e=this;return new Promise(function(t,n){var r='<div class="gpb_row-content row-fade-in" data-element="<%= data.settings.element %>" data-cid="<%= data.cid %>">';r+='<div class="gpb_action-button row-action-button">',r+='<div class="left">',r+='<a href="#" class="gpb_drap-order gpb_drap-order-row" title="Move"><i class="fa fa-arrows" ></i></a>',r+='<div class="action-add-column">',r+='<a href="#" class="gpb_add-column" title="Add Column">Add Column</a>',r+='<div class="hover-content">',r+='<a class="gpb-add-column action" data-width="2">1/6</a>',r+='<a class="gpb-add-column action" data-width="3">1/4</a>',r+='<a class="gpb-add-column action" data-width="4">1/3</a>',r+='<a class="gpb-add-column action" data-width="5">5/12</a>',r+='<a class="gpb-add-column action" data-width="6">1/2</a>',r+='<a class="gpb-add-column action" data-width="7">7/12</a>',r+='<a class="gpb-add-column action" data-width="8">2/3</a>',r+='<a class="gpb-add-column action" data-width="9">3/4</a>',r+='<a class="gpb-add-column action" data-width="10">5/6</a>',r+='<a class="gpb-add-column action" data-width="11">11/12</a>',r+='<a class="gpb-add-column action" data-width="12">1/1</a>',r+="</div>",r+="</div>",r+='<a class="row-name"><%= data.settings["row_name"] %></a>',r+="</div>",r+='<div class="right">',r+='<a href="#" class="btn-border-none btn-action gpb-action_edit btn-action gpb-action_edit_row" title="Edit"><i class="fa fa-pencil" ></i></a>',r+='<a href="#" class="btn-border-none btn-action gpb-action_clone btn-action gpb-action_clone_row" title="Clone"><i class="fa fa-clone" ></i></a>',r+='<a href="#" class="btn-border-none btn-action gpb-action_clone btn-action gpb-action_copy_row" title="Copy to clipboard"><i class="fa fa-clipboard" ></i></a>',r+='<a href="#" class="btn-border-none btn-action gpb-action_delete btn-action gpb-action_delete_row" title="Delete"><i class="fa fa-times" ></i></a>',r+="</div>",r+="</div>",r+='<div class="gpb_element-inner"><div class="gpb_row-inner gpb_row-content-inner"></div></div>',r+="</div>";var i=e.row.toJSON();i.cid=e.row.cid,e.template=a.default.template(r,{variable:"data"})(i),e.setElement(e.template),e.row.get("columns")&&e.row.get("columns").length>0&&e.row.get("columns").map(function(t,n){e._add_column(t)}),t()}).then(function(){var t;e.$el.sortable((t={connectWith:".gpb_row-inner",items:".gpb_col",placeholder:"ui-state-highlight",handle:".gpb_drap-order.gpb_drap-order-col",cursor:"move"},c(t,"placeholder","ui-state-highlight"),c(t,"start",function(e,t){t.item.indexStart=t.item.index(),t.placeholder.width(t.item.find(".gpb_element-inner").first().width()-20),t.placeholder.height(t.item.height()-20)}),c(t,"stop",e.dropColumn.bind(e)),c(t,"opacity",.9),t)).disableSelection()}),this}},{key:"_add_column",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r({},e.get("settings"));e.set("settings",t);var n=new s.default(e).render().el;this.$("> .gpb_element-inner > .gpb_row-content-inner").append(n)}},{key:"fn_delete_row",value:function(e){return e.preventDefault(),confirm("You are sure delete this row ! Continue?")&&this.row.destroy(),!1}},{key:"fn_add_column",value:function(t){t.preventDefault();var n={col_lg:e(t.target).data("width")};return console.log(n),this.row.get("columns").add(n),!1}},{key:"fn_set_edit_row",value:function(e){return e.preventDefault(),new u.default(this.row,"Edit Row",drupalSettings.gavias_content_builder.element_fields.gva_row),this.row.set("editing",!0),!1}},{key:"_update",value:function(e,t){if(t.item.elements===this.column.get("columns")){var n=t.item.index();this.row.get("columns").moveItem(t.item.indexStart,n),t.item.trigger("drop",n)}}},{key:"dropColumn",value:function(e,t){this.row.get("columns").moveItem(t.item.indexStart,t.item.index())}},{key:"fn_change_row_name",value:function(e,t){this.row.get("row_name")&&this.$el.find("> .gpb_action-button > .left > .row-name").html(this.row.get("row_name"))}}]),n}();t.default=f}).call(this,n(0))},function(e,t,n){var r,i,o;i=[n(0),n(11),n(3),n(6)],void 0===(o="function"==typeof(r=function(e){var t=!1;return e(document).on("mouseup",function(){t=!1}),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var r=this,i=1===n.which,o=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&e(n.target).closest(this.options.cancel).length;return!(i&&!o&&this._mouseCapture(n)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=!1!==this._mouseStart(n),!this._mouseStarted)?(n.preventDefault(),0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,0)))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&e.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,n.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[n(0),n(3)],void 0===(o="function"==typeof(r=function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(2)),a=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}s(n(1));var f=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,o.default.Collection),i(t,[{key:"initialize",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.model=a.default.ColumnModel,this.on("update",this._update),this.on("add",this._addParam)}},{key:"moveItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.models.splice(t,0,this.models.splice(e,1)[0]),this.trigger("move")}},{key:"_update",value:function(e,t){void 0!==t.changes&&void 0!==t.changes.removed&&t.changes.removed.length}},{key:"_addParam",value:function(e){}}]),t}(),d=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,o.default.Collection),i(t,[{key:"initialize",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.model=a.default.ElementModel}},{key:"moveItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.models.splice(t,0,this.models.splice(e,1)[0]),this.trigger("move")}}]),t}(),h=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,o.default.Collection),i(t,[{key:"initialize",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.model=a.default.RowModel,this.on("add",this._addParam)}},{key:"moveItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.models.splice(t,0,this.models.splice(e,1)[0]),this.trigger("move")}},{key:"_addParam",value:function(e){var t=r({},e.get("settings"));t.element="gva_row",e.set("settings",t)}}]),t}();t.default={ColumnsCollection:f,ElementsCollection:d,RowsCollection:h}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var r,i,o;i=[n(0)],void 0===(o="function"==typeof(r=function(e){"use strict";e.fn.serializeJSON=function(t){var n,r,i,o,a,s,u,l,c,f,d,h;return n=e.serializeJSON,r=this,i=n.setupOpts(t),o=r.serializeArray(),n.readCheckboxUncheckedValues(o,i,r),a={},e.each(o,function(e,t){s=t.name,u=t.value,c=n.extractTypeAndNameWithNoType(s),f=c.nameWithNoType,(d=c.type)||(d=n.attrFromInputWithName(r,s,"data-value-type")),n.validateType(s,d,i),"skip"!==d&&(h=n.splitInputNameIntoKeysArray(f),!(l=n.parseValue(u,s,d,i))&&n.shouldSkipFalsy(r,s,f,d,i)||n.deepSet(a,h,l,i))}),a},e.serializeJSON={defaultOptions:{checkboxUncheckedValue:void 0,parseNumbers:!1,parseBooleans:!1,parseNulls:!1,parseAll:!1,parseWithFunction:null,skipFalsyValuesForTypes:[],skipFalsyValuesForFields:[],customTypes:{},defaultTypes:{string:function(e){return String(e)},number:function(e){return Number(e)},boolean:function(e){return-1===["false","null","undefined","","0"].indexOf(e)},null:function(e){return-1===["false","null","undefined","","0"].indexOf(e)?e:null},array:function(e){return JSON.parse(e)},object:function(e){return JSON.parse(e)},auto:function(t){return e.serializeJSON.parseValue(t,null,null,{parseNumbers:!0,parseBooleans:!0,parseNulls:!0})},skip:null},useIntKeysAsArrayIndex:!1},setupOpts:function(t){var n,r,i,o,a,s;for(n in s=e.serializeJSON,null==t&&(t={}),i=s.defaultOptions||{},r=["checkboxUncheckedValue","parseNumbers","parseBooleans","parseNulls","parseAll","parseWithFunction","skipFalsyValuesForTypes","skipFalsyValuesForFields","customTypes","defaultTypes","useIntKeysAsArrayIndex"],t)if(-1===r.indexOf(n))throw new Error("serializeJSON ERROR: invalid option '"+n+"'. Please use one of "+r.join(", "));return a=(o=function(e){return!1!==t[e]&&""!==t[e]&&(t[e]||i[e])})("parseAll"),{checkboxUncheckedValue:o("checkboxUncheckedValue"),parseNumbers:a||o("parseNumbers"),parseBooleans:a||o("parseBooleans"),parseNulls:a||o("parseNulls"),parseWithFunction:o("parseWithFunction"),skipFalsyValuesForTypes:o("skipFalsyValuesForTypes"),skipFalsyValuesForFields:o("skipFalsyValuesForFields"),typeFunctions:e.extend({},o("defaultTypes"),o("customTypes")),useIntKeysAsArrayIndex:o("useIntKeysAsArrayIndex")}},parseValue:function(t,n,r,i){var o,a;return o=e.serializeJSON,a=t,i.typeFunctions&&r&&i.typeFunctions[r]?a=i.typeFunctions[r](t):i.parseNumbers&&o.isNumeric(t)?a=Number(t):!i.parseBooleans||"true"!==t&&"false"!==t?i.parseNulls&&"null"==t&&(a=null):a="true"===t,i.parseWithFunction&&!r&&(a=i.parseWithFunction(a,n)),a},isObject:function(e){return e===Object(e)},isUndefined:function(e){return void 0===e},isValidArrayIndex:function(e){return/^[0-9]+$/.test(String(e))},isNumeric:function(e){return e-parseFloat(e)>=0},optionKeys:function(e){if(Object.keys)return Object.keys(e);var t,n=[];for(t in e)n.push(t);return n},readCheckboxUncheckedValues:function(t,n,r){var i,o,a;null==n&&(n={}),e.serializeJSON,i="input[type=checkbox][name]:not(:checked):not([disabled])",r.find(i).add(r.filter(i)).each(function(r,i){if(o=e(i),null==(a=o.attr("data-unchecked-value"))&&(a=n.checkboxUncheckedValue),null!=a){if(i.name&&-1!==i.name.indexOf("[]["))throw new Error("serializeJSON ERROR: checkbox unchecked values are not supported on nested arrays of objects like '"+i.name+"'. See https://github.com/marioizquierdo/jquery.serializeJSON/issues/67");t.push({name:i.name,value:a})}})},extractTypeAndNameWithNoType:function(e){var t;return(t=e.match(/(.*):([^:]+)$/))?{nameWithNoType:t[1],type:t[2]}:{nameWithNoType:e,type:null}},shouldSkipFalsy:function(t,n,r,i,o){var a=e.serializeJSON.attrFromInputWithName(t,n,"data-skip-falsy");if(null!=a)return"false"!==a;var s=o.skipFalsyValuesForFields;if(s&&(-1!==s.indexOf(r)||-1!==s.indexOf(n)))return!0;var u=o.skipFalsyValuesForTypes;return null==i&&(i="string"),!(!u||-1===u.indexOf(i))},attrFromInputWithName:function(e,t,n){var r;return r='[name="'+t.replace(/(:|\.|\[|\]|\s)/g,"\\$1")+'"]',e.find(r).add(e.filter(r)).attr(n)},validateType:function(t,n,r){var i,o;if(i=(o=e.serializeJSON).optionKeys(r?r.typeFunctions:o.defaultOptions.defaultTypes),n&&-1===i.indexOf(n))throw new Error("serializeJSON ERROR: Invalid type "+n+" found in input name '"+t+"', please use one of "+i.join(", "));return!0},splitInputNameIntoKeysArray:function(t){var n;return e.serializeJSON,n=t.split("["),""===(n=e.map(n,function(e){return e.replace(/\]/g,"")}))[0]&&n.shift(),n},deepSet:function(t,n,r,i){var o,a,s,u,l,c;if(null==i&&(i={}),(c=e.serializeJSON).isUndefined(t))throw new Error("ArgumentError: param 'o' expected to be an object or array, found undefined");if(!n||0===n.length)throw new Error("ArgumentError: param 'keys' expected to be an array with least one element");o=n[0],1===n.length?""===o?t.push(r):t[o]=r:(a=n[1],""===o&&(l=t[u=t.length-1],o=c.isObject(l)&&(c.isUndefined(l[a])||n.length>2)?u:u+1),""===a?!c.isUndefined(t[o])&&e.isArray(t[o])||(t[o]=[]):i.useIntKeysAsArrayIndex&&c.isValidArrayIndex(a)?!c.isUndefined(t[o])&&e.isArray(t[o])||(t[o]=[]):!c.isUndefined(t[o])&&c.isObject(t[o])||(t[o]={}),s=n.slice(1),c.deepSet(t[o],s,r,i))}}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){(function(e){var r;!function(i){var o=("object"==typeof e&&e&&e.exports,"object"==typeof global&&global);o.global!==o&&o.window;var a=function(e){this.message=e};(a.prototype=new Error).name="InvalidCharacterError";var s=function(e){throw new a(e)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,c={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&s("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,r,i,o=e.length%3,a="",l=-1,c=e.length-o;++l<c;)t=e.charCodeAt(l)<<16,n=e.charCodeAt(++l)<<8,r=e.charCodeAt(++l),a+=u.charAt((i=t+n+r)>>18&63)+u.charAt(i>>12&63)+u.charAt(i>>6&63)+u.charAt(63&i);return 2==o?(t=e.charCodeAt(l)<<8,n=e.charCodeAt(++l),a+=u.charAt((i=t+n)>>10)+u.charAt(i>>4&63)+u.charAt(i<<2&63)+"="):1==o&&(i=e.charCodeAt(l),a+=u.charAt(i>>2)+u.charAt(i<<4&63)+"=="),a},decode:function(e){var t=(e=String(e).replace(l,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&s("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,i=0,o="",a=-1;++a<t;)r=u.indexOf(e.charAt(a)),n=i%4?64*n+r:r,i++%4&&(o+=String.fromCharCode(255&n>>(-2*i&6)));return o},version:"0.1.0"};void 0===(r=function(){return c}.call(t,n,t,e))||(e.exports=r)}()}).call(this,n(13)(e))},function(e,t,n){"use strict";(function(e){o(n(0));var t,r=o(n(17)),i=o(n(4));function o(e){return e&&e.__esModule?e:{default:e}}o(n(14)),n(49),n(62),(t=e)(document).ready(function(){var n=new r.default(e.parseJSON(drupalSettings.gavias_content_builder.params));console.log(e.parseJSON(drupalSettings.gavias_content_builder.params)),t(document).on("submit","#gpb_form-content-change",function(e){t.notify("Please waiting Gavias Builder process !","info"),t("#save").attr("disabled","true");var r=t("input[name=gavias_content_builder_id]").val(),o={data:JSON.stringify(i.default.toJSON(n.model.get("rows"),["adding","reRender"])),pid:r};return t.ajax({url:drupalSettings.gavias_content_builder.saveConfigURL,type:"POST",data:o,dataType:"json",success:function(e){t("#save").val("Save"),t.notify("Gavias Builder setting updated","success"),t("#save").removeAttr("disabled")},error:function(e,t,n){alert(t+":"+e.responseText),notify("Gavias Builder setting not updated","error")}}),!1})})}).call(this,n(0))},function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=c(n(2)),s=(c(n(1)),c(n(18))),u=c(n(12)),l=c(n(15));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(t){function n(){return function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default.View),o(n,[{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.$el=e("#gpb_form-content-change"),this.model=new a.default.Model({rows:new u.default.RowsCollection(t)}),this.delegateEvents(),this.render()}},{key:"events",value:function(){return{"click #gpb_add-element":"fn_add_row","click #gpb_add-element-import":"fn_add_row_import","click #gpb_add-element-import-submit":"fn_add_row_import_submit"}}},{key:"render",value:function(){return this.$("#gpb_content-bottom").before(new s.default(this.model.get("rows")).render().el),this}},{key:"fn_add_row",value:function(e){return e.preventDefault(),this.model.get("rows").add({settings:{},columns:null}),!1}},{key:"fn_add_row_import",value:function(t){t.preventDefault(),e(".row-import").removeClass("hidden")}},{key:"fn_add_row_import_submit",value:function(t){t.preventDefault();var n=e("textarea#row-import-data").val();n=l.default.decode(n),console.log(n);try{if(n.indexOf("gavias_content_builder_copy070301")>-1){var o=r.parseJSON(n);"object"===(void 0===o?"undefined":i(o))&&null!==o&&"on"==o.gavias_content_builder_copy070301?(this.model.get("rows").add(o),e(".row-import").addClass("hidden"),e("textarea#row-import-data").val(""),alert("Import row Successful!")):(e(".row-import").addClass("hidden"),e("textarea#row-import-data").val(""),alert("Can not import row  !"))}else e(".row-import").addClass("hidden"),e("textarea#row-import-data").val(""),alert("Can not import row!")}catch(t){e(".row-import").addClass("hidden"),e("textarea#row-import-data").val(""),alert("Can not import row !")}return!1}}]),n}();t.default=f}).call(this,n(0),n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(n(2)),o=(u(n(1)),u(n(9))),a=u(n(4)),s=u(n(15));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(t){function n(){return function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.default.View),r(n,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.rows=e,this.setElement('<div id="gpb_content-inner"></div>'),this.listenTo(this.rows,"add",this._add_row),this.delegateEvents()}},{key:"events",value:function(){return{"click > .gpb_row-content > .gpb_action-button > .right > a.gpb-action_clone_row":"fn_clone_row","click > .gpb_row-content > .gpb_action-button > .right > a.gpb-action_copy_row":"fn_copy_row"}}},{key:"render",value:function(){var e=this;return new Promise(function(t,n){e.rows.length>0&&e.rows.map(function(t,n){e._add_row(t)}),t()}).then(function(){e.$el.sortable({items:".gpb_row-content:not(.disable-sortable)",placeholder:"ui-state-highlight",handle:"> .row-action-button > .left > .gpb_drap-order-row",start:function(e,t){t.placeholder.width(t.item.find(".gpb_element-inner").first().width()-20),t.placeholder.height(t.item.height()-100),t.item.indexStart=t.item.index()},stop:e.dropRown.bind(e)}).disableSelection()}),this}},{key:"_add_row",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(void 0===r.at)this.$el.append(new o.default(t).render().el);else{var i=this.$("> .gpb_row-content");i.map(function(a,s){var u=parseInt(r.at)-1;u==a&&e(i[u]).after(new o.default(n.get(t)).render().el)})}}},{key:"fn_clone_row",value:function(t){t.preventDefault();var n=e(t.target).parents(".gpb_row-content:first").data("cid"),r=this.rows.get({cid:n});console.log(this.rows);var i=this.rows.indexOf(r),o=a.default.toJSON(r.toJSON(),[],!0);return this.rows.add(o,{at:parseInt(i)+1}),!1}},{key:"fn_copy_row",value:function(t){t.preventDefault();var n=e(t.target).parents(".gpb_row-content:first").data("cid"),r=this.rows.get({cid:n}),i=(this.rows.indexOf(r),a.default.toJSON(r.toJSON(),[],!0)),o=document.createElement("textarea");return i.gavias_content_builder_copy070301="on",o.value=s.default.encode(JSON.stringify(i).replace(/([â])+/g,"")),document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),alert("Copy Row Successful !"),!1}},{key:"dropRown",value:function(e,t){this.rows.moveItem(t.item.indexStart,t.item.index())}}]),n}();t.default=l}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=c(n(2)),o=c(n(1)),a=(c(n(20)),c(n(5)),c(n(7))),s=c(n(44)),u=c(n(45)),l=c(n(4));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(t){function n(){return function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.default.View),r(n,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{settings:{},elements:{}};this.column=e,this.listenTo(this.column,"destroy",this.remove),this.listenTo(this.column,"change:reRender",this.fn_re_render),this.listenTo(this.column.get("elements"),"remove",this.fn_on_remove_el),this.listenTo(this.column.get("elements"),"add",this.fn_add_el)}},{key:"events",value:function(){return{"click .gpb-action_delete":"fn_delete_column","click .gpb_add-element":"fn_render_elements_list","click .gpb-action_clone_element":"fn_clone","click .gpb-action_clone.gpb-action_clone_row":"fn_clone_element_row","click .gpb-action_edit":"fn_edit","click .gpb_minus-column":"fn_minus_column","click .gpb_plus-column":"fn_plus_column"}}},{key:"render",value:function(){var e=this;return new Promise(function(t,n){var r='<div class="gpb_col wb-<%= data.col_lg %>" data-element="<%= data.settings.element %>" data-cid="<%= data.cid %>">';r+='<div class="gpb_action-button">',r+='<div class="left">',r+='<a href="#" class="gpb_add-element" title="Add Element"><i class="fa fa-plus" ></i></a>',r+='<a href="#" class="gpb_minus-column">-</a>',r+='<a class="gpb-w-label"><%= data.col_lg %></a>',r+='<a href="#" class="gpb_plus-column">+</a>',r+="</div>",r+='<div class="right">',r+='<a href="#" class="btn-border-none btn-action gpb_drap-order gpb_drap-order-col" title="Move"><i class="fa fa-arrows-h" ></i></a>',r+='<a href="#" class="btn-border-none btn-action gpb-action_edit" title="Edit"><i class="fa fa-pencil" ></i></a>',r+='<a href="#" class="btn-border-none btn-action gpb-action_delete" title="Delete"><i class="fa fa-times" ></i></a>',r+="</div>",r+="</div>",r+='<div class="gpb_element-inner"><div class="gpb_column-content"></div></div>',r+="</div>";var i=e.column.toJSON();i.cid=e.column.cid,e.template=o.default.template(r,{variable:"data"})(i),e.setElement(e.template),e.column.get("elements")&&e.column.get("elements").length>0?e.column.get("elements").map(function(t,n,r){e.fn_add_el(t,r,{at:n})}):e.$el.addClass("empty-element"),t()}).then(function(){e.$("> .gpb_element-inner > .gpb_column-content").sortable({connectWith:".gpb_column-content",items:".gpb_el-content-inner",handle:".gpb_drap-order, .gpb_drap-order:not(.gpb_drap-order-row), .gpb_drap-order.gpb_drap-order-row",cursor:"move",placeholder:"ui-state-highlight",forcePlaceholderSize:!0,receive:e._receive.bind(e),start:e._start.bind(e),tolerance:"pointer",update:e._update.bind(e)}).disableSelection()}),this}},{key:"fn_add_el",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});this.$("> .gpb_element-inner > .gpb_column-content > .gpb_el-content-inner").length>n.at&&n.at?e(this.$("> .gpb_element-inner > .gpb_column-content > .gpb_el-content-inner").get(parseInt(n.at)-1)).after(new u.default(t).render().el):0==n.at?this.$("> .gpb_element-inner > .gpb_column-content").prepend(new u.default(t).render().el):this.$("> .gpb_element-inner > .gpb_column-content").append(new u.default(t).render().el)}},{key:"fn_re_render",value:function(e,t){!0===this.column.get("reRender")&&(this.$el.replaceWith(this.render().el),this.column.set("reRender",!1))}},{key:"fn_delete_column",value:function(e){return e.preventDefault(),confirm("You are sure delete this column ! Continue?")&&this.column.destroy(),!1}},{key:"fn_render_elements_list",value:function(t){return t.preventDefault(),e(t.target),this.column.set("adding",!0),this.elementsList=new s.default(this.column),!1}},{key:"fn_clone",value:function(t){t.preventDefault();var n=e(t.target).parents(".gpb_el-content-inner:first").data("cid"),r=this.column.get("elements").get({cid:n}),i=this.column.get("elements").indexOf(r);return this.column.get("elements").add(l.default.toJSON(r.toJSON(),[],!0),{at:parseInt(i)+1}),!1}},{key:"fn_clone_element_row",value:function(t){t.preventDefault();var n=e(t.target).parents(".gpb_el-content-inner.gpb_row-el").data("cid"),r=this.column.get("elements").get({cid:n}),i=this.column.get("elements").indexOf(r),o=l.default.toJSON(r.toJSON(),[],!0);return this.column.get("elements").add(o,{at:parseInt(i)+1}),!1}},{key:"fn_on_remove_el",value:function(){0===this.column.get("elements").length&&this.$el.addClass("empty-element")}},{key:"fn_edit",value:function(e){return e.preventDefault(),new a.default(this.column,"Edit Column",drupalSettings.gavias_content_builder.element_fields.gva_column),this.column.set("editing",!0),!1}},{key:"fn_minus_column",value:function(e){e.preventDefault(),console.log(this.column.get("col_lg"));var t=this.column.get("col_lg");if(t>1){var n=t-1;this.column.set("col_lg",n),this.$el.removeClass("wb-"+t),this.$el.addClass("wb-"+(t-1)),this.$el.find(".gpb-w-label").first().text(t-1)}return!1}},{key:"fn_plus_column",value:function(e){e.preventDefault(),console.log(this.column.get("col_lg"));var t=this.column.get("col_lg");if(t<12){var n=t+1;this.column.set("col_lg",n),this.$el.removeClass("wb-"+t),this.$el.addClass("wb-"+(t+1)),this.$el.find(".gpb-w-label").first().text(t+1)}return console.log(this.column),!1}},{key:"_receive",value:function(e,t){var n=this;new Promise(function(e,r){var i=t.item.index(),o=l.default.toJSON(t.item.element.toJSON());n.column.get("elements").add(o,{at:i}),e()}).then(function(){t.item.element.destroy()})}},{key:"_start",value:function(e,t){t.placeholder.width(150),t.item.width(150),t.item.height(50),t.placeholder.height(t.item.height()-20),t.item.indexStart=t.item.index(),t.item.elements=this.column.get("elements"),t.item.element=this.column.get("elements").at(t.item.indexStart)}},{key:"_update",value:function(e,t){if(t.item.elements===this.column.get("elements")){var n=t.item.index();this.column.get("elements").moveItem(t.item.indexStart,n),t.item.trigger("drop",n)}}},{key:"_renderEditColumnForm",value:function(e){!0===e.get("editing")&&new a.default(e,"Edit columns",drupalSettings.gavias_content_builder.element_fields.gva_column)}}]),n}();t.default=f}).call(this,n(0))},function(e,t,n){var r,i,o;i=[n(0),n(10),n(21),n(11),n(22),n(3),n(6)],void 0===(o="function"==typeof(r=function(e){return e.widget("ui.sortable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&e<t+n},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),e.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var r=null,i=!1,o=this;return!(this.reverting||this.options.disabled||"static"===this.options.type||(this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,o.widgetName+"-item")===o)return r=e(this),!1}),e.data(t.target,o.widgetName+"-item")===o&&(r=e(t.target)),!r||this.options.handle&&!n&&(e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)}),!i)||(this.currentItem=r,this._removeCurrentsFromItems(),0)))},_mouseStart:function(t,n,r){var i,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=e("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,o,a=this.options,s=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(t.pageY-this.document.scrollTop()<a.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<a.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed)),t.pageX-this.document.scrollLeft()<a.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))),!1!==s&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=(r=this.items[n]).item[0],(o=this._intersectsWithPointer(r))&&r.instance===this.currentContainer&&!(i===this.currentItem[0]||this.placeholder[1===o?"next":"prev"]()[0]===i||e.contains(this.placeholder[0],i)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],i))){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var r=this,i=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,o=e.left,a=o+e.width,s=e.top,u=s+e.height,l=this.offset.click.top,c=this.offset.click.left,f="x"===this.options.axis||r+l>s&&r+l<u,d="y"===this.options.axis||t+c>o&&t+c<a,h=f&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?h:o<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<a&&s<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<u},_intersectsWithPointer:function(e){var t,n,r="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width);return!!(r&&i)&&(t=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection(),this.floating?"right"===n||"down"===t?2:1:t&&("down"===t?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?"right"===i&&n||"left"===i&&!n:r&&("down"===r&&t||"up"===r&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,r,i,o,a=[],s=[],u=this._connectWith();if(u&&t)for(n=u.length-1;n>=0;n--)for(r=(i=e(u[n],this.document[0])).length-1;r>=0;r--)(o=e.data(i[r],this.widgetFullName))&&o!==this&&!o.options.disabled&&s.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);function l(){a.push(this)}for(s.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=s.length-1;n>=0;n--)s[n][0].each(l);return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,o,a,s,u,l,c=this.items,f=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(n=d.length-1;n>=0;n--)for(r=(i=e(d[n],this.document[0])).length-1;r>=0;r--)(o=e.data(i[r],this.widgetFullName))&&o!==this&&!o.options.disabled&&(f.push([e.isFunction(o.options.items)?o.options.items.call(o.element[0],t,{item:this.currentItem}):e(o.options.items,o.element),o]),this.containers.push(o));for(n=f.length-1;n>=0;n--)for(a=f[n][1],r=0,l=(s=f[n][0]).length;r<l;r++)(u=e(s[r])).data(this.widgetName+"-item",a),c.push({item:u,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var n,r,i,o;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),n=this.items.length-1;n>=0;n--)(r=this.items[n]).instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0]||(i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),o=i.offset(),r.left=o.left,r.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)o=this.containers[n].element.offset(),this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){var n,r=(t=t||this).options;r.placeholder&&r.placeholder.constructor!==String||(n=r.placeholder,r.placeholder={element:function(){var r=t.currentItem[0].nodeName.toLowerCase(),i=e("<"+r+">",t.document[0]);return t._addClass(i,"ui-sortable-placeholder",n||t.currentItem[0].className)._removeClass(i,"ui-sortable-helper"),"tbody"===r?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(i)):"tr"===r?t._createTrPlaceholder(t.currentItem,i):"img"===r&&i.attr("src",t.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(e,i){n&&!r.forcePlaceholderSize||(i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,n){var r=this;t.children().each(function(){e("<td>&#160;</td>",r.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(t){var n,r,i,o,a,s,u,l,c,f,d=null,h=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(d&&e.contains(this.containers[n].element[0],d.element[0]))continue;d=this.containers[n],h=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[h].containerCache.over||(this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1);else{for(i=1e4,o=null,a=(c=d.floating||this._isFloating(this.currentItem))?"left":"top",s=c?"width":"height",f=c?"pageX":"pageY",r=this.items.length-1;r>=0;r--)e.contains(this.containers[h].element[0],this.items[r].item[0])&&this.items[r].item[0]!==this.currentItem[0]&&(u=this.items[r].item.offset()[a],l=!1,t[f]-u>this.items[r][s]/2&&(l=!0),Math.abs(t[f]-u)<i&&(i=Math.abs(t[f]-u),o=this.items[r],this.direction=l?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[h])return void(this.currentContainer.containerCache.over||(this.containers[h]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[h].element,!0),this._trigger("change",t,this._uiHash()),this.containers[h]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[h],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return r.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),r[0].style.width&&!n.forceHelperSize||r.width(this.currentItem.width()),r[0].style.height&&!n.forceHelperSize||r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;"parent"===i.containment&&(i.containment=this.helper[0].parentNode),"document"!==i.containment&&"window"!==i.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===i.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===i.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r="absolute"===t?1:-1,i="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,o=t.pageX,a=t.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,u=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((a-this.originalPageY)/i.grid[1])*i.grid[1],a=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0],o=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():u?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():u?0:s.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){this.reverting=!1;var n,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function i(e,t,n){return function(r){n._trigger(e,r,t._uiHash(t))}}for(this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||r.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[n(0),n(3)],void 0===(o="function"==typeof(r=function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])}})})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[n(0),n(3)],void 0===(o="function"==typeof(r=function(e){return e.fn.scrollParent=function(t){var n=this.css("position"),r="absolute"===n,i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=e(this);return(!r||"static"!==t.css("position"))&&i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&o.length?o:e(this[0].ownerDocument||document)}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),r(n(0)),r(n(1)),r(n(2)),r(n(8)),t.default={template_field_text:function(){var e="";return e='<div class="form-group <%= data.field.class %>"><div class="content-inner">',e+='<div class="form-label"><%= data.field.title %></div>',e+='<div class="form-input">',e+='<input type="text" name="<%= data.field.id %>" id="<%= data.field.id %>" value="<%= _.escape(data.field.value) %>" placeholder="<%= data.field.placeholder %>" />',e+="<% if ( data.field.desc ) { %>",e+='<p class="desc"><%= data.field.desc %></p>',e+="<% } %>",(e+="</div>")+"</div></div>"},template_field_select:function(){var e="";return e='<div class="form-group <%= data.field.class %>"><div class="content-inner">',e+='<div class="form-label"><%= data.field.title %></div>',e+='<div class="form-input">',e+='<select name="<%= data.field.id %>" id="<%= data.field.id %>" class="form-control"<%= data.field.multiple !== undefined && data.field.multiple ? \' multiple="multiple"\' : \'\' %>>',e+="<% _.each( data.field.options, function( title, value ) { %>",e+='<option value="<%= value %>"<%= ( value == data.field.value ) || ( typeof data.field.value === "object" && data.field.value.indexOf( value ) !== -1 ) ? " selected" : "" %>><%= title %></option>',e+="<% }); %>",e+="</select>",e+="<% if ( data.field.desc ) { %>",e+='<p class="desc"><%= data.field.desc %></p>',e+="<% } %>",(e+="</div>")+"</div></div>"},template_field_textarea:function(){var e="";return e='<div class="form-group <%= data.field.class %>"><div class="content-inner">',e+='<div class="form-label"><%= data.field.title %></div>',e+='<div class="form-input" style="padding: 10px;">',e+='<textarea class="code_html code_html_tiny" name="<%= data.field.id %>" id="<%= data.field.id %>" placeholder="<%= data.field.placeholder %>"><%= data.field.value %></textarea>',e+="<% if ( data.field.desc ) { %>",e+='<p class="desc"><%= data.field.desc %></p>',e+="<% } %>",(e+="</div>")+"</div></div>"},template_field_textarea_without_html:function(){var e="";return e='<div class="form-group <%= data.field.class %>"><div class="content-inner">',e+='<div class="form-label"><%= data.field.title %></div>',e+='<div class="form-input" style="padding: 10px;">',e+='<textarea rows="8" class="" name="<%= data.field.id %>" id="<%= data.field.id %>" placeholder="<%= data.field.placeholder %>"><%= data.field.value %></textarea>',e+="<% if ( data.field.desc ) { %>",e+='<p class="desc"><%= data.field.desc %></p>',e+="<% } %>",(e+="</div>")+"</div></div>"},template_field_upload:function(){var e="";return e='<div class="form-group <%= data.field.class %>"><div class="content-inner">',e+='<div class="form-label"><%= data.field.title %></div>',e+='<div class="gva-upload-input" data-id="<%= data._rid %>">',e+='<input data-id="<%= data._rid %>" id="gva-upload-<%= data._rid %>" type="text" name="<%= data.field.id %>" value="<%= data.field.value %>" class="imce-url-input" data-imce-type="link"/>',e+="<% if(data.field.value){ %>",e+='<img class="gavias-image-demo" id="gva-upload-<%= data._rid %>-demo" src="<%= drupalSettings.gavias_content_builder.base_path + data.field.value %>" />',e+="<% }else{ %>",e+='<img class="gavias-image-demo" id="gva-upload-<%= data._rid %>-demo" src="<%= drupalSettings.gavias_content_builder.path_modules + "/dist/images/default.png" %>" />',e+="<% } %>",e+='<a class="gavias-field-upload-remove btn-delete" data-src="<%= drupalSettings.gavias_content_builder.path_modules + "/dist/images/default.png" %>">Remove</a>',e+='<div class="clearfix"></div>',e+="<% if ( data.field.desc ) { %>",e+='<p class="desc"><%= data.field.desc %></p>',e+="<% } %>",e+="</div>",(e+="</div>")+"</div></div>"},template_field_info:function(){var e="";return e+='<div class="field-info <%= data.field.class %>">',e+='<div class="info-title"><%= data.field.title %></div>',(e+='<% if ( data.field.desc ) { %><p class="info-desc"><%= data.field.desc %></p> <% } %>')+"</div>"}}},function(e,t,n){!function(){"use strict";var t,n,r,i,o,a,s,u,l,c,f,d,h,p=function(e){return function(){return e}},m={noop:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},noarg:function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e()}},compose:function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,arguments))}},constant:p,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var a=r.concat(i);return e.apply(null,a)}},not:function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,arguments)}},die:function(e){return function(){throw new Error(e)}},apply:function(e){return e()},call:function(e){e()},never:p(!1),always:p(!0)},g=m.never,v=m.always,y=function(){return b},b=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r={fold:function(e,t){return e()},is:g,isSome:g,isNone:v,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:n,orThunk:t,map:y,ap:y,each:function(){},bind:y,flatten:y,exists:g,forall:v,filter:y,equals:e,equals_:e,toArray:function(){return[]},toString:m.constant("none()")};return Object.freeze&&Object.freeze(r),r}(),w=function(e){var t=function(){return e},n=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:v,isNone:g,getOr:t,getOrThunk:t,getOrDie:t,or:n,orThunk:n,map:function(t){return w(t(e))},ap:function(t){return t.fold(y,function(t){return w(t(e))})},each:function(t){t(e)},bind:r,flatten:t,exists:r,forall:r,filter:function(t){return t(e)?i:b},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(g,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return i},x={some:w,none:y,from:function(e){return null===e||void 0===e?b:w(e)}},C=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(t)===e}},_={isString:C("string"),isObject:C("object"),isArray:C("array"),isNull:C("null"),isBoolean:C("boolean"),isUndefined:C("undefined"),isFunction:C("function"),isNumber:C("number")},S=void 0===(t=Array.prototype.indexOf)?function(e,t){return O(e,t)}:function(e,n){return t.call(e,n)},k=function(e,t){return S(e,t)>-1},T=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},E=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)},N=function(e,t){for(var n=e.length-1;n>=0;n--)t(e[n],n,e)},A=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];t(o,r,e)&&n.push(o)}return n},R=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return x.some(n);return x.none()},O=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},D=Array.prototype.push,P=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);D.apply(t,e[n])}return t},I=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n,e))return!1;return!0},B=Array.prototype.slice,M=_.isFunction(Array.from)?Array.from:function(e){return B.call(e)},L={map:T,each:E,eachr:N,partition:function(e,t){for(var n=[],r=[],i=0,o=e.length;i<o;i++){var a=e[i];(t(a,i,e)?n:r).push(a)}return{pass:n,fail:r}},filter:A,groupBy:function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],i=[],o=0,a=e.length;o<a;o++){var s=e[o],u=t(s);u!==n&&(r.push(i),i=[]),n=u,i.push(s)}return 0!==i.length&&r.push(i),r},indexOf:function(e,t){var n=S(e,t);return-1===n?x.none():x.some(n)},foldr:function(e,t,n){return N(e,function(e){n=t(n,e)}),n},foldl:function(e,t,n){return E(e,function(e){n=t(n,e)}),n},find:function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e))return x.some(i)}return x.none()},findIndex:R,flatten:P,bind:function(e,t){var n=T(e,t);return P(n)},forall:I,exists:function(e,t){return R(e,t).isSome()},contains:k,equal:function(e,t){return e.length===t.length&&I(e,function(e,n){return e===t[n]})},reverse:function(e){var t=B.call(e,0);return t.reverse(),t},chunk:function(e,t){for(var n=[],r=0;r<e.length;r+=t){var i=e.slice(r,r+t);n.push(i)}return n},difference:function(e,t){return A(e,function(e){return!k(t,e)})},mapToObject:function(e,t){for(var n={},r=0,i=e.length;r<i;r++){var o=e[r];n[String(o)]=t(o,r)}return n},pure:function(e){return[e]},sort:function(e,t){var n=B.call(e,0);return n.sort(t),n},range:function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},head:function(e){return 0===e.length?x.none():x.some(e[0])},last:function(e){return 0===e.length?x.none():x.some(e[e.length-1])},from:M},H="undefined"!=typeof window?window:Function("return this;")(),F=function(e,t){return function(e,t){for(var n=void 0!==t&&null!==t?t:H,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n}(e.split("."),t)},z={getOrDie:function(e,t){var n=function(e,t){return F(e,t)}(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n}},j=function(){return z.getOrDie("URL")},W={createObjectURL:function(e){return j().createObjectURL(e)},revokeObjectURL:function(e){j().revokeObjectURL(e)}},U=navigator,$=U.userAgent,q=function(e){return"matchMedia"in window&&matchMedia(e).matches};l=/Android/.test($),r=(r=!(n=/WebKit/.test($))&&/MSIE/gi.test($)&&/Explorer/gi.test(U.appName))&&/MSIE (\w+)\./.exec($)[1],i=-1!==$.indexOf("Trident/")&&(-1!==$.indexOf("rv:")||-1!==U.appName.indexOf("Netscape"))&&11,o=-1!==$.indexOf("Edge/")&&!r&&!i&&12,r=r||i||o,a=!n&&!i&&/Gecko/.test($),s=-1!==$.indexOf("Mac"),u=/(iPad|iPhone)/.test($),c="FormData"in window&&"FileReader"in window&&"URL"in window&&!!W.createObjectURL,f=q("only screen and (max-device-width: 480px)")&&(l||u),d=q("only screen and (min-width: 800px)")&&(l||u),h=-1!==$.indexOf("Windows Phone"),o&&(n=!1);var V,X,Y,K,J,G,Q,Z,ee,te,ne,re,ie,oe,ae,se,ue,le,ce,fe={opera:!1,webkit:n,ie:r,gecko:a,mac:s,iOS:u,android:l,contentEditable:!u||c||parseInt($.match(/AppleWebKit\/(\d*)/)[1],10)>=534,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==r,range:window.getSelection&&"Range"in window,documentMode:r&&!o?document.documentMode||7:10,fileApi:c,ceFalse:!1===r||r>8,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===r||r>11,desktop:!f&&!d,windowsPhone:h},de=window.Promise?window.Promise:function(){function e(e,t){return function(){e.apply(t,arguments)}}var t=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],u(t,e(o,this),e(a,this))},r=n.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)};function i(e){var t=this;null!==this._state?r(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)}else(t._state?e.resolve:e.reject)(t._value)}):this._deferreds.push(e)}function o(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void u(e(n,t),e(o,this),e(a,this))}this._state=!0,this._value=t,s.call(this)}catch(e){a.call(this,e)}}function a(e){this._state=!1,this._value=e,s.call(this)}function s(){for(var e=0,t=this._deferreds.length;e<t;e++)i.call(this,this._deferreds[e]);this._deferreds=null}function u(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,t){var r=this;return new n(function(n,o){i.call(r,new function(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}(e,t,n,o))})},n.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&t(arguments[0])?arguments[0]:arguments);return new n(function(t,n){if(0===e.length)return t([]);var r=e.length;function i(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){i(o,e)},n)}e[o]=a,0==--r&&t(e)}catch(e){n(e)}}for(var o=0;o<e.length;o++)i(o,e[o])})},n.resolve=function(e){return e&&"object"==typeof e&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,n){for(var r=0,i=e.length;r<i;r++)e[r].then(t,n)})},n}(),he=function(e,t){return"number"!=typeof t&&(t=0),setTimeout(e,t)},pe=function(e,t){return"number"!=typeof t&&(t=1),setInterval(e,t)},me=function(e,t){var n,r;return(r=function(){var r=arguments;clearTimeout(n),n=he(function(){e.apply(this,r)},t)}).stop=function(){clearTimeout(n)},r},ge={requestAnimationFrame:function(e,t){V?V.then(e):V=new de(function(e){t||(t=document.body),function(e,t){var n,r=window.requestAnimationFrame,i=["ms","moz","webkit"];for(n=0;n<i.length&&!r;n++)r=window[i[n]+"RequestAnimationFrame"];r||(r=function(e){window.setTimeout(e,0)}),r(e,t)}(e,t)}).then(e)},setTimeout:he,setInterval:pe,setEditorTimeout:function(e,t,n){return he(function(){e.removed||t()},n)},setEditorInterval:function(e,t,n){var r;return r=pe(function(){e.removed?clearInterval(r):t()},n)},debounce:me,throttle:me,clearInterval:function(e){return clearInterval(e)},clearTimeout:function(e){return clearTimeout(e)}},ve=/^(?:mouse|contextmenu)|click/,ye={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},be=function(){return!1},we=function(){return!0},xe=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},Ce=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},_e=function(e,t){var n,r=t||{};for(n in e)ye[n]||(r[n]=e[n]);if(r.target||(r.target=r.srcElement||document),fe.experimentalShadowDom&&(r.target=function(e,t){var n,r=t;return(n=e.path)&&n.length>0&&(r=n[0]),e.composedPath&&(n=e.composedPath())&&n.length>0&&(r=n[0]),r}(e,r.target)),e&&ve.test(e.type)&&void 0===e.pageX&&void 0!==e.clientX){var i=r.target.ownerDocument||document,o=i.documentElement,a=i.body;r.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),r.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}return r.preventDefault=function(){r.isDefaultPrevented=we,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},r.stopPropagation=function(){r.isPropagationStopped=we,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=we,r.stopPropagation()},!1===function(e){return e.isDefaultPrevented===we||e.isDefaultPrevented===be}(r)&&(r.isDefaultPrevented=be,r.isPropagationStopped=be,r.isImmediatePropagationStopped=be),void 0===r.metaKey&&(r.metaKey=!1),r},Se=function(e,t,n){var r=e.document,i={type:"ready"};if(n.domLoaded)t(i);else{var o=function(){return"complete"===r.readyState||"interactive"===r.readyState&&r.body},a=function(){n.domLoaded||(n.domLoaded=!0,t(i))},s=function(){o()&&(Ce(r,"readystatechange",s),a())},u=function(){try{r.documentElement.doScroll("left")}catch(e){return void ge.setTimeout(u)}a()};!r.addEventListener||fe.ie&&fe.ie<11?(xe(r,"readystatechange",s),r.documentElement.doScroll&&e.self===e.top&&u()):o()?a():xe(e,"DOMContentLoaded",a),xe(e,"load",a)}},ke=function(){var e,t,n,r,i,o=this,a={};t="mce-data-"+(+new Date).toString(32),r="onmouseenter"in document.documentElement,n="onfocusin"in document.documentElement,i={mouseenter:"mouseover",mouseleave:"mouseout"},e=1,o.domLoaded=!1,o.events=a;var s=function(e,t){var n,r,i,o,s=a[t];if(n=s&&s[e.type])for(r=0,i=n.length;r<i;r++)if((o=n[r])&&!1===o.func.call(o.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return};o.bind=function(u,l,c,f){var d,h,p,m,g,v,y,b=window,w=function(e){s(_e(e||b.event),d)};if(u&&3!==u.nodeType&&8!==u.nodeType){for(u[t]?d=u[t]:(d=e++,u[t]=d,a[d]={}),f=f||u,p=(l=l.split(" ")).length;p--;)v=w,g=y=!1,"DOMContentLoaded"===(m=l[p])&&(m="ready"),o.domLoaded&&"ready"===m&&"complete"===u.readyState?c.call(f,_e({type:m})):(r||(g=i[m])&&(v=function(e){var t,n;if(t=e.currentTarget,(n=e.relatedTarget)&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||((e=_e(e||b.event)).type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,s(e,d))}),n||"focusin"!==m&&"focusout"!==m||(y=!0,g="focusin"===m?"focus":"blur",v=function(e){(e=_e(e||b.event)).type="focus"===e.type?"focusin":"focusout",s(e,d)}),(h=a[d][m])?"ready"===m&&o.domLoaded?c({type:m}):h.push({func:c,scope:f}):(a[d][m]=h=[{func:c,scope:f}],h.fakeName=g,h.capture=y,h.nativeHandler=v,"ready"===m?Se(u,v,o):xe(u,g||m,v,y)));return u=h=0,c}},o.unbind=function(e,n,r){var i,s,u,l,c,f;if(!e||3===e.nodeType||8===e.nodeType)return o;if(i=e[t]){if(f=a[i],n){for(u=(n=n.split(" ")).length;u--;)if(s=f[c=n[u]]){if(r)for(l=s.length;l--;)if(s[l].func===r){var d=s.nativeHandler,h=s.fakeName,p=s.capture;(s=s.slice(0,l).concat(s.slice(l+1))).nativeHandler=d,s.fakeName=h,s.capture=p,f[c]=s}r&&0!==s.length||(delete f[c],Ce(e,s.fakeName||c,s.nativeHandler,s.capture))}}else{for(c in f)s=f[c],Ce(e,s.fakeName||c,s.nativeHandler,s.capture);f={}}for(c in f)return o;delete a[i];try{delete e[t]}catch(n){e[t]=null}}return o},o.fire=function(e,n,r){var i;if(!e||3===e.nodeType||8===e.nodeType)return o;(r=_e(null,r)).type=n,r.target=e;do{(i=e[t])&&s(r,i),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return o},o.clean=function(e){var n,r,i=o.unbind;if(!e||3===e.nodeType||8===e.nodeType)return o;if(e[t]&&i(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(i(e),n=(r=e.getElementsByTagName("*")).length;n--;)(e=r[n])[t]&&i(e);return o},o.destroy=function(){a={}},o.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}};ke.Event=new ke,ke.Event.bind(window,"ready",function(){});var Te="sizzle"+-new Date,Ee=window.document,Ne=0,Ae=0,Re=lt(),Oe=lt(),De=lt(),Pe=function(e,t){return e===t&&(re=!0),0},Ie="undefined",Be=1<<31,Me={}.hasOwnProperty,Le=[],He=Le.pop,Fe=Le.push,ze=Le.push,je=Le.slice,We=Le.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},Ue="[\\x20\\t\\r\\n\\f]",$e="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",qe="\\["+Ue+"*("+$e+")(?:"+Ue+"*([*^$|!~]?=)"+Ue+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+$e+"))|)"+Ue+"*\\]",Ve=":("+$e+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+qe+")*)|.*)\\)|)",Xe=new RegExp("^"+Ue+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ue+"+$","g"),Ye=new RegExp("^"+Ue+"*,"+Ue+"*"),Ke=new RegExp("^"+Ue+"*([>+~]|"+Ue+")"+Ue+"*"),Je=new RegExp("="+Ue+"*([^\\]'\"]*?)"+Ue+"*\\]","g"),Ge=new RegExp(Ve),Qe=new RegExp("^"+$e+"$"),Ze={ID:new RegExp("^#("+$e+")"),CLASS:new RegExp("^\\.("+$e+")"),TAG:new RegExp("^("+$e+"|[*])"),ATTR:new RegExp("^"+qe),PSEUDO:new RegExp("^"+Ve),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ue+"*(even|odd|(([+-]|)(\\d*)n|)"+Ue+"*(?:([+-]|)"+Ue+"*(\\d+)|))"+Ue+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+Ue+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ue+"*((?:-\\d)?\\d*)"+Ue+"*\\)|)(?=[^-]|$)","i")},et=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,nt=/^[^{]+\{\s*\[native \w/,rt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,it=/[+~]/,ot=/'|\\/g,at=new RegExp("\\\\([\\da-f]{1,6}"+Ue+"?|("+Ue+")|.)","ig"),st=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{ze.apply(Le=je.call(Ee.childNodes),Ee.childNodes),Le[Ee.childNodes.length].nodeType}catch(e){ze={apply:Le.length?function(e,t){Fe.apply(e,je.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}var ut=function(e,t,n,r){var i,o,a,s,u,l,c,f,d,h;if((t?t.ownerDocument||t:Ee)!==oe&&ie(t),t=t||oe,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(se&&!r){if(i=rt.exec(e))if(a=i[1]){if(9===s){if(!(o=t.getElementById(a))||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&ce(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return ze.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&Y.getElementsByClassName)return ze.apply(n,t.getElementsByClassName(a)),n}if(Y.qsa&&(!ue||!ue.test(e))){if(f=c=Te,d=t,h=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=Q(e),(c=t.getAttribute("id"))?f=c.replace(ot,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",u=l.length;u--;)l[u]=f+vt(l[u]);d=it.test(e)&&mt(t.parentNode)||t,h=l.join(",")}if(h)try{return ze.apply(n,d.querySelectorAll(h)),n}catch(e){}finally{c||t.removeAttribute("id")}}}return ee(e.replace(Xe,"$1"),t,n,r)};function lt(){var e=[];return function t(n,r){return e.push(n+" ")>K.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function ct(e){return e[Te]=!0,e}function ft(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Be)-(~e.sourceIndex||Be);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function dt(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ht(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function pt(e){return ct(function(t){return t=+t,ct(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function mt(e){return e&&typeof e.getElementsByTagName!==Ie&&e}for(X in Y=ut.support={},G=ut.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},ie=ut.setDocument=function(e){var t,n=e?e.ownerDocument||e:Ee,r=n.defaultView;return n!==oe&&9===n.nodeType&&n.documentElement?(oe=n,ae=n.documentElement,se=!G(n),r&&r!==function(e){try{return e.top}catch(e){}return null}(r)&&(r.addEventListener?r.addEventListener("unload",function(){ie()},!1):r.attachEvent&&r.attachEvent("onunload",function(){ie()})),Y.attributes=!0,Y.getElementsByTagName=!0,Y.getElementsByClassName=nt.test(n.getElementsByClassName),Y.getById=!0,K.find.ID=function(e,t){if(typeof t.getElementById!==Ie&&se){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},K.filter.ID=function(e){var t=e.replace(at,st);return function(e){return e.getAttribute("id")===t}},K.find.TAG=Y.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==Ie)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},K.find.CLASS=Y.getElementsByClassName&&function(e,t){if(se)return t.getElementsByClassName(e)},le=[],ue=[],Y.disconnectedMatch=!0,ue=ue.length&&new RegExp(ue.join("|")),le=le.length&&new RegExp(le.join("|")),t=nt.test(ae.compareDocumentPosition),ce=t||nt.test(ae.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},Pe=t?function(e,t){if(e===t)return re=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!Y.sortDetached&&t.compareDocumentPosition(e)===r?e===n||e.ownerDocument===Ee&&ce(Ee,e)?-1:t===n||t.ownerDocument===Ee&&ce(Ee,t)?1:ne?We.call(ne,e)-We.call(ne,t):0:4&r?-1:1)}:function(e,t){if(e===t)return re=!0,0;var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],u=[t];if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:ne?We.call(ne,e)-We.call(ne,t):0;if(o===a)return ft(e,t);for(r=e;r=r.parentNode;)s.unshift(r);for(r=t;r=r.parentNode;)u.unshift(r);for(;s[i]===u[i];)i++;return i?ft(s[i],u[i]):s[i]===Ee?-1:u[i]===Ee?1:0},n):oe},ut.matches=function(e,t){return ut(e,null,null,t)},ut.matchesSelector=function(e,t){if((e.ownerDocument||e)!==oe&&ie(e),t=t.replace(Je,"='$1']"),Y.matchesSelector&&se&&(!le||!le.test(t))&&(!ue||!ue.test(t)))try{var n=(void 0).call(e,t);if(n||Y.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return ut(t,oe,null,[e]).length>0},ut.contains=function(e,t){return(e.ownerDocument||e)!==oe&&ie(e),ce(e,t)},ut.attr=function(e,t){(e.ownerDocument||e)!==oe&&ie(e);var n=K.attrHandle[t.toLowerCase()],r=n&&Me.call(K.attrHandle,t.toLowerCase())?n(e,t,!se):void 0;return void 0!==r?r:Y.attributes||!se?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},ut.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ut.uniqueSort=function(e){var t,n=[],r=0,i=0;if(re=!Y.detectDuplicates,ne=!Y.sortStable&&e.slice(0),e.sort(Pe),re){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return ne=null,e},J=ut.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=J(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=J(t);return n},(K=ut.selectors={cacheLength:50,createPseudo:ct,match:Ze,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(at,st),e[3]=(e[3]||e[4]||e[5]||"").replace(at,st),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ut.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ut.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Ze.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&Ge.test(n)&&(t=Q(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(at,st).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=Re[e+" "];return t||(t=new RegExp("(^|"+Ue+")"+e+"("+Ue+"|$)"))&&Re(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Ie&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ut.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,d,h,p,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!u&&!s;if(g){if(o){for(;m;){for(f=t;f=f[m];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&y){for(h=(l=(c=g[Te]||(g[Te]={}))[e]||[])[0]===Ne&&l[1],d=l[0]===Ne&&l[2],f=h&&g.childNodes[h];f=++h&&f&&f[m]||(d=h=0)||p.pop();)if(1===f.nodeType&&++d&&f===t){c[e]=[Ne,h,d];break}}else if(y&&(l=(t[Te]||(t[Te]={}))[e])&&l[0]===Ne)d=l[1];else for(;(f=++h&&f&&f[m]||(d=h=0)||p.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++d||(y&&((f[Te]||(f[Te]={}))[e]=[Ne,d]),f!==t)););return(d-=i)===r||d%r==0&&d/r>=0}}},PSEUDO:function(e,t){var n,r=K.pseudos[e]||K.setFilters[e.toLowerCase()]||ut.error("unsupported pseudo: "+e);return r[Te]?r(t):r.length>1?(n=[e,e,"",t],K.setFilters.hasOwnProperty(e.toLowerCase())?ct(function(e,n){for(var i,o=r(e,t),a=o.length;a--;)e[i=We.call(e,o[a])]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ct(function(e){var t=[],n=[],r=Z(e.replace(Xe,"$1"));return r[Te]?ct(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:ct(function(e){return function(t){return ut(e,t).length>0}}),contains:ct(function(e){return e=e.replace(at,st),function(t){return(t.textContent||t.innerText||J(t)).indexOf(e)>-1}}),lang:ct(function(e){return Qe.test(e||"")||ut.error("unsupported lang: "+e),e=e.replace(at,st).toLowerCase(),function(t){var n;do{if(n=se?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===ae},focus:function(e){return e===oe.activeElement&&(!oe.hasFocus||oe.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!K.pseudos.empty(e)},header:function(e){return tt.test(e.nodeName)},input:function(e){return et.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[n<0?n+t:n]}),even:pt(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:pt(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=K.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})K.pseudos[X]=dt(X);for(X in{submit:!0,reset:!0})K.pseudos[X]=ht(X);function gt(){}function vt(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function yt(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=Ae++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,u,l=[Ne,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if((s=(u=t[Te]||(t[Te]={}))[r])&&s[0]===Ne&&s[1]===o)return l[2]=s[2];if(u[r]=l,l[2]=e(t,n,a))return!0}}}function bt(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function wt(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function xt(e,t,n,r,i,o){return r&&!r[Te]&&(r=xt(r)),i&&!i[Te]&&(i=xt(i,o)),ct(function(o,a,s,u){var l,c,f,d=[],h=[],p=a.length,m=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)ut(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),g=!e||!o&&t?m:wt(m,d,e,s,u),v=n?i||(o?e:p||r)?[]:a:g;if(n&&n(g,v,s,u),r)for(l=wt(v,h),r(l,[],s,u),c=l.length;c--;)(f=l[c])&&(v[h[c]]=!(g[h[c]]=f));if(o){if(i||e){if(i){for(l=[],c=v.length;c--;)(f=v[c])&&l.push(g[c]=f);i(null,v=[],l,u)}for(c=v.length;c--;)(f=v[c])&&(l=i?We.call(o,f):d[c])>-1&&(o[l]=!(a[l]=f))}}else v=wt(v===a?v.splice(p,v.length):v),i?i(null,a,v,u):ze.apply(a,v)})}function Ct(e){for(var t,n,r,i=e.length,o=K.relative[e[0].type],a=o||K.relative[" "],s=o?1:0,u=yt(function(e){return e===t},a,!0),l=yt(function(e){return We.call(t,e)>-1},a,!0),c=[function(e,n,r){return!o&&(r||n!==te)||((t=n).nodeType?u(e,n,r):l(e,n,r))}];s<i;s++)if(n=K.relative[e[s].type])c=[yt(bt(c),n)];else{if((n=K.filter[e[s].type].apply(null,e[s].matches))[Te]){for(r=++s;r<i&&!K.relative[e[r].type];r++);return xt(s>1&&bt(c),s>1&&vt(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(Xe,"$1"),n,s<r&&Ct(e.slice(s,r)),r<i&&Ct(e=e.slice(r)),r<i&&vt(e))}c.push(n)}return bt(c)}gt.prototype=K.filters=K.pseudos,K.setFilters=new gt,Q=ut.tokenize=function(e,t){var n,r,i,o,a,s,u,l=Oe[e+" "];if(l)return t?0:l.slice(0);for(a=e,s=[],u=K.preFilter;a;){for(o in n&&!(r=Ye.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=Ke.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(Xe," ")}),a=a.slice(n.length)),K.filter)!(r=Ze[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?ut.error(e):Oe(e,s).slice(0)},Z=ut.compile=function(e,t){var n,r=[],i=[],o=De[e+" "];if(!o){for(t||(t=Q(e)),n=t.length;n--;)(o=Ct(t[n]))[Te]?r.push(o):i.push(o);(o=De(e,function(e,t){var n=t.length>0,r=e.length>0,i=function(i,o,a,s,u){var l,c,f,d=0,h="0",p=i&&[],m=[],g=te,v=i||r&&K.find.TAG("*",u),y=Ne+=null==g?1:Math.random()||.1,b=v.length;for(u&&(te=o!==oe&&o);h!==b&&null!=(l=v[h]);h++){if(r&&l){for(c=0;f=e[c++];)if(f(l,o,a)){s.push(l);break}u&&(Ne=y)}n&&((l=!f&&l)&&d--,i&&p.push(l))}if(d+=h,n&&h!==d){for(c=0;f=t[c++];)f(p,m,o,a);if(i){if(d>0)for(;h--;)p[h]||m[h]||(m[h]=He.call(s));m=wt(m)}ze.apply(s,m),u&&!i&&m.length>0&&d+t.length>1&&ut.uniqueSort(s)}return u&&(Ne=y,te=g),p};return n?ct(i):i}(i,r))).selector=e}return o},ee=ut.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&Q(e=l.selector||e);if(n=n||[],1===c.length){if((o=c[0]=c[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&Y.getById&&9===t.nodeType&&se&&K.relative[o[1].type]){if(!(t=(K.find.ID(a.matches[0].replace(at,st),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=Ze.needsContext.test(e)?0:o.length;i--&&(a=o[i],!K.relative[s=a.type]);)if((u=K.find[s])&&(r=u(a.matches[0].replace(at,st),it.test(o[0].type)&&mt(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&vt(o)))return ze.apply(n,r),n;break}}return(l||Z(e,c))(r,t,!se,n,it.test(e)&&mt(t.parentNode)||t),n},Y.sortStable=Te.split("").sort(Pe).join("")===Te,Y.detectDuplicates=!!re,ie(),Y.sortDetached=!0;var _t=Array.isArray,St=function(e,t,n){var r,i;if(!e)return 0;if(n=n||e,void 0!==e.length){for(r=0,i=e.length;r<i;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1},kt=function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e))return r;return-1},Tt={isArray:_t,toArray:function(e){var t,n,r=e;if(!_t(e))for(r=[],t=0,n=e.length;t<n;t++)r[t]=e[t];return r},each:St,map:function(e,t){var n=[];return St(e,function(r,i){n.push(t(r,i,e))}),n},filter:function(e,t){var n=[];return St(e,function(r,i){t&&!t(r,i,e)||n.push(r)}),n},indexOf:function(e,t){var n,r;if(e)for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},reduce:function(e,t,n,r){var i=0;for(arguments.length<3&&(n=e[0]);i<e.length;i++)n=t.call(r,n,e[i],i);return n},findIndex:kt,find:function(e,t,n){var r=kt(e,t,n);if(-1!==r)return e[r]},last:function(e){return e[e.length-1]}},Et=/^\s*|\s*$/g,Nt=function(e){return null===e||void 0===e?"":(""+e).replace(Et,"")},At=function(e,t){return t?!("array"!==t||!Tt.isArray(e))||typeof e===t:void 0!==e},Rt=function(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),Tt.each(e,function(e,i){if(!1===t.call(r,e,i,n))return!1;Rt(e,t,n,r)}))},Ot={trim:Nt,isArray:Tt.isArray,is:At,toArray:Tt.toArray,makeMap:function(e,t,n){var r;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n},each:Tt.each,map:Tt.map,grep:Tt.filter,inArray:Tt.indexOf,hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},extend:function(e,t){for(var n,r,i,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var s,u=arguments;for(n=1,r=u.length;n<r;n++)for(i in t=u[n])t.hasOwnProperty(i)&&void 0!==(s=t[i])&&(e[i]=s);return e},create:function(e,t,n){var r,i,o,a,s,u=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],!(i=this.createNS(e[3].replace(/\.\w+$/,""),n))[o]){if("static"===e[2])return i[o]=t,void(this.onCreate&&this.onCreate(e[2],e[3],i[o]));t[o]||(t[o]=function(){},u=1),i[o]=t[o],this.extend(i[o].prototype,t),e[5]&&(r=this.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=i[o],i[o]=u?function(){return r[a].apply(this,arguments)}:function(){return this.parent=r[a],s.apply(this,arguments)},i[o].prototype[o]=i[o],this.each(r,function(e,t){i[o].prototype[t]=r[t]}),this.each(t,function(e,t){r[t]?i[o].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!==o&&(i[o].prototype[t]=e)})),this.each(t.static,function(e,t){i[o][t]=e})}},walk:Rt,createNS:function(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)t[r=e[n]]||(t[r]={}),t=t[r];return t},resolve:function(e,t){var n,r;for(t=t||window,n=0,r=(e=e.split(".")).length;n<r&&(t=t[e[n]]);n++);return t},explode:function(e,t){return!e||At(e,"array")?e:Tt.map(e.split(t||","),Nt)},_addCacheSuffix:function(e){var t=fe.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},Dt=document,Pt=Array.prototype.push,It=Array.prototype.slice,Bt=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Mt=ke.Event,Lt=Ot.makeMap("children,contents,next,prev"),Ht=function(e){return void 0!==e},Ft=function(e){return"string"==typeof e},zt=function(e,t){var n,r,i;for(i=(t=t||Dt).createElement("div"),n=t.createDocumentFragment(),i.innerHTML=e;r=i.firstChild;)n.appendChild(r);return n},jt=function(e,t,n,r){var i;if(Ft(t))t=zt(t,tn(e[0]));else if(t.length&&!t.nodeType){if(t=Jt.makeArray(t),r)for(i=t.length-1;i>=0;i--)jt(e,t[i],n,r);else for(i=0;i<t.length;i++)jt(e,t[i],n,r);return e}if(t.nodeType)for(i=e.length;i--;)n.call(e[i],t);return e},Wt=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},Ut=function(e,t,n){var r,i;return t=Jt(t)[0],e.each(function(){n&&r===this.parentNode?i.appendChild(this):(r=this.parentNode,i=t.cloneNode(!1),this.parentNode.insertBefore(i,this),i.appendChild(this))}),e},$t=Ot.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),qt=Ot.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Vt={for:"htmlFor",class:"className",readonly:"readOnly"},Xt={float:"cssFloat"},Yt={},Kt={},Jt=function(e,t){return new Jt.fn.init(e,t)},Gt=/^\s*|\s*$/g,Qt=function(e){return null===e||void 0===e?"":(""+e).replace(Gt,"")},Zt=function(e,t){var n,r,i,o;if(e)if(void 0===(n=e.length)){for(r in e)if(e.hasOwnProperty(r)&&(o=e[r],!1===t.call(o,r,o)))break}else for(i=0;i<n&&(o=e[i],!1!==t.call(o,i,o));i++);return e},en=function(e,t){var n=[];return Zt(e,function(e,r){t(r,e)&&n.push(r)}),n},tn=function(e){return e?9===e.nodeType?e:e.ownerDocument:Dt};Jt.fn=Jt.prototype={constructor:Jt,selector:"",context:null,length:0,init:function(e,t){var n,r;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(t&&t.nodeType)this.context=t;else{if(t)return Jt(e).attr(t);this.context=t=document}if(Ft(e)){if(this.selector=e,!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:Bt.exec(e)))return Jt(t).find(e);if(n[1])for(r=zt(e,tn(t)).firstChild;r;)Pt.call(this,r),r=r.nextSibling;else{if(!(r=tn(t).getElementById(n[2])))return this;if(r.id!==n[2])return this.find(e);this.length=1,this[0]=r}}else this.add(e,!1);return this},toArray:function(){return Ot.toArray(this)},add:function(e,t){var n,r;if(Ft(e))return this.add(Jt(e));if(!1!==t)for(n=Jt.unique(this.toArray().concat(Jt.makeArray(e))),this.length=n.length,r=0;r<n.length;r++)this[r]=n[r];else Pt.apply(this,Jt.makeArray(e));return this},attr:function(e,t){var n,r=this;if("object"==typeof e)Zt(e,function(e,t){r.attr(e,t)});else{if(!Ht(t)){if(r[0]&&1===r[0].nodeType){if((n=Yt[e])&&n.get)return n.get(r[0],e);if(qt[e])return r.prop(e)?e:void 0;null===(t=r[0].getAttribute(e,2))&&(t=void 0)}return t}this.each(function(){var n;if(1===this.nodeType){if((n=Yt[e])&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=Vt[e]||e))Zt(e,function(e,t){n.prop(e,t)});else{if(!Ht(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1===this.nodeType&&(this[e]=t)})}return n},css:function(e,t){var n,r,i=this,o=function(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})},a=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})};if("object"==typeof e)Zt(e,function(e,t){i.css(e,t)});else if(Ht(t))e=o(e),"number"!=typeof t||$t[e]||(t=t.toString()+"px"),i.each(function(){var n=this.style;if((r=Kt[e])&&r.set)r.set(this,t);else{try{this.style[Xt[e]||e]=t}catch(e){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(a(e)):n.removeAttribute(e))}});else{if(n=i[0],(r=Kt[e])&&r.get)return r.get(n);if(!n.ownerDocument.defaultView)return n.currentStyle?n.currentStyle[o(e)]:"";try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(a(e))}catch(e){return}}return i},remove:function(){for(var e,t=this.length;t--;)e=this[t],Mt.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this.length;t--;)for(e=this[t];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t;if(Ht(e)){t=this.length;try{for(;t--;)this[t].innerHTML=e}catch(n){Jt(this[t]).empty().append(e)}return this}return this[0]?this[0].innerHTML:""},text:function(e){var t;if(Ht(e)){for(t=this.length;t--;)"innerText"in this[t]?this[t].innerText=e:this[0].textContent=e;return this}return this[0]?this[0].innerText||this[0].textContent:""},append:function(){return jt(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return jt(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?jt(this,arguments,function(e){this.parentNode.insertBefore(e,this)}):this},after:function(){return this[0]&&this[0].parentNode?jt(this,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):this},appendTo:function(e){return Jt(e).append(this),this},prependTo:function(e){return Jt(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return Ut(this,e)},wrapAll:function(e){return Ut(this,e,!0)},wrapInner:function(e){return this.each(function(){Jt(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){Jt(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),Jt(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e?n:(-1!==e.indexOf(" ")?Zt(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,r){var i,o;(o=Wt(r,e))!==t&&(i=r.className,o?r.className=Qt((" "+i+" ").replace(" "+e+" "," ")):r.className+=i?" "+e:e)}),n)},hasClass:function(e){return Wt(this[0],e)},each:function(e){return Zt(this,e)},on:function(e,t){return this.each(function(){Mt.bind(this,e,t)})},off:function(e,t){return this.each(function(){Mt.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?Mt.fire(this,e.type,e):Mt.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new Jt(It.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;t<n;t++)Jt.find(e,this[t],r);return Jt(r)},filter:function(e){return Jt("function"==typeof e?en(this.toArray(),function(t,n){return e(n,t)}):Jt.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof Jt&&(e=e[0]),this.each(function(n,r){for(;r;){if("string"==typeof e&&Jt(r).is(e)){t.push(r);break}if(r===e){t.push(r);break}r=r.parentNode}}),Jt(t)},offset:function(e){var t,n,r,i,o=0,a=0;return e?this.css(e):((t=this[0])&&(r=(n=t.ownerDocument).documentElement,t.getBoundingClientRect&&(o=(i=t.getBoundingClientRect()).left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,a=i.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:o,top:a})},push:Pt,sort:[].sort,splice:[].splice},Ot.extend(Jt,{extend:Ot.extend,makeArray:function(e){return(t=e)&&t===t.window||e.nodeType?[e]:Ot.toArray(e);var t},inArray:function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},isArray:Ot.isArray,each:Zt,trim:Qt,grep:en,find:ut,expr:ut.selectors,unique:ut.uniqueSort,text:ut.getText,contains:ut.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!==t[r].nodeType&&t.splice(r,1);return 1===t.length?Jt.find.matchesSelector(t[0],e)?[t[0]]:[]:Jt.find.matches(e,t)}});var nn=function(e,t,n){var r=[],i=e[t];for("string"!=typeof n&&n instanceof Jt&&(n=n[0]);i&&9!==i.nodeType;){if(void 0!==n){if(i===n)break;if("string"==typeof n&&Jt(i).is(n))break}1===i.nodeType&&r.push(i),i=i[t]}return r},rn=function(e,t,n,r){var i=[];for(r instanceof Jt&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(void 0!==r){if(e===r)break;if("string"==typeof r&&Jt(e).is(r))break}i.push(e)}return i},on=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType===n)return e;return null};Zt({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return nn(e,"parentNode")},next:function(e){return on(e,"nextSibling",1)},prev:function(e){return on(e,"previousSibling",1)},children:function(e){return rn(e.firstChild,"nextSibling",1)},contents:function(e){return Ot.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){Jt.fn[e]=function(n){var r=[];return this.each(function(){var e=t.call(r,this,n,r);e&&(Jt.isArray(e)?r.push.apply(r,e):r.push(e))}),this.length>1&&(Lt[e]||(r=Jt.unique(r)),0===e.indexOf("parents")&&(r=r.reverse())),r=Jt(r),n?r.filter(n):r}}),Zt({parentsUntil:function(e,t){return nn(e,"parentNode",t)},nextUntil:function(e,t){return rn(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return rn(e,"previousSibling",1,t).slice(1)}},function(e,t){Jt.fn[e]=function(n,r){var i=[];return this.each(function(){var e=t.call(i,this,n,i);e&&(Jt.isArray(e)?i.push.apply(i,e):i.push(e))}),this.length>1&&(i=Jt.unique(i),0!==e.indexOf("parents")&&"prevUntil"!==e||(i=i.reverse())),i=Jt(i),r?i.filter(r):i}}),Jt.fn.is=function(e){return!!e&&this.filter(e).length>0},Jt.fn.init.prototype=Jt.fn,Jt.overrideDefaults=function(e){var t,n=function(r,i){return t=t||e(),0===arguments.length&&(r=t.element),i||(i=t.context),new n.fn.init(r,i)};return Jt.extend(n,this),n};var an=function(e,t,n){Zt(n,function(n,r){e[n]=e[n]||{},e[n][t]=r})};fe.ie&&fe.ie<8&&(an(Yt,"get",{maxlength:function(e){var t=e.maxLength;if(2147483647!==t)return t},size:function(e){var t=e.size;if(20!==t)return t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;if(0!==t.length)return t}}),an(Yt,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),fe.ie&&fe.ie<9&&(Xt.float="styleFloat",an(Kt,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),Jt.attrHooks=Yt,Jt.cssHooks=Kt;var sn,un=function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(null,arguments)),t}},ln=function(){return cn(0,0)},cn=function(e,t){return{major:e,minor:t}},fn=function(e,t){var n=String(t).toLowerCase();return 0===e.length?ln():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return cn(r(1),r(2))}(e,n)},dn=ln,hn=function(e,t){return function(){return t===e}},pn=function(e){var t=e.current;return{current:t,version:e.version,isEdge:hn("Edge",t),isChrome:hn("Chrome",t),isIE:hn("IE",t),isOpera:hn("Opera",t),isFirefox:hn("Firefox",t),isSafari:hn("Safari",t)}},mn=function(){return pn({current:void 0,version:dn()})},gn=pn,vn=(m.constant("Edge"),m.constant("Chrome"),m.constant("IE"),m.constant("Opera"),m.constant("Firefox"),m.constant("Safari"),function(e,t){return function(){return t===e}}),yn=function(e){var t=e.current;return{current:t,version:e.version,isWindows:vn("Windows",t),isiOS:vn("iOS",t),isAndroid:vn("Android",t),isOSX:vn("OSX",t),isLinux:vn("Linux",t),isSolaris:vn("Solaris",t),isFreeBSD:vn("FreeBSD",t)}},bn=function(){return yn({current:void 0,version:dn()})},wn=yn,xn=(m.constant("Windows"),m.constant("iOS"),m.constant("Android"),m.constant("Linux"),m.constant("OSX"),m.constant("Solaris"),m.constant("FreeBSD"),function(e,t){var n=String(t).toLowerCase();return L.find(e,function(e){return e.search(n)})}),Cn=function(e,t){return-1!==e.indexOf(t)},_n=function(e){return e.replace(/^\s+|\s+$/g,"")},Sn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,kn=function(e){return function(t){return Cn(t,e)}},Tn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Cn(e,"edge/")&&Cn(e,"chrome")&&Cn(e,"safari")&&Cn(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Sn],search:function(e){return Cn(e,"chrome")&&!Cn(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Cn(e,"msie")||Cn(e,"trident")}},{name:"Opera",versionRegexes:[Sn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:kn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:kn("firefox")},{name:"Safari",versionRegexes:[Sn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Cn(e,"safari")||Cn(e,"mobile/"))&&Cn(e,"applewebkit")}}],En=[{name:"Windows",search:kn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Cn(e,"iphone")||Cn(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:kn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:kn("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:kn("linux"),versionRegexes:[]},{name:"Solaris",search:kn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:kn("freebsd"),versionRegexes:[]}],Nn={browsers:m.constant(Tn),oses:m.constant(En)},An=function(e){var t=Nn.browsers(),n=Nn.oses(),r=function(e,t){return xn(e,t).map(function(e){var n=fn(e.versionRegexes,t);return{current:e.name,version:n}})}(t,e).fold(mn,gn),i=function(e,t){return xn(e,t).map(function(e){var n=fn(e.versionRegexes,t);return{current:e.name,version:n}})}(n,e).fold(bn,wn);return{browser:r,os:i,deviceType:function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!r,o=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,s=r||o||a&&!0===/mobile/i.test(n),u=e.isiOS()||e.isAndroid(),l=u&&!s,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:m.constant(r),isiPhone:m.constant(i),isTablet:m.constant(s),isPhone:m.constant(l),isTouch:m.constant(u),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:m.constant(c)}}(i,r,e)}},Rn={detect:un(function(){var e=navigator.userAgent;return An(e)})},On=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:m.constant(e)}},Dn={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return On(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return On(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return On(n)},fromDom:On,fromPoint:function(e,t,n){return x.from(e.dom().elementFromPoint(t,n)).map(On)}},Pn=function(e){return e.dom().nodeName.toLowerCase()},In=function(e){return e.dom().nodeType},Bn=function(e){return function(t){return In(t)===e}},Mn=Bn(1),Ln=Bn(3),Hn=Bn(9),Fn={name:Pn,type:In,value:function(e){return e.dom().nodeValue},isElement:Mn,isText:Ln,isDocument:Hn,isComment:function(e){return 8===In(e)||"#comment"===Pn(e)}},zn=void 0===(sn=Object.keys)?function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}:sn,jn=function(e,t){for(var n=zn(e),r=0,i=n.length;r<i;r++){var o=n[r];t(e[o],o,e)}},Wn=function(e,t){var n={};return jn(e,function(r,i){var o=t(r,i,e);n[o.k]=o.v}),n},Un=function(e,t){var n=[];return jn(e,function(e,r){n.push(t(e,r))}),n},$n=function(e){return Un(e,function(e){return e})},qn={bifilter:function(e,t){var n={},r={};return jn(e,function(e,i){(t(e,i)?n:r)[i]=e}),{t:n,f:r}},each:jn,map:function(e,t){return Wn(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},mapToArray:Un,tupleMap:Wn,find:function(e,t){for(var n=zn(e),r=0,i=n.length;r<i;r++){var o=n[r],a=e[o];if(t(a,o,e))return x.some(a)}return x.none()},keys:zn,values:$n,size:function(e){return $n(e).length}},Vn=function(e,t,n){if(!(_.isString(n)||_.isBoolean(n)||_.isNumber(n)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Xn=function(e,t,n){Vn(e.dom(),t,n)},Yn=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},Kn=Xn,Jn=function(e,t){var n=e.dom();qn.each(t,function(e,t){Vn(n,t,e)})},Gn=Yn,Qn=function(e,t){e.dom().removeAttribute(t)},Zn=un(function(){return er(Dn.fromDom(document))}),er=function(e){var t=e.dom().body;if(null===t||void 0===t)throw"Body is not available yet";return Dn.fromDom(t)},tr={body:Zn,getBody:er,inBody:function(e){var t=Fn.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)}},nr=function(e){return void 0!==e.style},rr=function(e,t){return nr(e)?e.style.getPropertyValue(t):""},ir=function(e,t){var n=e.dom();qn.each(t,function(e,t){!function(e,t,n){if(!_.isString(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);nr(e)&&e.style.setProperty(t,n)}(n,t,e)})},or=function(e,t){var n=e.dom(),r=window.getComputedStyle(n).getPropertyValue(t),i=""!==r||tr.inBody(e)?r:rr(n,t);return null===i?void 0:i},ar=function(e,t){var n=e.dom(),r=rr(n,t);return x.from(r).filter(function(e){return e.length>0})},sr=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return L.each(e,function(e,n){r[e]=m.constant(t[n])}),r}},ur=function(e,t){var n=[],r=function(e){return n.push(e),t(e)},i=t(e);do{i=i.bind(r)}while(i.isSome());return n},lr=function(e,t){return function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}(e,t,z.getOrDie("Node").DOCUMENT_POSITION_CONTAINED_BY)},cr=function(e){return 1!==e.nodeType&&9!==e.nodeType||0===e.childElementCount},fr={all:function(e,t){var n=void 0===t?document:t.dom();return cr(n)?[]:L.map(n.querySelectorAll(e),Dn.fromDom)},is:function(e,t){var n=e.dom();if(1!==n.nodeType)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},one:function(e,t){var n=void 0===t?document:t.dom();return cr(n)?x.none():x.from(n.querySelector(e)).map(Dn.fromDom)}},dr=function(e,t){return e.dom()===t.dom()},hr=Rn.detect().browser.isIE()?function(e,t){return lr(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},pr={eq:dr,isEqualNode:function(e,t){return e.dom().isEqualNode(t.dom())},member:function(e,t){return L.exists(t,m.curry(dr,e))},contains:hr,is:fr.is},mr=function(e){return Dn.fromDom(e.dom().ownerDocument)},gr=function(e){var t=e.dom();return x.from(t.parentNode).map(Dn.fromDom)},vr=function(e){var t=e.dom();return x.from(t.previousSibling).map(Dn.fromDom)},yr=function(e){var t=e.dom();return x.from(t.nextSibling).map(Dn.fromDom)},br=function(e){var t=e.dom();return L.map(t.childNodes,Dn.fromDom)},wr=function(e,t){var n=e.dom().childNodes;return x.from(n[t]).map(Dn.fromDom)},xr=(sr("element","offset"),mr),Cr=function(e){var t=e.dom().ownerDocument.defaultView;return Dn.fromDom(t)},_r=function(e){var t=mr(e);return Dn.fromDom(t.dom().documentElement)},Sr=gr,kr=function(e,t){for(var n=_.isFunction(t)?t:m.constant(!1),r=e.dom(),i=[];null!==r.parentNode&&void 0!==r.parentNode;){var o=r.parentNode,a=Dn.fromDom(o);if(i.push(a),!0===n(a))break;r=o}return i},Tr=vr,Er=yr,Nr=function(e){return ur(e,yr)},Ar=br,Rr=wr,Or=function(e){return wr(e,0)},Dr=function(e){return wr(e,e.dom().childNodes.length-1)},Pr=function(e){return e.dom().childNodes.length},Ir=Rn.detect().browser,Br=function(e){return L.find(e,Fn.isElement)},Mr={getPos:function(e,t,n){var r,i,o=0,a=0,s=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===or(Dn.fromDom(e),"position"))return{x:o=(i=t.getBoundingClientRect()).left+(s.documentElement.scrollLeft||e.scrollLeft)-s.documentElement.clientLeft,y:a=i.top+(s.documentElement.scrollTop||e.scrollTop)-s.documentElement.clientTop};for(r=t;r&&r!==n&&r.nodeType;)o+=r.offsetLeft||0,a+=r.offsetTop||0,r=r.offsetParent;for(r=t.parentNode;r&&r!==n&&r.nodeType;)o-=r.scrollLeft||0,a-=r.scrollTop||0,r=r.parentNode;a+=function(e){return Ir.isFirefox()&&"table"===Fn.name(e)?Br(Ar(e)).filter(function(e){return"caption"===Fn.name(e)}).bind(function(e){return Br(Nr(e)).map(function(t){var n=t.dom().offsetTop,r=e.dom().offsetTop,i=e.dom().offsetHeight;return n<=r?-i:0})}).getOr(0):0}(Dn.fromDom(t))}return{x:o,y:a}}},Lr=function(e){var t=x.none(),n=[],r=function(e){i()?o(e):n.push(e)},i=function(){return t.isSome()},o=function(e){t.each(function(t){setTimeout(function(){e(t)},0)})};return e(function(e){t=x.some(e),function(e){L.each(e,o)}(n),n=[]}),{get:r,map:function(e){return Lr(function(t){r(function(n){t(e(n))})})},isReady:i}},Hr={nu:Lr,pure:function(e){return Lr(function(t){t(e)})}},Fr=function(e){var t=function(t){e(function(e){return function(){var t=Array.prototype.slice.call(arguments),n=this;setTimeout(function(){e.apply(n,t)},0)}}(t))};return{map:function(e){return Fr(function(n){t(function(t){var r=e(t);n(r)})})},bind:function(e){return Fr(function(n){t(function(t){e(t).get(n)})})},anonBind:function(e){return Fr(function(n){t(function(t){e.get(n)})})},toLazy:function(){return Hr.nu(t)},get:t}},zr={nu:Fr,pure:function(e){return Fr(function(t){t(e)})}},jr=function(e){return function(e,t){return t(function(t){var n=[],r=0;0===e.length?t([]):L.each(e,function(i,o){i.get(function(i){return function(o){n[i]=o,++r>=e.length&&t(n)}}(o))})})}(e,zr.nu)},Wr={par:jr,mapM:function(e,t){var n=L.map(e,t);return jr(n)},compose:function(e,t){return function(n){return t(n).bind(e)}}},Ur=function(e){return{is:function(t){return e===t},isValue:m.always,isError:m.never,getOr:m.constant(e),getOrThunk:m.constant(e),getOrDie:m.constant(e),or:function(t){return Ur(e)},orThunk:function(t){return Ur(e)},fold:function(t,n){return n(e)},map:function(t){return Ur(t(e))},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return x.some(e)}}},$r=function(e){return{is:m.never,isValue:m.never,isError:m.always,getOr:m.identity,getOrThunk:function(e){return e()},getOrDie:function(){return m.die(String(e))()},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return $r(e)},each:m.noop,bind:function(t){return $r(e)},exists:m.never,forall:m.always,toOption:x.none}},qr={value:Ur,error:$r};function Vr(e,t){var n=e,r=function(e,n,r,i){var o,a;if(e){if(!i&&e[n])return e[n];if(e!==t){if(o=e[r])return o;for(a=e.parentNode;a&&a!==t;a=a.parentNode)if(o=a[r])return o}}};this.current=function(){return n},this.next=function(e){return n=r(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=r(n,"lastChild","previousSibling",e)},this.prev2=function(e){return n=function(e,n,r,i){var o,a,s;if(e){if(o=e.previousSibling,t&&o===t)return;if(o){if(!i)for(s=o[n];s;s=s[n])if(!s[n])return s;return o}if((a=e.parentNode)&&a!==t)return a}}(n,"lastChild",0,e)}}var Xr,Yr,Kr,Jr=function(e){var t;return function(n){return(t=t||L.mapToObject(e,m.constant(!0))).hasOwnProperty(Fn.name(n))}},Gr=Jr(["h1","h2","h3","h4","h5","h6"]),Qr=Jr(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Zr=function(e){return Fn.isElement(e)&&!Qr(e)},ei=function(e){return Fn.isElement(e)&&"br"===Fn.name(e)},ti=Jr(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),ni=Jr(["ul","ol","dl"]),ri=Jr(["li","dd","dt"]),ii=Jr(["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"]),oi=Jr(["thead","tbody","tfoot"]),ai=Jr(["td","th"]),si=function(e){return function(t){return!!t&&t.nodeType===e}},ui=si(1),li=function(e){var t=e.toLowerCase().split(" ");return function(e){var n,r;if(e&&e.nodeType)for(r=e.nodeName.toLowerCase(),n=0;n<t.length;n++)if(r===t[n])return!0;return!1}},ci=function(e){return function(t){if(ui(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},fi=si(3),di=si(8),hi=si(9),pi=li("br"),mi=ci("true"),gi=ci("false"),vi={isText:fi,isElement:ui,isComment:di,isDocument:hi,isBr:pi,isContentEditableTrue:mi,isContentEditableFalse:gi,matchNodeNames:li,hasPropValue:function(e,t){return function(n){return ui(n)&&n[e]===t}},hasAttribute:function(e,t){return function(t){return ui(t)&&t.hasAttribute(e)}},hasAttributeValue:function(e,t){return function(n){return ui(n)&&n.getAttribute(e)===t}},matchStyleValues:function(e,t){var n=t.toLowerCase().split(" ");return function(t){var r;if(ui(t))for(r=0;r<n.length;r++){var i=t.ownerDocument.defaultView.getComputedStyle(t,null);if((i?i.getPropertyValue(e):null)===n[r])return!0}return!1}},isBogus:function(e){return ui(e)&&e.hasAttribute("data-mce-bogus")},isBogusAll:function(e){return ui(e)&&"all"===e.getAttribute("data-mce-bogus")},isTable:function(e){return ui(e)&&"TABLE"===e.tagName}},yi=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},bi=function(e,t){var n,r=t.childNodes;if(!vi.isElement(t)||!yi(t)){for(n=r.length-1;n>=0;n--)bi(e,r[n]);if(!1===vi.isDocument(t)){if(vi.isText(t)&&t.nodeValue.length>0){var i=Ot.trim(t.nodeValue).length;if(e.isBlock(t.parentNode)||i>0)return;if(0===i&&function(e){var t=e.previousSibling&&"SPAN"===e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"===e.nextSibling.nodeName;return t&&n}(t))return}else if(vi.isElement(t)&&(1===(r=t.childNodes).length&&yi(r[0])&&t.parentNode.insertBefore(r[0],t),r.length||ii(Dn.fromDom(t))))return;e.remove(t)}return t}},wi={trimNode:bi},xi=Ot.makeMap,Ci=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_i=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Si=/[<>&\"\']/g,ki=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Ti={128:"â¬",130:"â",131:"Æ",132:"â",133:"â¦",134:"â ",135:"â¡",136:"Ë",137:"â°",138:"Å ",139:"â¹",140:"Å",142:"Å½",145:"â",146:"â",147:"â",148:"â",149:"â¢",150:"â",151:"â",152:"Ë",153:"â¢",154:"Å¡",155:"âº",156:"Å",158:"Å¾",159:"Å¸"};Yr={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Kr={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var Ei=function(e,t){var n,r,i,o={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),Yr[r]||(i="&"+e[n+1]+";",o[r]=i,o[i]=r);return o}};Xr=Ei("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var Ni=function(e,t){return e.replace(t?Ci:_i,function(e){return Yr[e]||e})},Ai=function(e,t){return e.replace(t?Ci:_i,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":Yr[e]||"&#"+e.charCodeAt(0)+";"})},Ri=function(e,t,n){return n=n||Xr,e.replace(t?Ci:_i,function(e){return Yr[e]||n[e]||e})},Oi={encodeRaw:Ni,encodeAllRaw:function(e){return(""+e).replace(Si,function(e){return Yr[e]||e})},encodeNumeric:Ai,encodeNamed:Ri,getEncodeFunc:function(e,t){var n=Ei(t)||Xr,r=xi(e.replace(/\+/g,","));return r.named&&r.numeric?function(e,t){return e.replace(t?Ci:_i,function(e){return void 0!==Yr[e]?Yr[e]:void 0!==n[e]?n[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})}:r.named?t?function(e,t){return Ri(e,t,n)}:Ri:r.numeric?Ai:Ni},decode:function(e){return e.replace(ki,function(e,t){return t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):Ti[t]||String.fromCharCode(t):Kr[e]||Xr[e]||(n=e,(r=Dn.fromTag("div").dom()).innerHTML=n,r.textContent||r.innerText||n);var n,r})}},Di={},Pi={},Ii=Ot.makeMap,Bi=Ot.each,Mi=Ot.extend,Li=Ot.explode,Hi=Ot.inArray,Fi=function(e,t){return(e=Ot.trim(e))?e.split(t||" "):[]},zi=function(e){var t,n,r,i,o,a,s={},u=function(e,n,r){var i,o,a,u=function(e,t){var n,r,i={};for(n=0,r=e.length;n<r;n++)i[e[n]]=t||{};return i};for(r=r||[],n=n||"","string"==typeof r&&(r=Fi(r)),i=(e=Fi(e)).length;i--;)a={attributes:u(o=Fi([t,n].join(" "))),attributesOrder:o,children:u(r,Pi)},s[e[i]]=a},l=function(e,t){var n,r,i,o;for(n=(e=Fi(e)).length,t=Fi(t);n--;)for(r=s[e[n]],i=0,o=t.length;i<o;i++)r.attributes[t[i]]={},r.attributesOrder.push(t[i])};return Di[e]?Di[e]:(t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure header footer hgroup section nav",r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==e&&(t+=" xml:lang",r=[r,a="acronym applet basefont big font strike tt"].join(" "),Bi(Fi(a),function(e){u(e,"",r)}),n=[n,o="center dir isindex noframes"].join(" "),i=[n,r].join(" "),Bi(Fi(o),function(e){u(e,"",i)})),i=i||[n,r].join(" "),u("html","manifest","head body"),u("head","","base command link meta noscript script style title"),u("title hr noscript br"),u("base","href target"),u("link","href rel media hreflang type sizes hreflang"),u("meta","name http-equiv content charset"),u("style","media type scoped"),u("script","src async defer type charset"),u("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",i),u("address dt dd div caption","",i),u("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r),u("blockquote","cite",i),u("ol","reversed start type","li"),u("ul","","li"),u("li","value",i),u("dl","","dt dd"),u("a","href target rel media hreflang type",r),u("q","cite",r),u("ins del","cite datetime",i),u("img","src sizes srcset alt usemap ismap width height"),u("iframe","src name width height",i),u("embed","src type width height"),u("object","data type typemustmatch name usemap form width height",[i,"param"].join(" ")),u("param","name value"),u("map","name",[i,"area"].join(" ")),u("area","alt coords shape href target rel media hreflang type"),u("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),u("colgroup","span","col"),u("col","span"),u("tbody thead tfoot","","tr"),u("tr","","td th"),u("td","colspan rowspan headers",i),u("th","colspan rowspan headers scope abbr",i),u("form","accept-charset action autocomplete enctype method name novalidate target",i),u("fieldset","disabled form name",[i,"legend"].join(" ")),u("label","form for",r),u("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),u("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?i:r),u("select","disabled form multiple name required size","option optgroup"),u("optgroup","disabled label","option"),u("option","disabled label selected value"),u("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),u("menu","type label",[i,"li"].join(" ")),u("noscript","",i),"html4"!==e&&(u("wbr"),u("ruby","",[r,"rt rp"].join(" ")),u("figcaption","",i),u("mark rt rp summary bdi","",r),u("canvas","width height",i),u("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[i,"track source"].join(" ")),u("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[i,"track source"].join(" ")),u("picture","","img source"),u("source","src srcset type media sizes"),u("track","kind src srclang label default"),u("datalist","",[r,"option"].join(" ")),u("article section nav aside header footer","",i),u("hgroup","","h1 h2 h3 h4 h5 h6"),u("figure","",[i,"figcaption"].join(" ")),u("time","datetime",r),u("dialog","open",i),u("command","type label icon disabled checked radiogroup command"),u("output","for form name",r),u("progress","value max",r),u("meter","value min max low high optimum",r),u("details","open",[i,"summary"].join(" ")),u("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==e&&(l("script","language xml:space"),l("style","xml:space"),l("object","declare classid code codebase codetype archive standby align border hspace vspace"),l("embed","align name hspace vspace"),l("param","valuetype type"),l("a","charset name rev shape coords"),l("br","clear"),l("applet","codebase archive code object alt name width height align hspace vspace"),l("img","name longdesc align border hspace vspace"),l("iframe","longdesc frameborder marginwidth marginheight scrolling align"),l("font basefont","size color face"),l("input","usemap align"),l("select","onchange"),l("textarea"),l("h1 h2 h3 h4 h5 h6 div p legend caption","align"),l("ul","type compact"),l("li","type"),l("ol dl menu dir","compact"),l("pre","width xml:space"),l("hr","align noshade size width"),l("isindex","prompt"),l("table","summary width frame rules cellspacing cellpadding align bgcolor"),l("col","width align char charoff valign"),l("colgroup","width align char charoff valign"),l("thead","align char charoff valign"),l("tr","align char charoff valign bgcolor"),l("th","axis align char charoff valign nowrap bgcolor width height"),l("form","accept"),l("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),l("tfoot","align char charoff valign"),l("tbody","align char charoff valign"),l("area","nohref"),l("body","background bgcolor text link vlink alink")),"html4"!==e&&(l("input button select textarea","autofocus"),l("input textarea","placeholder"),l("a","download"),l("link script img","crossorigin"),l("iframe","sandbox seamless allowfullscreen")),Bi(Fi("a form meter progress dfn"),function(e){s[e]&&delete s[e].children[e]}),delete s.caption.children.table,delete s.script,Di[e]=s,s)},ji=function(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),Bi(e,function(e,r){n[r]=n[r.toUpperCase()]="map"===t?Ii(e,/[, ]/):Li(e,/[, ]/)})),n};function Wi(e){var t,n,r,i,o,a,s,u,l,c,f,d,h,p={},m={},g=[],v={},y={},b=function(t,n,r){var i=e[t];return i?i=Ii(i,/[, ]/,Ii(i.toUpperCase(),/[, ]/)):(i=Di[t])||(i=Ii(n," ",Ii(n.toUpperCase()," ")),i=Mi(i,r),Di[t]=i),i};r=zi((e=e||{}).schema),!1===e.verify_html&&(e.valid_elements="*[*]"),t=ji(e.valid_styles),n=ji(e.invalid_styles,"map"),u=ji(e.valid_classes,"map"),i=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),o=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),a=b("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),s=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),c=b("non_empty_elements","td th iframe video audio object script pre code",a),f=b("move_caret_before_on_enter_elements","table",c),d=b("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),l=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",d),h=b("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),Bi((e.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(e){y[e]=new RegExp("</"+e+"[^>]*>","gi")});var w=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},x=function(e){var t,n,r,i,o,a,s,u,l,c,f,d,h,m,v,y,b,x,C,_=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,S=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,k=/[*?+]/;if(e)for(e=Fi(e,","),p["@"]&&(y=p["@"].attributes,b=p["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(o=_.exec(e[t])){if(m=o[1],l=o[2],v=o[3],u=o[5],a={attributes:d={},attributesOrder:h=[]},"#"===m&&(a.paddEmpty=!0),"-"===m&&(a.removeEmpty=!0),"!"===o[4]&&(a.removeEmptyAttrs=!0),y){for(x in y)d[x]=y[x];h.push.apply(h,b)}if(u)for(r=0,i=(u=Fi(u,"|")).length;r<i;r++)if(o=S.exec(u[r])){if(s={},f=o[1],c=o[2].replace(/[\\:]:/g,":"),m=o[3],C=o[4],"!"===f&&(a.attributesRequired=a.attributesRequired||[],a.attributesRequired.push(c),s.required=!0),"-"===f){delete d[c],h.splice(Hi(h,c),1);continue}m&&("="===m&&(a.attributesDefault=a.attributesDefault||[],a.attributesDefault.push({name:c,value:C}),s.defaultValue=C),":"===m&&(a.attributesForced=a.attributesForced||[],a.attributesForced.push({name:c,value:C}),s.forcedValue=C),"<"===m&&(s.validValues=Ii(C,"?"))),k.test(c)?(a.attributePatterns=a.attributePatterns||[],s.pattern=w(c),a.attributePatterns.push(s)):(d[c]||h.push(c),d[c]=s)}y||"@"!==l||(y=d,b=h),v&&(a.outputName=l,p[v]=a),k.test(l)?(a.pattern=w(l),g.push(a)):p[l]=a}},C=function(e){p={},g=[],x(e),Bi(r,function(e,t){m[t]=e.children})},_=function(e){var t=/^(~)?(.+)$/;e&&(Di.text_block_elements=Di.block_elements=null,Bi(Fi(e,","),function(e){var n=t.exec(e),r="~"===n[1],i=r?"span":"div",o=n[2];if(m[o]=m[i],v[o]=i,r||(l[o.toUpperCase()]={},l[o]={}),!p[o]){var a=p[i];delete(a=Mi({},a)).removeEmptyAttrs,delete a.removeEmpty,p[o]=a}Bi(m,function(e,t){e[i]&&(m[t]=e=Mi({},m[t]),e[o]=e[i])})}))},S=function(t){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;Di[e.schema]=null,t&&Bi(Fi(t,","),function(e){var t,r,i=n.exec(e);i&&(r=i[1],t=r?m[i[2]]:m[i[2]]={"#comment":{}},t=m[i[2]],Bi(Fi(i[3],"|"),function(e){"-"===r?delete t[e]:t[e]={}}))})},k=function(e){var t,n=p[e];if(n)return n;for(t=g.length;t--;)if((n=g[t]).pattern.test(e))return n};return e.valid_elements?C(e.valid_elements):(Bi(r,function(e,t){p[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},m[t]=e.children}),"html5"!==e.schema&&Bi(Fi("strong/b em/i"),function(e){e=Fi(e,"/"),p[e[1]].outputName=e[0]}),Bi(Fi("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){p[e]&&(p[e].removeEmpty=!0)}),Bi(Fi("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(e){p[e].paddEmpty=!0}),Bi(Fi("span"),function(e){p[e].removeEmptyAttrs=!0})),_(e.custom_elements),S(e.valid_children),x(e.extended_valid_elements),S("+ol[ul|ol],+ul[ul|ol]"),Bi({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){p[t]&&(p[t].parentsRequired=Fi(e))}),e.invalid_elements&&Bi(Li(e.invalid_elements),function(e){p[e]&&delete p[e]}),k("span")||x("span[!data-mce-type|*]"),{children:m,elements:p,getValidStyles:function(){return t},getValidClasses:function(){return u},getBlockElements:function(){return l},getInvalidStyles:function(){return n},getShortEndedElements:function(){return a},getTextBlockElements:function(){return d},getTextInlineElements:function(){return h},getBoolAttrs:function(){return s},getElementRule:k,getSelfClosingElements:function(){return o},getNonEmptyElements:function(){return c},getMoveCaretBeforeOnEnterElements:function(){return f},getWhiteSpaceElements:function(){return i},getSpecialElements:function(){return y},isValidChild:function(e,t){var n=m[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:function(e,t){var n,r,i=k(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;if(n=i.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},getCustomElements:function(){return v},addValidElements:x,setValidElements:C,addCustomElements:_,addValidChildren:S}}var Ui=function(e,t,n,r){var i=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+i(t)+i(n)+i(r)};function $i(e,t){var n,r,i,o,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,u=/\s*([^:]+):\s*([^;]+);?/g,l=/\s+$/,c={};for(e=e||{},t&&(i=t.getValidStyles(),o=t.getInvalidStyles()),r="\\\" \\' \\; \\: ; : \ufeff".split(" "),n=0;n<r.length;n++)c[r[n]]="\ufeff"+n,c["\ufeff"+n]=r[n];return{toHex:function(e){return e.replace(a,Ui)},parse:function(t){var r,i,o,f,d,h,p,m,g={},v=e.url_converter,y=e.url_converter_scope||this,b=function(e,t,r){var i,o,a,s;if((i=g[e+"-top"+t])&&(o=g[e+"-right"+t])&&(a=g[e+"-bottom"+t])&&(s=g[e+"-left"+t])){var u=[i,o,a,s];for(n=u.length-1;n--&&u[n]===u[n+1];);n>-1&&r||(g[e+t]=-1===n?u[0]:u.join(" "),delete g[e+"-top"+t],delete g[e+"-right"+t],delete g[e+"-bottom"+t],delete g[e+"-left"+t])}},w=function(e){var t,n=g[e];if(n){for(t=(n=n.split(" ")).length;t--;)if(n[t]!==n[0])return!1;return g[e]=n[0],!0}},x=function(e){return f=!0,c[e]},C=function(e,t){return f&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return c[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},_=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},S=function(e){return e.replace(/\\[0-9a-f]+/gi,_)},k=function(t,n,r,i,o,a){if(o=o||a)return"'"+(o=C(o)).replace(/\'/g,"\\'")+"'";if(n=C(n||r||i),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return v&&(n=v.call(y,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,x).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,x)});r=u.exec(t);)if(u.lastIndex=r.index+r[0].length,i=r[1].replace(l,"").toLowerCase(),o=r[2].replace(l,""),i&&o){if(i=S(i),o=S(o),-1!==i.indexOf("\ufeff")||-1!==i.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"===i||/expression\s*\(|\/\*|\*\//.test(o)))continue;"font-weight"===i&&"700"===o?o="bold":"color"!==i&&"background-color"!==i||(o=o.toLowerCase()),o=(o=o.replace(a,Ui)).replace(s,k),g[i]=f?C(o,!0):o}b("border","",!0),b("border","-width"),b("border","-color"),b("border","-style"),b("padding",""),b("margin",""),d="border",p="border-style",m="border-color",w(h="border-width")&&w(p)&&w(m)&&(g[d]=g[h]+" "+g[p]+" "+g[m],delete g[h],delete g[p],delete g[m]),"medium none"===g.border&&delete g.border,"none"===g["border-image"]&&delete g["border-image"]}return g},serialize:function(e,t){var n,r,a="",s=function(t){var n,r,o,s;if(n=i[t])for(r=0,o=n.length;r<o;r++)t=n[r],(s=e[t])&&(a+=(a.length>0?" ":"")+t+": "+s+";")},u=function(e,t){var n;return!((n=o["*"])&&n[e]||(n=o[t])&&n[e])};if(t&&i)s("*"),s(t);else for(n in e)!(r=e[n])||o&&!u(n,t)||(a+=(a.length>0?" ":"")+n+": "+r+";");return a}}}var qi=Ot.each,Vi=Ot.grep,Xi=fe.ie,Yi=/^([a-z0-9],?)+$/i,Ki=/^[ \t\r\n]*$/,Ji=function(e,t,n){var r={},i=t.keep_values,o={set:function(e,r,i){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||n(),r,i,e[0])),e.attr("data-mce-"+i,r).attr(i,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}};return r={style:{set:function(e,t){null===t||"object"!=typeof t?(i&&e.attr("data-mce-style",t),e.attr("style",t)):e.css(t)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return e.serialize(e.parse(n),t[0].nodeName)}}},i&&(r.href=r.src=o),r},Gi=function(e,t){var n=t.attr("style"),r=e.serialize(e.parse(n),t[0].nodeName);r||(r=null),t.attr("data-mce-style",r)},Qi=function(e,t){var n,r,i=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!==r||r!==n&&e.nodeValue.length)&&(i++,n=r);return i};function Zi(e,t){var n,r=this;void 0===t&&(t={});var i={},o=window,a={},s=0,u=function(e,t){var n,r=0,i={};n=(t=t||{}).maxLoadTime||5e3;var o=function(t){e.getElementsByTagName("head")[0].appendChild(t)},a=function(t,a,s){var u,l,c,f,d=function(){for(var e=f.passed,t=e.length;t--;)e[t]();f.status=2,f.passed=[],f.failed=[]},h=function(){for(var e=f.failed,t=e.length;t--;)e[t]();f.status=3,f.passed=[],f.failed=[]},p=function(e,t){e()||((new Date).getTime()-c<n?ge.setTimeout(t):h())},m=function(){p(function(){for(var t,n,r=e.styleSheets,i=r.length;i--;)if((n=(t=r[i]).ownerNode?t.ownerNode:t.owningElement)&&n.id===u.id)return d(),!0},m)},g=function(){p(function(){try{var e=l.sheet.cssRules;return d(),!!e}catch(e){}},g)};if(t=Ot._addCacheSuffix(t),i[t]?f=i[t]:(f={passed:[],failed:[]},i[t]=f),a&&f.passed.push(a),s&&f.failed.push(s),1!==f.status)if(2!==f.status)if(3!==f.status){if(f.status=1,(u=e.createElement("link")).rel="stylesheet",u.type="text/css",u.id="u"+r++,u.async=!1,u.defer=!1,c=(new Date).getTime(),"onload"in u&&!((v=navigator.userAgent.match(/WebKit\/(\d*)/))&&parseInt(v[1],10)<536))u.onload=m,u.onerror=h;else{if(navigator.userAgent.indexOf("Firefox")>0)return(l=e.createElement("style")).textContent='@import "'+t+'"',g(),void o(l);m()}var v;o(u),u.href=t}else h();else d()},s=function(e){return zr.nu(function(t){a(e,m.compose(t,m.constant(qr.value(e))),m.compose(t,m.constant(qr.error(e))))})},u=function(e){return e.fold(m.identity,m.identity)};return{load:a,loadAll:function(e,t,n){Wr.par(L.map(e,s)).get(function(e){var r=L.partition(e,function(e){return e.isValue()});r.fail.length>0?n(r.fail.map(u)):t(r.pass.map(u))})}}}(e),l=[],c=t.schema?t.schema:Wi({}),f=$i({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),d=t.ownEvents?new ke(t.proxy):ke.Event,h=c.getBlockElements(),p=Jt.overrideDefaults(function(){return{context:e,element:U.getRoot()}}),g=function(t){if(t&&e&&"string"==typeof t){var n=e.getElementById(t);return n&&n.id!==t?e.getElementsByName(t)[1]:n}return t},v=function(e){return"string"==typeof e&&(e=g(e)),p(e)},y=function(e,t,r){var i,o,a=v(e);return a.length&&(o=(i=n[t])&&i.get?i.get(a,t):a.attr(t)),void 0===o&&(o=r||""),o},b=function(e){var t=g(e);return t?t.attributes:[]},w=function(e,r,i){var o,a;""===i&&(i=null);var s=v(e);o=s.attr(r),s.length&&((a=n[r])&&a.set?a.set(s,i,r):s.attr(r,i),o!==i&&t.onSetAttrib&&t.onSetAttrib({attrElm:s,attrName:r,attrValue:i}))},x=function(){return t.root_element||e.body},C=function(t,n){return Mr.getPos(e.body,g(t),n)},_=function(e,t,n){var r=v(e);return n?r.css(t):("float"===(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}))&&(t=fe.ie&&fe.ie<12?"styleFloat":"cssFloat"),r[0]&&r[0].style?r[0].style[t]:void 0)},S=function(e){var t,n;return e=g(e),t=_(e,"width"),n=_(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},k=function(e,t){var n;if(!e)return!1;if(!Array.isArray(e)){if("*"===t)return 1===e.nodeType;if(Yi.test(t)){var r=t.toLowerCase().split(/,/),i=e.nodeName.toLowerCase();for(n=r.length-1;n>=0;n--)if(r[n]===i)return!0;return!1}if(e.nodeType&&1!==e.nodeType)return!1}var o=Array.isArray(e)?e:[e];return ut(t,o[0].ownerDocument||o[0],null,o).length>0},T=function(e,t,n,r){var i,o=[],a=g(e);for(r=void 0===r,n=n||("BODY"!==x().nodeName?x().parentNode:null),Ot.is(t,"string")&&(i=t,t="*"===t?function(e){return 1===e.nodeType}:function(e){return k(e,i)});a&&a!==n&&a.nodeType&&9!==a.nodeType;){if(!t||"function"==typeof t&&t(a)){if(!r)return[a];o.push(a)}a=a.parentNode}return r?o:null},E=function(e,t,n){var r=t;if(e)for("string"==typeof t&&(r=function(e){return k(e,t)}),e=e[n];e;e=e[n])if("function"==typeof r&&r(e))return e;return null},N=function(e,t,n){var i,o="string"==typeof e?g(e):e;if(!o)return!1;if(Ot.isArray(o)&&(o.length||0===o.length))return i=[],qi(o,function(e,r){e&&("string"==typeof e&&(e=g(e)),i.push(t.call(n,e,r)))}),i;var a=n||r;return t.call(a,o)},A=function(e,t){v(e).each(function(e,n){qi(t,function(e,t){w(n,t,e)})})},R=function(e,t){var n=v(e);Xi?n.each(function(e,n){if(!1!==n.canHaveHTML){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br>"+t,n.removeChild(n.firstChild)}catch(e){Jt("<div></div>").html("<br>"+t).contents().slice(1).appendTo(n)}return t}}):n.html(t)},O=function(t,n,r,i,o){return N(t,function(t){var a="string"==typeof n?e.createElement(n):n;return A(a,r),i&&("string"!=typeof i&&i.nodeType?a.appendChild(i):"string"==typeof i&&R(a,i)),o?a:t.appendChild(a)})},D=function(t,n,r){return O(e.createElement(t),t,n,r,!0)},P=Oi.decode,I=Oi.encodeAllRaw,B=function(e,t){var n=v(e);return t?n.each(function(){for(var e;e=this.firstChild;)3===e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():n.remove(),n.length>1?n.toArray():n[0]},M=function(e,t,n){v(e).toggleClass(t,n).each(function(){""===this.className&&Jt(this).attr("class",null)})},H=function(e,t,n){return N(t,function(t){return Ot.is(t,"array")&&(e=e.cloneNode(!0)),n&&qi(Vi(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},F=function(){return e.createRange()},z=function(n,r,i,a){if(Ot.isArray(n)){for(var s=n.length;s--;)n[s]=z(n[s],r,i,a);return n}return!t.collect||n!==e&&n!==o||l.push([n,r,i,a]),d.bind(n,r,i,a||U)},j=function(t,n,r){var i;if(Ot.isArray(t)){for(i=t.length;i--;)t[i]=j(t[i],n,r);return t}if(l&&(t===e||t===o))for(i=l.length;i--;){var a=l[i];t!==a[0]||n&&n!==a[1]||r&&r!==a[2]||d.unbind(a[0],a[1],a[2])}return d.unbind(t,n,r)},W=function(e){if(e&&vi.isElement(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},U={doc:e,settings:t,win:o,files:a,stdMode:!0,boxModel:!0,styleSheetLoader:u,boundEvents:l,styles:f,schema:c,events:d,isBlock:function(e){if("string"==typeof e)return!!h[e];if(e){var t=e.nodeType;if(t)return!(1!==t||!h[e.nodeName])}return!1},$:p,$$:v,root:null,clone:function(t,n){if(!Xi||1!==t.nodeType||n)return t.cloneNode(n);if(!n){var r=e.createElement(t.nodeName);return qi(b(t),function(e){w(r,e.nodeName,y(t,e.nodeName))}),r}return null},getRoot:x,getViewPort:function(e){var t=e||o,n=t.document.documentElement;return{x:t.pageXOffset||n.scrollLeft,y:t.pageYOffset||n.scrollTop,w:t.innerWidth||n.clientWidth,h:t.innerHeight||n.clientHeight}},getRect:function(e){var t,n;return e=g(e),t=C(e),n=S(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:S,getParent:function(e,t,n){var r=T(e,t,n,!1);return r&&r.length>0?r[0]:null},getParents:T,get:g,getNext:function(e,t){return E(e,t,"nextSibling")},getPrev:function(e,t){return E(e,t,"previousSibling")},select:function(n,r){return ut(n,g(r)||t.root_element||e,[])},is:k,add:O,create:D,createHTML:function(e,t,n){var r,i="";for(r in i+="<"+e,t)t.hasOwnProperty(r)&&null!==t[r]&&void 0!==t[r]&&(i+=" "+r+'="'+I(t[r])+'"');return void 0!==n?i+">"+n+"</"+e+">":i+" />"},createFragment:function(t){var n,r=e.createElement("div"),i=e.createDocumentFragment();for(t&&(r.innerHTML=t);n=r.firstChild;)i.appendChild(n);return i},remove:B,setStyle:function(e,n,r){var i=v(e).css(n,r);t.update_styles&&Gi(f,i)},getStyle:_,setStyles:function(e,n){var r=v(e).css(n);t.update_styles&&Gi(f,r)},removeAllAttribs:function(e){return N(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:w,setAttribs:A,getAttrib:y,getPos:C,parseStyle:function(e){return f.parse(e)},serializeStyle:function(e,t){return f.serialize(e,t)},addStyle:function(t){var n,r;if(U!==Zi.DOM&&e===document){if(i[t])return;i[t]=!0}(r=e.getElementById("mceDefaultStyles"))||((r=e.createElement("style")).id="mceDefaultStyles",r.type="text/css",(n=e.getElementsByTagName("head")[0]).firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)),r.styleSheet?r.styleSheet.cssText+=t:r.appendChild(e.createTextNode(t))},loadCSS:function(t){var n;U===Zi.DOM||e!==document?(t||(t=""),n=e.getElementsByTagName("head")[0],qi(t.split(","),function(e){var t;e=Ot._addCacheSuffix(e),a[e]||(a[e]=!0,t=D("link",{rel:"stylesheet",href:e}),n.appendChild(t))})):Zi.DOM.loadCSS(t)},addClass:function(e,t){v(e).addClass(t)},removeClass:function(e,t){M(e,t,!1)},hasClass:function(e,t){return v(e).hasClass(t)},toggleClass:M,show:function(e){v(e).show()},hide:function(e){v(e).hide()},isHidden:function(e){return"none"===v(e).css("display")},uniqueId:function(e){return(e||"mce_")+s++},setHTML:R,getOuterHTML:function(e){var t="string"==typeof e?g(e):e;return vi.isElement(t)?t.outerHTML:Jt("<div></div>").append(Jt(t).clone()).html()},setOuterHTML:function(e,t){v(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}B(Jt(this).html(t),!0)})},decode:P,encode:I,insertAfter:function(e,t){var n=g(t);return N(e,function(e){var t,r;return t=n.parentNode,(r=n.nextSibling)?t.insertBefore(e,r):t.appendChild(e),e})},replace:H,rename:function(e,t){var n;return e.nodeName!==t.toUpperCase()&&(n=D(t),qi(b(e),function(t){w(n,t.nodeName,y(e,t.nodeName))}),H(n,e,!0)),n||e},findCommonAncestor:function(e,t){for(var n,r=e;r;){for(n=t;n&&r!==n;)n=n.parentNode;if(r===n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:function(e){return f.toHex(Ot.trim(e))},run:N,getAttribs:b,isEmpty:function(e,t){var n,r,i,o,a,s,u=0;if(e=e.firstChild){a=new Vr(e,e.parentNode),t=t||(c?c.getNonEmptyElements():null),o=c?c.getWhiteSpaceElements():{};do{if(i=e.nodeType,vi.isElement(e)){var l=e.getAttribute("data-mce-bogus");if(l){e=a.next("all"===l);continue}if(s=e.nodeName.toLowerCase(),t&&t[s]){if("br"===s){u++,e=a.next();continue}return!1}for(n=(r=b(e)).length;n--;)if("name"===(s=r[n].nodeName)||"data-mce-bookmark"===s)return!1}if(8===i)return!1;if(3===i&&!Ki.test(e.nodeValue))return!1;if(3===i&&e.parentNode&&o[e.parentNode.nodeName]&&Ki.test(e.nodeValue))return!1;e=a.next()}while(e)}return u<=1},createRng:F,nodeIndex:Qi,split:function(e,t,n){var r,i,o,a=F();if(e&&t)return a.setStart(e.parentNode,Qi(e)),a.setEnd(t.parentNode,Qi(t)),r=a.extractContents(),(a=F()).setStart(t.parentNode,Qi(t)+1),a.setEnd(e.parentNode,Qi(e)+1),i=a.extractContents(),(o=e.parentNode).insertBefore(wi.trimNode(U,r),e),n?o.insertBefore(n,e):o.insertBefore(t,e),o.insertBefore(wi.trimNode(U,i),e),B(e),n||t},bind:z,unbind:j,fire:function(e,t,n){return d.fire(e,t,n)},getContentEditable:W,getContentEditableParent:function(e){for(var t=x(),n=null;e&&e!==t&&null===(n=W(e));e=e.parentNode);return n},destroy:function(){if(l)for(var e=l.length;e--;){var t=l[e];d.unbind(t[0],t[1],t[2])}ut.setDocument&&ut.setDocument()},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}};return n=Ji(f,t,function(){return U}),U}!function(e){e.DOM=e(document),e.nodeIndex=Qi}(Zi||(Zi={}));var eo=Zi,to=eo.DOM,no=Ot.each,ro=Ot.grep,io=function(e){return"function"==typeof e},oo=function(){var e={},t=[],n={},r=[],i=0;this.isDone=function(t){return 2===e[t]},this.markDone=function(t){e[t]=2},this.add=this.load=function(r,i,o,a){void 0===e[r]&&(t.push(r),e[r]=0),i&&(n[r]||(n[r]=[]),n[r].push({success:i,failure:a,scope:o||this}))},this.remove=function(t){delete e[t],delete n[t]},this.loadQueue=function(e,n,r){this.loadScripts(t,e,n,r)},this.loadScripts=function(t,o,a,s){var u,l=[],c=function(e,t){no(n[t],function(t){io(t[e])&&t[e].call(t.scope)}),n[t]=void 0};r.push({success:o,failure:s,scope:a||this}),(u=function(){var n=ro(t);if(t.length=0,no(n,function(t){2!==e[t]?3!==e[t]?1!==e[t]&&(e[t]=1,i++,function(e,t,n){var r,i,o=to,a=function(){o.remove(i),r&&(r.onreadystatechange=r.onload=r=null),t()};i=o.uniqueId(),(r=document.createElement("script")).id=i,r.type="text/javascript",r.src=Ot._addCacheSuffix(e),"onreadystatechange"in r?r.onreadystatechange=function(){/loaded|complete/.test(r.readyState)&&a()}:r.onload=a,r.onerror=function(){io(n)?n():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(r)}(t,function(){e[t]=2,i--,c("success",t),u()},function(){e[t]=3,i--,l.push(t),c("failure",t),u()})):c("failure",t):c("success",t)}),!i){var o=r.slice(0);r.length=0,no(o,function(e){0===l.length?io(e.success)&&e.success.call(e.scope):io(e.failure)&&e.failure.call(e.scope,l)})}})()}};oo.ScriptLoader=new oo;var ao=Ot.each;function so(){var e=this,t=[],n={},r={},i=[],o=function(e){var t;return r[e]&&(t=r[e].dependencies),t||[]},a=function(e,t){return"object"==typeof t?t:"string"==typeof e?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}},s=function(e,t,n){var r=o(name);ao(r,function(t){var n=a(e,t);u(n.resource,n,void 0,void 0)}),t&&(n?t.call(n):t.call(oo))},u=function(e,t,i,o,a){if(!n[e]){var u="string"==typeof t?t:t.prefix+t.resource+t.suffix;0!==u.indexOf("/")&&-1===u.indexOf("://")&&(u=so.baseURL+"/"+u),n[e]=u.substring(0,u.lastIndexOf("/")),r[e]?s(t,i,o):oo.ScriptLoader.add(u,function(){return s(t,i,o)},o,a)}};return{items:t,urls:n,lookup:r,_listeners:i,get:function(e){if(r[e])return r[e].instance},dependencies:o,requireLangPack:function(e,t){var r=so.language;if(r&&!1!==so.languageLoad){if(t)if(-1!==(t=","+t+",").indexOf(","+r.substr(0,2)+","))r=r.substr(0,2);else if(-1===t.indexOf(","+r+","))return;oo.ScriptLoader.add(n[e]+"/langs/"+r+".js")}},add:function(e,n,o){t.push(n),r[e]={instance:n,dependencies:o};var a=L.partition(i,function(t){return t.name===e});return i=a.fail,ao(a.pass,function(e){e.callback()}),n},remove:function(e){delete n[e],delete r[e]},createUrl:a,addComponents:function(t,n){var r=e.urls[t];ao(n,function(e){oo.ScriptLoader.add(r+"/"+e)})},load:u,waitFor:function(e,t){r.hasOwnProperty(e)?t():i.push({name:e,callback:t})}}}!function(e){e.PluginManager=e(),e.ThemeManager=e()}(so||(so={}));var uo="\ufeff",lo=function(e){return e.replace(new RegExp("\ufeff","g"),"")},co=vi.isElement,fo=vi.isText,ho=function(e){return fo(e)&&(e=e.parentNode),co(e)&&e.hasAttribute("data-mce-caret")},po=function(e){return fo(e)&&function(e){return"\ufeff"===e}(e.data)},mo=function(e){return ho(e)||po(e)},go=function(e){return e.firstChild!==e.lastChild||!vi.isBr(e.firstChild)},vo=function(e){var t=e.container();return e&&vi.isText(t)&&t.data.charAt(e.offset())===uo},yo=function(e){var t=e.container();return e&&vi.isText(t)&&t.data.charAt(e.offset()-1)===uo},bo=function(e){return fo(e)&&e.data[0]===uo},wo=function(e){return fo(e)&&e.data[e.data.length-1]===uo},xo=function(e){return e&&e.hasAttribute("data-mce-caret")?(n=(t=e.getElementsByTagName("br"))[t.length-1],vi.isBogus(n)&&n.parentNode.removeChild(n),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null;var t,n},Co=vi.isContentEditableTrue,_o=vi.isContentEditableFalse,So=vi.isBr,ko=vi.isText,To=vi.matchNodeNames("script style textarea"),Eo=vi.matchNodeNames("img input textarea hr iframe video audio object"),No=vi.matchNodeNames("table"),Ao=mo,Ro=function(e){return!Ao(e)&&(ko(e)?!To(e.parentNode):Eo(e)||So(e)||No(e)||Oo(e))},Oo=function(e){return!1===function(e){return vi.isElement(e)&&"true"===e.getAttribute("unselectable")}(e)&&_o(e)},Do=function(e,t){return Ro(e)&&function(e,t){for(e=e.parentNode;e&&e!==t;e=e.parentNode){if(Oo(e))return!1;if(Co(e))return!0}return!0}(e,t)},Po=Math.round,Io=function(e){return e?{left:Po(e.left),top:Po(e.top),bottom:Po(e.bottom),right:Po(e.right),width:Po(e.width),height:Po(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},Bo=function(e,t){return e=Io(e),t?e.right=e.left:(e.left=e.left+e.width,e.right=e.left),e.width=0,e},Mo=function(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2},Lo=function(e,t){return e.bottom-e.height/2<t.top||!(e.top>t.bottom)&&Mo(t.top-e.bottom,e,t)},Ho=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&Mo(t.bottom-e.top,e,t)},Fo=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},zo=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},jo=new RegExp("[Ì-Í¯Ò-ÒÒ-ÒÖ-Ö½Ö¿×-××-××Ø-ØÙ-ÙÙ°Û-ÛÛ-Û¤Û§-Û¨Ûª-Û­ÜÜ°-ÝÞ¦-Þ°ß«-ß³à -à à -à £à ¥-à §à ©-à ­à¡-à¡à££-à¤à¤ºà¤¼à¥-à¥à¥à¥-à¥à¥¢-à¥£à¦à¦¼à¦¾à§-à§à§à§à§¢-à§£à¨-à¨à¨¼à©-à©à©-à©à©-à©à©à©°-à©±à©µàª-àªàª¼à«-à«à«-à«à«à«¢-à«£à¬à¬¼à¬¾à¬¿à­-à­à­à­à­à­¢-à­£à®à®¾à¯à¯à¯à°à°¾-à±à±-à±à±-à±à±-à±à±¢-à±£à²à²¼à²¿à³à³à³-à³à³-à³à³¢-à³£à´à´¾àµ-àµàµàµàµ¢-àµ£à·à·à·-à·à·à·à¸±à¸´-à¸ºà¹-à¹àº±àº´-àº¹àº»-àº¼à»-à»à¼-à¼à¼µà¼·à¼¹à½±-à½¾à¾-à¾à¾-à¾à¾-à¾à¾-à¾¼à¿á­-á°á²-á·á¹-áºá½-á¾á-áá-á á±-á´áá-áááá-áá-áá²-á´á-áá²-á³á´-áµá·-á½áá-ááá -á á¢©á¤ -á¤¢á¤§-á¤¨á¤²á¤¹-á¤»á¨-á¨á¨á©á©-á©á© á©¢á©¥-á©¬á©³-á©¼á©¿áª°-áª½áª¾á¬-á¬á¬´á¬¶-á¬ºá¬¼á­á­«-á­³á®-á®á®¢-á®¥á®¨-á®©á®«-á®­á¯¦á¯¨-á¯©á¯­á¯¯-á¯±á°¬-á°³á°¶-á°·á³-á³á³-á³ á³¢-á³¨á³­á³´á³¸-á³¹á·-á·µá·¼-á·¿â-ââ-ââ-â â¡â¢-â¤â¥-â°â³¯-â³±âµ¿â· -â·¿ãª-ã­ã®-ã¯ã-ãê¯ê°-ê²ê´-ê½ê-êê°-ê±ê ê ê ê ¥-ê ¦ê£ê£ -ê£±ê¤¦-ê¤­ê¥-ê¥ê¦-ê¦ê¦³ê¦¶-ê¦¹ê¦¼ê§¥ê¨©-ê¨®ê¨±-ê¨²ê¨µ-ê¨¶ê©ê©ê©¼êª°êª²-êª´êª·-êª¸êª¾-êª¿ê«ê«¬-ê«­ê«¶ê¯¥ê¯¨ê¯­ï¬ï¸-ï¸ï¸ -ï¸¯ï¾-ï¾]"),Wo=function(e){return"string"==typeof e&&e.charCodeAt(0)>=768&&jo.test(e)},Uo=[].slice,$o=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Uo.call(arguments);return r.length-1>=e.length?e.apply(this,r.slice(1)):function(){var e=r.concat([].slice.call(arguments));return $o.apply(this,e)}},qo={constant:function(e){return function(){return e}},negate:function(e){return function(t){return!e(t)}},and:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Uo.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(!n[t](e))return!1;return!0}},or:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Uo.call(arguments);return function(e){for(var t=0;t<n.length;t++)if(n[t](e))return!0;return!1}},curry:$o,compose:function(e,t){return function(n){return e(t(n))}},noop:function(){}},Vo=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];if(!i.isSome())return x.none();n.push(i.getOrDie())}return x.some(t.apply(null,n))},Xo=vi.isElement,Yo=Ro,Ko=vi.matchStyleValues("display","block table"),Jo=vi.matchStyleValues("float","left right"),Go=qo.and(Xo,Yo,qo.negate(Jo)),Qo=qo.negate(vi.matchStyleValues("white-space","pre pre-line pre-wrap")),Zo=vi.isText,ea=vi.isBr,ta=eo.nodeIndex,na=zo,ra=function(e){return"createRange"in e?e.createRange():eo.DOM.createRng()},ia=function(e){return e&&/[\r\n\t ]/.test(e)},oa=function(e){return!!e.setStart&&!!e.setEnd},aa=function(e){var t,n=e.startContainer,r=e.startOffset;return!!(ia(e.toString())&&Qo(n.parentNode)&&vi.isText(n)&&(t=n.data,ia(t[r-1])||ia(t[r+1])))},sa=function(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},ua=function(e){var t,n;return t=(n=e.getClientRects()).length>0?Io(n[0]):Io(e.getBoundingClientRect()),!oa(e)&&ea(e)&&sa(t)?function(e){var t,n=e.ownerDocument,r=ra(n),i=n.createTextNode("Â "),o=e.parentNode;return o.insertBefore(i,e),r.setStart(i,0),r.setEnd(i,1),t=Io(r.getBoundingClientRect()),o.removeChild(i),t}(e):sa(t)&&oa(e)?function(e){var t=e.startContainer,n=e.endContainer,r=e.startOffset,i=e.endOffset;if(t===n&&vi.isText(n)&&0===r&&1===i){var o=e.cloneRange();return o.setEndAfter(n),ua(o)}return null}(e):t},la=function(e,t){var n=Bo(e,t);return n.width=1,n.right=n.left+1,n},ca=function(e){var t,n,r=[],i=function(e){var t,n;0!==e.height&&(r.length>0&&(t=e,n=r[r.length-1],t.left===n.left&&t.top===n.top&&t.bottom===n.bottom&&t.right===n.right)||r.push(e))},o=function(e,t){var n=ra(e.ownerDocument);if(t<e.data.length){if(Wo(e.data[t]))return r;if(Wo(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!aa(n)))return i(la(ua(n),!1)),r}t>0&&(n.setStart(e,t-1),n.setEnd(e,t),aa(n)||i(la(ua(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),aa(n)||i(la(ua(n),!0)))};if(Zo(e.container()))return o(e.container(),e.offset()),r;if(Xo(e.container()))if(e.isAtEnd())n=na(e.container(),e.offset()),Zo(n)&&o(n,n.data.length),Go(n)&&!ea(n)&&i(la(ua(n),!1));else{if(n=na(e.container(),e.offset()),Zo(n)&&o(n,0),Go(n)&&e.isAtEnd())return i(la(ua(n),!1)),r;t=na(e.container(),e.offset()-1),Go(t)&&!ea(t)&&(Ko(t)||Ko(n)||!Go(n))&&i(la(ua(t),!1)),Go(n)&&i(la(ua(n),!0))}return r};function fa(e,t,n){var r=function(){return n||(n=ca(fa(e,t))),n};return{container:qo.constant(e),offset:qo.constant(t),toRange:function(){var n;return(n=ra(e.ownerDocument)).setStart(e,t),n.setEnd(e,t),n},getClientRects:r,isVisible:function(){return r().length>0},isAtStart:function(){return Zo(e),0===t},isAtEnd:function(){return Zo(e)?t>=e.data.length:t>=e.childNodes.length},isEqual:function(n){return n&&e===n.container()&&t===n.offset()},getNode:function(n){return na(e,n?t-1:t)}}}!function(e){e.fromRangeStart=function(t){return e(t.startContainer,t.startOffset)},e.fromRangeEnd=function(t){return e(t.endContainer,t.endOffset)},e.after=function(t){return e(t.parentNode,ta(t)+1)},e.before=function(t){return e(t.parentNode,ta(t))},e.isAbove=function(e,t){return Vo([L.head(t.getClientRects()),L.last(e.getClientRects())],Lo).getOr(!1)},e.isBelow=function(e,t){return Vo([L.last(t.getClientRects()),L.head(e.getClientRects())],Ho).getOr(!1)},e.isAtStart=function(e){return!!e&&e.isAtStart()},e.isAtEnd=function(e){return!!e&&e.isAtEnd()},e.isTextPosition=function(e){return!!e&&vi.isText(e.container())},e.isElementPosition=function(t){return!1===e.isTextPosition(t)}}(fa||(fa={}));var da,ha=fa,pa=vi.isElement,ma=vi.isText,ga=function(e){var t=e.parentNode;t&&t.removeChild(e)},va=function(e,t){0===t.length?ga(e):e.nodeValue=t},ya=function(e){var t=lo(e);return{count:e.length-t.length,text:t}},ba=function(e,t){return wa(e),t},wa=function(e){if(pa(e)&&mo(e)&&(go(e)?e.removeAttribute("data-mce-caret"):ga(e)),ma(e)){var t=lo(function(e){try{return e.nodeValue}catch(e){return""}}(e));va(e,t)}},xa={removeAndReposition:function(e,t){return ha.isTextPosition(t)?function(e,t){return ma(e)&&t.container()===e?function(e,t){var n=ya(e.data.substr(0,t.offset())),r=ya(e.data.substr(t.offset())),i=n.text+r.text;return i.length>0?(va(e,i),ha(e,t.offset()-n.count)):t}(e,t):ba(e,t)}(e,t):function(e,t){return t.container()===e.parentNode?function(e,t){var n=t.container(),r=L.indexOf(L.from(n.childNodes),e).map(function(e){return e<t.offset()?ha(n,t.offset()-1):t}).getOr(t);return wa(e),r}(e,t):ba(e,t)}(e,t)},remove:wa},Ca=function(e){return ha.isTextPosition(e)?0===e.offset():Ro(e.getNode())},_a=function(e){if(ha.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return Ro(e.getNode(!0))},Sa=function(e,t){return!ha.isTextPosition(e)&&!ha.isTextPosition(t)&&e.getNode()===t.getNode(!0)},ka=function(e,t,n){var r=ou(t);return x.from(e?r.next(n):r.prev(n))},Ta=function(e,t){var n,r=e?t.firstChild:t.lastChild;return vi.isText(r)?x.some(ha(r,e?0:r.data.length)):r?Ro(r)?x.some(e?ha.before(r):(n=r,vi.isBr(n)?ha.before(n):ha.after(n))):function(e,t,n){var r=e?ha.before(n):ha.after(n);return ka(e,t,r)}(e,t,r):x.none()},Ea={fromPosition:ka,nextPosition:m.curry(ka,!0),prevPosition:m.curry(ka,!1),navigate:function(e,t,n){return ka(e,t,n).bind(function(r){return Ps(n,r,t)&&function(e,t,n){return e?!Sa(t,n)&&(r=t,!(!ha.isTextPosition(r)&&vi.isBr(r.getNode())))&&_a(t)&&Ca(n):!Sa(n,t)&&Ca(t)&&_a(n);var r}(e,n,r)?ka(e,t,r):x.some(r)})},positionIn:Ta,firstPositionIn:m.curry(Ta,!0),lastPositionIn:m.curry(Ta,!1)},Na=vi.isContentEditableTrue,Aa=vi.isContentEditableFalse,Ra=function(e,t,n,r,i){return t._selectionOverrides.showCaret(e,n,r,i)},Oa=function(e,t){return e.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:function(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t}(t)},Da=function(e,t,n){var r=zs(1,e.getBody(),t),i=ha.fromRangeStart(r),o=i.getNode();if(Aa(o))return Ra(1,e,o,!i.isAtEnd(),!1);var a=i.getNode(!0);if(Aa(a))return Ra(1,e,a,!1,!1);var s=e.dom.getParent(i.getNode(),function(e){return Aa(e)||Na(e)});return Aa(s)?Ra(1,e,s,!1,n):null},Pa=function(e,t,n){return t&&t.collapsed&&Da(e,t,n)||t};!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(da||(da={}));var Ia,Ba=function(e,t){return e===Ia.Backwards?t.reverse():t},Ma=function(e,t,n){return e===Ia.Forwards?t.next(n):t.prev(n)},La=function(e,t,n,r){return vi.isBr(r.getNode(t===Ia.Forwards))?da.Br:!1===Ps(n,r)?da.Block:da.Wrap},Ha=function(e,t,n,r){for(var i,o=ou(n),a=r,s=[];a&&(i=Ma(t,o,a));){if(vi.isBr(i.getNode(!1)))return t===Ia.Forwards?{positions:Ba(t,s).concat([i]),breakType:da.Br,breakAt:x.some(i)}:{positions:Ba(t,s),breakType:da.Br,breakAt:x.some(i)};if(i.isVisible()){if(e(a,i)){var u=La(0,t,a,i);return{positions:Ba(t,s),breakType:u,breakAt:x.some(i)}}s.push(i),a=i}else a=i}return{positions:Ba(t,s),breakType:da.Eol,breakAt:x.none()}},Fa=function(e,t,n,r){return t(n,r).breakAt.map(function(r){var i=t(n,r).positions;return e===Ia.Backwards?i.concat(r):[r].concat(i)}).getOr([])},za=function(e,t){return L.foldl(e,function(e,n){return e.fold(function(){return x.some(n)},function(r){return Vo([L.head(r.getClientRects()),L.head(n.getClientRects())],function(e,i){var o=Math.abs(t-e.left);return Math.abs(t-i.left)<=o?n:r}).or(e)})},x.none())},ja=function(e,t){return L.head(t.getClientRects()).bind(function(t){return za(e,t.left)})},Wa=m.curry(Ha,fa.isAbove,-1),Ua=m.curry(Ha,fa.isBelow,1),$a=m.curry(Fa,-1,Wa),qa=m.curry(Fa,1,Ua),Va=function(e,t){return fr.all(t,e)},Xa=function(e,t,n,r,i){var o=Va(Dn.fromDom(n),"td,th").map(function(e){return e.dom()});return function(e,t,n){return L.foldl(e,function(e,r){return e.fold(function(){return x.some(r)},function(e){var i=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n)),o=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n));return x.some(o<i?r:e)})},x.none())}(L.filter(function(e,t){return L.bind(t,function(t){var n=function(e,t){return{left:e.left-t,top:e.top-t,right:e.right+-2,bottom:e.bottom+-2,width:e.width+t,height:e.height+t}}(t.getBoundingClientRect(),-1);return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]})}(e,o),function(e){return t(e,i)}),r,i).map(function(e){return e.cell})},Ya=m.curry(Xa,function(e){return e.bottom},function(e,t){return e.y<t}),Ka=m.curry(Xa,function(e){return e.top},function(e,t){return e.y>t}),Ja=function(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}},Ga=function(e,t,n){var r=e.getParam(t,n);if(-1!==r.indexOf("=")){var i=e.getParam(t,"","hash");return i.hasOwnProperty(e.id)?i[e.id]:n}return r},Qa=function(e){return e.getParam("content_security_policy","")},Za=function(e){if(e.getParam("force_p_newlines",!1))return"p";var t=e.getParam("forced_root_block","p");return!1===t?"":t},es=function(e){return e.getParam("forced_root_block_attrs",{})},ts=function(e,t){Sr(e).each(function(n){n.dom().insertBefore(t.dom(),e.dom())})},ns=function(e,t){e.dom().appendChild(t.dom())},rs=ts,is=function(e,t){Er(e).fold(function(){Sr(e).each(function(e){ns(e,t)})},function(e){ts(e,t)})},os=ns,as=Rn.detect().browser,ss=function(){return as.isIE()||as.isEdge()||as.isFirefox()},us=function(e,t){e.selection.setRng(t),function(e,t){L.head(fa.fromRangeStart(t).getClientRects()).each(function(t){var n,r,i=function(e,t){return t.left>e.left&&t.right<e.right?0:t.left<e.left?t.left-e.left:t.right-e.right}(n=function(e){if(e.inline)return e.getBody().getBoundingClientRect();var t=e.getWin();return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight}}(e),r=t),o=function(e,t){return t.top>e.top&&t.bottom<e.bottom?0:t.top<e.top?t.top-e.top:t.bottom-e.bottom}(n,r);!function(e,t,n){e.inline?(e.getBody().scrollLeft+=t,e.getBody().scrollTop+=n):e.getWin().scrollBy(t,n)}(e,0!==i?i>0?i+4:i-4:0,0!==o?o>0?o+4:o-4:0)})}(e,t)},ls=function(e,t,n){var r=e(t,n);return r.breakType===da.Wrap&&0===r.positions.length?r.breakAt.map(function(n){return e(t,n).breakAt.isNone()}).getOr(!0):r.breakAt.isNone()},cs=qo.curry(ls,Wa),fs=qo.curry(ls,Ua),ds=function(e,t,n){var r=function(e,t){var n=t.getNode(e);return vi.isElement(n)&&"TABLE"===n.nodeName?x.some(n):x.none()}(!!t,n),i=!1===t;r.fold(function(){return us(e,n.toRange())},function(r){return Ea.positionIn(i,e.getBody()).filter(function(e){return e.isEqual(n)}).fold(function(){return us(e,n.toRange())},function(i){return function(e,t,n,r){var i=Za(t);i?t.undoManager.transact(function(){var r=Dn.fromTag(i);Jn(r,es(t)),os(r,Dn.fromTag("br")),e?is(Dn.fromDom(n),r):rs(Dn.fromDom(n),r);var o=t.dom.createRng();o.setStart(r.dom(),0),o.setEnd(r.dom(),0),us(t,o)}):us(t,r.toRange())}(t,e,r,n)})})},hs=function(e,t,n,r){var i=e.selection.getRng(),o=ha.fromRangeStart(i),a=e.getBody();if(!t&&cs(r,o)){var s=function(e,t,n){return function(e,t){return L.head(t.getClientRects()).bind(function(t){return Ya(e,t.left,t.top)}).bind(function(e){return ja((n=e,Ea.lastPositionIn(n).map(function(e){return Wa(n,e).positions.concat(e)}).getOr([])),t);var n})}(t,n).orThunk(function(){return L.head(n.getClientRects()).bind(function(n){return za($a(e,ha.before(t)),n.left)})}).getOr(ha.before(t))}(a,n,o);return ds(e,t,s),!0}return!(!t||!fs(r,o)||(s=function(e,t,n){return function(e,t){return L.last(t.getClientRects()).bind(function(t){return Ka(e,t.left,t.top)}).bind(function(e){return ja((n=e,Ea.firstPositionIn(n).map(function(e){return[e].concat(Ua(n,e).positions)}).getOr([])),t);var n})}(t,n).orThunk(function(){return L.head(n.getClientRects()).bind(function(n){return za(qa(e,ha.after(t)),n.left)})}).getOr(ha.after(t))}(a,n,o),ds(e,t,s),0))},ps=function(e,t){return function(){return x.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(n){return x.from(e.dom.getParent(n,"table")).map(function(n){return function(e,t,n,r){var i=e.selection.getRng(),o=t?1:-1;if(ss()&&function(e,t,n){var r=ha.fromRangeStart(t);return Ea.positionIn(!e,n).map(function(e){return e.isEqual(r)}).getOr(!1)}(t,i,n)){var a=Ra(o,e,n,!t,!0);return us(e,a),!0}return!1}(e,t,n)})}).getOr(!1)}},ms=function(e,t){return function(){return x.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(function(n){return x.from(e.dom.getParent(n,"table")).map(function(r){return hs(e,t,r,n)})}).getOr(!1)}},gs=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return gs(n())}}},vs=vi.isContentEditableFalse,ys=function(e,t,n){var r,i,o,a,s,u=Bo(t.getBoundingClientRect(),n);return"BODY"===e.tagName?(r=e.ownerDocument.documentElement,i=e.scrollLeft||r.scrollLeft,o=e.scrollTop||r.scrollTop):(s=e.getBoundingClientRect(),i=e.scrollLeft-s.left,o=e.scrollTop-s.top),u.left+=i,u.right+=i,u.top+=o,u.bottom+=o,u.width=1,(a=t.offsetWidth-t.clientWidth)>0&&(n&&(a*=-1),u.left+=a,u.right+=a),u},bs=function(e,t,n){var r,i,o=gs(x.none()),a=function(){!function(e){var t,n,r,i,o;for(t=Jt("*[contentEditable=false]",e),i=0;i<t.length;i++)r=(n=t[i]).previousSibling,wo(r)&&(1===(o=r.data).length?r.parentNode.removeChild(r):r.deleteData(o.length-1,1)),r=n.nextSibling,bo(r)&&(1===(o=r.data).length?r.parentNode.removeChild(r):r.deleteData(0,1))}(e),i&&(xa.remove(i),i=null),o.get().each(function(e){Jt(e.caret).remove(),o.set(x.none())}),clearInterval(r)},s=function(){r=ge.setInterval(function(){n()?Jt("div.mce-visual-caret",e).toggleClass("mce-visual-caret-hidden"):Jt("div.mce-visual-caret",e).addClass("mce-visual-caret-hidden")},500)};return{show:function(n,r){var u,l,c;if(a(),c=r,vi.isElement(c)&&/^(TD|TH)$/i.test(c.tagName))return null;if(!t(r))return i=function(e,t){var n,r,i;if(r=e.ownerDocument.createTextNode(uo),i=e.parentNode,t){if(n=e.previousSibling,fo(n)){if(mo(n))return n;if(wo(n))return n.splitText(n.data.length-1)}i.insertBefore(r,e)}else{if(n=e.nextSibling,fo(n)){if(mo(n))return n;if(bo(n))return n.splitText(1),n}e.nextSibling?i.insertBefore(r,e.nextSibling):i.appendChild(r)}return r}(r,n),l=r.ownerDocument.createRange(),vs(i.nextSibling)?(l.setStart(i,0),l.setEnd(i,0)):(l.setStart(i,1),l.setEnd(i,1)),l;i=function(e,t,n){var r,i,o;return(r=t.ownerDocument.createElement(e)).setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(((o=document.createElement("br")).setAttribute("data-mce-bogus","1"),o)),i=t.parentNode,n?i.insertBefore(r,t):t.nextSibling?i.insertBefore(r,t.nextSibling):i.appendChild(r),r}("p",r,n),u=ys(e,r,n),Jt(i).css("top",u.top);var f=Jt('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(u).appendTo(e)[0];return o.set(x.some({caret:f,element:r,before:n})),o.get().each(function(e){n&&Jt(e.caret).addClass("mce-visual-caret-before")}),s(),(l=r.ownerDocument.createRange()).setStart(i,0),l.setEnd(i,0),l},hide:a,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){o.get().each(function(t){var n=ys(e,t.element,t.before);Jt(t.caret).css(n)})},destroy:function(){return ge.clearInterval(r)}}},ws=function(e){return vs(e)||vi.isTable(e)&&ss()},xs=vi.isContentEditableFalse,Cs=vi.matchStyleValues("display","block table table-cell table-caption list-item"),_s=mo,Ss=ho,ks=qo.curry,Ts=vi.isElement,Es=Ro,Ns=function(e){return e>0},As=function(e){return e<0},Rs=function(e,t){for(var n;n=e(t);)if(!Ss(n))return n;return null},Os=function(e,t,n,r,i){var o=new Vr(e,r);if(As(t)){if((xs(e)||Ss(e))&&n(e=Rs(o.prev,!0)))return e;for(;e=Rs(o.prev,i);)if(n(e))return e}if(Ns(t)){if((xs(e)||Ss(e))&&n(e=Rs(o.next,!0)))return e;for(;e=Rs(o.next,i);)if(n(e))return e}return null},Ds=function(e,t){for(;e&&e!==t;){if(Cs(e))return e;e=e.parentNode}return null},Ps=function(e,t,n){return Ds(e.container(),n)===Ds(t.container(),n)},Is=function(e,t){var n,r;return t?(n=t.container(),r=t.offset(),Ts(n)?n.childNodes[r+e]:null):null},Bs=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},Ms=function(e,t,n){return Ds(t,e)===Ds(n,e)},Ls=function(e,t,n){var r,i;for(i=e?"previousSibling":"nextSibling";n&&n!==t;){if(r=n[i],_s(r)&&(r=r[i]),xs(r)){if(Ms(t,r,n))return r;break}if(Es(r))break;n=n.parentNode}return null},Hs=ks(Bs,!0),Fs=ks(Bs,!1),zs=function(e,t,n){var r,i,o,a,s=ks(Ls,!0,t),u=ks(Ls,!1,t);if(i=n.startContainer,o=n.startOffset,ho(i)){if(Ts(i)||(i=i.parentNode),"before"===(a=i.getAttribute("data-mce-caret"))&&(r=i.nextSibling,ws(r)))return Hs(r);if("after"===a&&(r=i.previousSibling,ws(r)))return Fs(r)}if(!n.collapsed)return n;if(vi.isText(i)){if(_s(i)){if(1===e){if(r=u(i))return Hs(r);if(r=s(i))return Fs(r)}if(-1===e){if(r=s(i))return Fs(r);if(r=u(i))return Hs(r)}return n}if(wo(i)&&o>=i.data.length-1)return 1===e&&(r=u(i))?Hs(r):n;if(bo(i)&&o<=1)return-1===e&&(r=s(i))?Fs(r):n;if(o===i.data.length)return(r=u(i))?Hs(r):n;if(0===o)return(r=s(i))?Fs(r):n}return n},js=function(e,t){var n=Is(e,t);return xs(n)&&!vi.isBogusAll(n)},Ws=function(e,t){return vi.isTable(Is(e,t))},Us=function(e,t){return x.from(Is(e?0:-1,t)).filter(xs)},$s=function(e,t,n){var r=zs(e,t,n);return-1===e?fa.fromRangeStart(r):fa.fromRangeEnd(r)},qs=ks(js,0),Vs=ks(js,-1),Xs=ks(Ws,0),Ys=ks(Ws,-1);!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(Ia||(Ia={}));var Ks=vi.isContentEditableFalse,Js=vi.isText,Gs=vi.isElement,Qs=vi.isBr,Zs=Ro,eu=function(e){return Eo(e)||function(e){return!!Oo(e)&&!0!==Tt.reduce(e.getElementsByTagName("*"),function(e,t){return e||Co(t)},!1)}(e)},tu=Do,nu=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},ru=function(e,t){if(Ns(e)){if(Zs(t.previousSibling)&&!Js(t.previousSibling))return ha.before(t);if(Js(t))return ha(t,0)}if(As(e)){if(Zs(t.nextSibling)&&!Js(t.nextSibling))return ha.after(t);if(Js(t))return ha(t,t.data.length)}return As(e)?Qs(t)?ha.before(t):ha.after(t):ha.before(t)},iu=function(e,t,n){var r,i,o,a,s;if(!Gs(n)||!t)return null;if(t.isEqual(ha.after(n))&&n.lastChild){if(s=ha.after(n.lastChild),As(e)&&Zs(n.lastChild)&&Gs(n.lastChild))return Qs(n.lastChild)?ha.before(n.lastChild):s}else s=t;var u=s.container(),l=s.offset();if(Js(u)){if(As(e)&&l>0)return ha(u,--l);if(Ns(e)&&l<u.length)return ha(u,++l);r=u}else{if(As(e)&&l>0&&(i=nu(u,l-1),Zs(i)))return!eu(i)&&(o=Os(i,e,tu,i))?Js(o)?ha(o,o.data.length):ha.after(o):Js(i)?ha(i,i.data.length):ha.before(i);if(Ns(e)&&l<u.childNodes.length&&(i=nu(u,l),Zs(i)))return Qs(i)&&n.lastChild===i?null:function(e,t){var n;return!!vi.isBr(e)&&!!(n=iu(1,ha.after(e),t))&&!Ps(ha.before(e),ha.before(n),t)}(i,n)?iu(e,ha.after(i),n):!eu(i)&&(o=Os(i,e,tu,i))?Js(o)?ha(o,0):ha.before(o):Js(i)?ha(i,0):ha.after(i);r=i||s.getNode()}return(Ns(e)&&s.isAtEnd()||As(e)&&s.isAtStart())&&(r=Os(r,e,qo.constant(!0),n,!0),tu(r,n))?ru(e,r):(i=Os(r,e,tu,n),!(a=Tt.last(Tt.filter(function(e,t){for(var n=[];e&&e!==t;)n.push(e),e=e.parentNode;return n}(u,n),Ks)))||i&&a.contains(i)?i?ru(e,i):null:s=Ns(e)?ha.after(a):ha.before(a))},ou=function(e){return{next:function(t){return iu(Ia.Forwards,t,e)},prev:function(t){return iu(Ia.Backwards,t,e)}}},au=function(e){return e.length>0&&(!(t=e[e.length-1]).firstChild||function(e){return e&&e.firstChild&&e.firstChild===e.lastChild&&function(e){return"Â "===e.data||vi.isBr(e)}(e.firstChild)}(t))?e.slice(0,-1):e;var t},su=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},uu=function(e,t){var n=ha.after(e),r=ou(t).prev(n);return r?r.toRange():null},lu=function(e,t,n,r){var i=function(e,t,n){var r=t.serialize(n);return function(e){var t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e}(e.createFragment(r))}(t,e,r),o=su(t,n.startContainer),a=au(function(e){return Ot.grep(e.childNodes,function(e){return"LI"===e.nodeName})}(i.firstChild)),s=t.getRoot(),u=function(e){var r=ha.fromRangeStart(n),i=ou(t.getRoot()),a=1===e?i.prev(r):i.next(r);return!a||su(t,a.getNode())!==o};return u(1)?function(e,t,n){var r=e.parentNode;return Ot.each(t,function(t){r.insertBefore(t,e)}),function(e,t){var n=ha.before(e),r=ou(t).next(n);return r?r.toRange():null}(e,n)}(o,a,s):u(2)?function(e,t,n,r){return r.insertAfter(t.reverse(),e),uu(t[0],n)}(o,a,s,t):function(e,t,n,r){var i=function(e,t){var n=t.cloneRange(),r=t.cloneRange();return n.setStartBefore(e),r.setEndAfter(e),[n.cloneContents(),r.cloneContents()]}(e,r),o=e.parentNode;return o.insertBefore(i[0],e),Ot.each(t,function(t){o.insertBefore(t,e)}),o.insertBefore(i[1],e),o.removeChild(e),uu(t[t.length-1],n)}(o,a,s,n)},cu=vi.isText,fu=vi.isBogus,du=eo.nodeIndex,hu=function(e){var t=e.parentNode;return fu(t)?hu(t):t},pu=function(e){return e?Tt.reduce(e.childNodes,function(e,t){return fu(t)&&"BR"!==t.nodeName?e=e.concat(pu(t)):e.push(t),e},[]):[]},mu=function(e){return function(t){return e===t}},gu=function(e){return(cu(e)?"text()":e.nodeName.toLowerCase())+"["+function(e){var t,n,r;return t=pu(hu(e)),n=Tt.findIndex(t,mu(e),e),t=t.slice(0,n+1),r=Tt.reduce(t,function(e,n,r){return cu(n)&&cu(t[r-1])&&e++,e},0),t=Tt.filter(t,vi.matchNodeNames(e.nodeName)),(n=Tt.findIndex(t,mu(e),e))-r}(e)+"]"},vu=function(e,t){var n,r,i,o,a,s=[];return n=t.container(),r=t.offset(),cu(n)?i=function(e,t){for(;(e=e.previousSibling)&&cu(e);)t+=e.data.length;return t}(n,r):(r>=(o=n.childNodes).length?(i="after",r=o.length-1):i="before",n=o[r]),s.push(gu(n)),a=function(e,t,n){var r=[];for(t=t.parentNode;t!==e;t=t.parentNode)r.push(t);return r}(e,n),a=Tt.filter(a,qo.negate(vi.isBogus)),(s=s.concat(Tt.map(a,function(e){return gu(e)}))).reverse().join("/")+","+i},yu=function(e,t){var n,r,i;return t?(t=(n=t.split(","))[0].split("/"),i=n.length>1?n[1]:"before",(r=Tt.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),n=e,r=t[1],i=parseInt(t[2],10),o=pu(n),o=Tt.filter(o,function(e,t){return!cu(e)||!cu(o[t-1])}),(o=Tt.filter(o,vi.matchNodeNames(r)))[i]):null;var n,r,i,o},e))?cu(r)?function(e,t){for(var n,r=e,i=0;cu(r);){if(n=r.data.length,t>=i&&t<=i+n){e=r,t-=i;break}if(!cu(r.nextSibling)){e=r,t=n;break}i+=n,r=r.nextSibling}return cu(e)&&t>e.data.length&&(t=e.data.length),ha(e,t)}(r,parseInt(i,10)):(i="after"===i?du(r)+1:du(r),ha(r.parentNode,i)):null):null},bu=vi.isContentEditableFalse,wu=function(e,t,n,r,i){var o,a=r[i?"startContainer":"endContainer"],s=r[i?"startOffset":"endOffset"],u=[],l=0,c=e.getRoot();for(vi.isText(a)?u.push(n?function(e,t,n){var r,i;for(i=e(t.data.slice(0,n)).length,r=t.previousSibling;r&&vi.isText(r);r=r.previousSibling)i+=e(r.data).length;return i}(t,a,s):s):(s>=(o=a.childNodes).length&&o.length&&(l=1,s=Math.max(0,o.length-1)),u.push(e.nodeIndex(o[s],n)+l));a&&a!==c;a=a.parentNode)u.push(e.nodeIndex(a,n));return u},xu=function(e){vi.isText(e)&&0===e.data.length&&e.parentNode.removeChild(e)},Cu=function(e,t,n){var r=0;return Ot.each(e.select(t),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!==n&&void r++}),r},_u=function(e,t){var n,r,i,o=t?"start":"end";n=e[o+"Container"],r=e[o+"Offset"],vi.isElement(n)&&"TR"===n.nodeName&&(n=(i=n.childNodes)[Math.min(t?r:r-1,i.length-1)])&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r))},Su=function(e){return _u(e,!0),_u(e,!1),e},ku=function(e,t){var n;if(vi.isElement(e)&&(e=zo(e,t),bu(e)))return e;if(mo(e)){if(vi.isText(e)&&ho(e)&&(e=e.parentNode),n=e.previousSibling,bu(n))return n;if(n=e.nextSibling,bu(n))return n}},Tu=function(e,t,n){var r=n.getNode(),i=r?r.nodeName:null,o=n.getRng();if(bu(r)||"IMG"===i)return{name:i,index:Cu(n.dom,i,r)};var a=function(e){return ku(e.startContainer,e.startOffset)||ku(e.endContainer,e.endOffset)}(o);return a?{name:i=a.tagName,index:Cu(n.dom,i,a)}:function(e,t,n,r){var i=t.dom,o={};return o.start=wu(i,e,n,r,!0),t.isCollapsed()||(o.end=wu(i,e,n,r,!1)),o}(e,n,t,o)},Eu=function(e,t,n){var r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",r,"&#xFEFF;"):e.create("span",r)},Nu=function(e,t){var n=e.dom,r=e.getRng(),i=n.uniqueId(),o=e.isCollapsed(),a=e.getNode(),s=a.nodeName;if("IMG"===s)return{name:s,index:Cu(n,s,a)};var u=Su(r.cloneRange());if(!o){u.collapse(!1);var l=Eu(n,i+"_end",t);u.insertNode(l),xu(l.nextSibling)}(r=Su(r)).collapse(!0);var c=Eu(n,i+"_start",t);return r.insertNode(c),xu(c.previousSibling),e.moveToBookmark({id:i,keep:1}),{id:i}},Au={getBookmark:function(e,t,n){return 2===t?Tu(lo,n,e):3===t?function(e){var t=e.getRng();return{start:vu(e.dom.getRoot(),ha.fromRangeStart(t)),end:vu(e.dom.getRoot(),ha.fromRangeEnd(t))}}(e):t?function(e){return{rng:e.getRng()}}(e):Nu(e,!1)},getUndoBookmark:m.curry(Tu,m.identity,!0),getPersistentBookmark:Nu},Ru=function(e){return vi.isElement(e)&&"_mce_caret"===e.id},Ou=function(e,t){for(;t&&t!==e;){if("_mce_caret"===t.id)return t;t=t.parentNode}return null},Du=function(e,t){return!e.isBlock(t)||t.innerHTML||fe.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t},Pu=function(e,t){return Ea.lastPositionIn(e).fold(function(){return!1},function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0})},Iu=function(e,t,n){return!(!1!==t.hasChildNodes()||!Ou(e,t)||(function(e,t){var n=e.ownerDocument.createTextNode(uo);e.appendChild(n),t.setStart(n,0),t.setEnd(n,0)}(t,n),0))},Bu=function(e,t,n,r){var i,o,a,s,u=n[t?"start":"end"],l=e.getRoot();if(u){for(a=u[0],o=l,i=u.length-1;i>=1;i--){if(s=o.childNodes,Iu(l,o,r))return!0;if(u[i]>s.length-1)return!!Iu(l,o,r)||Pu(o,r);o=s[u[i]]}3===o.nodeType&&(a=Math.min(u[0],o.nodeValue.length)),1===o.nodeType&&(a=Math.min(u[0],o.childNodes.length)),t?r.setStart(o,a):r.setEnd(o,a)}return!0},Mu=function(e){return vi.isText(e)&&e.data.length>0},Lu=function(e,t,n){var r,i,o,a,s,u,l=e.get(n.id+"_"+t),c=n.keep;if(l){if(r=l.parentNode,"start"===t?(c?l.hasChildNodes()?(r=l.firstChild,i=1):Mu(l.nextSibling)?(r=l.nextSibling,i=0):Mu(l.previousSibling)?(r=l.previousSibling,i=l.previousSibling.data.length):(r=l.parentNode,i=e.nodeIndex(l)+1):i=e.nodeIndex(l),s=r,u=i):(c?l.hasChildNodes()?(r=l.firstChild,i=1):Mu(l.previousSibling)?(r=l.previousSibling,i=l.previousSibling.data.length):(r=l.parentNode,i=e.nodeIndex(l)):i=e.nodeIndex(l),s=r,u=i),!c){for(a=l.previousSibling,o=l.nextSibling,Ot.each(Ot.grep(l.childNodes),function(e){vi.isText(e)&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});l=e.get(n.id+"_"+t);)e.remove(l,!0);a&&o&&a.nodeType===o.nodeType&&vi.isText(a)&&!fe.opera&&(i=a.nodeValue.length,a.appendData(o.nodeValue),e.remove(o),s=a,u=i)}return x.some(ha(s,u))}return x.none()},Hu={getBookmark:function(e,t,n){return Au.getBookmark(e,t,n)},moveToBookmark:function(e,t){(function(e,t){var n=e.dom;if(t){if(function(e){return Ot.isArray(e.start)}(t))return function(e,t){var n=e.createRng();return Bu(e,!0,t,n)&&Bu(e,!1,t,n)?x.some(n):x.none()}(n,t);if("string"==typeof t.start)return x.some(function(e,t){var n,r;return n=e.createRng(),r=yu(e.getRoot(),t.start),n.setStart(r.container(),r.offset()),r=yu(e.getRoot(),t.end),n.setEnd(r.container(),r.offset()),n}(n,t));if(t.hasOwnProperty("id"))return function(e,t){var n,r,i=Lu(e,"start",t),o=Lu(e,"end",t);return Vo([i,(n=o,r=i,n.isSome()?n:r)],function(t,n){var r=e.createRng();return r.setStart(Du(e,t.container()),t.offset()),r.setEnd(Du(e,n.container()),n.offset()),r})}(n,t);if(t.hasOwnProperty("name"))return function(e,t){return x.from(e.select(t.name)[t.index]).map(function(t){var n=e.createRng();return n.selectNode(t),n})}(n,t);if(t.hasOwnProperty("rng"))return x.some(t.rng)}return x.none()})(e,t).each(function(t){e.setRng(t)})},isBookmarkNode:function(e){return vi.isElement(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")}},Fu=Ot.each,zu=function(e){this.compare=function(t,n){if(t.nodeName!==n.nodeName)return!1;var r=function(t){var n={};return Fu(e.getAttribs(t),function(r){var i=r.nodeName.toLowerCase();0!==i.indexOf("_")&&"style"!==i&&0!==i.indexOf("data-")&&(n[i]=e.getAttrib(t,i))}),n},i=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(void 0===(n=t[r]))return!1;if(e[r]!==n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0};return!(!i(r(t),r(n))||!i(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style")))||Hu.isBookmarkNode(t)||Hu.isBookmarkNode(n))}},ju=function(e,t){L.each(t,function(t){os(e,t)})},Wu=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},Uu=function(e){e.dom().textContent="",L.each(Ar(e),function(e){Wu(e)})},$u=Wu,qu=function(e){var t=Ar(e);t.length>0&&function(e,t){L.each(t,function(t){rs(e,t)})}(e,t),Wu(e)},Vu=function(e,t){var n=function(t){return e(t)?x.from(t.dom().nodeValue):x.none()},r=Rn.detect().browser,i=r.isIE()&&10===r.version.major?function(e){try{return n(e)}catch(e){return x.none()}}:n;return{get:function(t){if(!e(t))throw new Error("Can only get text value of a text node");return i(t).getOr("")},getOption:i,set:function(t,n){if(!e(t))throw new Error("Can only set raw text value of a text node");t.dom().nodeValue=n}}}(Fn.isText),Xu=function(e){Uu(e),os(e,Dn.fromHtml('<br data-mce-bogus="1">'))},Yu=function(e){Dr(e).each(function(t){Tr(t).each(function(n){Qr(e)&&ei(t)&&Qr(n)&&$u(t)})})},Ku=Ot.makeMap;function Ju(e){var t,n,r,i,o,a=[];return t=(e=e||{}).indent,n=Ku(e.indent_before||""),r=Ku(e.indent_after||""),i=Oi.getEncodeFunc(e.entity_encoding||"raw",e.entities),o="html"===e.element_format,{start:function(e,s,u){var l,c,f,d;if(t&&n[e]&&a.length>0&&(d=a[a.length-1]).length>0&&"\n"!==d&&a.push("\n"),a.push("<",e),s)for(l=0,c=s.length;l<c;l++)f=s[l],a.push(" ",f.name,'="',i(f.value,!0),'"');a[a.length]=!u||o?">":" />",u&&t&&r[e]&&a.length>0&&(d=a[a.length-1]).length>0&&"\n"!==d&&a.push("\n")},end:function(e){var n;a.push("</",e,">"),t&&r[e]&&a.length>0&&(n=a[a.length-1]).length>0&&"\n"!==n&&a.push("\n")},text:function(e,t){e.length>0&&(a[a.length]=t?e:i(e))},cdata:function(e){a.push("<![CDATA[",e,"]]>")},comment:function(e){a.push("\x3c!--",e,"--\x3e")},pi:function(e,n){n?a.push("<?",e," ",i(n),"?>"):a.push("<?",e,"?>"),t&&a.push("\n")},doctype:function(e){a.push("<!DOCTYPE",e,">",t?"\n":"")},reset:function(){a.length=0},getContent:function(){return a.join("").replace(/\n$/,"")}}}function Gu(e,t){void 0===t&&(t=Wi());var n=Ju(e);return(e=e||{}).validate=!("validate"in e)||e.validate,{serialize:function(r){var i,o;o=e.validate,i={3:function(e){n.text(e.value,e.raw)},8:function(e){n.comment(e.value)},7:function(e){n.pi(e.name,e.value)},10:function(e){n.doctype(e.value)},4:function(e){n.cdata(e.value)},11:function(e){if(e=e.firstChild)do{a(e)}while(e=e.next)}},n.reset();var a=function(e){var r,s,u,l,c,f,d,h,p,m=i[e.type];if(m)m(e);else{if(r=e.name,s=e.shortEnded,u=e.attributes,o&&u&&u.length>1&&((f=[]).map={},p=t.getElementRule(e.name))){for(d=0,h=p.attributesOrder.length;d<h;d++)(l=p.attributesOrder[d])in u.map&&(c=u.map[l],f.map[l]=c,f.push({name:l,value:c}));for(d=0,h=u.length;d<h;d++)(l=u[d].name)in f.map||(c=u.map[l],f.map[l]=c,f.push({name:l,value:c}));u=f}if(n.start(e.name,u,s),!s){if(e=e.firstChild)do{a(e)}while(e=e.next);n.end(r)}}};return 1!==r.type||e.inner?i[11](r):a(r),n.getContent()}}}var Qu=function(e){return e.collapsed?e:function(e){var t=ha.fromRangeStart(e),n=ha.fromRangeEnd(e),r=e.commonAncestorContainer;return Ea.fromPosition(!1,r,n).map(function(i){return!Ps(t,n,r)&&Ps(t,i,r)?function(e,t,n,r){var i=document.createRange();return i.setStart(e,t),i.setEnd(n,r),i}(t.container(),t.offset(),i.container(),i.offset()):e}).getOr(e)}(e)},Zu=vi.matchNodeNames("td th"),el=function(e,t,n){var r,i,o,a,s,u,l,c,f,d,h,p,m=e.schema.getTextInlineElements(),g=e.selection,v=e.dom;if(/^ | $/.test(t)&&(t=function(e){var t,n,r;t=g.getRng(),n=t.startContainer,r=t.startOffset;var i=function(e){return n[e]&&3===n[e].nodeType};return 3===n.nodeType&&(r>0?e=e.replace(/^&nbsp;/," "):i("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),r<n.length?e=e.replace(/&nbsp;(<br>|)$/," "):i("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}(t)),r=e.parser,p=n.merge,i=Gu({validate:e.settings.validate},e.schema),h='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',u={content:t,format:"html",selection:!0,paste:n.paste},(u=e.fire("BeforeSetContent",u)).isDefaultPrevented())e.fire("SetContent",{content:u.content,format:"html",selection:!0,paste:n.paste});else{-1===(t=u.content).indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,h);var y=(c=g.getRng()).startContainer||(c.parentElement?c.parentElement():null),b=e.getBody();y===b&&g.isCollapsed()&&v.isBlock(b.firstChild)&&function(t){return t&&!e.schema.getShortEndedElements()[t.nodeName]}(b.firstChild)&&v.isEmpty(b.firstChild)&&((c=v.createRng()).setStart(b.firstChild,0),c.setEnd(b.firstChild,0),g.setRng(c)),g.isCollapsed()||(e.selection.setRng(Qu(e.selection.getRng())),e.getDoc().execCommand("Delete",!1,null),function(){var e,n,r;n=(e=g.getRng()).startContainer,r=e.startOffset,3===n.nodeType&&e.collapsed&&("Â "===n.data[r]?(n.deleteData(r,1),/[\u00a0| ]$/.test(t)||(t+=" ")):"Â "===n.data[r-1]&&(n.deleteData(r-1,1),/[\u00a0| ]$/.test(t)||(t=" "+t)))}());var w,C={context:(o=g.getNode()).nodeName.toLowerCase(),data:n.data,insert:!0};if(s=r.parse(t,C),!0===n.paste&&function(e,t){var n=t.firstChild,r=t.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),function(e,t){var n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||function(e,t){return e.getBlockElements()[t.name]&&function(e){return e.firstChild&&e.firstChild===e.lastChild}(t)&&function(e){return"br"===e.name||"Â "===e.value}(t.firstChild)}(e,t))}(e,r)&&(r=r.prev),!(!n||n!==r||"ul"!==n.name&&"ol"!==n.name)}(e.schema,s)&&function(e,t){return!!su(e,t)}(v,o))return c=lu(i,v,e.selection.getRng(),s),e.selection.setRng(c),void e.fire("SetContent",u);if(function(e){for(var t=s;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(),"mce_marker"===(f=s.lastChild).attr("id"))for(l=f,f=f.prev;f;f=f.walk(!0))if(3===f.type||!v.isBlock(f.name)){e.schema.isValidChild(f.parent.name,"span")&&f.parent.insert(l,f,"br"===f.name);break}if(e._selectionOverrides.showBlockCaretContainer(o),C.invalid){for(g.setContent(h),o=g.getNode(),a=e.getBody(),9===o.nodeType?o=f=a:f=o;f!==a;)o=f,f=f.parentNode;t=o===a?a.innerHTML:v.getOuterHTML(o),t=i.serialize(r.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return i.serialize(s)}))),o===a?v.setHTML(a,t):v.setOuterHTML(o,t)}else t=i.serialize(s),function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var r=n.firstChild,i=n.lastChild;!r||r===i&&"BR"===r.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t)}}(e,t,o);!function(){if(p){var t=e.getBody(),n=new zu(v);Ot.each(v.select("*[data-mce-fragment]"),function(e){for(var r=e.parentNode;r&&r!==t;r=r.parentNode)m[e.nodeName.toLowerCase()]&&n.compare(r,e)&&v.remove(e,!0)})}}(),function(t){var n,r,i;if(t){if(g.scrollIntoView(t),n=function(t){for(var n=e.getBody();t&&t!==n;t=t.parentNode)if("false"===e.dom.getContentEditable(t))return t;return null}(t))return v.remove(t),void g.select(n);c=v.createRng(),(f=t.previousSibling)&&3===f.nodeType?(c.setStart(f,f.nodeValue.length),fe.ie||(d=t.nextSibling)&&3===d.nodeType&&(f.appendData(d.data),d.parentNode.removeChild(d))):(c.setStartBefore(t),c.setEndBefore(t)),r=v.getParent(t,v.isBlock),v.remove(t),r&&v.isEmpty(r)&&(e.$(r).empty(),c.setStart(r,0),c.setEnd(r,0),Zu(r)||r.getAttribute("data-mce-fragment")||!(i=function(t){var n=ha.fromRangeStart(t);if(n=ou(e.getBody()).next(n))return n.toRange()}(c))?v.add(r,v.create("br",{"data-mce-bogus":"1"})):(c=i,v.remove(r))),g.setRng(c)}}(v.get("mce_marker")),w=e.getBody(),Ot.each(w.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")}),function(e,t){x.from(e.getParent(t,"td,th")).map(Dn.fromDom).each(Yu)}(e.dom,e.selection.getStart()),e.fire("SetContent",u),e.addVisual()}},tl={insertAtCaret:function(e,t){var n=function(e){var t;return"string"!=typeof e?(t=Ot.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t}):{content:e,details:{}}}(t);el(e,n.content,n.details)}};function nl(e,t,n,r,i){return e(n,r)?x.some(n):_.isFunction(i)&&i(n)?x.none():t(n,r,i)}var rl=function(e,t,n){for(var r=e.dom(),i=_.isFunction(n)?n:m.constant(!1);r.parentNode;){r=r.parentNode;var o=Dn.fromDom(r);if(t(o))return x.some(o);if(i(o))break}return x.none()},il=rl,ol=function(e,t,n){return nl(function(e){return t(e)},rl,e,t,n)},al=sr("sections","settings"),sl=Rn.detect().deviceType.isTouch(),ul=["lists","autolink","autosave"],ll={theme:"mobile"},cl=function(e){var t=_.isArray(e)?e.join(" "):e,n=L.map(_.isString(t)?t.split(" "):[],_n);return L.filter(n,function(e){return e.length>0})},fl=function(e,t){return e.sections().hasOwnProperty(t)},dl=function(e,t,n,r){var i=function(e,t){var n=qn.bifilter(t,function(t,n){return L.contains(e,n)});return al(n.t,n.f)}(["mobile"],r);return function(e,t,n,r){var i=cl(n.forced_plugins),o=cl(r.plugins),a=function(e,t){return[].concat(cl(e)).concat(cl(t))}(i,e&&fl(t,"mobile")?function(e){return L.filter(e,m.curry(L.contains,ul))}(o):o);return Ot.extend(r,{plugins:a.join(" ")})}(e,i,n,Ot.extend(t,n,i.settings(),function(e,t){var n=t.settings().inline;return e&&fl(t,"mobile")&&!n}(e,i)?function(e,t,n){var r=e.sections(),i=r.hasOwnProperty(t)?r[t]:{};return Ot.extend({},n,i)}(i,"mobile",ll):{},{validate:!0,content_editable:i.settings().inline,external_plugins:function(e,t){var n=t.external_plugins?t.external_plugins:{};return e&&e.external_plugins?Ot.extend({},e.external_plugins,n):n}(n,i.settings())}))},hl=function(e,t,n){return x.from(t.settings[n]).filter(e)},pl=m.curry(hl,_.isString),ml=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,gl=function(e,t){var n=t.container(),r=t.offset();return e?po(n)?vi.isText(n.nextSibling)?ha(n.nextSibling,0):ha.after(n):vo(t)?ha(n,r+1):t:po(n)?vi.isText(n.previousSibling)?ha(n.previousSibling,n.previousSibling.data.length):ha.before(n):yo(t)?ha(n,r-1):t},vl={isInlineTarget:function(e,t){var n=pl(e,"inline_boundaries_selector").getOr("a[href],code");return fr.is(Dn.fromDom(t),n)},findRootInline:function(e,t,n){var r=function(e,t,n){return L.filter(eo.DOM.getParents(n.container(),"*",t),e)}(e,t,n);return x.from(r[r.length-1])},isRtl:function(e){return"rtl"===eo.DOM.getStyle(e,"direction",!0)||(t=e.textContent,ml.test(t));var t},isAtZwsp:function(e){return vo(e)||yo(e)},normalizePosition:gl,normalizeForwards:m.curry(gl,!0),normalizeBackwards:m.curry(gl,!1),hasSameParentBlock:function(e,t,n){var r=Ds(t,e),i=Ds(n,e);return r&&r===i}},yl=function(e,t){return pr.contains(e,t)?ol(t,function(e){return ti(e)||ri(e)},function(e){return function(t){return pr.eq(e,Dn.fromDom(t.dom().parentNode))}}(e)):x.none()},bl=function(e){e.dom.isEmpty(e.getBody())&&(e.setContent(""),function(e){var t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)}(e))},wl=function(e,t,n){return il(e,function(e){return fr.is(e,t)},n)},xl=wl,Cl=function(e,t){return fr.one(t,e)},_l=function(e,t){return vi.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&!1===function(e,t){var n=Dn.fromDom(e);return function(e,t,n){return xl(e,t,n).isSome()}(Dn.fromDom(t),"pre,code",m.curry(pr.eq,n))}(e,t)},Sl=function(e,t){return Ro(t)&&!1===_l(e,t)||function(e){return vi.isElement(e)&&"A"===e.nodeName&&e.hasAttribute("name")}(t)||kl(t)},kl=vi.hasAttribute("data-mce-bookmark"),Tl=vi.hasAttribute("data-mce-bogus"),El=vi.hasAttributeValue("data-mce-bogus","all"),Nl=function(e){return function(e){var t,n,r=0;if(Sl(e,e))return!1;if(!(n=e.firstChild))return!0;t=new Vr(n,e);do{if(El(n))n=t.next(!0);else if(Tl(n))n=t.next();else if(vi.isBr(n))r++,n=t.next();else{if(Sl(e,n))return!1;n=t.next()}}while(n);return r<=1}(e.dom())},Al=sr("block","position"),Rl=sr("from","to"),Ol=function(e,t){var n=Dn.fromDom(e),r=Dn.fromDom(t.container());return yl(n,r).map(function(e){return Al(e,t)})},Dl=function(e,t,n){return n.collapsed?function(e,t,n){var r=Ol(e,ha.fromRangeStart(n)),i=r.bind(function(n){return Ea.fromPosition(t,e,n.position()).bind(function(n){return Ol(e,n).map(function(n){return function(e,t,n){return vi.isBr(n.position().getNode())&&!1===Nl(n.block())?Ea.positionIn(!1,n.block().dom()).bind(function(r){return r.isEqual(n.position())?Ea.fromPosition(t,e,r).bind(function(t){return Ol(e,t)}):x.some(n)}).getOr(n):n}(e,t,n)})})});return Vo([r,i],Rl).filter(function(e){return function(e){return!1===pr.eq(e.from().block(),e.to().block())}(e)&&function(e){return Sr(e.from().block()).bind(function(t){return Sr(e.to().block()).filter(function(e){return pr.eq(t,e)})}).isSome()}(e)&&function(e){return!1===vi.isContentEditableFalse(e.from().block())&&!1===vi.isContentEditableFalse(e.to().block())}(e)})}(e,t,n):x.none()},Pl=function(e,t){return function(e,t,n){return pr.contains(t,e)?kr(e,function(e){return n(e)||pr.eq(e,t)}).slice(0,-1):[]}(e,t,m.constant(!1))},Il=Pl,Bl=function(e,t){return[e].concat(Pl(e,t))},Ml=function(e,t){Ea.positionIn(e,t.dom()).each(function(e){var t=e.getNode();vi.isBr(t)&&$u(Dn.fromDom(t))})},Ll=function(e,t){var n=Bl(t,e);return L.find(n.reverse(),Nl).each($u)},Hl=function(e,t,n){if(Nl(n))return $u(n),Nl(t)&&Xu(t),Ea.firstPositionIn(t.dom());Ml(!0,t),Ml(!1,n);var r=function(e){var t=function(e){var t=Ar(e);return L.findIndex(t,Qr).fold(function(){return t},function(e){return t.slice(0,e)})}(e);return L.each(t,function(e){$u(e)}),t}(t);return function(e,t){return pr.contains(t,e)?Sr(e).bind(function(n){return pr.eq(n,t)?x.some(e):function(e,t){var n=kr(t,function(t){return pr.eq(t,e)});return x.from(n[n.length-2])}(t,e)}):x.none()}(t,n).fold(function(){Ll(e,t);var i=Ea.lastPositionIn(n.dom());return L.each(r,function(e){os(n,e)}),i},function(i){var o=Ea.prevPosition(n.dom(),ha.before(i.dom()));return L.each(r,function(e){rs(i,e)}),Ll(e,t),o})},Fl=function(e,t,n,r){return t?Hl(e,r,n):Hl(e,n,r)},zl=function(e,t){var n,r=Dn.fromDom(e.getBody());return(n=Dl(r.dom(),t,e.selection.getRng()).bind(function(e){return Fl(r,t,e.from().block(),e.to().block())})).each(function(t){e.selection.setRng(t.toRange())}),n.isSome()},jl=function(e,t){var n=Dn.fromDom(t),r=m.curry(pr.eq,e);return il(n,ai,r).isSome()},Wl=function(e){var t=Dn.fromDom(e.getBody());return function(e,t){var n=Ea.prevPosition(e.dom(),ha.fromRangeStart(t)).isNone(),r=Ea.nextPosition(e.dom(),ha.fromRangeEnd(t)).isNone();return!function(e,t){return jl(e,t.startContainer)||jl(e,t.endContainer)}(e,t)&&n&&r}(t,e.selection.getRng())?function(e){return e.setContent(""),e.selection.setCursorLocation(),!0}(e):function(e,t){var n=t.getRng();return Vo([yl(e,Dn.fromDom(n.startContainer)),yl(e,Dn.fromDom(n.endContainer))],function(r,i){return!1===pr.eq(r,i)&&(n.deleteContents(),Fl(e,!0,r,i).each(function(e){t.setRng(e.toRange())}),!0)}).getOr(!1)}(t,e.selection)},Ul=function(e,t){return!e.selection.isCollapsed()&&Wl(e)},$l=function(e){if(!_.isArray(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return L.each(e,function(r,i){var o=qn.keys(r);if(1!==o.length)throw new Error("one and only one name per case");var a=o[0],s=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!_.isArray(s))throw new Error("case arguments must be an array");t.push(a),n[a]=function(){var n=arguments.length;if(n!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+n);for(var r=new Array(n),o=0;o<r.length;o++)r[o]=arguments[o];return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);return arguments[i].apply(null,r)},match:function(e){var n=qn.keys(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!L.forall(t,function(e){return L.contains(n,e)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,r)},log:function(e){console.log(e,{constructors:t,constructor:a,params:r})}}}}),n},ql=$l([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Vl=function(e,t,n,r){var i=r.getNode(!1===t);return yl(Dn.fromDom(e),Dn.fromDom(n.getNode())).map(function(e){return Nl(e)?ql.remove(e.dom()):ql.moveToElement(i)}).orThunk(function(){return x.some(ql.moveToElement(i))})},Xl=function(e,t,n){return Ea.fromPosition(t,e,n).bind(function(r){return i=r.getNode(),ai(Dn.fromDom(i))||ri(Dn.fromDom(i))?x.none():function(e,t,n,r){var i=function(t){return Zr(Dn.fromDom(t))&&!Ps(n,r,e)};return Us(!t,n).fold(function(){return Us(t,r).fold(m.constant(!1),i)},i)}(e,t,n,r)?x.none():t&&vi.isContentEditableFalse(r.getNode())?Vl(e,t,n,r):!1===t&&vi.isContentEditableFalse(r.getNode(!0))?Vl(e,t,n,r):t&&Vs(n)?x.some(ql.moveToPosition(r)):!1===t&&qs(n)?x.some(ql.moveToPosition(r)):x.none();var i})},Yl=function(e,t){return function(e,t){var n=e.container(),r=e.offset();return!1===ha.isTextPosition(e)&&n===t.parentNode&&r>ha.before(t).offset()}(t,e)?ha(t.container(),t.offset()-1):t},Kl=function(e){return Ro(e.previousSibling)?x.some((t=e.previousSibling,vi.isText(t)?ha(t,t.data.length):ha.after(t))):e.previousSibling?Ea.lastPositionIn(e.previousSibling):x.none();var t},Jl=function(e){return Ro(e.nextSibling)?x.some((t=e.nextSibling,vi.isText(t)?ha(t,0):ha.before(t))):e.nextSibling?Ea.firstPositionIn(e.nextSibling):x.none();var t},Gl=function(e,t,n){return function(e,t,n){return e?function(e,t){return Jl(t).orThunk(function(){return Kl(t)}).orThunk(function(){return function(e,t){return Ea.nextPosition(e,ha.after(t)).fold(function(){return Ea.prevPosition(e,ha.before(t))},x.some)}(e,t)})}(t,n):function(e,t){return Kl(t).orThunk(function(){return Jl(t)}).orThunk(function(){return function(e,t){var n=ha.before(t.previousSibling?t.previousSibling:t.parentNode);return Ea.prevPosition(e,n).fold(function(){return Ea.nextPosition(e,ha.after(t))},x.some)}(e,t)})}(t,n)}(e,t,n).map(m.curry(Yl,n))},Ql=function(e,t,n){n.fold(function(){e.focus()},function(n){e.selection.setRng(n.toRange(),t)})},Zl=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(Fn.name(t))},ec=function(e){if(Nl(e)){var t=Dn.fromHtml('<br data-mce-bogus="1">');return Uu(e),os(e,t),x.some(ha.before(t.dom()))}return x.none()},tc=function(e,t,n){var r,i=Gl(t,e.getBody(),n.dom()),o=il(n,m.curry(Zl,e),(r=e.getBody(),function(e){return e.dom()===r})),a=function(e,t){return Vo([Tr(e),Er(e),t],function(t,n,r){var i,o=t.dom(),a=n.dom();return vi.isText(o)&&vi.isText(a)?(i=o.data.length,o.appendData(a.data),$u(n),$u(e),r.container()===a?ha(o,i):r):($u(e),r)}).orThunk(function(){return $u(e),t})}(n,i);e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):o.bind(ec).fold(function(){Ql(e,t,a)},function(n){Ql(e,t,x.some(n))})},nc=function(e,t){return function(e,t,n){var r=zs(t?1:-1,e,n),i=ha.fromRangeStart(r);return!1===t&&Vs(i)?x.some(ql.remove(i.getNode(!0))):t&&qs(i)?x.some(ql.remove(i.getNode())):function(e,t,n){return function(e,t){var n=t.getNode(!1===e),r=e?"after":"before";return vi.isElement(n)&&n.getAttribute("data-mce-caret")===r}(t,n)?function(e,t){return e&&vi.isContentEditableFalse(t.nextSibling)?x.some(ql.moveToElement(t.nextSibling)):!1===e&&vi.isContentEditableFalse(t.previousSibling)?x.some(ql.moveToElement(t.previousSibling)):x.none()}(t,n.getNode(!1===t)).fold(function(){return Xl(e,t,n)},x.some):Xl(e,t,n).bind(function(t){return function(e,t,n){return n.fold(function(e){return x.some(ql.remove(e))},function(e){return x.some(ql.moveToElement(e))},function(n){return Ps(t,n,e)?x.none():x.some(ql.moveToPosition(n))})}(e,n,t)})}(e,t,i)}(e.getBody(),t,e.selection.getRng()).map(function(n){return n.fold(function(e,t){return function(n){return e._selectionOverrides.hideFakeCaret(),tc(e,t,Dn.fromDom(n)),!0}}(e,t),function(e,t){return function(n){var r=t?ha.before(n):ha.after(n);return e.selection.setRng(r.toRange()),!0}}(e,t),function(e){return function(t){return e.selection.setRng(t.toRange()),!0}}(e))}).getOr(!1)},rc=function(e,t){return e.selection.isCollapsed()?nc(e,t):function(e,t){var n,r=e.selection.getNode();return!!vi.isContentEditableFalse(r)&&(n=Dn.fromDom(e.getBody()),L.each(Va(n,".mce-offscreen-selection"),$u),tc(e,t,Dn.fromDom(e.selection.getNode())),bl(e),!0)}(e,t)},ic=function(e){var t,n=function(e,t){for(;t&&t!==e;){if(vi.isContentEditableTrue(t)||vi.isContentEditableFalse(t))return t;t=t.parentNode}return null}(e.getBody(),e.selection.getNode());return vi.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n)&&(t=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(n,""),n.appendChild(t),e.selection.setRng(ha.before(t).toRange())),!0},oc=vi.isText,ac=function(e){return oc(e)&&e.data[0]===uo},sc=function(e){return oc(e)&&e.data[e.data.length-1]===uo},uc=function(e){return e.ownerDocument.createTextNode(uo)},lc=function(e,t){return e?function(e){if(oc(e.previousSibling))return sc(e.previousSibling)?e.previousSibling:(e.previousSibling.appendData(uo),e.previousSibling);if(oc(e))return ac(e)?e:(e.insertData(0,uo),e);var t=uc(e);return e.parentNode.insertBefore(t,e),t}(t):function(e){if(oc(e.nextSibling))return ac(e.nextSibling)?e.nextSibling:(e.nextSibling.insertData(0,uo),e.nextSibling);if(oc(e))return sc(e)?e:(e.appendData(uo),e);var t=uc(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t}(t)},cc=m.curry(lc,!0),fc=m.curry(lc,!1),dc=function(e,t){return vi.isText(e.container())?lc(t,e.container()):lc(t,e.getNode())},hc=function(e,t){var n=t.get();return n&&e.container()===n&&po(n)},pc=function(e,t){return t.fold(function(t){xa.remove(e.get());var n=cc(t);return e.set(n),x.some(ha(n,n.length-1))},function(t){return Ea.firstPositionIn(t).map(function(t){if(hc(t,e))return ha(e.get(),1);xa.remove(e.get());var n=dc(t,!0);return e.set(n),ha(n,1)})},function(t){return Ea.lastPositionIn(t).map(function(t){if(hc(t,e))return ha(e.get(),e.get().length-1);xa.remove(e.get());var n=dc(t,!1);return e.set(n),ha(n,n.length-1)})},function(t){xa.remove(e.get());var n=fc(t);return e.set(n),x.some(ha(n,1))})},mc=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].apply(null,t);if(r.isSome())return r}return x.none()},gc=$l([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),vc=function(e,t){return Ds(t,e)||e},yc=function(e,t,n){var r=vl.normalizeForwards(n),i=vc(t,r.container());return vl.findRootInline(e,i,r).fold(function(){return Ea.nextPosition(i,r).bind(m.curry(vl.findRootInline,e,i)).map(function(e){return gc.before(e)})},x.none)},bc=function(e,t){return null===Ou(e,t)},wc=function(e,t,n){return vl.findRootInline(e,t,n).filter(m.curry(bc,t))},xc=function(e,t,n){var r=vl.normalizeBackwards(n);return wc(e,t,r).bind(function(e){return Ea.prevPosition(e,r).isNone()?x.some(gc.start(e)):x.none()})},Cc=function(e,t,n){var r=vl.normalizeForwards(n);return wc(e,t,r).bind(function(e){return Ea.nextPosition(e,r).isNone()?x.some(gc.end(e)):x.none()})},_c=function(e,t,n){var r=vl.normalizeBackwards(n),i=vc(t,r.container());return vl.findRootInline(e,i,r).fold(function(){return Ea.prevPosition(i,r).bind(m.curry(vl.findRootInline,e,i)).map(function(e){return gc.after(e)})},x.none)},Sc=function(e){return!1===vl.isRtl(Tc(e))},kc=function(e,t,n){return mc([yc,xc,Cc,_c],[e,t,n]).filter(Sc)},Tc=function(e){return e.fold(m.identity,m.identity,m.identity,m.identity)},Ec=function(e){return e.fold(m.constant("before"),m.constant("start"),m.constant("end"),m.constant("after"))},Nc=function(e){return e.fold(gc.before,gc.before,gc.after,gc.after)},Ac=function(e,t,n,r,i,o){return Vo([vl.findRootInline(t,n,r),vl.findRootInline(t,n,i)],function(t,r){return t!==r&&vl.hasSameParentBlock(n,t,r)?gc.after(e?t:r):o}).getOr(o)},Rc=function(e,t){return e.fold(m.constant(!0),function(e){return r=t,!(Ec(n=e)===Ec(r)&&Tc(n)===Tc(r));var n,r})},Oc=function(e,t){return e?t.fold(m.compose(x.some,gc.start),x.none,m.compose(x.some,gc.after),x.none):t.fold(x.none,m.compose(x.some,gc.before),x.none,m.compose(x.some,gc.end))},Dc=function(e,t,n,r){var i=vl.normalizePosition(e,r),o=kc(t,n,i);return kc(t,n,i).bind(m.curry(Oc,e)).orThunk(function(){return function(e,t,n,r,i){var o=vl.normalizePosition(e,i);return Ea.fromPosition(e,n,o).map(m.curry(vl.normalizePosition,e)).fold(function(){return r.map(Nc)},function(i){return kc(t,n,i).map(m.curry(Ac,e,t,n,o,i)).filter(m.curry(Rc,r))}).filter(Sc)}(e,t,n,o,r)})},Pc=kc,Ic=Dc,Bc=(m.curry(Dc,!1),m.curry(Dc,!0),Nc),Mc=function(e){return e.fold(gc.start,gc.start,gc.end,gc.end)},Lc=function(e,t,n){var r=e?1:-1;return t.setRng(ha(n.container(),n.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},Hc=function(e,t){var n=t.selection.getRng(),r=e?ha.fromRangeEnd(n):ha.fromRangeStart(n);return!!function(e){return _.isFunction(e.selection.getSel().modify)}(t)&&(e&&vo(r)?Lc(!0,t.selection,r):!(e||!yo(r))&&Lc(!1,t.selection,r))},Fc=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},zc=function(e){return!1!==e.settings.inline_boundaries},jc=function(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},Wc=function(e,t,n){return pc(t,n).map(function(t){return Fc(e,t),n})},Uc=function(e,t,n){return function(){return!!zc(t)&&Hc(e,t)}},$c={move:function(e,t,n){return function(){return!!zc(e)&&function(e,t,n){var r=e.getBody(),i=ha.fromRangeStart(e.selection.getRng()),o=m.curry(vl.isInlineTarget,e);return Ic(n,o,r,i).bind(function(n){return Wc(e,t,n)})}(e,t,n).isSome()}},moveNextWord:m.curry(Uc,!0),movePrevWord:m.curry(Uc,!1),setupSelectedState:function(e){var t=gs(null),n=m.curry(vl.isInlineTarget,e);return e.on("NodeChange",function(r){zc(e)&&(function(e,t,n){var r=L.filter(t.select('*[data-mce-selected="inline-boundary"]'),e),i=L.filter(n,e);L.each(L.difference(r,i),m.curry(jc,!1)),L.each(L.difference(i,r),m.curry(jc,!0))}(n,e.dom,r.parents),function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=ha.fromRangeStart(e.selection.getRng());ha.isTextPosition(n)&&!1===vl.isAtZwsp(n)&&(Fc(e,xa.removeAndReposition(t.get(),n)),t.set(null))}}(e,t),function(e,t,n,r){if(t.selection.isCollapsed()){var i=L.filter(r,e);L.each(i,function(r){var i=ha.fromRangeStart(t.selection.getRng());Pc(e,t.getBody(),i).bind(function(e){return Wc(t,n,e)})})}}(n,e,t,r.parents))}),t},setCaretPosition:Fc},qc=function(e,t){return function(n){return pc(t,n).map(function(t){return $c.setCaretPosition(e,t),!0}).getOr(!1)}},Vc=function(e,t,n,r){var i=e.getBody(),o=m.curry(vl.isInlineTarget,e);e.undoManager.ignore(function(){e.selection.setRng(function(e,t){var n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n}(n,r)),e.execCommand("Delete"),Pc(o,i,ha.fromRangeStart(e.selection.getRng())).map(Mc).map(qc(e,t))}),e.nodeChanged()},Xc=function(e,t,n){return!(!e.selection.isCollapsed()||!function(e){return!1!==e.settings.inline_boundaries}(e))&&function(e,t,n,r){var i=function(e,t){return Ds(t,e)||e}(e.getBody(),r.container()),o=m.curry(vl.isInlineTarget,e),a=Pc(o,i,r);return a.bind(function(e){return n?e.fold(m.constant(x.some(Mc(e))),x.none,m.constant(x.some(Bc(e))),x.none):e.fold(x.none,m.constant(x.some(Bc(e))),x.none,m.constant(x.some(Mc(e))))}).map(qc(e,t)).getOrThunk(function(){var s=Ea.navigate(n,i,r),u=s.bind(function(e){return Pc(o,i,e)});return a.isSome()&&u.isSome()?vl.findRootInline(o,i,r).map(function(t){return!!function(e){return Vo([Ea.firstPositionIn(e),Ea.lastPositionIn(e)],function(t,n){var r=vl.normalizePosition(!0,t),i=vl.normalizePosition(!1,n);return Ea.nextPosition(e,r).map(function(e){return e.isEqual(i)}).getOr(!0)}).getOr(!0)}(t)&&(tc(e,n,Dn.fromDom(t)),!0)}).getOr(!1):u.bind(function(i){return s.map(function(i){return n?Vc(e,t,r,i):Vc(e,t,i,r),!0})}).getOr(!1)})}(e,t,n,ha.fromRangeStart(e.selection.getRng()))},Yc=sr("start","end"),Kc=sr("rng","table","cells"),Jc=$l([{removeTable:["element"]},{emptyCells:["cells"]}]),Gc=function(e,t){return function(e,t,n){return nl(fr.is,wl,e,t,n)}(Dn.fromDom(e),"td,th",t)},Qc=function(e,t){return xl(e,"table",t)},Zc=function(e){return!1===pr.eq(e.start(),e.end())},ef=function(e,t){return Qc(e.start(),t).bind(function(n){return Qc(e.end(),t).bind(function(e){return pr.eq(n,e)?x.some(n):x.none()})})},tf=function(e){return Va(e,"td,th")},nf=function(e,t){return ef(t,e).isSome()},rf=function(e,t){var n=function(e){return m.curry(pr.eq,e)}(e);return function(e,t){var n=Gc(e.startContainer,t),r=Gc(e.endContainer,t);return Vo([n,r],Yc).filter(Zc).filter(function(e){return nf(t,e)}).orThunk(function(){return function(e,t){var n=Gc(t.startContainer,e),r=Gc(t.endContainer,e);return t.collapsed?x.none():Vo([n,r],Yc).fold(function(){return n.fold(function(){return r.bind(function(t){return Qc(t,e).bind(function(e){return L.head(tf(e)).map(function(e){return Yc(e,t)})})})},function(t){return Qc(t,e).bind(function(e){return L.last(tf(e)).map(function(e){return Yc(t,e)})})})},function(t){return nf(e,t)?x.none():function(e,t){return Qc(e.start(),t).bind(function(t){return L.last(tf(t)).map(function(t){return Yc(e.start(),t)})})}(t,e)})}(t,e)})}(t,n).bind(function(e){return function(e,t){return ef(e,n).map(function(t){return Kc(e,t,tf(t))})}(e)})},of=function(e,t){return L.findIndex(e,function(e){return pr.eq(e,t)})},af=function(e){return function(e){return Vo([of(e.cells(),e.rng().start()),of(e.cells(),e.rng().end())],function(t,n){return e.cells().slice(t,n+1)})}(e).map(function(t){var n=e.cells();return t.length===n.length?Jc.removeTable(e.table()):Jc.emptyCells(t)})},sf=function(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},uf=sf,lf=function(e){return L.filter(function(e){return L.bind(e,function(e){var t=Fo(e);return t?[Dn.fromDom(t)]:[]})}(e),ai)},cf=function(e,t){var n=function(e){return Va(e,"td[data-mce-selected],th[data-mce-selected]")}(t),r=lf(e);return n.length>0?n:r},ff=cf,df=function(e){return cf(uf(e.selection.getSel()),Dn.fromDom(e.getBody()))},hf=function(e,t){return L.each(t,Xu),e.selection.setCursorLocation(t[0].dom(),0),!0},pf=function(e,t){return tc(e,!1,t),!0},mf=function(e,t,n,r){return vf(t,r).fold(function(){return function(e,t,n){return function(e,t){return rf(e,t).bind(af)}(t,n).map(function(t){return t.fold(m.curry(pf,e),m.curry(hf,e))})}(e,t,n)},function(t){return function(e,t){return yf(e,t)}(e,t)}).getOr(!1)},gf=function(e,t){return L.find(Bl(t,e),ai)},vf=function(e,t){return L.find(Bl(t,e),function(e){return"caption"===Fn.name(e)})},yf=function(e,t){return Xu(t),e.selection.setCursorLocation(t.dom(),0),x.some(!0)},bf=function(e,t,n){var r=Dn.fromDom(e.getBody());return vf(r,n).fold(function(){return function(e,t,n,r){var i=ha.fromRangeStart(e.selection.getRng());return gf(n,r).bind(function(r){return Nl(r)?yf(e,r):function(e,t,n,r,i){return Ea.navigate(n,e.getBody(),i).bind(function(e){return gf(t,Dn.fromDom(e.getNode())).map(function(e){return!1===pr.eq(e,r)})})}(e,n,t,r,i)})}(e,t,r,n)},function(n){return function(e,t,n,r){var i=ha.fromRangeStart(e.selection.getRng());return Nl(r)?yf(e,r):function(e,t,n,r,i){return Ea.navigate(n,e.getBody(),i).bind(function(o){return function(e,t,n,r){return Ea.firstPositionIn(e.dom()).bind(function(i){return Ea.lastPositionIn(e.dom()).map(function(e){return t?n.isEqual(i)&&r.isEqual(e):n.isEqual(e)&&r.isEqual(i)})}).getOr(!0)}(r,n,i,o)?function(e,t){return yf(e,r)}(e):function(e,t,n){return vf(e,Dn.fromDom(o.getNode())).map(function(e){return!1===pr.eq(e,t)})}(t,r)}).or(x.some(!0))}(e,n,t,r,i)}(e,t,r,n)}).getOr(!1)},wf=function(e,t){var n=Dn.fromDom(e.selection.getStart(!0)),r=df(e);return e.selection.isCollapsed()&&0===r.length?bf(e,t,n):function(e,t){var n=Dn.fromDom(e.getBody()),r=e.selection.getRng(),i=df(e);return 0!==i.length?hf(e,i):mf(e,n,r,t)}(e,n)},xf=function(e,t){e.getDoc().execCommand(t,!1,null)},Cf={deleteCommand:function(e){rc(e,!1)||Xc(e,!1)||zl(e,!1)||wf(e)||Ul(e)||(xf(e,"Delete"),bl(e))},forwardDeleteCommand:function(e){rc(e,!0)||Xc(e,!0)||zl(e,!0)||wf(e)||Ul(e)||xf(e,"ForwardDelete")}},_f=function(e){return function(t,n){return x.from(n).map(Dn.fromDom).filter(Fn.isElement).bind(function(n){return function(e,t,n){var r=function(t){return ar(t,e)};return ol(Dn.fromDom(n),function(e){return r(e).isSome()},function(e){return pr.eq(Dn.fromDom(t),e)}).bind(r)}(e,t,n.dom()).or(function(e,t){return x.from(eo.DOM.getStyle(t,e,!0))}(e,n.dom()))}).getOr("")}},Sf={getFontSize:_f("font-size"),getFontFamily:m.compose(function(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},_f("font-family")),toPt:function(e,t){return/[0-9.]+px$/.test(e)?function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(72*parseInt(e,10)/96,t||0)+"pt":e}},kf=function(e){return Ea.firstPositionIn(e.getBody()).map(function(e){var t=e.container();return vi.isText(t)?t.parentNode:t})},Tf=function(e){return x.from(e.selection.getRng()).bind(function(t){return function(e,t){return e.startContainer===t&&0===e.startOffset}(t,e.getBody())?x.none():x.from(e.selection.getStart(!0))})},Ef=function(e,t){var n=parseInt(t,10);if(n>=1&&n<=7){var r=function(e){return Ot.explode(e.getParam("font_size_style_values",""))}(e),i=function(e){return Ot.explode(e.getParam("font_size_classes",""))}(e);return i?i[n-1]||t:r[n-1]||t}return t},Nf=function(e,t){e.formatter.toggle("fontname",{value:Ef(e,t)}),e.nodeChanged()},Af=function(e){return Tf(e).fold(function(){return kf(e).map(function(t){return Sf.getFontFamily(e.getBody(),t)}).getOr("")},function(t){return Sf.getFontFamily(e.getBody(),t)})},Rf=function(e,t){e.formatter.toggle("fontsize",{value:Ef(e,t)}),e.nodeChanged()},Of=function(e){return Tf(e).fold(function(){return kf(e).map(function(t){return Sf.getFontSize(e.getBody(),t)}).getOr("")},function(t){return Sf.getFontSize(e.getBody(),t)})},Df={isEq:function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}},Pf=function(e,t,n){return null!==function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(e,t,n)},If=function(e,t,n){return Pf(e,t,function(e){return e.nodeName===n})},Bf=function(e){return e&&"TABLE"===e.nodeName},Mf=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},Lf=function(e,t){return mo(e)&&!1===Pf(e,t,Ru)},Hf=function(e,t,n){for(var r=new Vr(t,e.getParent(t.parentNode,e.isBlock)||e.getRoot());t=r[n?"prev":"next"]();)if(vi.isBr(t))return!0},Ff=function(e,t,n,r,i){var o,a,s,u,l=e.getRoot(),c=e.schema.getNonEmptyElements();if(s=e.getParent(i.parentNode,e.isBlock)||l,r&&vi.isBr(i)&&t&&e.isEmpty(s))return x.some(fa(i.parentNode,e.nodeIndex(i)));for(o=new Vr(i,s);u=o[r?"prev":"next"]();){if("false"===e.getContentEditableParent(u)||Lf(u,l))return x.none();if(vi.isText(u)&&u.nodeValue.length>0)return!1===If(u,l,"A")?x.some(fa(u,r?u.nodeValue.length:0)):x.none();if(e.isBlock(u)||c[u.nodeName.toLowerCase()])return x.none();a=u}return n&&a?x.some(fa(a,0)):x.none()},zf=function(e,t,n,r){var i,o,a,s,u,l,c,f=e.getRoot(),d=!1;if(i=r[(n?"start":"end")+"Container"],o=r[(n?"start":"end")+"Offset"],c=vi.isElement(i)&&o===i.childNodes.length,u=e.schema.getNonEmptyElements(),l=n,mo(i))return x.none();if(vi.isElement(i)&&o>i.childNodes.length-1&&(l=!1),vi.isDocument(i)&&(i=f,o=0),i===f){if(l&&(s=i.childNodes[o>0?o-1:0])){if(mo(s))return x.none();if(u[s.nodeName]||Bf(s))return x.none()}if(i.hasChildNodes()){if(o=Math.min(!l&&o>0?o-1:o,i.childNodes.length-1),i=i.childNodes[o],o=vi.isText(i)&&c?i.data.length:0,!t&&i===f.lastChild&&Bf(i))return x.none();if(function(e,t){for(;t&&t!==e;){if(vi.isContentEditableFalse(t))return!0;t=t.parentNode}return!1}(f,i)||mo(i))return x.none();if(i.hasChildNodes()&&!1===Bf(i)){s=i,a=new Vr(i,f);do{if(vi.isContentEditableFalse(s)||mo(s)){d=!1;break}if(vi.isText(s)&&s.nodeValue.length>0){o=l?0:s.nodeValue.length,i=s,d=!0;break}if(u[s.nodeName.toLowerCase()]&&!Mf(s)){o=e.nodeIndex(s),i=s.parentNode,l||o++,d=!0;break}}while(s=l?a.next():a.prev())}}}return t&&(vi.isText(i)&&0===o&&Ff(e,c,t,!0,i).each(function(e){i=e.container(),o=e.offset(),d=!0}),vi.isElement(i)&&((s=i.childNodes[o])||(s=i.childNodes[o-1]),!s||!vi.isBr(s)||function(e,t){return e.previousSibling&&"A"===e.previousSibling.nodeName}(s)||Hf(e,s,!1)||Hf(e,s,!0)||Ff(e,c,t,!0,s).each(function(e){i=e.container(),o=e.offset(),d=!0}))),l&&!t&&vi.isText(i)&&o===i.nodeValue.length&&Ff(e,c,t,!1,i).each(function(e){i=e.container(),o=e.offset(),d=!0}),d?x.some(fa(i,o)):x.none()},jf={normalize:function(e,t){var n=t.collapsed,r=t.cloneRange(),i=fa.fromRangeStart(t);return zf(e,n,!0,r).each(function(e){n&&fa.isAbove(i,e)||r.setStart(e.container(),e.offset())}),n||zf(e,n,!1,r).each(function(e){r.setEnd(e.container(),e.offset())}),n&&r.collapse(!0),Df.isEq(t,r)?x.none():x.some(r)}},Wf=function(e,t,n){var r=e.create("span",{},"&nbsp;");n.parentNode.insertBefore(r,n),t.scrollIntoView(r),e.remove(r)},Uf=function(e,t,n,r){var i=e.createRng();r?(i.setStartBefore(n),i.setEndBefore(n)):(i.setStartAfter(n),i.setEndAfter(n)),t.setRng(i)},$f=function(e,t){var n=Dn.fromTag("br");rs(Dn.fromDom(t),n),e.undoManager.add()},qf=function(e,t){Vf(e.getBody(),t)||is(Dn.fromDom(t),Dn.fromTag("br"));var n=Dn.fromTag("br");is(Dn.fromDom(t),n),Wf(e.dom,e.selection,n.dom()),Uf(e.dom,e.selection,n.dom(),!1),e.undoManager.add()},Vf=function(e,t){return n=ha.after(t),!!vi.isBr(n.getNode())||Ea.nextPosition(e,ha.after(t)).map(function(e){return vi.isBr(e.getNode())}).getOr(!1);var n},Xf=function(e){return e&&"A"===e.nodeName&&"href"in e},Yf=function(e){return e.fold(m.constant(!1),Xf,Xf,m.constant(!1))},Kf=function(e,t){t.fold(m.noop,m.curry($f,e),m.curry(qf,e),m.noop)},Jf={insert:function(e,t){var n=function(e){var t=m.curry(vl.isInlineTarget,e),n=ha.fromRangeStart(e.selection.getRng());return Pc(t,e.getBody(),n).filter(Yf)}(e);n.isSome()?n.each(m.curry(Kf,e)):function(e,t){var n,r,i=e.selection,o=e.dom,a=i.getRng();jf.normalize(o,a).each(function(e){a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)});var s=a.startOffset,u=a.startContainer;if(1===u.nodeType&&u.hasChildNodes()){var l=s>u.childNodes.length-1;u=u.childNodes[Math.min(s,u.childNodes.length-1)]||u,s=l&&3===u.nodeType?u.nodeValue.length:0}var c=o.getParent(u,o.isBlock),f=c?o.getParent(c.parentNode,o.isBlock):null,d=f?f.nodeName.toUpperCase():"",h=t&&t.ctrlKey;"LI"!==d||h||(c=f),u&&3===u.nodeType&&s>=u.nodeValue.length&&(function(e,t,n){for(var r,i=new Vr(u,c),o=e.getNonEmptyElements();r=i.next();)if(o[r.nodeName.toLowerCase()]||r.length>0)return!0}(e.schema)||(n=o.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),r=!0)),n=o.create("br"),a.insertNode(n),Wf(o,i,n),Uf(o,i,n,r),e.undoManager.add()}(e,t)}},Gf=$l([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Qf=(Gf.before,Gf.on,Gf.after,function(e){return e.fold(m.identity,m.identity,m.identity)}),Zf=$l([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ed=sr("start","soffset","finish","foffset"),td={domRange:Zf.domRange,relative:Zf.relative,exact:Zf.exact,exactFromRange:function(e){return Zf.exact(e.start(),e.soffset(),e.finish(),e.foffset())},range:ed,getWin:function(e){var t=function(e){return e.match({domRange:function(e){return Dn.fromDom(e.startContainer)},relative:function(e,t){return Qf(e)},exact:function(e,t,n,r){return e}})}(e);return Cr(t)}},nd=Rn.detect().browser,rd=function(e,t){var n=Fn.isText(t)?function(e){return Vu.get(e)}(t).length:Ar(t).length+1;return e>n?n:e<0?0:e},id=function(e){return td.range(e.start(),rd(e.soffset(),e.start()),e.finish(),rd(e.foffset(),e.finish()))},od=function(e,t){return pr.contains(e,t)||pr.eq(e,t)},ad=function(e){return function(t){return od(e,t.start())&&od(e,t.finish())}},sd=function(e){return!0===e.inline||nd.isIE()},ud=function(e){return td.range(Dn.fromDom(e.startContainer),e.startOffset,Dn.fromDom(e.endContainer),e.endOffset)},ld=function(e){var t=e.getSelection();return(t&&0!==t.rangeCount?x.from(t.getRangeAt(0)):x.none()).map(ud)},cd=function(e){var t=Cr(e);return ld(t.dom()).filter(ad(e))},fd=function(e,t){return x.from(t).filter(ad(e)).map(id)},dd=function(e){var t=document.createRange();try{return t.setStart(e.start().dom(),e.soffset()),t.setEnd(e.finish().dom(),e.foffset()),x.some(t)}catch(e){return x.none()}},hd=function(e){return(e.bookmark?e.bookmark:x.none()).bind(m.curry(fd,Dn.fromDom(e.getBody()))).bind(dd)},pd={store:function(e){var t=sd(e)?cd(Dn.fromDom(e.getBody())):x.none();e.bookmark=t.isSome()?t:e.bookmark},storeNative:function(e,t){var n=Dn.fromDom(e.getBody()),r=(sd(e)?x.from(t):x.none()).map(ud).filter(ad(n));e.bookmark=r.isSome()?r:e.bookmark},readRange:ld,restore:function(e){hd(e).each(function(t){e.selection.setRng(t)})},getRng:hd,getBookmark:cd,validate:fd},md=function(e,t){var n=e.settings,r=e.dom,i=e.selection,o=e.formatter,a=/[a-z%]+$/i.exec(n.indentation)[0],s=parseInt(n.indentation,10),u=e.getParam("indent_use_margin",!1);e.queryCommandState("InsertUnorderedList")||e.queryCommandState("InsertOrderedList")||(n.forced_root_block||r.getParent(i.getNode(),r.isBlock)||o.apply("div"),L.each(i.getSelectedBlocks(),function(e){return function(e,t,n,r,i,o){if("false"!==e.getContentEditable(o)&&"LI"!==o.nodeName){var a=n?"margin":"padding";if(a="TABLE"===o.nodeName?"margin":a,a+="rtl"===e.getStyle(o,"direction",!0)?"Right":"Left","outdent"===t){var s=Math.max(0,parseInt(o.style[a]||0,10)-r);e.setStyle(o,a,s?s+i:"")}else s=parseInt(o.style[a]||0,10)+r+i,e.setStyle(o,a,s)}}(r,t,u,s,a,e)}))},gd=Ot.each,vd=Ot.extend,yd=Ot.map,bd=Ot.inArray;function wd(e){var t,n,r,i,o={state:{},exec:{},value:{}},a=e.settings;e.on("PreInit",function(){t=e.dom,n=e.selection,a=e.settings,r=e.formatter});var s=function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=o.state[t])return n(t);try{return e.getDoc().queryCommandState(t)}catch(e){}return!1}},u=function(e,t){t=t||"exec",gd(e,function(e,n){gd(n.toLowerCase().split(","),function(n){o[t][n]=e})})},l=function(t,n,r){t=t.toLowerCase(),o.value[t]=function(){return n.call(r||e)}};vd(this,{execCommand:function(t,n,r,i){var a,s,u=!1;if(!e.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||i&&i.skip_focus?pd.restore(e):e.focus(),(i=e.fire("BeforeExecCommand",{command:t,ui:n,value:r})).isDefaultPrevented())return!1;if(s=t.toLowerCase(),a=o.exec[s])return a(s,n,r),e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;if(gd(e.plugins,function(i){if(i.execCommand&&i.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),u=!0,!1}),u)return u;if(e.theme&&e.theme.execCommand&&e.theme.execCommand(t,n,r))return e.fire("ExecCommand",{command:t,ui:n,value:r}),!0;try{u=e.getDoc().execCommand(t,n,r)}catch(e){}return!!u&&(e.fire("ExecCommand",{command:t,ui:n,value:r}),!0)}},queryCommandState:s,queryCommandValue:function(t){var n;if(!e.quirks.isHidden()&&!e.removed){if(t=t.toLowerCase(),n=o.value[t])return n(t);try{return e.getDoc().queryCommandValue(t)}catch(e){}}},queryCommandSupported:function(t){if(t=t.toLowerCase(),o.exec[t])return!0;try{return e.getDoc().queryCommandSupported(t)}catch(e){}return!1},addCommands:u,addCommand:function(t,n,r){t=t.toLowerCase(),o.exec[t]=function(t,i,o,a){return n.call(r||e,i,o,a)}},addQueryStateHandler:function(t,n,r){t=t.toLowerCase(),o.state[t]=function(){return n.call(r||e)}},addQueryValueHandler:l,hasCustomCommand:function(e){return e=e.toLowerCase(),!!o.exec[e]}});var c=function(t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=null),e.getDoc().execCommand(t,n,r)},f=function(e){return r.match(e)},d=function(t,n){r.toggle(t,n?{value:n}:void 0),e.nodeChanged()},h=function(e){i=n.getBookmark(e)},p=function(){n.moveToBookmark(i)};u({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){e.undoManager.add()},"Cut,Copy,Paste":function(t){var n,r=e.getDoc();try{c(t)}catch(e){n=!0}if("paste"!==t||r.queryCommandEnabled(t)||(n=!0),n||!r.queryCommandSupported(t)){var i=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");fe.mac&&(i=i.replace(/Ctrl\+/g,"â+")),e.notificationManager.open({text:i,type:"error"})}},unlink:function(){if(n.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");t&&e.dom.remove(t,!0)}else r.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"===t&&(t="justify"),gd("left,center,right,justify".split(","),function(e){t!==e&&r.remove("align"+e)}),"none"!==t&&d("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var r,i;c(e),(r=t.getParent(n.getNode(),"ol,ul"))&&(i=r.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(i.nodeName)&&(h(),t.split(i,r),p()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){d(e)},"ForeColor,HiliteColor":function(e,t,n){d(e,n)},FontName:function(t,n,r){Nf(e,r)},FontSize:function(t,n,r){Rf(e,r)},RemoveFormat:function(e){r.remove(e)},mceBlockQuote:function(){d("blockquote")},FormatBlock:function(e,t,n){return d(n||"p")},mceCleanup:function(){var t=n.getBookmark();e.setContent(e.getContent()),n.moveToBookmark(t)},mceRemoveNode:function(t,r,i){var o=i||n.getNode();o!==e.getBody()&&(h(),e.dom.remove(o,!0),p())},mceSelectNodeDepth:function(r,i,o){var a=0;t.getParent(n.getNode(),function(e){if(1===e.nodeType&&a++===o)return n.select(e),!1},e.getBody())},mceSelectNode:function(e,t,r){n.select(r)},mceInsertContent:function(t,n,r){tl.insertAtCaret(e,r)},mceInsertRawHTML:function(t,r,i){var o=e.getContent();n.setContent("tiny_mce_marker"),e.setContent(o.replace(/tiny_mce_marker/g,function(){return i}))},mceToggleFormat:function(e,t,n){d(n)},mceSetContent:function(t,n,r){e.setContent(r)},"Indent,Outdent":function(t){md(e,t)},mceRepaint:function(){},InsertHorizontalRule:function(){e.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){e.hasVisual=!e.hasVisual,e.addVisual()},mceReplaceContent:function(t,r,i){e.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,n.getContent({format:"text"})))},mceInsertLink:function(e,i,o){var a;"string"==typeof o&&(o={href:o}),a=t.getParent(n.getNode(),"a"),o.href=o.href.replace(" ","%20"),a&&o.href||r.remove("link"),o.href&&r.apply("link",o,a)},selectAll:function(){var e=t.getParent(n.getStart(),vi.isContentEditableTrue);if(e){var r=t.createRng();r.selectNodeContents(e),n.setRng(r)}},delete:function(){Cf.deleteCommand(e)},forwardDelete:function(){Cf.forwardDeleteCommand(e)},mceNewDocument:function(){e.setContent("")},InsertLineBreak:function(t,n,r){return Jf.insert(e,r),!0}}),u({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var i="align"+e.substring(7),o=n.isCollapsed()?[t.getParent(n.getNode(),t.isBlock)]:n.getSelectedBlocks(),a=yd(o,function(e){return!!r.matchNode(e,i)});return-1!==bd(a,!0)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return f(e)},mceBlockQuote:function(){return f("blockquote")},Outdent:function(){var e;if(a.inline_styles){if((e=t.getParent(n.getStart(),t.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return!0;if((e=t.getParent(n.getEnd(),t.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return!0}return s("InsertUnorderedList")||s("InsertOrderedList")||!a.inline_styles&&!!t.getParent(n.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var r=t.getParent(n.getNode(),"ul,ol");return r&&("insertunorderedlist"===e&&"UL"===r.tagName||"insertorderedlist"===e&&"OL"===r.tagName)}},"state"),u({Undo:function(){e.undoManager.undo()},Redo:function(){e.undoManager.redo()}}),l("FontName",function(){return Af(e)},this),l("FontSize",function(){return Of(e)},this)}var xd=Ot.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),Cd=function(e){var t,n,r=this,i={},o=function(){return!1},a=function(){return!0};t=(e=e||{}).scope||r,n=e.toggleEvent||o;var s=function(e,t,a,s){var u,l,c;if(!1===t&&(t=o),t)for(t={func:t},s&&Ot.extend(t,s),c=(l=e.toLowerCase().split(" ")).length;c--;)e=l[c],(u=i[e])||(u=i[e]=[],n(e,!0)),a?u.unshift(t):u.push(t);return r},u=function(e,t){var o,a,s,u,l;if(e)for(o=(u=e.toLowerCase().split(" ")).length;o--;){if(e=u[o],a=i[e],!e){for(s in i)n(s,!1),delete i[s];return r}if(a){if(t)for(l=a.length;l--;)a[l].func===t&&(a=a.slice(0,l).concat(a.slice(l+1)),i[e]=a);else a.length=0;a.length||(n(e,!1),delete i[e])}}else{for(e in i)n(e,!1);i={}}return r};r.fire=function(n,r){var s,l,c,f;if(n=n.toLowerCase(),(r=r||{}).type=n,r.target||(r.target=t),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=a},r.stopPropagation=function(){r.isPropagationStopped=a},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=a},r.isDefaultPrevented=o,r.isPropagationStopped=o,r.isImmediatePropagationStopped=o),e.beforeFire&&e.beforeFire(r),s=i[n])for(l=0,c=s.length;l<c;l++){if((f=s[l]).once&&u(n,f.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(!1===f.func.call(t,r))return r.preventDefault(),r}return r},r.on=s,r.off=u,r.once=function(e,t,n){return s(e,t,n,{once:!0})},r.has=function(e){return e=e.toLowerCase(),!(!i[e]||0===i[e].length)}};Cd.isNative=function(e){return!!xd[e.toLowerCase()]};var _d,Sd=function(e){return e._eventDispatcher||(e._eventDispatcher=new Cd({scope:e,toggleEvent:function(t,n){Cd.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher},kd={fire:function(e,t,n){if(this.removed&&"remove"!==e)return t;if(t=Sd(this).fire(e,t,n),!1!==n&&this.parent)for(var r=this.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},on:function(e,t,n){return Sd(this).on(e,t,n)},off:function(e,t){return Sd(this).off(e,t)},once:function(e,t){return Sd(this).once(e,t)},hasEventListeners:function(e){return Sd(this).has(e)}},Td=eo.DOM,Ed=function(e,t){return"selectionchange"===t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=Td.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()},Nd=function(e,t){var n,r,i=function(e){return!e.hidden&&!e.readonly};if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed)if(n=Ed(e,t),e.settings.event_root){if(_d||(_d={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&_d){for(t in _d)e.dom.unbind(Ed(e,t));_d=null}})),_d[t])return;r=function(n){for(var r=n.target,o=e.editorManager.get(),a=o.length;a--;){var s=o[a].getBody();(s===r||Td.isChildOf(r,s))&&i(o[a])&&o[a].fire(t,n)}},_d[t]=r,Td.bind(n,t,r)}else r=function(n){i(e)&&e.fire(t,n)},Td.bind(n,t,r),e.delegates[t]=r},Ad={bindPendingEventDelegates:function(){var e=this;Ot.each(e._pendingNativeEvents,function(t){Nd(e,t)})},toggleNativeEvent:function(e,t){"focus"!==e&&"blur"!==e&&(t?this.initialized?Nd(this,e):this._pendingNativeEvents?this._pendingNativeEvents.push(e):this._pendingNativeEvents=[e]:this.initialized&&(this.dom.unbind(Ed(this,e),e,this.delegates[e]),delete this.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this.getBody(),n=this.dom;if(this.delegates){for(e in this.delegates)this.dom.unbind(Ed(this,e),e,this.delegates[e]);delete this.delegates}!this.inline&&t&&n&&(t.onload=null,n.unbind(this.getWin()),n.unbind(this.getDoc())),n&&(n.unbind(t),n.unbind(this.getContainer()))}},Rd=Ad=Ot.extend({},kd,Ad),Od=function(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},Dd=function(e,t){e._clickBlocker&&(e._clickBlocker.unbind(),e._clickBlocker=null),t?(e._clickBlocker=function(e){var t,n;return t=e.getBody(),n=function(t){e.dom.getParents(t.target,"a").length>0&&t.preventDefault()},e.dom.bind(t,"click",n),{unbind:function(){e.dom.unbind(t,"click",n)}}}(e),e.selection.controlSelection.hideResizeRect(),e.readonly=!0,e.getBody().contentEditable=!1):(e.readonly=!1,e.getBody().contentEditable=!0,Od(e,"StyleWithCSS",!1),Od(e,"enableInlineTableEditing",!1),Od(e,"enableObjectResizing",!1),e.focus(),e.nodeChanged())},Pd=Ot.each,Id=Ot.explode,Bd={f9:120,f10:121,f11:122},Md=Ot.makeMap("alt,ctrl,shift,meta,access");function Ld(e){var t={},n=[],r=function(e){var t,n,r={};for(n in Pd(Id(e,"+"),function(e){e in Md?r[e]=!0:/^[0-9]{2,}$/.test(e)?r.keyCode=parseInt(e,10):(r.charCode=e.charCodeAt(0),r.keyCode=Bd[e]||e.toUpperCase().charCodeAt(0))}),t=[r.keyCode],Md)r[n]?t.push(n):r[n]=!1;return r.id=t.join(","),r.access&&(r.alt=!0,fe.mac?r.ctrl=!0:r.shift=!0),r.meta&&(fe.mac?r.meta=!0:(r.ctrl=!0,r.meta=!1)),r},i=function(t,n,i,o){var a;return(a=Ot.map(Id(t,">"),r))[a.length-1]=Ot.extend(a[a.length-1],{func:i,scope:o||e}),Ot.extend(a[0],{desc:e.translate(n),subpatterns:a.slice(1)})},o=function(e,t){return!!t&&t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&t.alt===e.altKey&&t.shift===e.shiftKey&&!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0)},a=function(e){return e.func?e.func.call(e.scope):null};e.on("keyup keypress keydown",function(e){!function(e){return e.altKey||e.ctrlKey||e.metaKey}(e)&&!function(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}(e)||e.isDefaultPrevented()||(Pd(t,function(t){if(o(e,t))return n=t.subpatterns.slice(0),"keydown"===e.type&&a(t),!0}),o(e,n[0])&&(1===n.length&&"keydown"===e.type&&a(n[0]),n.shift()))}),this.add=function(n,r,o,a){var s;return s=o,"string"==typeof o?o=function(){e.execCommand(s,!1,null)}:Ot.isArray(s)&&(o=function(){e.execCommand(s[0],s[1],s[2])}),Pd(Id(Ot.trim(n.toLowerCase())),function(e){var n=i(e,r,o,a);t[n.id]=n}),!0},this.remove=function(e){var n=i(e);return!!t[n.id]&&(delete t[n.id],!0)}}var Hd=function(e){var t=xr(e).dom();return e.dom()===t.activeElement},Fd=function(e){return function(e){var t=void 0!==e?e.dom():document;return x.from(t.activeElement).map(Dn.fromDom)}(xr(e)).filter(function(t){return e.dom().contains(t.dom())})},zd=function(e,t){(function(e,t){return function(e){return e.collapsed?x.from(zo(e.startContainer,e.startOffset)).map(Dn.fromDom):x.none()}(t).bind(function(t){return oi(t)?x.some(t):!1===pr.contains(e,t)?x.some(e):x.none()})})(Dn.fromDom(e.getBody()),t).bind(function(e){return Ea.firstPositionIn(e.dom())}).fold(function(){e.selection.normalize()},function(t){return e.selection.setRng(t.toRange())})},jd=function(e){if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},Wd=function(e){return e.inline?function(e){var t,n=e.getBody();return n&&(t=Dn.fromDom(n),Hd(t)||Fd(t).isSome())}(e):function(e){return e.iframeElement&&Hd(Dn.fromDom(e.iframeElement))}(e)},Ud=function(e){return e.editorManager.setActive(e)},$d=Wd,qd=function(e,t){return t.dom()[e]},Vd=function(e,t){return parseInt(or(t,e),10)},Xd=m.curry(qd,"clientWidth"),Yd=m.curry(qd,"clientHeight"),Kd=m.curry(Vd,"margin-top"),Jd=m.curry(Vd,"margin-left"),Gd={isXYInContentArea:function(e,t,n){var r=Dn.fromDom(e.getBody()),i=e.inline?r:_r(r),o=function(e,t,n,r){var i=t.dom().getBoundingClientRect();return{x:n-(e?i.left+t.dom().clientLeft+Jd(t):0),y:r-(e?i.top+t.dom().clientTop+Kd(t):0)}}(e.inline,i,t,n);return function(e,t,n){var r=Xd(e),i=Yd(e);return t>=0&&n>=0&&t<=r&&n<=i}(i,o.x,o.y)},isEditorAttachedToDom:function(e){var t;return(t=e.inline?e.getBody():e.getContentAreaContainer(),x.from(t).map(Dn.fromDom)).map(function(e){return pr.contains(xr(e),e)}).getOr(!1)}};function Qd(e){var t=[],n=function(){var t,n=e.theme;return n&&n.getNotificationManagerImpl?n.getNotificationManagerImpl():{open:t=function(){throw new Error("Theme did not provide a NotificationManager implementation.")},close:t,reposition:t,getArgs:t}},r=function(){t.length>0&&n().reposition(t)},i=function(e){L.findIndex(t,function(t){return t===e}).each(function(e){t.splice(e,1)})},o=function(o){if(!e.removed&&Gd.isEditorAttachedToDom(e))return L.find(t,function(e){return t=n().getArgs(e),r=o,!(t.type!==r.type||t.text!==r.text||t.progressBar||t.timeout||r.progressBar||r.timeout);var t,r}).getOrThunk(function(){e.editorManager.setActive(e);var a=n().open(o,function(){i(a),r()});return function(e){t.push(e)}(a),r(),a})};return function(e){e.on("SkinLoaded",function(){var t=e.settings.service_message;t&&o({text:t,type:"warning",timeout:0,icon:""})}),e.on("ResizeEditor ResizeWindow",function(){ge.requestAnimationFrame(r)}),e.on("remove",function(){L.each(t,function(e){n().close(e)})})}(e),{open:o,close:function(){x.from(t[0]).each(function(e){n().close(e),i(e),r()})},getNotifications:function(){return t}}}function Zd(e){var t=[],n=function(){var t,n=e.theme;return n&&n.getWindowManagerImpl?n.getWindowManagerImpl():{open:t=function(){throw new Error("Theme did not provide a WindowManager implementation.")},alert:t,confirm:t,close:t,getParams:t,setParams:t}},r=function(e,t){return function(){return t?t.apply(e,arguments):void 0}},i=function(n){t.push(n),function(t){e.fire("OpenWindow",{win:t})}(n)},o=function(n){L.findIndex(t,function(e){return e===n}).each(function(r){t.splice(r,1),function(t){e.fire("CloseWindow",{win:t})}(n),0===t.length&&e.focus()})},a=function(){return x.from(t[t.length-1])};return e.on("remove",function(){L.each(t.slice(0),function(e){n().close(e)})}),{windows:t,open:function(t,r){e.editorManager.setActive(e),pd.store(e);var a=n().open(t,r,o);return i(a),a},alert:function(e,t,a){var s=n().alert(e,r(a||this,t),o);i(s)},confirm:function(e,t,a){var s=n().confirm(e,r(a||this,t),o);i(s)},close:function(){a().each(function(e){n().close(e),o(e)})},getParams:function(){return a().map(n().getParams).getOr(null)},setParams:function(e){a().each(function(t){n().setParams(t,e)})},getWindows:function(){return t}}}var eh=so.PluginManager,th=function(e,t){e.notificationManager.open({type:"error",text:t})},nh=function(e,t){e._skinLoaded?th(e,t):e.on("SkinLoaded",function(){th(e,t)})},rh={pluginLoadError:function(e,t){nh(e,function(e,t){var n=function(e,t){for(var n in eh.urls)if(eh.urls[n]+"/plugin"+t+".js"===e)return n;return null}(t,e.suffix);return n?"Failed to load plugin: "+n+" from url "+t:"Failed to load plugin url: "+t}(e,t))},uploadError:function(e,t){nh(e,"Failed to upload image: "+t)},displayError:nh,initError:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=window.console;r&&(r.error?r.error.apply(r,arguments):r.log.apply(r,arguments))}},ih=so.PluginManager,oh=so.ThemeManager;function ah(){return new(z.getOrDie("XMLHttpRequest"))}function sh(e,t){return new(z.getOrDie("Blob"))(e,t)}var uh=function(e){var t,n;return e=decodeURIComponent(e).split(","),(n=/data:([^;]+)/.exec(e[0]))&&(t=n[1]),{type:t,data:e[1]}},lh=function(e){return new de(function(t){var n,r,i;e=uh(e);try{n=function(e){return z.getOrDie("atob")(e)}(e.data)}catch(e){return void t(new sh([]))}for(r=new function(e){return new(z.getOrDie("Uint8Array"))(e)}(n.length),i=0;i<r.length;i++)r[i]=n.charCodeAt(i);t(new sh([r],{type:e.type}))})},ch=function(e){return 0===e.indexOf("blob:")?function(e){return new de(function(t,n){var r=function(){n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var i=new ah;i.open("GET",e,!0),i.responseType="blob",i.onload=function(){200===this.status?t(this.response):r()},i.onerror=r,i.send()}catch(e){r()}})}(e):0===e.indexOf("data:")?lh(e):null},fh=uh,dh=0,hh=function(e){return(e||"blobid")+dh++},ph=function(e,t,n,r){var i,o;0!==t.src.indexOf("blob:")?(i=fh(t.src).data,(o=e.findFirst(function(e){return e.base64()===i}))?n({image:t,blobInfo:o}):ch(t.src).then(function(r){o=e.create(hh(),r,i),e.add(o),n({image:t,blobInfo:o})},function(e){r(e)})):(o=e.getByUri(t.src))?n({image:t,blobInfo:o}):ch(t.src).then(function(r){(function(e){return new de(function(t){var n=new function(){return new(z.getOrDie("FileReader"))};n.onloadend=function(){t(n.result)},n.readAsDataURL(e)})})(r).then(function(a){i=fh(a).data,o=e.create(hh(),r,i),e.add(o),n({image:t,blobInfo:o})})},function(e){r(e)})},mh=function(e){return e?e.getElementsByTagName("img"):[]},gh=0,vh={uuid:function(e){return e+gh+++(t=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+t()+t()+t());var t}};function yh(e){var t,n,r,i,o,a,s,u,l,c,f=(t=[],n=qo.constant,r=function(e){var t,r,i;if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return t=e.id||vh.uuid("blobid"),r=e.name||t,{id:n(t),name:n(r),filename:n(r+"."+(i=e.blob.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[i.toLowerCase()]||"dat")),blob:n(e.blob),base64:n(e.base64),blobUri:n(e.blobUri||W.createObjectURL(e.blob)),uri:n(e.uri)}},{create:function(e,t,n,i){return r("object"==typeof e?e:{id:e,name:i,blob:t,base64:n})},add:function(e){i(e.id())||t.push(e)},get:i=function(e){return o(function(t){return t.id()===e})},getByUri:function(e){return o(function(t){return t.blobUri()===e})},findFirst:o=function(e){return Tt.filter(t,e)[0]},removeByUri:function(e){t=Tt.filter(t,function(t){return t.blobUri()!==e||(W.revokeObjectURL(t.blobUri()),!1)})},destroy:function(){Tt.each(t,function(e){W.revokeObjectURL(e.blobUri())}),t=[]}}),d=e.settings,h=(u={},l=function(e,t){return{status:e,resultUri:t}},{hasBlobUri:c=function(e){return e in u},getResultUri:function(e){var t=u[e];return t?t.resultUri:null},isPending:function(e){return!!c(e)&&1===u[e].status},isUploaded:function(e){return!!c(e)&&2===u[e].status},markPending:function(e){u[e]=l(1,null)},markUploaded:function(e,t){u[e]=l(2,t)},removeFailed:function(e){delete u[e]},destroy:function(){u={}}}),p=function(t){return function(n){return e.selection?t(n):[]}},m=function(e,t,n){var r=0;do{-1!==(r=e.indexOf(t,r))&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1)}while(-1!==r);return e},g=function(e,t,n){return e=m(e,'src="'+t+'"','src="'+n+'"'),m(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},v=function(t,n){Tt.each(e.undoManager.data,function(e){"fragmented"===e.type?e.fragments=Tt.map(e.fragments,function(e){return g(e,t,n)}):e.content=g(e.content,t,n)})},y=function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},b=function(t){return a||(a=function(e,t){var n={},r=function(e,n,r,i){var o,a;(o=new ah).open("POST",t.url),o.withCredentials=t.credentials,o.upload.onprogress=function(e){i(e.loaded/e.total*100)},o.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=function(){var e,i,a;o.status<200||o.status>=300?r("HTTP Error: "+o.status):(e=JSON.parse(o.responseText))&&"string"==typeof e.location?n((i=t.basePath,a=e.location,i?i.replace(/\/$/,"")+"/"+a.replace(/^\//,""):a)):r("Invalid JSON: "+o.responseText)},(a=new FormData).append("file",e.blob(),e.filename()),o.send(a)},i=function(e,t){return{url:t,blobInfo:e,status:!0}},o=function(e,t){return{url:"",blobInfo:e,status:!1,error:t}},a=function(e,t){Ot.each(n[e],function(e){e(t)}),delete n[e]},s=function(r,s){return r=Ot.grep(r,function(t){return!e.isUploaded(t.blobUri())}),de.all(Ot.map(r,function(r){return e.isPending(r.blobUri())?function(e){var t=r.blobUri();return new de(function(e){n[t]=n[t]||[],n[t].push(e)})}():function(t,n,r){return e.markPending(t.blobUri()),new de(function(s){var u;try{var l=function(){u&&u.close()};n(t,function(n){l(),e.markUploaded(t.blobUri(),n),a(t.blobUri(),i(t,n)),s(i(t,n))},function(n){l(),e.removeFailed(t.blobUri()),a(t.blobUri(),o(t,n)),s(o(t,n))},function(e){e<0||e>100||(u||(u=r()),u.progressBar.value(e))})}catch(e){s(o(t,e.message))}})}(r,t.handler,s)}))};return t=Ot.extend({credentials:!1,handler:r},t),{upload:function(e,n){return t.url||t.handler!==r?s(e,n):new de(function(e){e([])})}}}(h,{url:d.images_upload_url,basePath:d.images_upload_base_path,credentials:d.images_upload_credentials,handler:d.images_upload_handler})),C().then(p(function(n){var r;return r=Tt.map(n,function(e){return e.blobInfo}),a.upload(r,y).then(p(function(r){var i=Tt.map(r,function(t,r){var i=n[r].image;return t.status&&!1!==e.settings.images_replace_blob_uris?function(t,n){f.removeByUri(t.src),v(t.src,n),e.$(t).attr({src:d.images_reuse_filename?n+"?"+(new Date).getTime():n,"data-mce-src":e.convertURL(n,"src")})}(i,t.url):t.error&&rh.uploadError(e,t.error),{element:i,status:t.status}});return t&&t(i),i}))}))},w=function(e){if(!1!==d.automatic_uploads)return b(e)},x=function(e){return!d.images_dataimg_filter||d.images_dataimg_filter(e)},C=function(){return s||(s=function(e,t){var n={};return{findAll:function(r,i){var o;i||(i=qo.constant(!0)),o=Tt.filter(mh(r),function(t){var n=t.src;return!!fe.fileApi&&!t.hasAttribute("data-mce-bogus")&&!t.hasAttribute("data-mce-placeholder")&&!(!n||n===fe.transparentSrc)&&(0===n.indexOf("blob:")?!e.isUploaded(n):0===n.indexOf("data:")&&i(t))});var a=Tt.map(o,function(e){if(n[e.src])return new de(function(t){n[e.src].then(function(n){if("string"==typeof n)return n;t({image:e,blobInfo:n.blobInfo})})});var r=new de(function(n,r){ph(t,e,n,r)}).then(function(e){return delete n[e.image.src],e}).catch(function(t){return delete n[e.src],t});return n[e.src]=r,r});return de.all(a)}}}(h,f)),s.findAll(e.getBody(),x).then(p(function(t){return t=Tt.filter(t,function(t){return"string"!=typeof t||(rh.displayError(e,t),!1)}),Tt.each(t,function(e){v(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),t}))},_=function(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,n){var r=h.getResultUri(n);if(r)return'src="'+r+'"';var i=f.getByUri(n);return i||(i=Tt.reduce(e.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null)),i?'src="data:'+i.blob().type+";base64,"+i.base64()+'"':t})};return e.on("setContent",function(){!1!==e.settings.automatic_uploads?w():C()}),e.on("RawSaveContent",function(e){e.content=_(e.content)}),e.on("getContent",function(e){e.source_view||"raw"===e.format||(e.content=_(e.content))}),e.on("PostRender",function(){e.parser.addNodeFilter("img",function(e){Tt.each(e,function(e){var t=e.attr("src");if(!f.getByUri(t)){var n=h.getResultUri(t);n&&e.attr("src",n)}})})}),{blobCache:f,uploadImages:b,uploadImagesAuto:w,scanForImages:C,destroy:function(){f.destroy(),h.destroy(),s=a=null}}}var bh=function(e,t){return e.hasOwnProperty(t.nodeName)},wh=function(e,t){return!!vi.isText(t)||!!vi.isElement(t)&&!bh(e,t)&&!Hu.isBookmarkNode(t)},xh=function(e,t){if(vi.isText(t)){if(0===t.nodeValue.length)return!0;if(/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||bh(e,t.nextSibling)))return!0}return!1},Ch=function(e){var t,n,r,i,o,a,s,u,l,c,f,d=e.settings,h=e.dom,p=e.selection,m=e.schema,g=m.getBlockElements(),v=p.getStart(),y=e.getBody();if(f=d.forced_root_block,v&&vi.isElement(v)&&f&&(c=y.nodeName.toLowerCase(),m.isValidChild(c,f.toLowerCase())&&!function(e,t,n){return L.exists(Il(Dn.fromDom(n),Dn.fromDom(t)),function(t){return bh(e,t.dom())})}(g,y,v))){for(n=(t=p.getRng()).startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,l=$d(e),v=y.firstChild;v;)if(wh(g,v)){if(xh(g,v)){s=v,v=v.nextSibling,h.remove(s);continue}a||(a=h.create(f,e.settings.forced_root_block_attrs),v.parentNode.insertBefore(a,v),u=!0),s=v,v=v.nextSibling,a.appendChild(s)}else a=null,v=v.nextSibling;u&&l&&(t.setStart(n,r),t.setEnd(i,o),p.setRng(t),e.nodeChanged())}};var _h,Sh=function(e){var t,n,r,i;return i=e.getBoundingClientRect(),n=(t=e.ownerDocument).documentElement,r=t.defaultView,{top:i.top+r.pageYOffset-n.clientTop,left:i.left+r.pageXOffset-n.clientLeft}},kh=vi.isContentEditableFalse,Th=vi.isContentEditableTrue,Eh=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},Nh=function(e){e.dragging=!1,e.element=null,Eh(e.ghost)},Ah=function(e){var t,n,r,i,o,a,s={};t=eo.DOM,a=document,n=function(e,t){return function(n){if(0===n.button){var r=Tt.find(t.dom.getParents(n.target),qo.or(kh,Th));if(s=t.getBody(),kh(u=r)&&u!==s){var i=t.dom.getPos(r),o=t.getBody(),a=t.getDoc().documentElement;e.element=r,e.screenX=n.screenX,e.screenY=n.screenY,e.maxX=(t.inline?o.scrollWidth:a.offsetWidth)-2,e.maxY=(t.inline?o.scrollHeight:a.offsetHeight)-2,e.relX=n.pageX-i.x,e.relY=n.pageY-i.y,e.width=r.offsetWidth,e.height=r.offsetHeight,e.ghost=function(e,t,n,r){var i=t.cloneNode(!0);e.dom.setStyles(i,{width:n,height:r}),e.dom.setAttrib(i,"data-mce-selected",null);var o=e.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(o,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),e.dom.setStyles(i,{margin:0,boxSizing:"border-box"}),o.appendChild(i),o}(t,r,e.width,e.height)}}var s,u}}(s,e),r=function(e,t){var n=ge.throttle(function(e,n){t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(e,n)},0);return function(r){var i,o,a=Math.max(Math.abs(r.screenX-e.screenX),Math.abs(r.screenY-e.screenY));if(function(e){return e.element}(e)&&!e.dragging&&a>10){if(t.fire("dragstart",{target:e.element}).isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){var s=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}}(e,function(e,t){return n=function(e){return e.inline?Sh(e.getBody()):{left:0,top:0}}(e),r=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}}(e),{pageX:(i=function(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=Sh(e.getContentAreaContainer()),r=function(e){var t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},i={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:i}(e);return{left:t.pageX-n.left+r.left,top:t.pageY-n.top+r.top}}return{left:t.pageX,top:t.pageY}}(e,t)).left-n.left+r.left,pageY:i.top-n.top+r.top};var n,r,i}(t,r));i=e.ghost,o=t.getBody(),i.parentNode!==o&&o.appendChild(i),function(e,t,n,r,i,o){var a=0,s=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>i&&(a=t.pageX+n-i),t.pageY+r>o&&(s=t.pageY+r-o),e.style.width=n-a+"px",e.style.height=r-s+"px"}(e.ghost,s,e.width,e.height,e.maxX,e.maxY),n(r.clientX,r.clientY)}}}(s,e),i=function(e,t){return function(n){if(e.dragging&&function(e,t,n){return t!==n&&!e.dom.isChildOf(t,n)&&!kh(t)}(t,3===(a=t.selection.getSel().getRangeAt(0).startContainer).nodeType?a.parentNode:a,e.element)){var r=((o=e.element.cloneNode(!0)).removeAttribute("data-mce-selected"),o),i=t.fire("drop",{targetClone:r,clientX:n.clientX,clientY:n.clientY});i.isDefaultPrevented()||(r=i.targetClone,t.undoManager.transact(function(){Eh(e.element),t.insertContent(t.dom.getOuterHTML(r)),t._selectionOverrides.hideFakeCaret()}))}var o,a;Nh(e)}}(s,e),o=function(e,t){return function(){Nh(e),e.dragging&&t.fire("dragend")}}(s,e),e.on("mousedown",n),e.on("mousemove",r),e.on("mouseup",i),t.bind(a,"mousemove",r),t.bind(a,"mouseup",o),e.on("remove",function(){t.unbind(a,"mousemove",r),t.unbind(a,"mouseup",o)})},Rh=function(e){return Tt.reduce(e,function(e,t){return e.concat(function(e){var t=function(t){return Tt.map(t,function(t){return(t=Io(t)).node=e,t})};if(vi.isElement(e))return t(e.getClientRects());if(vi.isText(e)){var n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}}(t))},[])};!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(_h||(_h={}));var Oh=function(e,t,n,r,i,o){var a,s,u=0,l=[],c=function(r){var o,a,c;for(c=Rh([r]),-1===e&&(c=c.reverse()),o=0;o<c.length;o++)if(a=c[o],!n(a,s)){if(l.length>0&&t(a,Tt.last(l))&&u++,a.line=u,i(a))return!0;l.push(a)}};return(s=Tt.last(o.getClientRects()))?(c(a=o.getNode()),function(e,t,n,r){for(;r=Os(r,e,Do,t);)if(n(r))return}(e,r,c,a),l):l},Dh=m.curry(Oh,_h.Up,Lo,Ho),Ph=m.curry(Oh,_h.Down,Ho,Lo),Ih=function(e){return function(t){return function(e,t){return t.line>e}(e,t)}},Bh=function(e){return function(t){return function(e,t){return t.line===e}(e,t)}},Mh=vi.isContentEditableFalse,Lh=Os,Hh=function(e,t){return Math.abs(e.left-t)},Fh=function(e,t){return Math.abs(e.right-t)},zh=function(e,t){return e>=t.left&&e<=t.right},jh=function(e,t){return Tt.reduce(e,function(e,n){var r,i;return r=Math.min(Hh(e,t),Fh(e,t)),i=Math.min(Hh(n,t),Fh(n,t)),zh(t,n)?n:zh(t,e)?e:i===r&&Mh(n.node)?n:i<r?n:e})},Wh=function(e,t,n,r){for(;r=Lh(r,e,Do,t);)if(n(r))return},Uh=function(e,t,n){return!n.collapsed&&L.foldl(n.getClientRects(),function(n,r){return n||function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom}(r,e,t)},!1)},$h=function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){var r=arguments;null===n&&(n=setTimeout(function(){e.apply(null,r),n=null,r=null},t))}}},qh={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return fe.mac?e.metaKey:e.ctrlKey&&!e.altKey}},Vh=vi.isContentEditableTrue,Xh=vi.isContentEditableFalse,Yh=Vs,Kh=qs,Jh=function(e,t){for(var n=e.getBody();t&&t!==n;){if(Vh(t)||Xh(t))return t;t=t.parentNode}return null},Gh=function(e){var t,n,r=e.getBody(),i=bs(e.getBody(),function(t){return e.dom.isBlock(t)},function(){return $d(e)}),o="sel-"+e.dom.uniqueId(),a=function(t){t&&e.selection.setRng(t)},s=function(){return e.selection.getRng()},u=function(t,n,r,o){return void 0===o&&(o=!0),e.fire("ShowCaret",{target:n,direction:t,before:r}).isDefaultPrevented()?null:(o&&e.selection.scrollIntoView(n,-1===t),i.show(r,n))},l=function(e,t){return t=zs(e,r,t),-1===e?ha.fromRangeStart(t):ha.fromRangeEnd(t)},c=function(e){return mo(e)||bo(e)||wo(e)},f=function(e){return c(e.startContainer)||c(e.endContainer)},d=function(n,r){var i,a,s,c,d,h,m,g,v,y,b=e.$,w=e.dom;if(!n)return null;if(n.collapsed){if(!f(n))if(!1===r){if(g=l(-1,n),ws(g.getNode(!0)))return u(-1,g.getNode(!0),!1,!1);if(ws(g.getNode()))return u(-1,g.getNode(),!g.isAtEnd(),!1)}else{if(g=l(1,n),ws(g.getNode()))return u(1,g.getNode(),!g.isAtEnd(),!1);if(ws(g.getNode(!0)))return u(1,g.getNode(!0),!1,!1)}return null}return c=n.startContainer,d=n.startOffset,h=n.endOffset,3===c.nodeType&&0===d&&Xh(c.parentNode)&&(c=c.parentNode,d=w.nodeIndex(c),c=c.parentNode),1!==c.nodeType?null:(h===d+1&&(i=c.childNodes[d]),Xh(i)?(v=y=i.cloneNode(!0),(m=e.fire("ObjectSelected",{target:i,targetClone:v})).isDefaultPrevented()?null:(a=Cl(Dn.fromDom(e.getBody()),"#"+o).fold(function(){return b([])},function(e){return b([e.dom()])}),v=m.targetClone,0===a.length&&(a=b('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",o)).appendTo(e.getBody()),n=e.dom.createRng(),v===y&&fe.ie?(a.empty().append('<p style="font-size: 0" data-mce-bogus="all">Â </p>').append(v),n.setStartAfter(a[0].firstChild.firstChild),n.setEndAfter(v)):(a.empty().append("Â ").append(v).append("Â "),n.setStart(a[0].firstChild,1),n.setEnd(a[0].lastChild,0)),a.css({top:w.getPos(i,e.getBody()).y}),a[0].focus(),(s=e.selection.getSel()).removeAllRanges(),s.addRange(n),L.each(Va(Dn.fromDom(e.getBody()),"*[data-mce-selected]"),function(e){Qn(e,"data-mce-selected")}),i.setAttribute("data-mce-selected","1"),t=i,p(),n)):null)},h=function(){t&&(t.removeAttribute("data-mce-selected"),Cl(Dn.fromDom(e.getBody()),"#"+o).each($u),t=null)},p=function(){i.hide()};return fe.ceFalse&&(function(){e.on("mouseup",function(t){var n=s();n.collapsed&&Gd.isXYInContentArea(e,t.clientX,t.clientY)&&a(Da(e,n,!1))}),e.on("click",function(t){var n;(n=Jh(e,t.target))&&(Xh(n)&&(t.preventDefault(),e.focus()),Vh(n)&&e.dom.isChildOf(n,e.selection.getNode())&&h())}),e.on("blur NewBlock",function(){h()}),e.on("ResizeWindow FullscreenStateChanged",function(){return i.reposition()});!function(e){var t=!1;e.on("touchstart",function(){t=!1}),e.on("touchmove",function(){t=!0}),e.on("touchend",function(n){var r=Jh(e,n.target);Xh(r)&&(t||(n.preventDefault(),d(Oa(e,r))))})}(e),e.on("mousedown",function(t){var n,i=t.target;if((i===r||"HTML"===i.nodeName||e.dom.isChildOf(i,r))&&!1!==Gd.isXYInContentArea(e,t.clientX,t.clientY))if(n=Jh(e,i))Xh(n)?(t.preventDefault(),d(Oa(e,n))):(h(),Vh(n)&&t.shiftKey||Uh(t.clientX,t.clientY,e.selection.getRng())||e.selection.placeCaretAt(t.clientX,t.clientY));else if(!1===ws(i)){h(),p();var o=function(e,t,n){var r,i=Rh(function(e){return Tt.filter(Tt.toArray(e.getElementsByTagName("*")),ws)}(e)),o=Tt.filter(i,function(e){return n>=e.top&&n<=e.bottom});return(r=jh(o,t))&&(r=jh(function(e,t){var n=[],r=function(e,r){var i;return i=Tt.filter(Rh([r]),function(n){return!e(n,t)}),n=n.concat(i),0===i.length};return n.push(t),Wh(_h.Up,e,m.curry(r,Lo),t.node),Wh(_h.Down,e,m.curry(r,Ho),t.node),n}(e,r),t))&&ws(r.node)?function(e,t){return{node:e.node,before:Hh(e,t)<Fh(e,t)}}(r,t):null}(r,t.clientX,t.clientY);if(o&&!function(t,n){var r,i,o=e.dom.getParent(t,e.dom.isBlock),a=e.dom.getParent(n,e.dom.isBlock);return!(!o||!e.dom.isChildOf(o,a)||!1!==Xh(Jh(e,o)))||o&&(r=o,i=a,!(e.dom.getParent(r,e.dom.isBlock)===e.dom.getParent(i,e.dom.isBlock)))&&function(e){var t=ou(e);if(!e.firstChild)return!1;var n=ha.before(e.firstChild),r=t.next(n);return r&&!Kh(r)&&!Yh(r)}(o)}(t.target,o.node)){t.preventDefault();var s=u(1,o.node,o.before,!1);e.getBody().focus(),a(s)}}}),e.on("keypress",function(t){qh.modifierPressed(t)||(t.keyCode,Xh(e.selection.getNode())&&t.preventDefault())}),e.on("getSelectionRange",function(e){var n=e.range;if(t){if(!t.parentNode)return void(t=null);(n=n.cloneRange()).selectNode(t),e.range=n}}),e.on("setSelectionRange",function(e){var t;(t=d(e.range,e.forward))&&(e.range=t)}),e.on("AfterSetSelectionRange",function(t){var n,r=t.range;f(r)||p(),n=r.startContainer.parentNode,e.dom.hasClass(n,"mce-offscreen-selection")||h()}),e.on("copy",function(t){var n,r=t.clipboardData;if(!t.isDefaultPrevented()&&t.clipboardData&&!fe.ie){var i=(n=e.dom.get(o))?n.getElementsByTagName("*")[0]:n;i&&(t.preventDefault(),r.clearData(),r.setData("text/html",i.outerHTML),r.setData("text/plain",i.outerText))}}),function(e){Ah(e),function(e){e.on("drop",function(t){var n=void 0!==t.clientX?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;(kh(n)||kh(e.dom.getContentEditableParent(n)))&&t.preventDefault()})}(e)}(e),function(e){var t=$h(function(){if(!e.removed&&e.selection.getRng().collapsed){var t=Pa(e,e.selection.getRng(),!1);e.selection.setRng(t)}},0);e.on("focus",function(){t.throttle()}),e.on("blur",function(){t.cancel()})}(e)}(),(n=e.contentStyles).push(i.getCss()),n.push(".mce-content-body .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}.mce-content-body *[contentEditable=false] {cursor: default;}.mce-content-body *[contentEditable=true] {cursor: text;}")),{showCaret:u,showBlockCaretContainer:function(t){t.hasAttribute("data-mce-caret")&&(xo(t),a(s()),e.selection.scrollIntoView(t[0]))},hideFakeCaret:p,destroy:function(){i.destroy(),t=null}}},Qh=Ot.each,Zh=function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")},ep=function(e){return e.replace(/<!--|-->/g,"")},tp=function(e,t,n){var r,i,o,a,s=1;for(a=e.getShortEndedElements(),(o=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=r=n;i=o.exec(t);){if(r=o.lastIndex,"/"===i[1])s--;else if(!i[1]){if(i[2]in a)continue;s++}if(0===s)break}return r};function np(e,t){void 0===t&&(t=Wi());var n=function(){};!1!==(e=e||{}).fix_self_closing&&(e.fix_self_closing=!0),Qh("comment cdata text start end pi doctype".split(" "),function(t){t&&(self[t]=e[t]||n)});var r=e.comment?e.comment:n,i=e.cdata?e.cdata:n,o=e.text?e.text:n,a=e.start?e.start:n,s=e.end?e.end:n,u=e.pi?e.pi:n,l=e.doctype?e.doctype:n;return{parse:function(n){var c,f,d,h,p,m,g,v,y,b,w,x,C,_,S,k,T,E,N,A,R,O,D,P,I,B,M,L,H,F=0,z=[],j=0,W=Oi.decode,U=Ot.makeMap("src,href,data,background,formaction,poster"),$=/((java|vb)script|mhtml):/i,q=/^data:/i,V=function(e){var t,n;for(t=z.length;t--&&z[t].name!==e;);if(t>=0){for(n=z.length-1;n>=t;n--)(e=z[n]).valid&&s(e.name);z.length=t}},X=function(t,n,r,i,o){var a,s;if(r=(n=n.toLowerCase())in w?n:W(r||i||o||""),C&&!v&&!1===Zh(n)){if(!(a=E[n])&&N){for(s=N.length;s--&&!(a=N[s]).pattern.test(n););-1===s&&(a=null)}if(!a)return;if(a.validValues&&!(r in a.validValues))return}if(U[n]&&!e.allow_script_urls){var u=r.replace(/[\s\u0000-\u001F]+/g,"");try{u=decodeURIComponent(u)}catch(e){u=unescape(u)}if($.test(u))return;if(!e.allow_html_data_urls&&q.test(u)&&!/^data:image\//i.test(u))return}v&&(n in U||0===n.indexOf("on"))||(h.map[n]=r,h.push({name:n,value:r}))};for(I=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),B=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,b=t.getShortEndedElements(),P=e.self_closing_elements||t.getSelfClosingElements(),w=t.getBoolAttrs(),C=e.validate,y=e.remove_internals,H=e.fix_self_closing,M=t.getSpecialElements(),D=n+">";c=I.exec(D);){if(F<c.index&&o(W(n.substr(F,c.index-F))),f=c[6])":"===(f=f.toLowerCase()).charAt(0)&&(f=f.substr(1)),V(f);else if(f=c[7]){if(c.index+c[0].length>n.length){o(W(n.substr(c.index))),F=c.index+c[0].length;continue}if(":"===(f=f.toLowerCase()).charAt(0)&&(f=f.substr(1)),x=f in b,H&&P[f]&&z.length>0&&z[z.length-1].name===f&&V(f),!C||(_=t.getElementRule(f))){if(S=!0,C&&(E=_.attributes,N=_.attributePatterns),(T=c[8])?((v=-1!==T.indexOf("data-mce-type"))&&y&&(S=!1),(h=[]).map={},T.replace(B,X)):(h=[]).map={},C&&!v){if(A=_.attributesRequired,R=_.attributesDefault,O=_.attributesForced,_.removeEmptyAttrs&&!h.length&&(S=!1),O)for(p=O.length;p--;)g=(k=O[p]).name,"{$uid}"===(L=k.value)&&(L="mce_"+j++),h.map[g]=L,h.push({name:g,value:L});if(R)for(p=R.length;p--;)(g=(k=R[p]).name)in h.map||("{$uid}"===(L=k.value)&&(L="mce_"+j++),h.map[g]=L,h.push({name:g,value:L}));if(A){for(p=A.length;p--&&!(A[p]in h.map););-1===p&&(S=!1)}if(k=h.map["data-mce-bogus"]){if("all"===k){F=tp(t,n,I.lastIndex),I.lastIndex=F;continue}S=!1}}S&&a(f,h,x)}else S=!1;if(d=M[f]){d.lastIndex=F=c.index+c[0].length,(c=d.exec(n))?(S&&(m=n.substr(F,c.index-F)),F=c.index+c[0].length):(m=n.substr(F),F=n.length),S&&(m.length>0&&o(m,!0),s(f)),I.lastIndex=F;continue}x||(T&&T.indexOf("/")===T.length-1?S&&s(f):z.push({name:f,valid:S}))}else(f=c[1])?(">"===f.charAt(0)&&(f=" "+f),e.allow_conditional_comments||"[if"!==f.substr(0,3).toLowerCase()||(f=" "+f),r(f)):(f=c[2])?i(ep(f)):(f=c[3])?l(f):(f=c[4])&&u(f,c[5]);F=c.index+c[0].length}for(F<n.length&&o(W(n.substr(F))),p=z.length-1;p>=0;p--)(f=z[p]).valid&&s(f.name)}}}(np||(np={})).findEndTag=tp;var rp=np,ip=function(e,t){var n,r,i,o,a,s=t,u=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,l=e.schema;for(s=function(e,t){var n=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return t.replace(n,"")}(e.getTempAttrs(),s),a=l.getShortEndedElements();o=u.exec(s);)r=u.lastIndex,i=o[0].length,n=a[o[1]]?r:rp.findEndTag(l,s,r),s=s.substring(0,r-i)+s.substring(n),u.lastIndex=r-i;return lo(s)},op=ip,ap=ip,sp=function(e){return vi.isElement(e)?e.outerHTML:vi.isText(e)?Oi.encodeRaw(e.data,!1):vi.isComment(e)?"\x3c!--"+e.data+"--\x3e":""},up=function(e,t){return function(e,t){var n=0;Tt.each(e,function(e){0===e[0]?n++:1===e[0]?(function(e,t,n){var r=function(e){var t,n,r;for(r=document.createElement("div"),t=document.createDocumentFragment(),e&&(r.innerHTML=e);n=r.firstChild;)t.appendChild(n);return t}(t);if(e.hasChildNodes()&&n<e.childNodes.length){var i=e.childNodes[n];i.parentNode.insertBefore(r,i)}else e.appendChild(r)}(t,e[1],n),n++):2===e[0]&&function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}}(t,n)})}(function(e,t){var n=e.length+t.length+2,r=new Array(n),i=new Array(n),o=function(n,r,i,a,u){var l=s(n,r,i,a);if(null===l||l.start===r&&l.diag===r-a||l.end===n&&l.diag===n-i)for(var c=n,f=i;c<r||f<a;)c<r&&f<a&&e[c]===t[f]?(u.push([0,e[c]]),++c,++f):r-n>a-i?(u.push([2,e[c]]),++c):(u.push([1,t[f]]),++f);else{o(n,l.start,i,l.start-l.diag,u);for(var d=l.start;d<l.end;++d)u.push([0,e[d]]);o(l.end,r,l.end-l.diag,a,u)}},a=function(n,r,i,o){for(var a=n;a-r<o&&a<i&&e[a]===t[a-r];)++a;return function(e,t,n){return{start:e,end:a,diag:r}}(n)},s=function(n,o,s,u){var l=o-n,c=u-s;if(0===l||0===c)return null;var f,d,h,p,m,g=l-c,v=c+l,y=(v%2==0?v:v+1)/2;for(r[1+y]=n,i[1+y]=o+1,f=0;f<=y;++f){for(d=-f;d<=f;d+=2){for(h=d+y,d===-f||d!==f&&r[h-1]<r[h+1]?r[h]=r[h+1]:r[h]=r[h-1]+1,m=(p=r[h])-n+s-d;p<o&&m<u&&e[p]===t[m];)r[h]=++p,++m;if(g%2!=0&&g-f<=d&&d<=g+f&&i[h-g]<=r[h])return a(i[h-g],d+n-s,o,u)}for(d=g-f;d<=g+f;d+=2){for(h=d+y-g,d===g-f||d!==g+f&&i[h+1]<=i[h-1]?i[h]=i[h+1]-1:i[h]=i[h-1],m=(p=i[h]-1)-n+s-d;p>=n&&m>=s&&e[p]===t[m];)i[h]=p--,m--;if(g%2==0&&-f<=d&&d<=f&&i[h]<=r[h+g])return a(i[h],d+n-s,o,u)}}},u=[];return o(0,e.length,0,t.length,u),u}(Tt.map(t.childNodes,sp),e),t),t},lp=function(e){return e.dom().innerHTML},cp=function(e,t){var n=xr(e).dom(),r=Dn.fromDom(n.createDocumentFragment()),i=function(e,t){var n=(t||document).createElement("div");return n.innerHTML=e,Ar(Dn.fromDom(n))}(t,n);ju(r,i),Uu(e),os(e,r)},fp=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},dp=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},hp=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content},pp=function(e){var t=Dn.fromTag("body");return cp(t,hp(e)),L.each(Va(t,"*[data-mce-bogus]"),qu),lp(t)},mp={createFragmentedLevel:fp,createCompleteLevel:dp,createFromEditor:function(e){var t,n,r;return t=function(e){return Tt.filter(Tt.map(e.childNodes,sp),function(e){return e.length>0})}(e.getBody()),-1!==(n=(r=L.bind(t,function(t){var n=ap(e.serializer,t);return n.length>0?[n]:[]})).join("")).indexOf("</iframe>")?fp(r):dp(n)},applyToEditor:function(e,t,n){"fragmented"===t.type?up(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw"}),e.selection.moveToBookmark(n?t.beforeBookmark:t.bookmark)},isEq:function(e,t){return!(!e||!t)&&(!!function(e,t){return hp(e)===hp(t)}(e,t)||function(e,t){return pp(e)===pp(t)}(e,t))}};function gp(e){var t,n,r=this,i=0,o=[],a=0,s=function(){return 0===a},u=function(e){s()&&(r.typing=e)},l=function(t){e.setDirty(t)},c=function(e){u(!1),r.add({},e)},f=function(){r.typing&&(u(!1),r.add())};return e.on("init",function(){r.add()}),e.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(f(),r.beforeChange())}),e.on("ExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&c(e)}),e.on("ObjectResizeStart Cut",function(){r.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("DragEnd",c),e.on("KeyUp",function(t){var i=t.keyCode;t.isDefaultPrevented()||((i>=33&&i<=36||i>=37&&i<=40||45===i||t.ctrlKey)&&(c(),e.nodeChanged()),46!==i&&8!==i||e.nodeChanged(),n&&r.typing&&!1===mp.isEq(mp.createFromEditor(e),o[0])&&(!1===e.isDirty()&&(l(!0),e.fire("change",{level:o[0],lastLevel:null})),e.fire("TypingUndo"),n=!1,e.nodeChanged()))}),e.on("KeyDown",function(e){var t=e.keyCode;if(!e.isDefaultPrevented())if(t>=33&&t<=36||t>=37&&t<=40||45===t)r.typing&&c(e);else{var i=e.ctrlKey&&!e.altKey||e.metaKey;!(t<16||t>20)||224===t||91===t||r.typing||i||(r.beforeChange(),u(!0),r.add({},e),n=!0)}}),e.on("MouseDown",function(e){r.typing&&c(e)}),e.on("input",function(e){e.inputType&&("insertReplacementText"===e.inputType||function(e){return"insertText"===e.inputType&&null===e.data}(e))&&c(e)}),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||e.nodeChanged()}),r={data:o,typing:!1,beforeChange:function(){s()&&(t=Au.getUndoBookmark(e.selection))},add:function(n,r){var a,u,c,f=e.settings;if(c=mp.createFromEditor(e),n=n||{},n=Ot.extend(n,c),!1===s()||e.removed)return null;if(u=o[i],e.fire("BeforeAddUndo",{level:n,lastLevel:u,originalEvent:r}).isDefaultPrevented())return null;if(u&&mp.isEq(u,n))return null;if(o[i]&&(o[i].beforeBookmark=t),f.custom_undo_redo_levels&&o.length>f.custom_undo_redo_levels){for(a=0;a<o.length-1;a++)o[a]=o[a+1];o.length--,i=o.length}n.bookmark=Au.getUndoBookmark(e.selection),i<o.length-1&&(o.length=i+1),o.push(n),i=o.length-1;var d={level:n,lastLevel:u,originalEvent:r};return e.fire("AddUndo",d),i>0&&(l(!0),e.fire("change",d)),n},undo:function(){var t;return r.typing&&(r.add(),r.typing=!1,u(!1)),i>0&&(t=o[--i],mp.applyToEditor(e,t,!0),l(!0),e.fire("undo",{level:t})),t},redo:function(){var t;return i<o.length-1&&(t=o[++i],mp.applyToEditor(e,t,!1),l(!0),e.fire("redo",{level:t})),t},clear:function(){o=[],i=0,r.typing=!1,r.data=o,e.fire("ClearUndos")},hasUndo:function(){return i>0||r.typing&&o[0]&&!mp.isEq(mp.createFromEditor(e),o[0])},hasRedo:function(){return i<o.length-1&&!r.typing},transact:function(e){return f(),r.beforeChange(),r.ignore(e),r.add()},ignore:function(e){try{a++,e()}finally{a--}},extra:function(t,n){var a,s;r.transact(t)&&(s=o[i].bookmark,a=o[i-1],mp.applyToEditor(e,a,!0),r.transact(n)&&(o[i-1].beforeBookmark=s))}}}var vp=function(e){return e&&/^(IMG)$/.test(e.nodeName)},yp=function(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)},bp=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t},wp=function(e,t,n){var r,i,o,a=n.startOffset,s=n.startContainer;if((n.startContainer!==n.endContainer||!vp(n.startContainer.childNodes[n.startOffset]))&&1===s.nodeType)for(a<(o=s.childNodes).length?r=new Vr(s=o[a],e.getParent(s,e.isBlock)):(r=new Vr(s=o[o.length-1],e.getParent(s,e.isBlock))).next(!0),i=r.current();i;i=r.next())if(3===i.nodeType&&!yp(i))return n.setStart(i,0),void t.setRng(n)},xp=function(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1===e.nodeType||!yp(e))return e},Cp=function(e,t){return t.nodeType&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},_p=function(e,t,n){return e.schema.isValidChild(t,n)},Sp=yp,kp=function(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e},Tp=function(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()},Ep=bp,Np=function(e,t,n){return bp(e,e.getStyle(t,n),n)},Ap=function(e,t){var n;return e.getParent(t,function(t){return(n=e.getStyle(t,"text-decoration"))&&"none"!==n}),n},Rp=function(e,t,n){return e.getParents(t,n,e.getRoot())},Op=Hu.isBookmarkNode,Dp=Rp,Pp=Sp,Ip=Cp,Bp=function(e,t){for(void 0===t&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}},Mp=function(e,t){for(var n=t;n;){if(1===n.nodeType&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},Lp=function(e,t,n,r){var i,o,a=n.nodeValue;return void 0===r&&(r=e?a.length:0),e?-1===(i=(i=a.lastIndexOf(" ",r))>(o=a.lastIndexOf("Â ",r))?i:o)||t||i++:(i=a.indexOf(" ",r),o=a.indexOf("Â ",r),i=-1!==i&&(-1===o||i<o)?i:o),i},Hp=function(e,t,n,r,i,o){var a,s,u,l;if(3===n.nodeType){if(-1!==(u=Lp(i,o,n,r)))return{container:n,offset:u};l=n}for(a=new Vr(n,e.getParent(n,e.isBlock)||t);s=a[i?"prev":"next"]();)if(3===s.nodeType){if(l=s,-1!==(u=Lp(i,o,s)))return{container:s,offset:u}}else if(e.isBlock(s))break;if(l)return{container:l,offset:r=i?0:l.length}},Fp=function(e,t,n,r,i){var o,a,s,u;for(3===r.nodeType&&0===r.nodeValue.length&&r[i]&&(r=r[i]),o=Dp(e,r),a=0;a<o.length;a++)for(s=0;s<t.length;s++)if(!("collapsed"in(u=t[s])&&u.collapsed!==n.collapsed)&&e.is(o[a],u.selector))return o[a];return r},zp=function(e,t,n,r){var i,o=e.dom,a=o.getRoot();if(t[0].wrapper||(i=o.getParent(n,t[0].block,a)),!i){var s=o.getParent(n,"LI,TD,TH");i=o.getParent(3===n.nodeType?n.parentNode:n,function(t){return t!==a&&Ip(e,t)},s)}if(i&&t[0].wrapper&&(i=Dp(o,i,"ul,ol").reverse()[0]||i),!i)for(i=n;i[r]&&!o.isBlock(i[r])&&(i=i[r],!Tp(i,"br")););return i||n},jp=function(e,t,n,r,i,o,a){var s,u,l,c,f,d;if(s=u=a?n:i,c=a?"previousSibling":"nextSibling",f=e.getRoot(),3===s.nodeType&&!Pp(s)&&(a?r>0:o<s.nodeValue.length))return s;for(;;){if(!t[0].block_expand&&e.isBlock(u))return u;for(l=u[c];l;l=l[c])if(!Op(l)&&!Pp(l)&&("BR"!==(d=l).nodeName||!d.getAttribute("data-mce-bogus")||d.nextSibling))return u;if(u===f||u.parentNode===f){s=u;break}u=u.parentNode}return s},Wp=function(e,t,n,r){var i,o=t.startContainer,a=t.startOffset,s=t.endContainer,u=t.endOffset,l=e.dom;return 1===o.nodeType&&o.hasChildNodes()&&3===(o=zo(o,a)).nodeType&&(a=0),1===s.nodeType&&s.hasChildNodes()&&3===(s=zo(s,t.collapsed?u:u-1)).nodeType&&(u=s.nodeValue.length),o=Mp(l,o),s=Mp(l,s),(Op(o.parentNode)||Op(o))&&3===(o=(o=Op(o)?o:o.parentNode).nextSibling||o).nodeType&&(a=0),(Op(s.parentNode)||Op(s))&&3===(s=(s=Op(s)?s:s.parentNode).previousSibling||s).nodeType&&(u=s.length),n[0].inline&&(t.collapsed&&((i=Hp(l,e.getBody(),o,a,!0,r))&&(o=i.container,a=i.offset),(i=Hp(l,e.getBody(),s,u,!1,r))&&(s=i.container,u=i.offset)),s=r?s:function(e,t){var n=Bp(e,u);if(n.node){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=Bp(n.node.previousSibling);n.node&&n.offset>0&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&n.offset>1&&(e=n.node).splitText(n.offset-1)}return e}(s)),(n[0].inline||n[0].block_expand)&&(n[0].inline&&3===o.nodeType&&0!==a||(o=jp(l,n,o,a,s,u,!0)),n[0].inline&&3===s.nodeType&&u!==s.nodeValue.length||(s=jp(l,n,o,a,s,u,!1))),n[0].selector&&!1!==n[0].expand&&!n[0].inline&&(o=Fp(l,n,t,o,"previousSibling"),s=Fp(l,n,t,s,"nextSibling")),(n[0].block||n[0].selector)&&(o=zp(e,n,o,"previousSibling"),s=zp(e,n,s,"nextSibling"),n[0].block&&(l.isBlock(o)||(o=jp(l,n,o,a,s,u,!0)),l.isBlock(s)||(s=jp(l,n,o,a,s,u,!1)))),1===o.nodeType&&(a=l.nodeIndex(o),o=o.parentNode),1===s.nodeType&&(u=l.nodeIndex(s)+1,s=s.parentNode),{startContainer:o,startOffset:a,endContainer:s,endOffset:u}},Up=Tp,$p=function(e,t,n){var r=e.formatter.get(n);if(r)for(var i=0;i<r.length;i++)if(!1===r[i].inherit&&e.dom.is(t,r[i].selector))return!0;return!1},qp=function(e,t,n,r){var i=e.dom.getRoot();return t!==i&&(t=e.dom.getParent(t,function(t){return!!$p(e,t,n)||t.parentNode===i||!!Yp(e,t,n,r,!0)}),Yp(e,t,n,r))},Vp=function(e,t,n){return!!Up(t,n.inline)||!!Up(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0)},Xp=function(e,t,n,r,i,o){var a,s,u,l=n[r];if(n.onmatch)return n.onmatch(t,n,r);if(l)if(void 0===l.length){for(a in l)if(l.hasOwnProperty(a)){if(s="attributes"===r?e.getAttrib(t,a):Np(e,t,a),i&&!s&&!n.exact)return;if((!i||n.exact)&&!Up(s,Ep(e,kp(l[a],o),a)))return}}else for(u=0;u<l.length;u++)if("attributes"===r?e.getAttrib(t,l[u]):Np(e,t,l[u]))return n;return n},Yp=function(e,t,n,r,i){var o,a,s,u,l=e.formatter.get(n),c=e.dom;if(l&&t)for(a=0;a<l.length;a++)if(o=l[a],Vp(e.dom,t,o)&&Xp(c,t,o,"attributes",i,r)&&Xp(c,t,o,"styles",i,r)){if(u=o.classes)for(s=0;s<u.length;s++)if(!e.dom.hasClass(t,u[s]))return;return o}},Kp={matchNode:Yp,matchName:Vp,match:function(e,t,n,r){var i;return r?qp(e,r,t,n):(r=e.selection.getNode(),!!qp(e,r,t,n)||!((i=e.selection.getStart())===r||!qp(e,i,t,n)))},matchAll:function(e,t,n){var r,i=[],o={};return r=e.selection.getStart(),e.dom.getParent(r,function(r){var a,s;for(a=0;a<t.length;a++)s=t[a],!o[s]&&Yp(e,r,s,n)&&(o[s]=!0,i.push(s))},e.dom.getRoot()),i},canApply:function(e,t){var n,r,i,o,a,s=e.formatter.get(t),u=e.dom;if(s)for(n=e.selection.getStart(),r=Rp(u,n),o=s.length-1;o>=0;o--){if(!(a=s[o].selector)||s[o].defaultBlock)return!0;for(i=r.length-1;i>=0;i--)if(u.is(r[i],a))return!0}return!1},matchesUnInheritedFormatSelector:$p},Jp=function(e,t){return e.splitText(t)},Gp={split:function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,i=e.endOffset;return t===r&&vi.isText(t)?n>0&&n<t.nodeValue.length&&(t=(r=Jp(t,n)).previousSibling,i>n?(t=r=Jp(r,i-=n).previousSibling,i=r.nodeValue.length,n=0):i=0):(vi.isText(t)&&n>0&&n<t.nodeValue.length&&(t=Jp(t,n),n=0),vi.isText(r)&&i>0&&i<r.nodeValue.length&&(i=(r=Jp(r,i).previousSibling).nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:i}}},Qp=uo,Zp=function(e){var t;if(e)for(e=(t=new Vr(e,e)).current();e;e=t.next())if(3===e.nodeType)return e;return null},em=function(e){var t=Dn.fromTag("span");return Jn(t,{id:"_mce_caret","data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&os(t,Dn.fromText(Qp)),t},tm=function(e,t,n,r){var i,o,a;i=t.getRng(!0),o=e.getParent(n,e.isBlock),function(e){return function(e){for(var t=[];e;){if(3===e.nodeType&&e.nodeValue!==Qp||e.childNodes.length>1)return[];1===e.nodeType&&t.push(e),e=e.firstChild}return t}(e).length>0}(n)?(!1!==r&&(i.setStartBefore(n),i.setEndBefore(n)),e.remove(n)):(a=function(e){var t=Zp(n);return t&&t.nodeValue.charAt(0)===Qp&&t.deleteData(0,1),t}(),i.startContainer===a&&i.startOffset>0&&i.setStart(a,i.startOffset-1),i.endContainer===a&&i.endOffset>0&&i.setEnd(a,i.endOffset-1),e.remove(n,!0)),o&&e.isEmpty(o)&&Xu(Dn.fromDom(o)),t.setRng(i)},nm=function(e,t,n,r,i){if(r)tm(t,n,r,i);else if(!(r=Ou(e,n.getStart())))for(;r=t.get("_mce_caret");)tm(t,n,r,!1)},rm=function(e,t,n){var r=e.dom,i=r.getParent(n,qo.curry(Cp,e));i&&r.isEmpty(i)?n.parentNode.replaceChild(t,n):(function(e){var t=Va(e,"br"),n=L.filter(function(e){for(var t=[],n=e.dom();n;)t.push(Dn.fromDom(n)),n=n.lastChild;return t}(e).slice(-1),ei);t.length===n.length&&L.each(n,$u)}(Dn.fromDom(n)),r.isEmpty(n)?n.parentNode.replaceChild(t,n):r.insertAfter(t,n))},im=function(e,t){return e.appendChild(t),t},om=function(e,t){var n=L.foldr(e,function(e,t){return im(e,t.cloneNode(!1))},t);return im(n,n.ownerDocument.createTextNode(Qp))},am=function(e){var t=e.dom,n=e.selection,r=e.getBody();e.on("mouseup keydown",function(e){!function(e,t,n,r){nm(e,t,n,null,!1),8===r&&n.isCollapsed()&&n.getStart().innerHTML===Qp&&nm(e,t,n,Ou(e,n.getStart())),37!==r&&39!==r||nm(e,t,n,Ou(e,n.getStart()))}(r,t,n,e.keyCode)})},sm=function(e,t){return e.schema.getTextInlineElements().hasOwnProperty(Fn.name(t))&&!Ru(t.dom())&&!vi.isBogus(t.dom())},um={},lm=Tt.filter,cm=Tt.each;!function(e,t){var n=um[e];n||(um[e]=n=[]),um[e].push(function(e){var t,n,r=e.selection.getRng();t=vi.matchNodeNames("pre"),r.collapsed||(n=e.selection.getSelectedBlocks(),cm(lm(lm(n,t),function(e){return t(e.previousSibling)&&-1!==Tt.indexOf(n,e.previousSibling)}),function(e){var t,n;t=e.previousSibling,Jt(n=e).remove(),Jt(t).append("<br><br>").append(n.childNodes)}))})}("pre");var fm=Ot.each,dm={walk:function(e,t,n){var r,i,o,a,s,u,l,c=t.startContainer,f=t.startOffset,d=t.endContainer,h=t.endOffset;if((l=e.select("td[data-mce-selected],th[data-mce-selected]")).length>0)fm(l,function(e){n([e])});else{var p,m,g,v=function(e){var t;return 3===(t=e[0]).nodeType&&t===c&&f>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===h&&e.length>0&&t===d&&3===t.nodeType&&e.splice(e.length-1,1),e},y=function(e,t,n){for(var r=[];e&&e!==n;e=e[t])r.push(e);return r},b=function(e,t){do{if(e.parentNode===t)return e;e=e.parentNode}while(e)},w=function(e,t,r){var i=r?"nextSibling":"previousSibling";for(s=(a=e).parentNode;a&&a!==t;a=s)s=a.parentNode,(u=y(a===e?a:a[i],i)).length&&(r||u.reverse(),n(v(u)))};if(1===c.nodeType&&c.hasChildNodes()&&(c=c.childNodes[f]),1===d.nodeType&&d.hasChildNodes()&&(m=h,--m>(g=(p=d).childNodes).length-1?m=g.length-1:m<0&&(m=0),d=g[m]||p),c===d)return n(v([c]));for(r=e.findCommonAncestor(c,d),a=c;a;a=a.parentNode){if(a===d)return w(c,r,!0);if(a===r)break}for(a=d;a;a=a.parentNode){if(a===c)return w(d,r);if(a===r)break}i=b(c,r)||c,o=b(d,r)||d,w(c,i,!0),(u=y(i===c?i:i.nextSibling,"nextSibling",o===d?o.nextSibling:o)).length&&n(v(u)),w(d,o)}}},hm=/^(src|href|style)$/,pm=Ot.each,mm=Tp,gm=function(e){return/^(TH|TD)$/.test(e.nodeName)},vm=function(e,t,n){var r,i,o;return r=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],vi.isElement(r)&&(o=r.childNodes.length-1,!n&&i&&i--,r=r.childNodes[i>o?o:i]),vi.isText(r)&&n&&i>=r.nodeValue.length&&(r=new Vr(r,e.getBody()).next()||r),vi.isText(r)&&!n&&0===i&&(r=new Vr(r,e.getBody()).prev()||r),r},ym=function(e,t,n,r){var i=e.create(n,r);return t.parentNode.insertBefore(i,t),i.appendChild(t),i},bm=function(e,t,n,r){return!(t=xp(t,n,r))||"BR"===t.nodeName||e.isBlock(t)},wm=function(e,t,n,r,i){var o,a,s,u=e.dom;if(!function(e,t,n){return!!mm(t,n.inline)||!!mm(t,n.block)||(n.selector?vi.isElement(t)&&e.is(t,n.selector):void 0)}(u,r,t)&&!function(e,t){return t.links&&"A"===e.tagName}(r,t))return!1;if("all"!==t.remove)for(pm(t.styles,function(e,o){e=Ep(u,kp(e,n),o),"number"==typeof o&&(o=e,i=0),(t.remove_similar||!i||mm(Np(u,i,o),e))&&u.setStyle(r,o,""),s=1}),s&&""===u.getAttrib(r,"style")&&(r.removeAttribute("style"),r.removeAttribute("data-mce-style")),pm(t.attributes,function(e,t){var o;if(e=kp(e,n),"number"==typeof t&&(t=e,i=0),!i||mm(u.getAttrib(i,t),e)){if("class"===t&&(e=u.getAttrib(r,t))&&(o="",pm(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(o+=(o?" ":"")+e)}),o))return void u.setAttrib(r,t,o);"class"===t&&r.removeAttribute("className"),hm.test(t)&&r.removeAttribute("data-mce-"+t),r.removeAttribute(t)}}),pm(t.classes,function(e){e=kp(e,n),i&&!u.hasClass(i,e)||u.removeClass(r,e)}),a=u.getAttribs(r),o=0;o<a.length;o++){var l=a[o].nodeName;if(0!==l.indexOf("_")&&0!==l.indexOf("data-"))return!1}return"none"!==t.remove?(function(e,t,n){var r,i=t.parentNode,o=e.dom,a=e.settings.forced_root_block;n.block&&(a?i===o.getRoot()&&(n.list_block&&mm(t,n.list_block)||pm(Ot.grep(t.childNodes),function(t){_p(e,a,t.nodeName.toLowerCase())?r?r.appendChild(t):(r=ym(o,t,a),o.setAttribs(r,e.settings.forced_root_block_attrs)):r=0})):o.isBlock(t)&&!o.isBlock(i)&&(bm(o,t,!1)||bm(o,t.firstChild,!0,1)||t.insertBefore(o.create("br"),t.firstChild),bm(o,t,!0)||bm(o,t.lastChild,!1,1)||t.appendChild(o.create("br")))),n.selector&&n.inline&&!mm(n.inline,t)||o.remove(t,1)}(e,r,t),!0):void 0},xm={removeFormat:wm,remove:function(e,t,n,r,i){var o,a,s=e.formatter.get(t),u=s[0],l=!0,c=e.dom,f=e.selection,d=function(r){var o=function(e,t,n,r,i){var o;return pm(Rp(e.dom,t.parentNode).reverse(),function(t){var a;o||"_start"===t.id||"_end"===t.id||(a=Kp.matchNode(e,t,n,r,i))&&!1!==a.split&&(o=t)}),o}(e,r,t,n,i);return function(e,t,n,r,i,o,a,s){var u,l,c,f,d,h,p=e.dom;if(n){for(h=n.parentNode,u=r.parentNode;u&&u!==h;u=u.parentNode){for(l=p.clone(u,!1),d=0;d<t.length;d++)if(wm(e,t[d],s,l,l)){l=0;break}l&&(c&&l.appendChild(c),f||(f=l),c=l)}a.mixed&&p.isBlock(n)||(r=p.split(n,r)),c&&(i.parentNode.insertBefore(c,i),f.appendChild(i))}return r}(e,s,o,r,r,0,u,n)},h=function(t){var r,i,o,a,f;if(vi.isElement(t)&&c.getContentEditable(t)&&(a=l,l="true"===c.getContentEditable(t),f=!0),r=Ot.grep(t.childNodes),l&&!f)for(i=0,o=s.length;i<o&&!wm(e,s[i],n,t,t);i++);if(u.deep&&r.length){for(i=0,o=r.length;i<o;i++)h(r[i]);f&&(l=a)}},p=function(e){var t=c.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return Hu.isBookmarkNode(n)&&(n=n[e?"firstChild":"lastChild"]),vi.isText(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),c.remove(t,!0),n},m=function(t){var n,r,i=t.commonAncestorContainer;if(t=Wp(e,t,s,!0),u.split){if((n=vm(e,t,!0))!==(r=vm(e,t))){if(/^(TR|TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n="TR"===n.nodeName?n.firstChild.firstChild||n:n.firstChild||n),i&&/^T(HEAD|BODY|FOOT|R)$/.test(i.nodeName)&&gm(r)&&r.firstChild&&(r=r.firstChild||r),c.isChildOf(n,r)&&n!==r&&!c.isBlock(r)&&!gm(n)&&!gm(r))return n=ym(c,n,"span",{id:"_start","data-mce-type":"bookmark"}),d(n),void(n=p(!0));n=ym(c,n,"span",{id:"_start","data-mce-type":"bookmark"}),r=ym(c,r,"span",{id:"_end","data-mce-type":"bookmark"}),d(n),d(r),n=p(!0),r=p()}else n=r=d(n);t.startContainer=n.parentNode?n.parentNode:n,t.startOffset=c.nodeIndex(n),t.endContainer=r.parentNode?r.parentNode:r,t.endOffset=c.nodeIndex(r)+1}dm.walk(c,t,function(t){pm(t,function(t){h(t),vi.isElement(t)&&"underline"===e.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===Ap(c,t.parentNode)&&wm(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)})})};if(r)r.nodeType?((a=c.createRng()).setStartBefore(r),a.setEndAfter(r),m(a)):m(r);else if("false"!==c.getContentEditable(f.getNode()))f.isCollapsed()&&u.inline&&!c.select("td[data-mce-selected],th[data-mce-selected]").length?function(e,t,n,r){var i,o,a,s,u,l,c,f=e.dom,d=e.selection,h=[],p=d.getRng();for(i=p.startContainer,o=p.startOffset,u=i,3===i.nodeType&&(o!==i.nodeValue.length&&(s=!0),u=u.parentNode);u;){if(Kp.matchNode(e,u,t,n,r)){l=u;break}u.nextSibling&&(s=!0),h.push(u),u=u.parentNode}if(l)if(s){a=d.getBookmark(),p.collapse(!0);var m=Wp(e,p,e.formatter.get(t),!0);m=Gp.split(m),e.formatter.remove(t,n,m),d.moveToBookmark(a)}else{c=Ou(e.getBody(),l);var g=em(!1).dom(),v=om(h,g);rm(e,g,c||l),tm(f,d,c,!1),d.setCursorLocation(v,1),f.isEmpty(l)&&f.remove(l)}}(e,t,n,i):(o=Au.getPersistentBookmark(e.selection,!0),m(f.getRng()),f.moveToBookmark(o),u.inline&&Kp.match(e,t,n,f.getStart())&&wp(c,f,f.getRng()),e.nodeChanged());else{r=f.getNode();for(var g=0,v=s.length;g<v&&(!s[g].ceFalseOverride||!wm(e,s[g],n,r,r));g++);}}},Cm=Ot.each,_m=function(e){return e&&1===e.nodeType&&!Hu.isBookmarkNode(e)&&!Ru(e)&&!vi.isBogus(e)},Sm=function(e,t){var n;for(n=e;n;n=n[t]){if(3===n.nodeType&&0!==n.nodeValue.length)return e;if(1===n.nodeType&&!Hu.isBookmarkNode(n))return n}return e},km=function(e,t,n){var r,i,o=new zu(e);if(t&&n&&(t=Sm(t,"previousSibling"),n=Sm(n,"nextSibling"),o.compare(t,n))){for(r=t.nextSibling;r&&r!==n;)i=r,r=r.nextSibling,t.appendChild(i);return e.remove(n),Ot.each(Ot.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n},Tm=function(e,t,n){Cm(e.childNodes,function(e){_m(e)&&(t(e)&&n(e),e.hasChildNodes()&&Tm(e,t,n))})},Em=function(e,t){return m.curry(function(t,n){return!(!n||!Np(e,n,t))},t)},Nm=function(e,t,n){return m.curry(function(t,n,r){e.setStyle(r,t,n),""===r.getAttribute("style")&&r.removeAttribute("style"),Am(e,r)},t,n)},Am=function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},Rm=function(e,t){var n;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(n=Ap(e,t.parentNode),e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null))},Om=function(e,t,n,r){(t.styles.color||t.styles.textDecoration)&&(Ot.walk(r,m.curry(Rm,e),"childNodes"),Rm(e,r))},Dm=Ot.each,Pm=function(e,t,n,r){var i,o,a=e.formatter.get(t),s=a[0],u=!r&&e.selection.isCollapsed(),l=e.dom,c=e.selection,f=function(e,t){if(t=t||s,e){if(t.onformat&&t.onformat(e,t,n,r),Dm(t.styles,function(t,r){l.setStyle(e,r,kp(t,n))}),t.styles){var i=l.getAttrib(e,"style");i&&e.setAttribute("data-mce-style",i)}Dm(t.attributes,function(t,r){l.setAttrib(e,r,kp(t,n))}),Dm(t.classes,function(t){t=kp(t,n),l.hasClass(e,t)||l.addClass(e,t)})}},d=function(e,t){var n=!1;return!!s.selector&&(Dm(e,function(e){if(!("collapsed"in e&&e.collapsed!==u))return l.is(t,e.selector)&&!Ru(t)?(f(t,e),n=!0,!1):void 0}),n)},h=function(r,i,o,u){var l,c,h=[],p=!0;l=s.inline||s.block,c=r.create(l),f(c),dm.walk(r,i,function(i){var o,m=function(i){var g,v,y,b;if(b=p,g=i.nodeName.toLowerCase(),v=i.parentNode.nodeName.toLowerCase(),1===i.nodeType&&r.getContentEditable(i)&&(b=p,p="true"===r.getContentEditable(i),y=!0),Tp(g,"br"))return o=0,void(s.block&&r.remove(i));if(s.wrapper&&Kp.matchNode(e,i,t,n))o=0;else{if(p&&!y&&s.block&&!s.wrapper&&Cp(e,g)&&_p(e,v,l))return i=r.rename(i,l),f(i),h.push(i),void(o=0);if(s.selector){var w=d(a,i);if(!s.inline||w)return void(o=0)}!p||y||!_p(e,l,g)||!_p(e,v,l)||!u&&3===i.nodeType&&1===i.nodeValue.length&&65279===i.nodeValue.charCodeAt(0)||Ru(i)||s.inline&&r.isBlock(i)?(o=0,Dm(Ot.grep(i.childNodes),m),y&&(p=b),o=0):(o||(o=r.clone(c,!1),i.parentNode.insertBefore(o,i),h.push(o)),o.appendChild(i))}};Dm(i,m)}),!0===s.links&&Dm(h,function(e){var t=function(e){"A"===e.nodeName&&f(e,s),Dm(Ot.grep(e.childNodes),t)};t(e)}),Dm(h,function(i){var o;o=function(e){var t=0;return Dm(i.childNodes,function(e){Sp(e)||Hu.isBookmarkNode(e)||t++}),t}(),!(h.length>1)&&r.isBlock(i)||0!==o?(s.inline||s.wrapper)&&(s.exact||1!==o||(i=function(e){var t,n;return(t=function(e){var t=!1;return Dm(e.childNodes,function(e){if(function(e){return e&&1===e.nodeType&&!Hu.isBookmarkNode(e)&&!Ru(e)&&!vi.isBogus(e)}(e))return t=e,!1}),t}(e))&&!Hu.isBookmarkNode(t)&&Kp.matchName(r,t,s)&&(n=r.clone(t,!1),f(n),r.replace(n,e,!0),r.remove(t,1)),n||e}(i)),function(e,t,n,r){Cm(t,function(t){Cm(e.dom.select(t.inline,r),function(r){_m(r)&&xm.removeFormat(e,t,n,r,t.exact?r:null)}),function(e,t,n){if(t.clear_child_styles){var r=t.links?"*:not(a)":"*";Cm(e.select(r,n),function(n){_m(n)&&Cm(t.styles,function(t,r){e.setStyle(n,r,"")})})}}(e.dom,t,r)})}(e,a,n,i),function(e,t,n,r,i){Kp.matchNode(e,i.parentNode,n,r)&&xm.removeFormat(e,t,r,i)||t.merge_with_parents&&e.dom.getParent(i.parentNode,function(o){if(Kp.matchNode(e,o,n,r))return xm.removeFormat(e,t,r,i),!0})}(e,s,t,n,i),function(e,t,n,r){t.styles&&t.styles.backgroundColor&&Tm(r,Em(e,"fontSize"),Nm(e,"backgroundColor",kp(t.styles.backgroundColor,n)))}(r,s,n,i),function(e,t,n,r){"sub"!==t.inline&&"sup"!==t.inline||(Tm(r,Em(e,"fontSize"),Nm(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",r),!0))}(r,s,0,i),function(e,t,n,r){r&&!1!==t.merge_siblings&&(r=km(e,xp(r),r),r=km(e,r,xp(r,!0)))}(r,s,0,i)):r.remove(i,1)})};if("false"!==l.getContentEditable(c.getNode())){if(s){if(r)r.nodeType?d(a,r)||((o=l.createRng()).setStartBefore(r),o.setEndAfter(r),h(l,Wp(e,o,a),0,!0)):h(l,r,0,!0);else if(u&&s.inline&&!l.select("td[data-mce-selected],th[data-mce-selected]").length)!function(e,t,n){var r,i,o,a,s,u,l=e.selection;a=(r=l.getRng(!0)).startOffset,u=r.startContainer.nodeValue,(i=Ou(e.getBody(),l.getStart()))&&(o=Zp(i));var c,f,d=/[^\s\u00a0\u00ad\u200b\ufeff]/;u&&a>0&&a<u.length&&d.test(u.charAt(a))&&d.test(u.charAt(a-1))?(s=l.getBookmark(),r.collapse(!0),r=Wp(e,r,e.formatter.get(t)),r=Gp.split(r),e.formatter.apply(t,n,r),l.moveToBookmark(s)):(i&&o.nodeValue===Qp?e.formatter.apply(t,n,i):(c=e.getDoc(),f=em(!0).dom(),o=(i=c.importNode(f,!0)).firstChild,r.insertNode(i),a=1,e.formatter.apply(t,n,i)),l.setCursorLocation(o,a))}(e,t,n);else{var p=e.selection.getNode();e.settings.forced_root_block||!a[0].defaultBlock||l.getParent(p,l.isBlock)||Pm(e,a[0].defaultBlock),e.selection.setRng(Qu(e.selection.getRng())),i=Au.getPersistentBookmark(e.selection,!0),h(l,Wp(e,c.getRng(),a)),s.styles&&Om(l,s,0,p),c.moveToBookmark(i),wp(l,c,c.getRng()),e.nodeChanged()}!function(e,t){cm(um[e],function(e){e(t)})}(t,e)}}else{r=c.getNode();for(var m=0,g=a.length;m<g;m++)if(a[m].ceFalseOverride&&l.is(r,a[m].selector))return void f(r,a[m])}},Im={applyFormat:Pm},Bm=Ot.each,Mm={formatChanged:function(e,t,n,r,i){null===t.get()&&function(e,t){var n={};e.set({}),t.on("NodeChange",function(r){var i=Rp(t.dom,r.element),o={};i=Ot.grep(i,function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")}),Bm(e.get(),function(e,r){Bm(i,function(a){return t.formatter.matchNode(a,r,{},e.similar)?(n[r]||(Bm(e,function(e){e(!0,{node:a,format:r,parents:i})}),n[r]=e),o[r]=e,!1):!Kp.matchesUnInheritedFormatSelector(t,a,r)&&void 0})}),Bm(n,function(e,t){o[t]||(delete n[t],Bm(e,function(e){e(!1,{node:r.element,format:t,parents:i})}))})})}(t,e),function(e,t,n,r){var i=e.get();Bm(t.split(","),function(e){i[e]||(i[e]=[],i[e].similar=r),i[e].push(n)}),e.set(i)}(t,n,r,i)}},Lm={get:function(e){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(t,n,r){Ot.each(r,function(n,r){e.setAttrib(t,r,n)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Ot.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){t[e]={block:e,remove:"all"}}),t}},Hm=Ot.each,Fm=eo.DOM,zm=function(e,t){var n,r,i,o=t&&t.schema||Wi({}),a=function(e){var t;return r="string"==typeof e?{name:e,classes:[],attrs:{}}:e,function(e,t){t.classes.length&&Fm.addClass(e,t.classes.join(" ")),Fm.setAttribs(e,t.attrs)}(t=Fm.create(r.name),r),t},s=function(e,t,n){var r,i,u,l=t.length>0&&t[0],c=l&&l.name;if(u=function(e,t){var n="string"!=typeof e?e.nodeName.toLowerCase():e,r=o.getElementRule(n),i=r&&r.parentsRequired;return!(!i||!i.length)&&(t&&-1!==Ot.inArray(i,t)?t:i[0])}(e,c))c===u?(i=t[0],t=t.slice(1)):i=u;else if(l)i=t[0],t=t.slice(1);else if(!n)return e;return i&&(r=a(i)).appendChild(e),n&&(r||(r=Fm.create("div")).appendChild(e),Ot.each(n,function(t){var n=a(t);r.insertBefore(n,e)})),s(r,t,i&&i.siblings)};return e&&e.length?(r=e[0],n=a(r),(i=Fm.create("div")).appendChild(s(n,e.slice(1),r.siblings)),i):""},jm=function(e){var t,n={classes:[],attrs:{}};return"*"!==(e=n.selector=Ot.trim(e))&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,t,r,i,o){switch(t){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":-1!==Ot.inArray("checked disabled enabled read-only required".split(" "),r)&&(n.attrs[r]=r)}if("["===i){var a=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/);a&&(n.attrs[a[1]]=a[2])}return""})),n.name=t||"div",n},Wm=function(e){return e&&"string"==typeof e?(e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Ot.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var t=Ot.map(e.split(/(?:~\+|~|\+)/),jm),n=t.pop();return t.length&&(n.siblings=t),n}).reverse()):[]},Um={getCssText:function(e,t){var n,r,i,o,a,s,u="";if(!1===(s=e.settings.preview_styles))return"";"string"!=typeof s&&(s="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var l=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}return"preview"in t&&!1===(s=t.preview)?"":(n=t.block||t.inline||"span",(o=Wm(t.selector)).length?(o[0].name||(o[0].name=n),n=t.selector,r=zm(o,e)):r=zm([n],e),i=Fm.select(n,r)[0]||r.firstChild,Hm(t.styles,function(e,t){(e=l(e))&&Fm.setStyle(i,t,e)}),Hm(t.attributes,function(e,t){(e=l(e))&&Fm.setAttrib(i,t,e)}),Hm(t.classes,function(e){e=l(e),Fm.hasClass(i,e)||Fm.addClass(i,e)}),e.fire("PreviewFormats"),Fm.setStyles(r,{position:"absolute",left:-65535}),e.getBody().appendChild(r),a=Fm.getStyle(e.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,Hm(s.split(" "),function(t){var n=Fm.getStyle(i,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=Fm.getStyle(e.getBody(),t,!0),"#ffffff"===Fm.toHex(n).toLowerCase())||"color"===t&&"#000000"===Fm.toHex(n).toLowerCase())){if("font-size"===t&&/em|%$/.test(n)){if(0===a)return;n=parseFloat(n)/(/%$/.test(n)?100:1)*a+"px"}"border"===t&&n&&(u+="padding:0 2px;"),u+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),Fm.remove(r),u)},parseSelector:Wm,selectorToHtml:function(e,t){return zm(Wm(e),t)}},$m={toggle:function(e,t,n,r,i){var o=t.get(n);!Kp.match(e,n,r,i)||"toggle"in o[0]&&!o[0].toggle?Im.applyFormat(e,n,r,i):xm.remove(e,n,r,i)}},qm={setup:function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])}};function Vm(e){var t=function(e){var t={},n=function(e,r){e&&("string"!=typeof e?Ot.each(e,function(e,t){n(t,e)}):(r=r.length?r:[r],Ot.each(r,function(e){void 0===e.deep&&(e.deep=!e.selector),void 0===e.split&&(e.split=!e.selector||e.inline),void 0===e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),t[e]=r))};return n(Lm.get(e.dom)),n(e.settings.formats),{get:function(e){return e?t[e]:t},register:n,unregister:function(e){return e&&t[e]&&delete t[e],t}}}(e),n=gs(null);return qm.setup(e),am(e),{get:t.get,register:t.register,unregister:t.unregister,apply:m.curry(Im.applyFormat,e),remove:m.curry(xm.remove,e),toggle:m.curry($m.toggle,e,t),match:m.curry(Kp.match,e),matchAll:m.curry(Kp.matchAll,e),matchNode:m.curry(Kp.matchNode,e),canApply:m.curry(Kp.canApply,e),formatChanged:m.curry(Mm.formatChanged,e,n),getCssText:m.curry(Um.getCssText,e)}}var Xm=function(e){return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},i=0;i<t.length;i++){var o=t[i];for(var a in o)o.hasOwnProperty(a)&&(r[a]=e(r[a],o[a]))}return r}},Ym=Xm(function(e,t){return _.isObject(e)&&_.isObject(t)?Ym(e,t):t}),Km=Xm(function(e,t){return t}),Jm={deepMerge:Ym,merge:Km},Gm={register:function(e,t,n){e.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,r=e.length;r--;)(n=e[r]).attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),e.addAttributeFilter("src,href,style",function(e,r){for(var i,o,a=e.length,s="data-mce-"+r,u=t.url_converter,l=t.url_converter_scope;a--;)void 0!==(o=(i=e[a]).attributes.map[s])?(i.attr(r,o.length>0?o:null),i.attr(s,null)):(o=i.attributes.map[r],"style"===r?o=n.serializeStyle(n.parseStyle(o),i.name):u&&(o=u.call(l,o,r,i.name)),i.attr(r,o.length>0?o:null))}),e.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)(n=(t=e[r]).attr("class"))&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null))}),e.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,i=e.length;i--;)"bookmark"!==(r=e[i]).attributes.map["data-mce-type"]||n.cleanup||r.remove()}),e.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=Oi.decode(t.value))}),e.addNodeFilter("script,style",function(e,n){for(var r,i,o,a=e.length,s=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};a--;)i=(r=e[a]).firstChild?r.firstChild.value:"","script"===n?((o=r.attr("type"))&&r.attr("type","mce-no/type"===o?null:o.replace(/^mce\-/,"")),"xhtml"===t.element_format&&i.length>0&&(r.firstChild.value="// <![CDATA[\n"+s(i)+"\n// ]]>")):"xhtml"===t.element_format&&i.length>0&&(r.firstChild.value="\x3c!--\n"+s(i)+"\n--\x3e")}),e.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)0===(t=e[n]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),e.addNodeFilter("xml:namespace,input",function(e,t){for(var n,r=e.length;r--;)7===(n=e[r]).type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),e.addAttributeFilter("data-mce-type",function(t){L.each(t,function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})},trimTrailingBr:function(e){var t,n,r=function(e){return e&&"br"===e.name};r(t=e.lastChild)&&r(n=t.prev)&&(t.remove(),n.remove())}},Qm={process:function(e,t,n){return function(e,t){return e&&e.hasEventListeners("PreProcess")&&!t.no_events}(e,n)?function(e,t,n){var r,i,o,a=e.dom;return t=t.cloneNode(!0),(r=document.implementation).createHTMLDocument&&(i=r.createHTMLDocument(""),Ot.each("BODY"===t.nodeName?t.childNodes:[t],function(e){i.body.appendChild(i.importNode(e,!0))}),t="BODY"!==t.nodeName?i.body.firstChild:i.body,o=a.doc,a.doc=i),function(e,t){e.fire("PreProcess",t)}(e,Jm.merge(n,{node:t})),o&&(a.doc=o),t}(e,t,n):t}},Zm=function(e,t){var n=$i();t.convert_fonts_to_spans&&function(e,t,n){e.addNodeFilter("font",function(e){L.each(e,function(e){var r=t.parse(e.attr("style")),i=e.attr("color"),o=e.attr("face"),a=e.attr("size");i&&(r.color=i),o&&(r["font-family"]=o),a&&(r["font-size"]=n[parseInt(e.attr("size"),10)-1]),e.name="span",e.attr("style",t.serialize(r)),function(e,t){L.each(["color","face","size"],function(t){e.attr(t,null)})}(e)})})}(e,n,Ot.explode(t.font_size_legacy_values)),function(e,t){e.addNodeFilter("strike",function(e){L.each(e,function(e){var n=t.parse(e.attr("style"));n["text-decoration"]="line-through",e.name="span",e.attr("style",t.serialize(n))})})}(e,n)},eg={register:function(e,t){t.inline_styles&&Zm(e,t)}},tg=/^[ \t\r\n]*$/,ng={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},rg=function(e,t,n){var r,i,o=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[o])return e[o];if(e!==t){if(r=e[a])return r;for(i=e.parent;i&&i!==t;i=i.parent)if(r=i[a])return r}},ig=function(){function e(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}return e.create=function(t,n){var r,i;if(r=new e(t,ng[t]||1),n)for(i in n)r.attr(i,n[i]);return r},e.prototype.replace=function(e){return e.parent&&e.remove(),this.insert(e,this),this.remove(),this},e.prototype.attr=function(e,t){var n,r;if("string"!=typeof e){for(r in e)this.attr(r,e[r]);return this}if(n=this.attributes){if(void 0!==t){if(null===t){if(e in n.map)for(delete n.map[e],r=n.length;r--;)if(n[r].name===e)return n=n.splice(r,1),this;return this}if(e in n.map){for(r=n.length;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,this}return n.map[e]}},e.prototype.clone=function(){var t,n,r,i,o,a=new e(this.name,this.type);if(r=this.attributes){for((o=[]).map={},t=0,n=r.length;t<n;t++)"id"!==(i=r[t]).name&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value);a.attributes=o}return a.value=this.value,a.shortEnded=this.shortEnded,a},e.prototype.wrap=function(e){return this.parent.insert(e,this),e.append(this),this},e.prototype.unwrap=function(){var e,t;for(e=this.firstChild;e;)t=e.next,this.insert(e,this,!0),e=t;this.remove()},e.prototype.remove=function(){var e=this.parent,t=this.next,n=this.prev;return e&&(e.firstChild===this?(e.firstChild=t,t&&(t.prev=null)):n.next=t,e.lastChild===this?(e.lastChild=n,n&&(n.next=null)):t.prev=n,this.parent=this.next=this.prev=null),this},e.prototype.append=function(e){var t;return e.parent&&e.remove(),(t=this.lastChild)?(t.next=e,e.prev=t,this.lastChild=e):this.lastChild=this.firstChild=e,e.parent=this,e},e.prototype.insert=function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},e.prototype.getAll=function(e){var t,n=[];for(t=this.firstChild;t;t=rg(t,this))t.name===e&&n.push(t);return n},e.prototype.empty=function(){var e,t,n;if(this.firstChild){for(e=[],n=this.firstChild;n;n=rg(n,this))e.push(n);for(t=e.length;t--;)(n=e[t]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}return this.firstChild=this.lastChild=null,this},e.prototype.isEmpty=function(e,t,n){var r,i,o=this.firstChild;if(t=t||{},o)do{if(1===o.type){if(o.attributes.map["data-mce-bogus"])continue;if(e[o.name])return!1;for(r=o.attributes.length;r--;)if("name"===(i=o.attributes[r].name)||0===i.indexOf("data-mce-bookmark"))return!1}if(8===o.type)return!1;if(3===o.type&&!tg.test(o.value))return!1;if(3===o.type&&o.parent&&t[o.parent.name]&&tg.test(o.value))return!1;if(n&&n(o))return!1}while(o=rg(o,this));return!0},e.prototype.walk=function(e){return rg(this,null,e)},e}(),og=function(e,t,n,r){(e.padd_empty_with_br||t.insert)&&n[r.name]?r.empty().append(new ig("br",1)).shortEnded=!0:r.empty().append(new ig("#text",3)).value="Â "},ag=function(e){return sg(e,"#text")&&"Â "===e.firstChild.value},sg=function(e,t){return e&&e.firstChild&&e.firstChild===e.lastChild&&e.firstChild.name===t},ug=function(e,t,n,r){return r.isEmpty(t,n,function(t){return function(e,t){var n=e.getElementRule(t.name);return n&&n.paddEmpty}(e,t)})},lg=function(e,t){return e&&(t[e.name]||"br"===e.name)},cg=function(e,t){var n=e.schema;t.remove_trailing_brs&&e.addNodeFilter("br",function(e,r,i){var o,a,s,u,l,c,f,d,h=e.length,p=Ot.extend({},n.getBlockElements()),m=n.getNonEmptyElements(),g=n.getNonEmptyElements();for(p.body=1,o=0;o<h;o++)if(s=(a=e[o]).parent,p[a.parent.name]&&a===s.lastChild){for(l=a.prev;l;){if("span"!==(c=l.name)||"bookmark"!==l.attr("data-mce-type")){if("br"!==c)break;if("br"===c){a=null;break}}l=l.prev}a&&(a.remove(),ug(n,m,g,s)&&(f=n.getElementRule(s.name))&&(f.removeEmpty?s.remove():f.paddEmpty&&og(t,i,p,s)))}else{for(u=a;s&&s.firstChild===u&&s.lastChild===u&&(u=s,!p[s.name]);)s=s.parent;u===s&&!0!==t.padd_empty_with_br&&((d=new ig("#text",3)).value="Â ",a.replace(d))}}),e.addAttributeFilter("href",function(e){var n,r,i,o=e.length;if(!t.allow_unsafe_link_target)for(;o--;)"a"===(n=e[o]).name&&"_blank"===n.attr("target")&&n.attr("rel",(i=(r=n.attr("rel"))?Ot.trim(r):"",/\b(noopener)\b/g.test(i)?i:i.split(" ").filter(function(e){return e.length>0}).concat(["noopener"]).sort().join(" ")))}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",function(e){for(var t,n,r,i,o=e.length;o--;)if("a"===(i=e[o]).name&&i.firstChild&&!i.attr("href")){r=i.parent,t=i.lastChild;do{n=t.prev,r.insert(t,i),t=n}while(t)}}),t.fix_list_elements&&e.addNodeFilter("ul,ol",function(e){for(var t,n,r=e.length;r--;)if("ul"===(n=(t=e[r]).parent).name||"ol"===n.name)if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var i=new ig("li",1);i.attr("style","list-style-type: none"),t.wrap(i)}}),t.validate&&n.getValidClasses()&&e.addAttributeFilter("class",function(e){for(var t,r,i,o,a,s,u,l=e.length,c=n.getValidClasses();l--;){for(r=(t=e[l]).attr("class").split(" "),a="",i=0;i<r.length;i++)o=r[i],u=!1,(s=c["*"])&&s[o]&&(u=!0),s=c[t.name],!u&&s&&s[o]&&(u=!0),u&&(a&&(a+=" "),a+=o);a.length||(a=null),t.attr("class",a)}})},fg=Ot.makeMap,dg=Ot.each,hg=Ot.explode,pg=Ot.extend;function mg(e,t){void 0===t&&(t=Wi());var n={},r=[],i={},o={};(e=e||{}).validate=!("validate"in e)||e.validate,e.root_name=e.root_name||"body";var a=function(e){var t,a,s;a in n&&((s=i[a])?s.push(e):i[a]=[e]),t=r.length;for(;t--;)(a=r[t].name)in e.attributes.map&&((s=o[a])?s.push(e):o[a]=[e]);return e},s={schema:t,addAttributeFilter:function(e,t){dg(hg(e),function(e){var n;for(n=0;n<r.length;n++)if(r[n].name===e)return void r[n].callbacks.push(t);r.push({name:e,callbacks:[t]})})},getAttributeFilters:function(){return[].concat(r)},addNodeFilter:function(e,t){dg(hg(e),function(e){var r=n[e];r||(n[e]=r=[]),r.push(t)})},getNodeFilters:function(){var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push({name:t,callbacks:n[t]});return e},filterNode:a,parse:function(s,u){var l,c,f,d,h,p,m,g,v,y,b,w=[];u=u||{},i={},o={},v=pg(fg("script,style,head,html,body,title,meta,param"),t.getBlockElements());var x=t.getNonEmptyElements(),C=t.children,_=e.validate,S="forced_root_block"in u?u.forced_root_block:e.forced_root_block,k=t.getWhiteSpaceElements(),T=/^[ \t\r\n]+/,E=/[ \t\r\n]+$/,N=/[ \t\r\n]+/g,A=/^[ \t\r\n]+$/,R=function(e,t){var r,o=new ig(e,t);return e in n&&((r=i[e])?r.push(o):i[e]=[o]),o},O=function(e){var n,r,i,o,a=t.getBlockElements();for(n=e.prev;n&&3===n.type;){if((i=n.value.replace(E,"")).length>0)return void(n.value=i);if(r=n.next){if(3===r.type&&r.value.length){n=n.prev;continue}if(!a[r.name]&&"script"!==r.name&&"style"!==r.name){n=n.prev;continue}}o=n.prev,n.remove(),n=o}};l=rp({validate:_,allow_script_urls:e.allow_script_urls,allow_conditional_comments:e.allow_conditional_comments,self_closing_elements:function(e){var t,n={};for(t in e)"li"!==t&&"p"!==t&&(n[t]=e[t]);return n}(t.getSelfClosingElements()),cdata:function(e){b.append(R("#cdata",4)).value=e},text:function(e,t){var n;y||(e=e.replace(N," "),lg(b.lastChild,v)&&(e=e.replace(T,""))),0!==e.length&&((n=R("#text",3)).raw=!!t,b.append(n).value=e)},comment:function(e){b.append(R("#comment",8)).value=e},pi:function(e,t){b.append(R(e,7)).value=t,O(b)},doctype:function(e){b.append(R("#doctype",10)).value=e,O(b)},start:function(e,n,i){var a,s,u,l,c;if(u=_?t.getElementRule(e):{}){for((a=R(u.outputName||e,1)).attributes=n,a.shortEnded=i,b.append(a),(c=C[b.name])&&C[a.name]&&!c[a.name]&&w.push(a),s=r.length;s--;)(l=r[s].name)in n.map&&((m=o[l])?m.push(a):o[l]=[a]);v[e]&&O(a),i||(b=a),!y&&k[e]&&(y=!0)}},end:function(n){var r,i,o,a,s;if(i=_?t.getElementRule(n):{}){if(v[n]&&!y){if((r=b.firstChild)&&3===r.type)if((o=r.value.replace(T,"")).length>0)r.value=o,r=r.next;else for(a=r.next,r.remove(),r=a;r&&3===r.type;)o=r.value,a=r.next,(0===o.length||A.test(o))&&(r.remove(),r=a),r=a;if((r=b.lastChild)&&3===r.type)if((o=r.value.replace(E,"")).length>0)r.value=o,r=r.prev;else for(a=r.prev,r.remove(),r=a;r&&3===r.type;)o=r.value,a=r.prev,(0===o.length||A.test(o))&&(r.remove(),r=a),r=a}if(y&&k[n]&&(y=!1),i.removeEmpty&&ug(t,x,k,b)&&!b.attributes.map.name&&!b.attr("id"))return s=b.parent,v[b.name]?b.empty().remove():b.unwrap(),void(b=s);i.paddEmpty&&(ag(b)||ug(t,x,k,b))&&og(e,u,v,b),b=b.parent}}},t);var D=b=new ig(u.context||e.root_name,11);if(l.parse(s),_&&w.length&&(u.context?u.invalid=!0:function(e){var n,r,i,o,s,u,l,c,f,d,h,p,m,g,v,y;for(p=fg("tr,td,th,tbody,thead,tfoot,table"),d=t.getNonEmptyElements(),h=t.getWhiteSpaceElements(),m=t.getTextBlockElements(),g=t.getSpecialElements(),n=0;n<e.length;n++)if((r=e[n]).parent&&!r.fixed)if(m[r.name]&&"li"===r.parent.name){for(v=r.next;v&&m[v.name];)v.name="li",v.fixed=!0,r.parent.insert(v,r.parent),v=v.next;r.unwrap(r)}else{for(o=[r],i=r.parent;i&&!t.isValidChild(i.name,r.name)&&!p[i.name];i=i.parent)o.push(i);if(i&&o.length>1){for(o.reverse(),s=u=a(o[0].clone()),f=0;f<o.length-1;f++){for(t.isValidChild(u.name,o[f].name)?(l=a(o[f].clone()),u.append(l)):l=u,c=o[f].firstChild;c&&c!==o[f+1];)y=c.next,l.append(c),c=y;u=l}ug(t,d,h,s)?i.insert(r,o[0],!0):(i.insert(s,o[0],!0),i.insert(r,s)),i=o[0],(ug(t,d,h,i)||sg(i,"br"))&&i.empty().remove()}else if(r.parent){if("li"===r.name){if((v=r.prev)&&("ul"===v.name||"ul"===v.name)){v.append(r);continue}if((v=r.next)&&("ul"===v.name||"ul"===v.name)){v.insert(r,v.firstChild,!0);continue}r.wrap(a(new ig("ul",1)));continue}t.isValidChild(r.parent.name,"div")&&t.isValidChild("div",r.name)?r.wrap(a(new ig("div",1))):g[r.name]?r.empty().remove():r.unwrap()}}}(w)),S&&("body"===D.name||u.isRootContent)&&function(){var n,r,i=D.firstChild,o=function(e){e&&((i=e.firstChild)&&3===i.type&&(i.value=i.value.replace(T,"")),(i=e.lastChild)&&3===i.type&&(i.value=i.value.replace(E,"")))};if(t.isValidChild(D.name,S.toLowerCase())){for(;i;)n=i.next,3===i.type||1===i.type&&"p"!==i.name&&!v[i.name]&&!i.attr("data-mce-type")?r?r.append(i):((r=R(S,1)).attr(e.forced_root_block_attrs),D.insert(r,i),r.append(i)):(o(r),r=null),i=n;o(r)}}(),!u.invalid){for(g in i){for(m=n[g],h=(c=i[g]).length;h--;)c[h].parent||c.splice(h,1);for(f=0,d=m.length;f<d;f++)m[f](c,g,u)}for(f=0,d=r.length;f<d;f++)if((m=r[f]).name in o){for(h=(c=o[m.name]).length;h--;)c[h].parent||c.splice(h,1);for(h=0,p=m.callbacks.length;h<p;h++)m.callbacks[h](c,m.name,u)}}return D}};return cg(s,e),eg.register(s,e),s}var gg=function(e,t,n){-1===Ot.inArray(t,n)&&(e.addAttributeFilter(n,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),t.push(n))},vg=function(e,t,n){var r=lo(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection?r:Ot.trim(r)},yg=function(e,t,n,r){var i=r.selection?Jm.merge({forced_root_block:!1},r):r,o=e.parse(n,i);return Gm.trimTrailingBr(o),o},bg=function(e,t,n,r,i){return function(e,t,n){return!t.no_events&&e?function(e,t){return e.fire("PostProcess",t)}(e,Jm.merge(t,{content:n})).content:n}(e,i,function(e,t,n){return Gu(e,t).serialize(n)}(t,n,r))};function wg(e,t){var n=function(e,t){var n,r,i,o=["data-mce-selected"];return n=t&&t.dom?t.dom:eo.DOM,r=t&&t.schema?t.schema:Wi(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs,i=mg(e,r),Gm.register(i,e,n),{schema:r,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:function(o,a){var s=Jm.merge({format:"html"},a||{}),u=Qm.process(t,o,s),l=vg(n,u,s),c=yg(i,n,l,s);return"tree"===s.format?c:bg(t,e,r,c,s)},addRules:function(e){r.addValidElements(e)},setRules:function(e){r.setValidElements(e)},addTempAttr:m.curry(gg,i,o),getTempAttrs:function(){return o}}}(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs}}function xg(e){return{getBookmark:m.curry(Hu.getBookmark,e),moveToBookmark:m.curry(Hu.moveToBookmark,e)}}(xg||(xg={})).isBookmarkNode=Hu.isBookmarkNode;var Cg=xg,_g=vi.isContentEditableFalse,Sg=vi.isContentEditableTrue,kg=function(e,t){var n,r,i,o,a,s,u,l,c,f,d,h,p,m,g,v,y,b=t.dom,w=Ot.each,x=t.getDoc(),C=document,_=Math.abs,S=Math.round,k=t.getBody();o={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var T=".mce-content-body";t.contentStyles.push(T+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+T+" .mce-resizehandle:hover {background: #000}"+T+" img[data-mce-selected],"+T+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+T+" .mce-clonedresizable {position: absolute;"+(fe.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+T+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var E=function(e){return e&&("IMG"===e.nodeName||t.dom.is(e,"figure.image"))},N=function(e){var n=e.target;(function(e,t){return E(e.target)&&!Uh(e.clientX,e.clientY,t)})(e,t.selection.getRng())&&!e.isDefaultPrevented()&&(e.preventDefault(),t.selection.select(n))},A=function(e){return t.dom.is(e,"figure.image")?e.querySelector("img"):e},R=function(e){var n=t.settings.object_resizing;return!1!==n&&!fe.iOS&&("string"!=typeof n&&(n="table,img,figure.image,div"),"false"!==e.getAttribute("data-mce-resize")&&e!==t.getBody()&&fr.is(Dn.fromDom(e),n))},O=function(e){var o,w,x,C;o=e.screenX-s,w=e.screenY-u,m=o*a[2]+f,g=w*a[3]+d,m=m<5?5:m,g=g<5?5:g,(E(n)&&!1!==t.settings.resize_img_proportional?!qh.modifierPressed(e):qh.modifierPressed(e)||E(n)&&a[2]*a[3]!=0)&&(_(o)>_(w)?(g=S(m*h),m=S(g/h)):(m=S(g/h),g=S(m*h))),b.setStyles(A(r),{width:m,height:g}),x=a.startPos.x+o,C=a.startPos.y+w,x=x>0?x:0,C=C>0?C:0,b.setStyles(i,{left:x,top:C,display:"block"}),i.innerHTML=m+" &times; "+g,a[2]<0&&r.clientWidth<=m&&b.setStyle(r,"left",l+(f-m)),a[3]<0&&r.clientHeight<=g&&b.setStyle(r,"top",c+(d-g)),(o=k.scrollWidth-v)+(w=k.scrollHeight-y)!=0&&b.setStyles(i,{left:x-o,top:C-w}),p||(t.fire("ObjectResizeStart",{target:n,width:f,height:d}),p=!0)},D=function(){p=!1;var e=function(e,r){r&&(n.style[e]||!t.schema.isValid(n.nodeName.toLowerCase(),e)?b.setStyle(A(n),e,r):b.setAttrib(A(n),e,r))};e("width",m),e("height",g),b.unbind(x,"mousemove",O),b.unbind(x,"mouseup",D),C!==x&&(b.unbind(C,"mousemove",O),b.unbind(C,"mouseup",D)),b.remove(r),b.remove(i),P(n),t.fire("ObjectResized",{target:n,width:m,height:g}),b.setAttrib(n,"style",b.getAttrib(n,"style")),t.nodeChanged()},P=function(e){var p,_,S,T,E;I(),L(),p=b.getPos(e,k),l=p.x,c=p.y,E=e.getBoundingClientRect(),_=E.width||E.right-E.left,S=E.height||E.bottom-E.top,n!==e&&(n=e,m=g=0),T=t.fire("ObjectSelected",{target:e}),R(e)&&!T.isDefaultPrevented()?w(o,function(e,t){var o;(o=b.get("mceResizeHandle"+t))&&b.remove(o),o=b.add(k,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),fe.ie&&(o.contentEditable=!1),b.bind(o,"mousedown",function(t){t.stopImmediatePropagation(),t.preventDefault(),function(t){s=t.screenX,u=t.screenY,f=A(n).clientWidth,d=A(n).clientHeight,h=d/f,a=e,e.startPos={x:_*e[0]+l,y:S*e[1]+c},v=k.scrollWidth,y=k.scrollHeight,r=n.cloneNode(!0),b.addClass(r,"mce-clonedresizable"),b.setAttrib(r,"data-mce-bogus","all"),r.contentEditable=!1,r.unSelectabe=!0,b.setStyles(r,{left:l,top:c,margin:0}),r.removeAttribute("data-mce-selected"),k.appendChild(r),b.bind(x,"mousemove",O),b.bind(x,"mouseup",D),C!==x&&(b.bind(C,"mousemove",O),b.bind(C,"mouseup",D)),i=b.add(k,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},f+" &times; "+d)}(t)}),e.elm=o,b.setStyles(o,{left:_*e[0]+l-o.offsetWidth/2,top:S*e[1]+c-o.offsetHeight/2})}):I(),n.setAttribute("data-mce-selected","1")},I=function(){var e,t;for(e in L(),n&&n.removeAttribute("data-mce-selected"),o)(t=b.get("mceResizeHandle"+e))&&(b.unbind(t),b.remove(t))},B=function(n){var r,i=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};p||t.removed||(w(b.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),r="mousedown"===n.type?n.target:e.getNode(),i(r=b.$(r).closest("table,img,figure.image,hr")[0],k)&&(H(),i(e.getStart(!0),r)&&i(e.getEnd(!0),r))?P(r):I())},M=function(e){return _g(function(e,t){for(;t&&t!==e;){if(Sg(t)||_g(t))return t;t=t.parentNode}return null}(t.getBody(),e))},L=function(){for(var e in o){var t=o[e];t.elm&&(b.unbind(t.elm),delete t.elm)}},H=function(){try{t.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}};return t.on("init",function(){H(),fe.ie&&fe.ie>=11&&(t.on("mousedown click",function(e){var n=e.target,r=n.nodeName;p||!/^(TABLE|IMG|HR)$/.test(r)||M(n)||(2!==e.button&&t.selection.select(n,"TABLE"===r),"mousedown"===e.type&&t.nodeChanged())}),t.dom.bind(k,"mscontrolselect",function(e){var n=function(e){ge.setEditorTimeout(t,function(){t.selection.select(e)})};if(M(e.target))return e.preventDefault(),void n(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&n(e.target))}));var e=ge.throttle(function(e){t.composing||B(e)});t.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",e),t.on("keyup compositionend",function(t){n&&"TABLE"===n.nodeName&&e(t)}),t.on("hide blur",I),t.on("contextmenu",N)}),t.on("remove",L),{isResizable:R,showResizeRect:P,hideResizeRect:I,updateResizeRect:B,destroy:function(){n=r=null}}},Tg=function(e){return vi.isContentEditableTrue(e)||vi.isContentEditableFalse(e)},Eg={fromPoint:function(e,t,n){var r,i,o=n;if(o.caretPositionFromPoint)(i=o.caretPositionFromPoint(e,t))&&((r=n.createRange()).setStart(i.offsetNode,i.offset),r.collapse(!0));else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(e,t);else if(o.body.createTextRange){r=o.body.createTextRange();try{r.moveToPoint(e,t),r.collapse(!0)}catch(i){r=function(e,t,n){var r,i,o;if(r=n.elementFromPoint(e,t),i=n.body.createTextRange(),r&&"HTML"!==r.tagName||(r=n.body),i.moveToElementText(r),(o=(o=Ot.toArray(i.getClientRects())).sort(function(e,n){return(e=Math.abs(Math.max(e.top-t,e.bottom-t)))-Math.abs(Math.max(n.top-t,n.bottom-t))})).length>0){t=(o[0].bottom+o[0].top)/2;try{return i.moveToPoint(e,t),i.collapse(!0),i}catch(e){}}return null}(e,t,n)}return function(e,t){var n=e&&e.parentElement?e.parentElement():null;return vi.isContentEditableFalse(function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null}(n,t,Tg))?null:e}(r,n.body)}return r}},Ng=function(e,t){return L.map(t,function(t){var n=e.fire("GetSelectionRange",{range:t});return n.range!==t?n.range:t})},Ag=function(e,t){return Dn.fromDom(e.dom().cloneNode(t))},Rg=function(e){return Ag(e,!1)},Og=function(e){return Ag(e,!0)},Dg=function(e,t){var n=(t||document).createDocumentFragment();return L.each(e,function(e){n.appendChild(e.dom())}),Dn.fromDom(n)},Pg=function(e){return Or(e).fold(m.constant([e]),function(t){return[e].concat(Pg(t))})},Ig=function(e){return Dr(e).fold(m.constant([e]),function(t){return"br"===Fn.name(t)?Tr(t).map(function(t){return[e].concat(Ig(t))}).getOr([]):[e].concat(Ig(t))})},Bg=function(e,t,n,r){var i=n,o=new Vr(n,i),a=e.schema.getNonEmptyElements();do{if(3===n.nodeType&&0!==Ot.trim(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(a[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(r?t.setStartBefore(n):"BR"===n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(fe.ie&&fe.ie<11&&e.isBlock(n)&&e.isEmpty(n))return void(r?t.setStart(n,0):t.setEnd(n,0))}while(n=r?o.next():o.prev());"BODY"===i.nodeName&&(r?t.setStart(i,0):t.setEnd(i,i.childNodes.length))},Mg=sr("element","width","rows"),Lg=sr("element","cells"),Hg=sr("x","y"),Fg=function(e,t){var n=parseInt(Gn(e,t),10);return isNaN(n)?1:n},zg=function(e,t,n){var r=e.rows();return!!(r[n]?r[n].cells():[])[t]},jg=function(e){return L.foldl(e,function(e,t){return t.cells().length>e?t.cells().length:e},0)},Wg=function(e,t){for(var n=e.rows(),r=0;r<n.length;r++)for(var i=n[r].cells(),o=0;o<i.length;o++)if(pr.eq(i[o],t))return x.some(Hg(o,r));return x.none()},Ug=function(e,t,n,r,i){for(var o=[],a=e.rows(),s=n;s<=i;s++){var u=a[s].cells(),l=t<r?u.slice(t,r+1):u.slice(r,t+1);o.push(Lg(a[s].element(),l))}return o},$g=function(e,t){return L.find(e,function(e){return"li"===Fn.name(e)&&function(e,t){return Vo([function(e){var t=e.startContainer,n=e.startOffset;return vi.isText(t)?0===n?x.some(Dn.fromDom(t)):x.none():x.from(t.childNodes[n]).map(Dn.fromDom)}(t),function(e){var t=e.endContainer,n=e.endOffset;return vi.isText(t)?n===t.data.length?x.some(Dn.fromDom(t)):x.none():x.from(t.childNodes[n-1]).map(Dn.fromDom)}(t)],function(t,n){var r=L.find(Pg(e),m.curry(pr.eq,t)),i=L.find(Ig(e),m.curry(pr.eq,n));return r.isSome()&&i.isSome()}).getOr(!1)}(e,t)}).fold(m.constant([]),function(t){return function(e){return L.find(e,function(e){return"ul"===Fn.name(e)||"ol"===Fn.name(e)})}(e).map(function(e){return[Dn.fromTag("li"),Dn.fromTag(Fn.name(e))]}).getOr([])})},qg=function(){return Dg([])},Vg=function(e,t){return n=Dn.fromDom(t.cloneContents()),r=function(e,t){var n=Dn.fromDom(t.commonAncestorContainer),r=Bl(n,e),i=L.filter(r,function(e){return Zr(e)||Gr(e)}),o=$g(r,t),a=i.concat(o.length?o:function(e){return ri(e)?Sr(e).filter(ni).fold(m.constant([]),function(t){return[e,t]}):ni(e)?[e]:[]}(n));return L.map(a,Rg)}(e,t),i=L.foldl(r,function(e,t){return os(t,e),t},n),r.length>0?Dg([i]):i;var n,r,i},Xg=function(e,t){return(n=e,r=t[0],xl(r,"table",m.curry(pr.eq,n))).bind(function(e){var n=t[0],r=t[t.length-1];return function(e,t,n){return Wg(e,t).bind(function(t){return Wg(e,n).map(function(n){return function(e,t,n){var r=t.x(),i=t.y(),o=n.x(),a=n.y(),s=i<a?Ug(e,r,i,o,a):Ug(e,r,a,o,i);return Mg(e.element(),jg(s),s)}(e,t,n)})})}(function(e){var t=Mg(Rg(e),0,[]);return L.each(Va(e,"tr"),function(e,n){L.each(Va(e,"td,th"),function(r,i){!function(e,t,n,r,i){for(var o=Fg(i,"rowspan"),a=Fg(i,"colspan"),s=e.rows(),u=n;u<n+o;u++){s[u]||(s[u]=Lg(Og(r),[]));for(var l=t;l<t+a;l++)s[u].cells()[l]=u===n&&l===t?i:Rg(i)}}(t,function(e,t,n){for(;zg(e,t,n);)t++;return t}(t,i,n),n,e,r)})}),Mg(t.element(),jg(t.rows()),t.rows())}(e),n,r).map(function(e){return Dg([function(e){return function(e,t){var n=Rg(e.element()),r=Dn.fromTag("tbody");return ju(r,t),os(n,r),n}(e,function(e){return L.map(e.rows(),function(e){var t=L.map(e.cells(),function(e){var t=Og(e);return Qn(t,"colspan"),Qn(t,"rowspan"),t}),n=Rg(e.element());return ju(n,t),n})}(e))}(e)])})}).getOrThunk(qg);var n,r},Yg=function(e,t){var n,r=e.selection.getRng(),i=e.dom.create("body"),o=e.selection.getSel(),a=Ng(e,uf(o));if((t=t||{}).get=!0,t.format=t.format||"html",t.selection=!0,(t=e.fire("BeforeGetContent",t)).isDefaultPrevented())return e.fire("GetContent",t),t.content;if("text"===t.format)return e.selection.isCollapsed()?"":lo(r.text||(o.toString?o.toString():""));r.cloneContents?(n=t.contextual?function(e,t){var n=ff(t,e);return n.length>0?Xg(e,n):function(e,t){return t.length>0&&t[0].collapsed?qg():Vg(e,t[0])}(e,t)}(Dn.fromDom(e.getBody()),a).dom():r.cloneContents())&&i.appendChild(n):void 0!==r.item||void 0!==r.htmlText?(i.innerHTML="<br>"+(r.item?r.item(0).outerHTML:r.htmlText),i.removeChild(i.firstChild)):i.innerHTML=r.toString(),t.getInner=!0;var s=e.selection.serializer.serialize(i,t);return"tree"===t.format?s:(t.content=e.selection.isCollapsed()?"":s,e.fire("GetContent",t),t.content)},Kg=function(e,t,n,r,i){var o=n?t.startContainer:t.endContainer,a=n?t.startOffset:t.endOffset;return x.from(o).map(Dn.fromDom).map(function(e){return r&&t.collapsed?e:Rr(e,i(e,a)).getOr(e)}).bind(function(e){return Fn.isElement(e)?x.some(e):Sr(e)}).map(function(e){return e.dom()}).getOr(e)},Jg=function(e,t,n){return Kg(e,t,!0,n,function(e,t){return Math.min(Pr(e),t)})},Gg=function(e,t,n){return Kg(e,t,!1,n,function(e,t){return t>0?t-1:t})},Qg=function(e,t){for(var n=e;e&&vi.isText(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},Zg=Ot.each,ev=function(e){return!!e.select},tv=function(e){return!(!e||!e.ownerDocument)&&pr.contains(Dn.fromDom(e.ownerDocument),Dn.fromDom(e))},nv=function(e,t,n,r){var i,o,a,s,u,l=function(e,t){return function(e,t,n){var r,i,o,a=e.selection.getRng(),s=e.getDoc();if((n=n||{format:"html"}).set=!0,n.selection=!0,n.content=t,n.no_events||!(n=e.fire("BeforeSetContent",n)).isDefaultPrevented()){if(t=n.content,a.insertNode){t+='<span id="__caret">_</span>',a.startContainer===s&&a.endContainer===s?s.body.innerHTML=t:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=t:a.createContextualFragment?a.insertNode(a.createContextualFragment(t)):(i=s.createDocumentFragment(),o=s.createElement("div"),i.appendChild(o),o.outerHTML=t,a.insertNode(i))),r=e.dom.get("__caret"),(a=s.createRange()).setStartBefore(r),a.setEndBefore(r),e.selection.setRng(a),e.dom.remove("__caret");try{e.selection.setRng(a)}catch(e){}}else a.item&&(s.execCommand("Delete",!1,null),a=e.getRng()),/^\s+/.test(t)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+t),e.dom.remove("__mce_tmp")):a.pasteHTML(t);n.no_events||e.fire("SetContent",n)}else e.fire("SetContent",n)}(r,e,t)},c=function(e){var t=d();t.collapse(!!e),h(t)},f=function(){return t.getSelection?t.getSelection():t.document.selection},d=function(){var n,i,o,u,l=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}};if(!t)return null;if(void 0===(u=t.document)||null===u)return null;if(void 0!==r.bookmark&&!1===$d(r)){var c=pd.getRng(r);if(c.isSome())return c.map(function(e){return Ng(r,[e])[0]}).getOr(u.createRange())}try{(n=f())&&(i=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():u.createRange())}catch(e){}return(i=Ng(r,[i])[0])||(i=u.createRange?u.createRange():u.body.createTextRange()),i.setStart&&9===i.startContainer.nodeType&&i.collapsed&&(o=e.getRoot(),i.setStart(o,0),i.setEnd(o,0)),a&&s&&(0===l(i.START_TO_START,i,a)&&0===l(i.END_TO_END,i,a)?i=s:(a=null,s=null)),i},h=function(e,t){var n,i;if(function(e){return!!e&&(!!ev(e)||tv(e.startContainer)&&tv(e.endContainer))}(e)){var o=ev(e)?e:null;if(o){s=null;try{o.select()}catch(e){}}else{if(n=f(),e=r.fire("SetSelectionRange",{range:e,forward:t}).range,n){s=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),a=n.rangeCount>0?n.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!n.setBaseAndExtent||fe.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(i=e.startContainer.childNodes[e.startOffset])&&"IMG"===i.tagName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(i,0,i,1)),r.fire("AfterSetSelectionRange",{range:e,forward:t})}}},p=function(){var t,n,r=f();return!(r&&r.anchorNode&&r.focusNode)||((t=e.createRng()).setStart(r.anchorNode,r.anchorOffset),t.collapse(!0),(n=e.createRng()).setStart(r.focusNode,r.focusOffset),n.collapse(!0),t.compareBoundaryPoints(t.START_TO_START,n)<=0)},m={bookmarkManager:null,controlSelection:null,dom:e,win:t,serializer:n,editor:r,collapse:c,setCursorLocation:function(t,n){var i=e.createRng();t?(i.setStart(t,n),i.setEnd(t,n),h(i),c(!1)):(Bg(e,i,r.getBody(),!0),h(i))},getContent:function(e){return Yg(r,e)},setContent:l,getBookmark:function(e,t){return i.getBookmark(e,t)},moveToBookmark:function(e){return i.moveToBookmark(e)},select:function(t,n){return function(e,t,n){return x.from(t).map(function(t){var r=e.nodeIndex(t),i=e.createRng();return i.setStart(t.parentNode,r),i.setEnd(t.parentNode,r+1),n&&(Bg(e,i,t,!0),Bg(e,i,t,!1)),i})}(e,t,n).each(h),t},isCollapsed:function(){var e=d(),t=f();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isForward:p,setNode:function(t){return l(e.getOuterHTML(t)),t},getNode:function(){return e=r.getBody(),(t=d())?(i=t.startContainer,o=t.endContainer,a=t.startOffset,s=t.endOffset,n=t.commonAncestorContainer,!t.collapsed&&(i===o&&s-a<2&&i.hasChildNodes()&&(n=i.childNodes[a]),3===i.nodeType&&3===o.nodeType&&(i=i.length===a?Qg(i.nextSibling,!0):i.parentNode,o=0===s?Qg(o.previousSibling,!1):o.parentNode,i&&i===o))?i:n&&3===n.nodeType?n.parentNode:n):e;var e,t,n,i,o,a,s},getSel:f,setRng:h,getRng:d,getStart:function(e){return Jg(r.getBody(),d(),e)},getEnd:function(e){return Gg(r.getBody(),d(),e)},getSelectedBlocks:function(t,n){return function(e,t,n,r){var i,o,a=[];if(o=e.getRoot(),n=e.getParent(n||Jg(o,t,!1),e.isBlock),r=e.getParent(r||Gg(o,t,!1),e.isBlock),n&&n!==o&&a.push(n),n&&r&&n!==r){i=n;for(var s=new Vr(n,o);(i=s.next())&&i!==r;)e.isBlock(i)&&a.push(i)}return r&&n!==r&&r!==o&&a.push(r),a}(e,d(),t,n)},normalize:function(){var t=d();if(!function(e){return sf(e).length>1}(f())){var n=jf.normalize(e,t);return n.each(function(e){h(e,p())}),n.getOr(t)}return t},selectorChanged:function(t,n){var i;return u||(u={},i={},r.on("NodeChange",function(t){var n=t.element,r=e.getParents(n,null,e.getRoot()),o={};Zg(u,function(t,n){Zg(r,function(a){if(e.is(a,n))return i[n]||(Zg(t,function(e){e(!0,{node:a,selector:n,parents:r})}),i[n]=t),o[n]=t,!1})}),Zg(i,function(e,t){o[t]||(delete i[t],Zg(e,function(e){e(!1,{node:n,selector:t,parents:r})}))})})),u[t]||(u[t]=[]),u[t].push(n),m},getScrollContainer:function(){for(var t,n=e.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:function(e,t){return function(e,t,n){var r,i,o,a,s=e.dom,u=s.getRoot(),l=0;if(!function(e,t,n){var r={elm:t,alignToTop:n};return e.fire("scrollIntoView",r),r.isDefaultPrevented()}(e,t,n)&&vi.isElement(t)){if(!1===n&&(l=t.offsetHeight),"BODY"!==u.nodeName){var c=e.selection.getScrollContainer();if(c)return r=Ja(t).y-Ja(c).y+l,a=c.clientHeight,void((r<(o=c.scrollTop)||r+25>o+a)&&(c.scrollTop=r<o?r:r-a+25))}i=s.getViewPort(e.getWin()),r=s.getPos(t).y+l,o=i.y,a=i.h,(r<i.y||r+25>o+a)&&e.getWin().scrollTo(0,r<o?r:r-a+25)}}(r,e,t)},placeCaretAt:function(e,t){return h(Eg.fromPoint(e,t,r.getDoc()))},getBoundingClientRect:function(){var e=d();return e.collapsed?ha.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){t=a=s=null,o.destroy()}};return i=Cg(m),o=kg(m,r),m.bookmarkManager=i,m.controlSelection=o,m},rv=vi.isContentEditableFalse,iv=Fo,ov=Vs,av=qs,sv=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},uv=function(e,t,n){var r,i,o=ou(e.getBody()),a=qo.curry(sv,o.next),s=qo.curry(sv,o.prev);if(n.collapsed&&e.settings.forced_root_block){if(!(r=e.dom.getParent(n.startContainer,"PRE")))return;(1===t?a(ha.fromRangeStart(n)):s(ha.fromRangeStart(n)))||(i=function(e){var t=e.dom.create(e.settings.forced_root_block);return(!fe.ie||fe.ie>=11)&&(t.innerHTML='<br data-mce-bogus="1">'),t}(e),1===t?e.$(r).after(i):e.$(r).before(i),e.selection.select(i,!0),e.selection.collapse())}},lv=function(e,t){return function(){var n=function(e,t){var n,r=ou(e.getBody()),i=qo.curry(sv,r.next),o=qo.curry(sv,r.prev),a=t?Ia.Forwards:Ia.Backwards,s=t?i:o,u=e.selection.getRng();return(n=function(e,t,n,r){var i,o,a,s,u,l,c=e===Ia.Forwards,f=c?av:ov;return!r.collapsed&&(i=iv(r),rv(i))?Ra(e,t,i,e===Ia.Backwards,!0):(s=ho(r.startContainer),f(o=$s(e,t.getBody(),r))?Oa(t,o.getNode(!c)):(o=n(o))?f(o)?Ra(e,t,o.getNode(!c),c,!0):f(a=n(o))&&(!(l=Ps(u=o,a))&&vi.isBr(u.getNode())||l)?Ra(e,t,a.getNode(!c),c,!0):s?Pa(t,o.toRange(),!0):null:s?r:null)}(a,e,s,u))?n:(n=uv(e,a,u))||null}(e,t);return!!n&&(e.selection.setRng(n),!0)}},cv=function(e,t){return function(){var n=function(e,t){var n,r=t?1:-1,i=t?Ph:Dh,o=e.selection.getRng();return(n=function(e,t,n,r){var i,o,a,s,u,l,c,f,d;if(d=iv(r),i=$s(e,t.getBody(),r),o=n(t.getBody(),Ih(1),i),a=Tt.filter(o,Bh(1)),u=Tt.last(i.getClientRects()),(av(i)||Xs(i))&&(d=i.getNode()),(ov(i)||Ys(i))&&(d=i.getNode(!0)),!u)return null;if(l=u.left,(s=jh(a,l))&&rv(s.node))return c=Math.abs(l-s.left),f=Math.abs(l-s.right),Ra(e,t,s.node,c<f,!0);if(d){var h=function(e,t,n,r){var i,o,a,s,u,l,c=ou(t),f=[],d=0,h=function(e){return Tt.last(e.getClientRects())};1===e?(i=c.next,o=Ho,a=Lo,s=ha.after(r)):(i=c.prev,o=Lo,a=Ho,s=ha.before(r)),l=h(s);do{if(s.isVisible()&&!a(u=h(s),l)){if(f.length>0&&o(u,Tt.last(f))&&d++,(u=Io(u)).position=s,u.line=d,n(u))return f;f.push(u)}}while(s=i(s));return f}(e,t.getBody(),Ih(1),d);if(s=jh(Tt.filter(h,Bh(1)),l))return Pa(t,s.position.toRange(),!0);if(s=Tt.last(Tt.filter(h,Bh(0))))return Pa(t,s.position.toRange(),!0)}}(r,e,i,o))?n:(n=uv(e,r,o))||null}(e,t);return!!n&&(e.selection.setRng(n),!0)}},fv=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,r)}},dv=function(e,t){return L.find(function(e,t){return L.bind(function(e){return L.map(e,function(e){return Jm.merge({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:m.noop},e)})}(e),function(e){return function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey}(e,t)?[e]:[]})}(e,t),function(e){return e.action()})},hv=function(e){return 1===Ar(e).length},pv=function(e,t){var n=Dn.fromDom(e.getBody()),r=Dn.fromDom(e.selection.getStart()),i=L.filter(function(e,t){var n=Bl(r,e);return L.findIndex(n,Qr).fold(m.constant(n),function(e){return n.slice(0,e)})}(n),hv);return L.last(i).map(function(n){var r=ha.fromRangeStart(e.selection.getRng());return!!function(e,t,n){return Vo([Ea.firstPositionIn(n),Ea.lastPositionIn(n)],function(r,i){var o=vl.normalizePosition(!0,r),a=vl.normalizePosition(!1,i),s=vl.normalizePosition(!1,t);return e?Ea.nextPosition(n,s).map(function(e){return e.isEqual(a)&&t.isEqual(o)}).getOr(!1):Ea.prevPosition(n,s).map(function(e){return e.isEqual(o)&&t.isEqual(a)}).getOr(!1)}).getOr(!0)}(t,r,n.dom())&&(function(e,t,n,r){var i=m.curry(sm,t),o=L.map(L.filter(r,i),function(e){return e.dom()});if(0===o.length)tc(t,e,n);else{var a=function(e,t){var n=em(!1),r=om(t,n.dom());return rs(Dn.fromDom(e),n),$u(Dn.fromDom(e)),ha(r,0)}(n.dom(),o);t.selection.setRng(a.toRange())}}(t,e,n,i),!0)}).getOr(!1)},mv=function(e,t){return!!e.selection.isCollapsed()&&pv(e,t)},gv=function(e){return x.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},vv=function(e,t){var n,r,i,o=t,a=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var u=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}(t.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&t.insertBefore(a.doc.createTextNode("Â "),t.firstChild)}if(i=a.createRng(),t.normalize(),t.hasChildNodes()){for(n=new Vr(t,t);r=n.current();){if(vi.isText(r)){i.setStart(r,0),i.setEnd(r,0);break}if(s[r.nodeName.toLowerCase()]){i.setStartBefore(r),i.setEndBefore(r);break}o=r,r=n.next()}r||(i.setStart(o,0),i.setEnd(o,0))}else vi.isBr(t)?t.nextSibling&&a.isBlock(t.nextSibling)?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)):(i.setStart(t,0),i.setEnd(t,0));e.selection.setRng(i),a.remove(void 0),e.selection.scrollIntoView(t)}},yv=gv,bv=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},wv=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},xv=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},Cv=function(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&!vi.isElement(r);)r=r[n?"nextSibling":"previousSibling"];return r===t},_v=function(e){e.innerHTML='<br data-mce-bogus="1">'},Sv=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},kv=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},Tv=function(e,t,n){return!1===vi.isText(t)?n:e?1===n&&t.data.charAt(n-1)===uo?0:n:n===t.data.length-1&&t.data.charAt(n)===uo?t.data.length:n},Ev=function(e,t){var n,r,i=e.getRoot();for(n=t;n!==i&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==i?r:i},Nv=function(e,t){var n=Za(e);n&&n.toLowerCase()===t.tagName.toLowerCase()&&e.dom.setAttribs(t,es(e))},Av=function(e,t){var n,r,i,o,a,s,u,l,c,f,d,h,p,m=e.dom,g=e.schema,v=g.getNonEmptyElements(),y=e.selection.getRng(),b=function(t){var n,o,s,u=i,l=g.getTextInlineElements();if(t||"TABLE"===f||"HR"===f?(n=m.create(t||h),Nv(e,n)):n=a.cloneNode(!1),s=n,!1===function(e){return e.getParam("keep_styles",!0)}(e))m.setAttrib(n,"style",null),m.setAttrib(n,"class",null);else do{if(l[u.nodeName]){if(Ru(u))continue;o=u.cloneNode(!1),m.setAttrib(o,"id",""),n.hasChildNodes()?(o.appendChild(n.firstChild),n.appendChild(o)):(s=o,n.appendChild(o))}}while((u=u.parentNode)&&u!==r);return _v(s),n},w=function(e){var t,n,r,s;if(s=Tv(e,i,o),vi.isText(i)&&(e?s>0:s<i.nodeValue.length))return!1;if(i.parentNode===a&&p&&!e)return!0;if(e&&vi.isElement(i)&&i===a.firstChild)return!0;if(Sv(i,"TABLE")||Sv(i,"HR"))return p&&!e||!p&&e;for(t=new Vr(i,a),vi.isText(i)&&(e&&0===s?t.prev():e||s!==i.nodeValue.length||t.next());n=t.current();){if(vi.isElement(n)){if(!n.getAttribute("data-mce-bogus")&&(r=n.nodeName.toLowerCase(),v[r]&&"br"!==r))return!1}else if(vi.isText(n)&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}return!0},x=function(){u=/^(H[1-6]|PRE|FIGURE)$/.test(f)&&"HGROUP"!==d?b(h):b(),function(e){return e.getParam("end_container_on_empty_block",!1)}(e)&&kv(m,c)&&m.isEmpty(a)?u=m.split(c,a):m.insertAfter(u,a),vv(e,u)};jf.normalize(m,y).each(function(e){y.setStart(e.startContainer,e.startOffset),y.setEnd(e.endContainer,e.endOffset)}),i=y.startContainer,o=y.startOffset,h=Za(e),s=t.shiftKey,vi.isElement(i)&&i.hasChildNodes()&&(p=o>i.childNodes.length-1,i=i.childNodes[Math.min(o,i.childNodes.length-1)]||i,o=p&&vi.isText(i)?i.nodeValue.length:0),(r=Ev(m,i))&&((h&&!s||!h&&s)&&(i=function(e,t,n,r,i){var o,a,s,u,l,c,f=t||"P",d=e.dom,h=Ev(d,r);if(!(a=d.getParent(r,d.isBlock))||!kv(d,a)){if(c=(a=a||h)===e.getBody()||a&&/^(TD|TH|CAPTION)$/.test(a.nodeName)?a.nodeName.toLowerCase():a.parentNode.nodeName.toLowerCase(),!a.hasChildNodes())return o=d.create(f),Nv(e,o),a.appendChild(o),n.setStart(o,0),n.setEnd(o,0),o;for(u=r;u.parentNode!==a;)u=u.parentNode;for(;u&&!d.isBlock(u);)s=u,u=u.previousSibling;if(s&&e.schema.isValidChild(c,f.toLowerCase())){for(o=d.create(f),Nv(e,o),s.parentNode.insertBefore(o,s),u=s;u&&!d.isBlock(u);)l=u.nextSibling,o.appendChild(u),u=l;n.setStart(r,i),n.setEnd(r,i)}}return r}(e,h,y,i,o)),a=m.getParent(i,m.isBlock),c=a?m.getParent(a.parentNode,m.isBlock):null,f=a?a.nodeName.toUpperCase():"","LI"!==(d=c?c.nodeName.toUpperCase():"")||t.ctrlKey||(a=c,c=c.parentNode,f=d),/^(LI|DT|DD)$/.test(f)&&m.isEmpty(a)?function(e,t,n,r,i){var o=e.dom,a=e.selection.getRng();if(n!==e.getBody()){var s;wv(s=n)&&wv(s.parentNode)&&(i="LI");var u=i?t(i):o.create("BR");if(Cv(n,r,!0)&&Cv(n,r,!1))bv(n,"LI")?o.insertAfter(u,xv(n)):o.replace(u,n);else if(Cv(n,r,!0))bv(n,"LI")?(o.insertAfter(u,xv(n)),u.appendChild(o.doc.createTextNode(" ")),u.appendChild(n)):n.parentNode.insertBefore(u,n);else if(Cv(n,r,!1))o.insertAfter(u,xv(n));else{n=xv(n);var l=a.cloneRange();l.setStartAfter(r),l.setEndAfter(n);var c=l.extractContents();"LI"===i&&function(e,t){return e.firstChild&&"LI"===e.firstChild.nodeName}(c)?(u=c.firstChild,o.insertAfter(c,n)):(o.insertAfter(c,n),o.insertAfter(u,n))}o.remove(r),vv(e,u)}}(e,b,c,a,h):h&&a===e.getBody()||(h=h||"P",ho(a)?(u=xo(a),m.isEmpty(a)&&_v(a),vv(e,u)):w()?x():w(!0)?(u=a.parentNode.insertBefore(b(),a),vv(e,Sv(a,"HR")?u:a)):((n=function(e){var t=e.cloneRange();return t.setStart(e.startContainer,Tv(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,Tv(!1,e.endContainer,e.endOffset)),t}(y).cloneRange()).setEndAfter(a),function(e){do{vi.isText(e)&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild}while(e)}(l=n.extractContents()),u=l.firstChild,m.insertAfter(l,a),function(e,t,n){var r,i=u,o=[];if(i){for(;i=i.firstChild;){if(e.isBlock(i))return;vi.isElement(i)&&!t[i.nodeName.toLowerCase()]&&o.push(i)}for(r=o.length;r--;)!(i=o[r]).hasChildNodes()||i.firstChild===i.lastChild&&""===i.firstChild.nodeValue?e.remove(i):(a=i)&&"A"===a.nodeName&&0===Ot.trim(lo(a.innerText||a.textContent)).length&&e.remove(i);var a}}(m,v),function(e,t){var n;t.normalize(),(n=t.lastChild)&&!/^(left|right)$/gi.test(e.getStyle(n,"float",!0))||e.add(t,"br")}(m,a),m.isEmpty(a)&&_v(a),u.normalize(),m.isEmpty(u)?(m.remove(u),x()):vv(e,u)),m.setAttrib(u,"id",""),e.fire("NewBlock",{newBlock:u})))},Rv=function(e,t){return yv(e).filter(function(e){return t.length>0&&fr.is(Dn.fromDom(e),t)}).isSome()},Ov=$l([{br:[]},{block:[]},{none:[]}]),Dv=function(e,t){return function(e){return Rv(e,function(e){return e.getParam("no_newline_selector","")}(e))}(e)},Pv=function(e){return function(t,n){return""===Za(t)===e}},Iv=function(e){return function(t,n){return function(e){return gv(e).filter(function(e){return ri(Dn.fromDom(e))}).isSome()}(t)===e}},Bv=function(e){return function(t,n){return"PRE"===function(e){return gv(e).fold(m.constant(""),function(e){return e.nodeName.toUpperCase()})}(t)===e}},Mv=function(e){return function(t,n){return function(e){return e.getParam("br_in_pre",!0)}(t)===e}},Lv=function(e,t){return function(e){return Rv(e,function(e){return e.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")}(e))}(e)},Hv=function(e,t){return t},Fv=function(e){var t=Za(e),n=function(e,t){var n,r,i=e.getRoot();for(n=t;n!==i&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==i?r:i}(e.dom,e.selection.getStart());return n&&e.schema.isValidChild(n.nodeName,t||"P")},zv=function(e,t){return function(n,r){return L.foldl(e,function(e,t){return e&&t(n,r)},!0)?x.some(t):x.none()}},jv=function(e,t){(function(e,t){return mc([zv([Dv],Ov.none()),zv([Bv(!0),Mv(!1),Hv],Ov.br()),zv([Bv(!0),Mv(!1)],Ov.block()),zv([Bv(!0),Mv(!0),Hv],Ov.block()),zv([Bv(!0),Mv(!0)],Ov.br()),zv([Iv(!0),Hv],Ov.br()),zv([Iv(!0)],Ov.block()),zv([Pv(!0),Hv,Fv],Ov.block()),zv([Pv(!0)],Ov.br()),zv([Lv],Ov.br()),zv([Pv(!1),Hv],Ov.br()),zv([Fv],Ov.block())],[e,t.shiftKey]).getOr(Ov.none())})(e,t).fold(function(){Jf.insert(e,t)},function(){Av(e,t)},m.noop)},Wv=function(e,t,n){return!!function(e,t){return Uv(n)&&vi.isText(t.container())}(0,t)&&(function(e,t){var n=t.container(),r=t.offset();n.insertData(r,"Â "),e.selection.setCursorLocation(n,r+1)}(e,t),!0)},Uv=function(e){return e.fold(m.constant(!1),m.constant(!0),m.constant(!0),m.constant(!1))},$v=function(e){return!!e.selection.isCollapsed()&&function(e){var t=m.curry(vl.isInlineTarget,e),n=ha.fromRangeStart(e.selection.getRng());return Pc(t,e.getBody(),n).map(m.curry(Wv,e,n)).getOr(!1)}(e)},qv=function(e,t){t.hasAttribute("data-mce-caret")&&(xo(t),function(e){e.selection.setRng(e.selection.getRng())}(e),e.selection.scrollIntoView(t))},Vv=function(e,t){var n=function(e){return Cl(Dn.fromDom(e.getBody()),"*[data-mce-caret]").fold(m.constant(null),function(e){return e.dom()})}(e);if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void qv(e,n)):void(go(n)&&(qv(e,n),e.undoManager.add()))},Xv=function(e){var t=$c.setupSelectedState(e);(function(e){e.on("keyup compositionstart",m.curry(Vv,e))})(e),function(e,t){e.on("keydown",function(n){!1===n.isDefaultPrevented()&&function(e,t,n){var r=Rn.detect().os;dv([{keyCode:qh.RIGHT,action:lv(e,!0)},{keyCode:qh.LEFT,action:lv(e,!1)},{keyCode:qh.UP,action:cv(e,!1)},{keyCode:qh.DOWN,action:cv(e,!0)},{keyCode:qh.RIGHT,action:ps(e,!0)},{keyCode:qh.LEFT,action:ps(e,!1)},{keyCode:qh.UP,action:ms(e,!1)},{keyCode:qh.DOWN,action:ms(e,!0)},{keyCode:qh.RIGHT,action:$c.move(e,t,!0)},{keyCode:qh.LEFT,action:$c.move(e,t,!1)},{keyCode:qh.RIGHT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:$c.moveNextWord(e,t)},{keyCode:qh.LEFT,ctrlKey:!r.isOSX(),altKey:r.isOSX(),action:$c.movePrevWord(e,t)}],n).each(function(e){n.preventDefault()})}(e,t,n)})}(e,t),function(e,t){e.on("keydown",function(n){!1===n.isDefaultPrevented()&&function(e,t,n){dv([{keyCode:qh.BACKSPACE,action:fv(rc,e,!1)},{keyCode:qh.DELETE,action:fv(rc,e,!0)},{keyCode:qh.BACKSPACE,action:fv(Xc,e,t,!1)},{keyCode:qh.DELETE,action:fv(Xc,e,t,!0)},{keyCode:qh.BACKSPACE,action:fv(Ul,e,!1)},{keyCode:qh.DELETE,action:fv(Ul,e,!0)},{keyCode:qh.BACKSPACE,action:fv(zl,e,!1)},{keyCode:qh.DELETE,action:fv(zl,e,!0)},{keyCode:qh.BACKSPACE,action:fv(wf,e,!1)},{keyCode:qh.DELETE,action:fv(wf,e,!0)},{keyCode:qh.BACKSPACE,action:fv(mv,e,!1)},{keyCode:qh.DELETE,action:fv(mv,e,!0)}],n).each(function(e){n.preventDefault()})}(e,t,n)}),e.on("keyup",function(t){!1===t.isDefaultPrevented()&&function(e,t){dv([{keyCode:qh.BACKSPACE,action:fv(ic,e)},{keyCode:qh.DELETE,action:fv(ic,e)}],t)}(e,t)})}(e,t),function(e){e.on("keydown",function(t){t.keyCode===qh.ENTER&&function(e,t){var n;t.isDefaultPrevented()||(t.preventDefault(),(n=e.undoManager).typing&&(n.typing=!1,n.add()),e.undoManager.transact(function(){!1===e.selection.isCollapsed()&&e.execCommand("Delete"),jv(e,t)}))}(e,t)})}(e),function(e){e.on("keydown",function(t){!1===t.isDefaultPrevented()&&function(e,t){dv([{keyCode:qh.SPACEBAR,action:fv($v,e)}],t).each(function(e){t.preventDefault()})}(e,t)})}(e)};var Yv=function(e){return vi.isElement(e)&&ti(Dn.fromDom(e))},Kv=eo.DOM,Jv=function(e){e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),function(e){e.settings.auto_focus&&ge.setEditorTimeout(e,function(){var t;(t=!0===e.settings.auto_focus?e:e.editorManager.get(e.settings.auto_focus)).destroyed||t.focus()},100)}(e)},Gv=function(e,t){var n,r,i=e.settings,o=e.getElement(),a=e.getDoc();i.inline||(e.getElement().style.visibility=e.orgVisibility),t||i.content_editable||(a.open(),a.write(e.iframeHTML),a.close()),i.content_editable&&(e.on("remove",function(){var e=this.getBody();Kv.removeClass(e,"mce-content-body"),Kv.removeClass(e,"mce-edit-focus"),Kv.setAttrib(e,"contentEditable",null)}),Kv.addClass(o,"mce-content-body"),e.contentDocument=a=i.content_document||document,e.contentWindow=i.content_window||window,e.bodyElement=o,i.content_document=i.content_window=null,i.root_name=o.nodeName.toLowerCase()),(n=e.getBody()).disabled=!0,e.readonly=i.readonly,e.readonly||(e.inline&&"static"===Kv.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable=e.getParam("content_editable_state",!0)),n.disabled=!1,e.editorUpload=yh(e),e.schema=Wi(i),e.dom=eo(a,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,hex_colors:i.force_hex_style_colors,class_filter:i.class_filter,update_styles:!0,root_element:e.inline?e.getBody():null,collect:i.content_editable,schema:e.schema,onSetAttrib:function(t){e.fire("SetAttrib",t)}}),e.parser=function(e){var t=mg(e.settings,e.schema);return t.addAttributeFilter("src,href,style,tabindex",function(t,n){for(var r,i,o,a=t.length,s=e.dom;a--;)if(i=(r=t[a]).attr(n),o="data-mce-"+n,!r.attributes.map[o]){if(0===i.indexOf("data:")||0===i.indexOf("blob:"))continue;"style"===n?((i=s.serializeStyle(s.parseStyle(i),r.name)).length||(i=null),r.attr(o,i),r.attr(n,i)):"tabindex"===n?(r.attr(o,i),r.attr(n,null)):r.attr(o,e.convertURL(i,n,r.name))}}),t.addNodeFilter("script",function(e){for(var t,n,r=e.length;r--;)0!==(n=(t=e[r]).attr("type")||"no/type").indexOf("mce-")&&t.attr("type","mce-"+n)}),t.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)(t=e[n]).type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){for(var n,r=t.length,i=e.schema.getNonEmptyElements();r--;)(n=t[r]).isEmpty(i)&&0===n.getAll("br").length&&(n.append(new ig("br",1)).shortEnded=!0)}),t}(e),e.serializer=wg(i,e),e.selection=nv(e.dom,e.getWin(),e.serializer,e),e.formatter=Vm(e),e.undoManager=gp(e),e._nodeChangeDispatcher=new function(e){var t,n=[];"onselectionchange"in e.getDoc()||e.on("NodeChange Click MouseUp KeyUp Focus",function(n){var r,i;i={startContainer:(r=e.selection.getRng()).startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset},"nodechange"!==n.type&&Df.isEq(i,t)||e.fire("SelectionChange"),t=i}),e.on("contextmenu",function(){e.fire("SelectionChange")}),e.on("SelectionChange",function(){var t=e.selection.getStart(!0);!t||!fe.range&&e.selection.isCollapsed()||!function(t){var r,i;if((i=e.$(t).parentsUntil(e.getBody()).add(t)).length===n.length){for(r=i.length;r>=0&&i[r]===n[r];r--);if(-1===r)return n=i,!0}return n=i,!1}(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("MouseUp",function(t){t.isDefaultPrevented()||("IMG"===e.selection.getNode().nodeName?ge.setEditorTimeout(e,function(){e.nodeChanged()}):e.nodeChanged())}),this.nodeChanged=function(t){var n,r,i,o=e.selection;e.initialized&&o&&!e.settings.disable_nodechange&&!e.readonly&&(i=e.getBody(),(n=o.getStart(!0)||i).ownerDocument===e.getDoc()&&e.dom.isChildOf(n,i)||(n=i),r=[],e.dom.getParent(n,function(e){if(e===i)return!0;r.push(e)}),(t=t||{}).element=n,t.parents=r,e.fire("NodeChange",t))}}(e),e._selectionOverrides=Gh(e),function(e){e.on("click",function(t){3===t.detail&&function(e){var t=e.selection.getRng(),n=fa.fromRangeStart(t),r=fa.fromRangeEnd(t);if(fa.isElementPosition(n)){var i=n.container();Yv(i)&&Ea.firstPositionIn(i).each(function(e){return t.setStart(e.container(),e.offset())})}fa.isElementPosition(r)&&(i=n.container(),Yv(i)&&Ea.lastPositionIn(i).each(function(e){return t.setEnd(e.container(),e.offset())})),e.selection.setRng(Qu(t))}(e)})}(e),Xv(e),function(e){e.settings.forced_root_block&&e.on("NodeChange",m.curry(Ch,e))}(e),e.fire("PreInit"),i.browser_spellcheck||i.gecko_spellcheck||(a.body.spellcheck=!1,Kv.setAttrib(n,"spellcheck","false")),e.quirks=function(e){var t,n,r,i=Ot.each,o=qh.BACKSPACE,a=qh.DELETE,s=e.dom,u=e.selection,l=e.settings,c=e.parser,f=fe.gecko,d=fe.ie,h=fe.webkit,p=d?"Text":"URL",m=function(t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},g=function(e){return e.isDefaultPrevented()},v=function(){e.shortcuts.add("meta+a",null,"SelectAll")},y=function(){e.on("keydown",function(e){if(!g(e)&&e.keyCode===o&&u.isCollapsed()&&0===u.getRng().startOffset){var t=u.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})},b=function(){e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",function(t){var n;if("HTML"===t.target.nodeName){if(fe.ie>11)return void e.getBody().focus();n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged()}}))};return e.on("keydown",function(t){var n,r,i,o,a;if(!g(t)&&t.keyCode===qh.BACKSPACE&&(r=(n=u.getRng()).startContainer,i=n.startOffset,o=s.getRoot(),a=r,n.collapsed&&0===i)){for(;a&&a.parentNode&&a.parentNode.firstChild===a&&a.parentNode!==o;)a=a.parentNode;"BLOCKQUOTE"===a.tagName&&(e.formatter.toggle("blockquote",null,a),(n=s.createRng()).setStart(r,0),n.setEnd(r,0),u.setRng(n))}}),t=function(e){var t=s.create("body"),n=e.cloneContents();return t.appendChild(n),u.serializer.serialize(t,{format:"html"})},e.on("keydown",function(n){var r,i,u,l,c,f=n.keyCode;if(!g(n)&&(f===a||f===o)){if(r=e.selection.isCollapsed(),i=e.getBody(),r&&!s.isEmpty(i))return;if(!r&&(u=e.selection.getRng(),l=t(u),(c=s.createRng()).selectNode(e.getBody()),l!==t(c)))return;n.preventDefault(),e.setContent(""),i.firstChild&&s.isBlock(i.firstChild)?e.selection.setCursorLocation(i.firstChild,0):e.selection.setCursorLocation(i,0),e.nodeChanged()}}),fe.windowsPhone||e.on("keyup focusin mouseup",function(e){qh.modifierPressed(e)||u.normalize()},!0),h&&(e.settings.content_editable||s.bind(e.getDoc(),"mousedown mouseup",function(t){var n;if(t.target===e.getDoc().documentElement)if(n=u.getRng(),e.getBody().focus(),"mousedown"===t.type){if(mo(n.startContainer))return;u.placeCaretAt(t.clientX,t.clientY)}else u.setRng(n)}),e.on("click",function(t){var n=t.target;/^(IMG|HR)$/.test(n.nodeName)&&"false"!==s.getContentEditableParent(n)&&(t.preventDefault(),e.selection.select(n),e.nodeChanged()),"A"===n.nodeName&&s.hasClass(n,"mce-item-anchor")&&(t.preventDefault(),u.select(n))}),l.forced_root_block&&e.on("init",function(){m("DefaultParagraphSeparator",l.forced_root_block)}),e.on("init",function(){e.dom.bind(e.getBody(),"submit",function(e){e.preventDefault()})}),y(),c.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}),fe.iOS?(e.inline||e.on("keydown",function(){document.activeElement===document.body&&e.getWin().focus()}),b(),e.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):v()),fe.ie>=11&&(b(),y()),fe.ie&&(v(),m("AutoUrlDetect",!1),e.on("dragstart",function(t){!function(t){var n,r;t.dataTransfer&&(e.selection.isCollapsed()&&"IMG"===t.target.tagName&&u.select(t.target),(n=e.selection.getContent()).length>0&&(r="data:text/mce-internal,"+escape(e.id)+","+escape(n),t.dataTransfer.setData(p,r)))}(t)}),e.on("drop",function(t){if(!g(t)){var n=function(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(p))&&t.indexOf("data:text/mce-internal,")>=0?(t=t.substr("data:text/mce-internal,".length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null}(t);if(n&&n.id!==e.id){t.preventDefault();var r=Eg.fromPoint(t.x,t.y,e.getDoc());u.setRng(r),i=n.html,e.queryCommandSupported("mceInsertClipboardContent")?e.execCommand("mceInsertClipboardContent",!1,{content:i,internal:!0}):e.execCommand("mceInsertContent",!1,i)}}var i})),f&&(e.on("keydown",function(t){if(!g(t)&&t.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&0===u.getRng().startOffset){var n=u.getNode(),r=n.previousSibling;if("HR"===n.nodeName)return s.remove(n),void t.preventDefault();r&&r.nodeName&&"hr"===r.nodeName.toLowerCase()&&(s.remove(r),t.preventDefault())}}}),Range.prototype.getClientRects||e.on("mousedown",function(t){if(!g(t)&&"HTML"===t.target.nodeName){var n=e.getBody();n.blur(),ge.setEditorTimeout(e,function(){n.focus()})}}),n=function(){var t=s.getAttribs(u.getStart().cloneNode(!1));return function(){var n=u.getStart();n!==e.getBody()&&(s.setAttrib(n,"style",null),i(t,function(e){n.setAttributeNode(e.cloneNode(!0))}))}},r=function(){return!u.isCollapsed()&&s.getParent(u.getStart(),s.isBlock)!==s.getParent(u.getEnd(),s.isBlock)},e.on("keypress",function(t){var i;if(!g(t)&&(8===t.keyCode||46===t.keyCode)&&r())return i=n(),e.getDoc().execCommand("delete",!1,null),i(),t.preventDefault(),!1}),s.bind(e.getDoc(),"cut",function(t){var i;!g(t)&&r()&&(i=n(),ge.setEditorTimeout(e,function(){i()}))}),l.readonly||e.on("BeforeExecCommand MouseDown",function(){m("StyleWithCSS",!1),m("enableInlineTableEditing",!1),l.object_resizing||m("enableObjectResizing",!1)}),e.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||i(s.select("a"),function(e){var t=e.parentNode,n=s.getRoot();if(t.lastChild===e){for(;t&&!s.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}s.add(t,"br",{"data-mce-bogus":1})}})}),e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),fe.mac&&e.on("keydown",function(t){!qh.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))}),y()),{refreshContentEditable:function(){},isHidden:function(){var t;return!f||e.removed?0:!(t=e.selection.getSel())||!t.rangeCount||0===t.rangeCount}}}(e),e.fire("PostRender"),i.directionality&&(n.dir=i.directionality),i.nowrap&&(n.style.whiteSpace="nowrap"),i.protect&&e.on("BeforeSetContent",function(e){Ot.each(i.protect,function(t){e.content=e.content.replace(t,function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"})})}),e.on("SetContent",function(){e.addVisual(e.getBody())}),e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),e.on("compositionstart compositionend",function(t){e.composing="compositionstart"===t.type}),e.contentStyles.length>0&&(r="",Ot.each(e.contentStyles,function(e){r+=e+"\r\n"}),e.dom.addStyle(r)),function(e){return e.inline?Kv.styleSheetLoader:e.dom.styleSheetLoader}(e).loadAll(e.contentCSS,function(t){Jv(e)},function(t){Jv(e)}),i.content_style&&function(e,t){var n=Dn.fromDom(e.getDoc().head),r=Dn.fromTag("style");Kn(r,"type","text/css"),os(r,Dn.fromText(t)),os(n,r)}(e,i.content_style)},Qv=eo.DOM,Zv=function(e,t){var n=e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),r=function(e,t,n,r){var i=Dn.fromTag("iframe");return Jn(i,r),Jn(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),ir(i,{width:"100%",height:("number"==typeof n?n+"px":n)||"",display:"block"}),i}(e.id,n,t.height,function(e){return e.getParam("iframe_attrs",{})}(e)).dom();r.onload=function(){r.onload=null,e.fire("load")};var i=function(e,t){if(document.domain!==window.location.hostname&&fe.ie&&fe.ie<12){var n=vh.uuid("mce");e[n]=function(){Gv(e)};var r='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+n+"(true);})()";return Qv.setAttrib(t,"src",r),!0}return!1}(e,r);return e.contentAreaContainer=t.iframeContainer,e.iframeElement=r,e.iframeHTML=function(e){var t,n,r;return r=function(e){return e.getParam("doctype","<!DOCTYPE html>")}(e)+"<html><head>",function(e){return e.getParam("document_base_url","")}(e)!==e.documentBaseUrl&&(r+='<base href="'+e.documentBaseURI.getURI()+'" />'),r+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',t=function(e){return Ga(e,"body_id","tinymce")}(e),n=function(e){return Ga(e,"body_class","")}(e),Qa(e)&&(r+='<meta http-equiv="Content-Security-Policy" content="'+Qa(e)+'" />'),r+'</head><body id="'+t+'" class="mce-content-body '+n+'" data-id="'+e.id+'"><br></body></html>'}(e),Qv.add(t.iframeContainer,r),i},ey=eo.DOM,ty=function(e,t,n){var r,i,o=ih.get(n);if(r=ih.urls[n]||e.documentBaseUrl.replace(/\/$/,""),n=Ot.trim(n),o&&-1===Ot.inArray(t,n)){if(Ot.each(ih.dependencies(n),function(n){ty(e,t,n)}),e.plugins[n])return;i=new o(e,r,e.$),e.plugins[n]=i,i.init&&(i.init(e,r),t.push(n))}},ny=function(e){return e.replace(/^\-/,"")},ry=function(e){return{editorContainer:e,iframeContainer:e}},iy=function(e){var t=e.settings,n=e.getElement();return e.orgDisplay=n.style.display,_.isString(t.theme)?function(e){var t,n,r,i,o,a=e.settings,s=e.getElement();return t=a.width||ey.getStyle(s,"width")||"100%",n=a.height||ey.getStyle(s,"height")||s.offsetHeight,r=a.min_height||100,(i=/^[0-9\.]+(|px)$/i).test(""+t)&&(t=Math.max(parseInt(t,10),100)),i.test(""+n)&&(n=Math.max(parseInt(n,10),r)),o=e.theme.renderUI({targetNode:s,width:t,height:n,deltaWidth:a.delta_width,deltaHeight:a.delta_height}),a.content_editable||(n=(o.iframeHeight||n)+("number"==typeof n?o.deltaHeight||0:""))<r&&(n=r),o.height=n,o}(e):_.isFunction(t.theme)?function(e){var t,n=e.getElement();return(t=e.settings.theme(e,n)).editorContainer.nodeType&&(t.editorContainer.id=t.editorContainer.id||e.id+"_parent"),t.iframeContainer&&t.iframeContainer.nodeType&&(t.iframeContainer.id=t.iframeContainer.id||e.id+"_iframecontainer"),t.height=t.iframeHeight?t.iframeHeight:n.offsetHeight,t}(e):function(e){var t=e.getElement();return e.inline?ry(null):function(e){var t=ey.create("div");return ey.insertAfter(t,e),ry(t)}(t)}(e)},oy=function(e){var t,n=e.settings,r=e.getElement();return e.rtl=n.rtl_ui||e.editorManager.i18n.rtl,e.editorManager.i18n.setCode(n.language),n.aria_label=n.aria_label||ey.getAttrib(r,"aria-label",e.getLang("aria.rich_text_area")),e.fire("ScriptsLoaded"),function(e){var t,n=e.settings.theme;_.isString(n)?(e.settings.theme=ny(n),t=oh.get(n),e.theme=new t(e,oh.urls[n]),e.theme.init&&e.theme.init(e,oh.urls[n]||e.documentBaseUrl.replace(/\/$/,""),e.$)):e.theme={}}(e),function(e){var t=[];Ot.each(e.settings.plugins.split(/[ ,]/),function(n){ty(e,t,ny(n))})}(e),t=iy(e),e.editorContainer=t.editorContainer?t.editorContainer:null,n.content_css&&Ot.each(Ot.explode(n.content_css),function(t){e.contentCSS.push(e.documentBaseURI.toAbsolute(t))}),n.content_editable?Gv(e):function(e,t){var n=Zv(e,t);t.editorContainer&&(Qv.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=Qv.isHidden(t.editorContainer)),e.getElement().style.display="none",Qv.setAttrib(e.id,"aria-hidden","true"),n||Gv(e)}(e,t)},ay=eo.DOM,sy=function(e){return"-"===e.charAt(0)},uy=function(e){var t=e.settings,n=e.id,r=function(){ay.unbind(window,"ready",r),e.render()};if(ke.Event.domLoaded){if(e.getElement()&&fe.contentEditable){t.inline?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var i=e.getElement().form||ay.getParent(n,"form");i&&(e.formElement=i,t.hidden_input&&!/TEXTAREA|INPUT/i.test(e.getElement().nodeName)&&(ay.insertAfter(ay.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=function(t){e.fire(t.type,t)},ay.bind(i,"submit reset",e.formEventDelegate),e.on("reset",function(){e.setContent(e.startContent,{format:"raw"})}),!t.submit_patch||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=function(){return e.editorManager.triggerSave(),e.setDirty(!1),i._mceOldSubmit(i)})),e.windowManager=Zd(e),e.notificationManager=Qd(e),"xml"===t.encoding&&e.on("GetContent",function(e){e.save&&(e.content=ay.encode(e.content))}),t.add_form_submit_trigger&&e.on("submit",function(){e.initialized&&e.save()}),t.add_unload_trigger&&(e._beforeUnload=function(){!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),function(e,t){var n=oo.ScriptLoader;!function(e,t,n,r){var i=t.settings,o=i.theme;if(_.isString(o)){if(!sy(o)&&!oh.urls.hasOwnProperty(o)){var a=i.theme_url;a?oh.load(o,t.documentBaseURI.toAbsolute(a)):oh.load(o,"themes/"+o+"/theme"+n+".js")}e.loadQueue(function(){oh.waitFor(o,r)})}else r()}(n,e,t,function(){!function(e,t){var n=t.settings;n.language&&"en"!==n.language&&!n.language_url&&(n.language_url=t.editorManager.baseURL+"/langs/"+n.language+".js"),n.language_url&&!t.editorManager.i18n.data[n.language]&&e.add(n.language_url)}(n,e),function(e,t){Ot.isArray(e.plugins)&&(e.plugins=e.plugins.join(" ")),Ot.each(e.external_plugins,function(t,n){ih.load(n,t),e.plugins+=" "+n}),Ot.each(e.plugins.split(/[ ,]/),function(e){if((e=Ot.trim(e))&&!ih.urls[e])if(sy(e)){e=e.substr(1,e.length);var n=ih.dependencies(e);Ot.each(n,function(e){var n={prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"};e=ih.createUrl(n,e),ih.load(e.resource,e)})}else ih.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"})})}(e.settings,t),n.loadQueue(function(){e.removed||oy(e)},e,function(t){rh.pluginLoadError(e,t[0]),e.removed||oy(e)})})}(e,e.suffix)}}else ay.bind(window,"ready",r)},ly=Ot.each,cy=Ot.trim,fy="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),dy={ftp:21,http:80,https:443,mailto:25},hy=function(e,t){var n,r,i=this;if(e=cy(e),n=(t=i.settings=t||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))i.source=e;else{var o=0===e.indexOf("//");0!==e.indexOf("/")||o||(e=(n&&n.protocol||"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(r=t.base_uri?t.base_uri.path:new hy(document.location.href).directory,""==t.base_uri.protocol?e="//mce_host"+i.toAbsPath(r,e):(e=/([^#?]*)([#?]?.*)/.exec(e),e=(n&&n.protocol||"http")+"://mce_host"+i.toAbsPath(r,e[1])+e[2])),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),ly(fy,function(t,n){var r=e[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),i[t]=r}),n&&(i.protocol||(i.protocol=n.protocol),i.userInfo||(i.userInfo=n.userInfo),i.port||"mce_host"!==i.host||(i.port=n.port),i.host&&"mce_host"!==i.host||(i.host=n.host),i.source=""),o&&(i.protocol="")}};hy.prototype={setPath:function(e){e=/^(.*?)\/?(\w+)?$/.exec(e),this.path=e[0],this.directory=e[1],this.file=e[2],this.source="",this.getURI()},toRelative:function(e){var t;if("./"===e)return e;if("mce_host"!==(e=new hy(e,{base_uri:this})).host&&this.host!==e.host&&e.host||this.port!==e.port||this.protocol!==e.protocol&&""!==e.protocol)return e.getURI();var n=this.getURI(),r=e.getURI();return n===r||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===r?n:(t=this.toRelPath(this.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return(e=new hy(e,{base_uri:this})).getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=dy[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r,i,o=0,a="";if(e=(e=e.substring(0,e.lastIndexOf("/"))).split("/"),n=t.split("/"),e.length>=n.length)for(r=0,i=e.length;r<i;r++)if(r>=n.length||e[r]!==n[r]){o=r+1;break}if(e.length<n.length)for(r=0,i=n.length;r<i;r++)if(r>=e.length||e[r]!==n[r]){o=r+1;break}if(1===o)return t;for(r=0,i=e.length-(o-1);r<i;r++)a+="../";for(r=o-1,i=n.length;r<i;r++)a+=r!==o-1?"/"+n[r]:n[r];return a},toAbsPath:function(e,t){var n,r,i,o=0,a=[];for(r=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),ly(e,function(e){e&&a.push(e)}),e=a,n=t.length-1,a=[];n>=0;n--)0!==t[n].length&&"."!==t[n]&&(".."!==t[n]?o>0?o--:a.push(t[n]):o++);return 0!==(i=(n=e.length-o)<=0?a.reverse().join("/"):e.slice(0,n).join("/")+"/"+a.reverse().join("/")).indexOf("/")&&(i="/"+i),r&&i.lastIndexOf("/")!==i.length-1&&(i+=r),i},getURI:function(e){var t;return this.source&&!e||(t="",e||(this.protocol?t+=this.protocol+"://":t+="//",this.userInfo&&(t+=this.userInfo+"@"),this.host&&(t+=this.host),this.port&&(t+=":"+this.port)),this.path&&(t+=this.path),this.query&&(t+="?"+this.query),this.anchor&&(t+="#"+this.anchor),this.source=t),this.source}},hy.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),(n=/data:([^;]+)/.exec(e[0]))&&(t=n[1]),{type:t,data:e[1]}},hy.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t};var py=function(e,t){t(e),e.firstChild&&py(e.firstChild,t),e.next&&py(e.next,t)},my=function(e){return e instanceof ig},gy=function(e,t,n){return void 0===n&&(n={}),n.format=n.format?n.format:"html",n.set=!0,n.content=my(t)?"":t,my(t)||n.no_events||(e.fire("BeforeSetContent",n),t=n.content),x.from(e.getBody()).fold(m.constant(t),function(r){return my(t)?function(e,t,n,r){!function(e,t,n){var r=function(e,t,n){var r={},i={},o=[];for(var a in n.firstChild&&py(n.firstChild,function(n){L.each(e,function(e){e.name===n.name&&(r[e.name]?r[e.name].nodes.push(n):r[e.name]={filter:e,nodes:[n]})}),L.each(t,function(e){"string"==typeof n.attr(e.name)&&(i[e.name]?i[e.name].nodes.push(n):i[e.name]={filter:e,nodes:[n]})})}),r)r.hasOwnProperty(a)&&o.push(r[a]);for(var s in i)i.hasOwnProperty(s)&&o.push(i[s]);return o}(e,t,n);L.each(r,function(e){L.each(e.filter.callbacks,function(t){t(e.nodes,e.filter.name,{})})})}(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var i=Gu({validate:e.validate},e.schema).serialize(n);return r.content=Ot.trim(i),e.dom.setHTML(t,r.content),r.no_events||e.fire("SetContent",r),n}(e,r,t,n):function(e,t,n,r){var i,o;return 0===n.length||/^\s+$/.test(n)?(o='<br data-mce-bogus="1">',"TABLE"===t.nodeName?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>"),(i=Za(e))&&e.schema.isValidChild(t.nodeName.toLowerCase(),i.toLowerCase())?(n=o,n=e.dom.createHTML(i,e.settings.forced_root_block_attrs,n)):n||(n='<br data-mce-bogus="1">'),e.dom.setHTML(t,n),e.fire("SetContent",r)):("raw"!==r.format&&(n=Gu({validate:e.validate},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0}))),r.content=Ot.trim(n),e.dom.setHTML(t,r.content),r.no_events||e.fire("SetContent",r)),r.content}(e,r,t,n)})},vy=eo.DOM,yy=function(e){return x.from(e).each(function(e){return e.destroy()})},by=eo.DOM,wy=Ot.extend,xy=Ot.each,Cy=Ot.resolve,_y=fe.ie,Sy=function(e,t,n){var r=this,i=r.documentBaseUrl=n.documentBaseURL,o=n.baseURI;t=function(e,t,n,r,i){var o=function(e,t,n){return{id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:t,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:n.convertURL,url_converter_scope:n,ie7_compat:!0}}(t,n,e);return dl(sl,o,r,i)}(r,e,i,n.defaultSettings,t),r.settings=t,so.language=t.language||"en",so.languageLoad=t.language_load,so.baseURL=n.baseURL,r.id=e,r.setDirty(!1),r.plugins={},r.documentBaseURI=new hy(t.document_base_url,{base_uri:o}),r.baseURI=o,r.contentCSS=[],r.contentStyles=[],r.shortcuts=new Ld(r),r.loadedCSS={},r.editorCommands=new wd(r),r.suffix=n.suffix,r.editorManager=n,r.inline=t.inline,r.buttons={},r.menuItems={},t.cache_suffix&&(fe.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,"")),!1===t.override_viewport&&(fe.overrideViewPort=!1),n.fire("SetupEditor",{editor:r}),r.execCallback("setup",r),r.$=Jt.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})};wy(Sy.prototype={render:function(){uy(this)},focus:function(e){!function(e,t){e.removed||(t?Ud(e):function(e){var t=e.selection,n=e.settings.content_editable,r=e.getBody(),i=t.getRng();e.quirks.refreshContentEditable();var o=function(e,t){return e.dom.getParent(t,function(t){return"true"===e.dom.getContentEditable(t)})}(e,t.getNode());if(e.$.contains(r,o))return jd(o),zd(e,i),void Ud(e);void 0!==e.bookmark&&!1===Wd(e)&&pd.getRng(e).each(function(t){e.selection.setRng(t),i=t}),n||(fe.opera||jd(r),e.getWin().focus()),(fe.gecko||n)&&(jd(r),zd(e,i)),Ud(e)}(e))}(this,e)},hasFocus:function(){return $d(this)},execCallback:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,i=this.settings[e];if(i)return this.callbackLookup&&(r=this.callbackLookup[e])&&(i=r.func,r=r.scope),"string"==typeof i&&(r=(r=i.replace(/\.\w+$/,""))?Cy(r):0,i=Cy(i),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[e]={func:i,scope:r}),i.apply(r||this,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&Ot.is(e,"string")){var t=this.settings.language||"en",n=this.editorManager.i18n;e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n.data[t+"."+r]||"{#"+r+"}"})}return this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(void 0!==t?t:"{#"+e+"}")},getParam:function(e,t,n){return function(e,t,n,r){var i,o=t in e.settings?e.settings[t]:n;return"hash"===r?function(e){var t={};return"string"==typeof e?L.each(e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),function(e){var n=e.split("=");n.length>1?t[Ot.trim(n[0])]=Ot.trim(n[1]):t[Ot.trim(n[0])]=Ot.trim(n)}):t=e,t}(o):"string"===r?hl(_.isString,e,t).getOr(n):"number"===r?hl(_.isNumber,e,t).getOr(n):"boolean"===r?hl(_.isBoolean,e,t).getOr(n):"object"===r?hl(_.isObject,e,t).getOr(n):"array"===r?hl(_.isArray,e,t).getOr(n):"string[]"===r?hl((i=_.isString,function(e){return _.isArray(e)&&L.forall(e,i)}),e,t).getOr(n):"function"===r?hl(_.isFunction,e,t).getOr(n):o}(this,e,t,n)},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.stateSelector&&void 0===t.active&&(t.active=!1),t.text||t.icon||(t.icon=e),n.buttons=n.buttons,t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return function(e,t,n){var r=e.sidebars?e.sidebars:[];r.push({name:t,settings:n}),e.sidebars=r}(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems,n.menuItems[e]=t},addContextToolbar:function(e,t){var n,r=this;r.contextToolbars=r.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return r.dom.is(e,n)}),r.contextToolbars.push({id:vh.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable=!0:(by.show(this.getContainer()),by.hide(this.id)),this.load(),this.fire("show"))},hide:function(){var e=this.getDoc();this.hidden||(_y&&e&&!this.inline&&e.execCommand("SelectAll"),this.save(),this.inline?(this.getBody().contentEditable=!1,this===this.editorManager.focusedEditor&&(this.editorManager.focusedEditor=null)):(by.hide(this.getContainer()),by.setStyle(this.id,"display",this.orgDisplay)),this.hidden=!0,this.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,n=this.getElement();return this.removed?"":n?((e=e||{}).load=!0,t=this.setContent(void 0!==n.value?n.value:n.innerHTML,e),e.element=n,e.no_events||this.fire("LoadContent",e),e.element=n=null,t):void 0},save:function(e){var t,n,r=this,i=r.getElement();if(i&&r.initialized&&!r.removed)return(e=e||{}).save=!0,e.element=i,e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),"raw"===e.format&&r.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(i.nodeName)?i.value=t:(r.inline||(i.innerHTML=t),(n=by.getParent(r.id,"form"))&&xy(n.elements,function(e){if(e.name===r.id)return e.value=t,!1})),e.element=i=null,!1!==e.set_dirty&&r.setDirty(!1),t},setContent:function(e,t){return gy(this,e,t)},getContent:function(e){return function(e,t){return void 0===t&&(t={}),x.from(e.getBody()).fold(m.constant("tree"===t.format?new ig("body",11):""),function(n){return function(e,t,n){var r;if(t.format=t.format?t.format:"html",t.get=!0,t.getInner=!0,t.no_events||e.fire("BeforeGetContent",t),"raw"===t.format)r=Ot.trim(op(e.serializer,n.innerHTML));else if("text"===t.format)r=lo(n.innerText||n.textContent);else{if("tree"===t.format)return e.serializer.serialize(n,t);r=function(e,t){var n=Za(e),r=new RegExp("^(<"+n+"[^>]*>(&nbsp;|&#160;|\\s|Â |<br \\/>|)<\\/"+n+">[\r\n]*|<br \\/>[\r\n]*)$");return t.replace(r,"")}(e,e.serializer.serialize(n,t))}return"text"!==t.format?t.content=Ot.trim(r):t.content=r,t.no_events||e.fire("GetContent",t),t.content}(e,t,n)})}(this,e)},insertContent:function(e,t){t&&(e=wy({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.fire("dirty")},setMode:function(e){!function(e,t){var n=e.readonly?"readonly":"design";t!==n&&(e.initialized?Dd(e,"readonly"===t):e.on("init",function(){Dd(e,"readonly"===t)}),e.fire("SwitchMode",{mode:t}))}(this,e)},getContainer:function(){return this.container||(this.container=by.get(this.editorContainer||this.id+"_parent")),this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=by.get(this.id)),this.targetElm},getWin:function(){var e;return this.contentWindow||(e=this.iframeElement)&&(this.contentWindow=e.contentWindow),this.contentWindow},getDoc:function(){var e;return this.contentDocument||(e=this.getWin())&&(this.contentDocument=e.document),this.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this.settings;return r.urlconverter_callback?this.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length?e:r.relative_urls?this.documentBaseURI.toRelative(e):e=this.documentBaseURI.toAbsolute(e,r.remove_script_host)},addVisual:function(e){var t,n=this,r=n.settings,i=n.dom;e=e||n.getBody(),void 0===n.hasVisual&&(n.hasVisual=r.visual),xy(i.select("table,a",e),function(e){var o;switch(e.nodeName){case"TABLE":return t=r.visual_table_class||"mce-item-table",void((o=i.getAttrib(e,"border"))&&"0"!==o||!n.hasVisual?i.removeClass(e,t):i.addClass(e,t));case"A":return void(i.getAttrib(e,"href")||(o=i.getAttrib(e,"name")||e.id,t=r.visual_anchor_class||"mce-item-anchor",o&&n.hasVisual?i.addClass(e,t):i.removeClass(e,t)))}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){!function(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload,r=e.getBody(),i=e.getElement();r&&e.save(),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&i&&vy.remove(i.nextSibling),!e.inline&&r&&function(e){vy.setStyle(e.id,"display",e.orgDisplay)}(e),function(e){e.fire("remove")}(e),e.editorManager.remove(e),vy.remove(e.getContainer()),yy(t),yy(n),e.destroy()}}(this)},destroy:function(e){!function(e,t){var n=e.selection,r=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),yy(n),yy(r)),function(e){var t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),vy.unbind(t,"submit reset",e.formEventDelegate))}(e),function(e){e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null,e.selection&&(e.selection=e.selection.win=e.selection.dom=e.selection.dom.doc=null)}(e),e.destroyed=!0):e.remove())}(this,e)},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},Rd);var ky,Ty,Ey,Ny={isEditorUIElement:function(e){return-1!==e.className.toString().indexOf("mce-")}},Ay=function(e){var t=$h(function(){pd.store(e)},0);e.inline&&function(e,t){var n=function(){t.throttle()};eo.DOM.bind(document,"mouseup",n),e.on("remove",function(){eo.DOM.unbind(document,"mouseup",n)})}(e,t),e.on("init",function(){!function(e,t){var n=Rn.detect().browser;n.isIE()||n.isEdge()?function(e){e.on("focusout",function(){pd.store(e)})}(e):function(e,t){e.on("mouseup touchend",function(e){t.throttle()})}(e,t),e.on("keyup nodechange",function(t){(function(e){return"nodechange"===e.type&&e.selectionChange})(t)||pd.store(e)})}(e,t)}),e.on("remove",function(){t.cancel()})},Ry=eo.DOM,Oy=function(e,t){var n=e?e.settings.custom_ui_selector:"";return null!==Ry.getParent(t,function(t){return function(e){return Ny.isEditorUIElement(e)}(t)||!!n&&e.dom.is(t,n)})},Dy=function(e,t){var n=t.editor;Ay(n),n.on("focusin",function(){var t=e.focusedEditor;t!==this&&(t&&t.fire("blur",{focusedEditor:this}),e.setActive(this),e.focusedEditor=this,this.fire("focus",{blurredEditor:t}),this.focus(!0))}),n.on("focusout",function(){var t=this;ge.setEditorTimeout(t,function(){var n=e.focusedEditor;Oy(t,function(){try{return document.activeElement}catch(e){return document.body}}())||n!==t||(t.fire("blur",{focusedEditor:null}),e.focusedEditor=null)})}),ky||(ky=function(t){var n,r=e.activeEditor;n=t.target,r&&n.ownerDocument===document&&(n===document.body||Oy(r,n)||e.focusedEditor!==r||(r.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},Ry.bind(document,"focusin",ky))},Py=function(e,t){e.focusedEditor===t.editor&&(e.focusedEditor=null),e.activeEditor||(Ry.unbind(document,"focusin",ky),ky=null)},Iy={},By="en",My={setCode:function(e){e&&(By=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return By},rtl:!1,add:function(e,t){var n=Iy[e];for(var r in n||(Iy[e]=n={}),t)n[r]=t[r];this.setCode(e)},translate:function(e){var t=Iy[By]||{},n=function(e){return Ot.is(e,"function")?Object.prototype.toString.call(e):r(e)?"":""+e},r=function(e){return""===e||null===e||Ot.is(e,"undefined")},i=function(e){return e=n(e),Ot.hasOwn(t,e)?n(t[e]):e};if(r(e))return"";if(Ot.is(e,"object")&&Ot.hasOwn(e,"raw"))return n(e.raw);if(Ot.is(e,"array")){var o=e.slice(1);e=i(e[0]).replace(/\{([0-9]+)\}/g,function(e,t){return Ot.hasOwn(o,t)?n(o[t]):e})}return i(e).replace(/{context:\w+}$/,"")},data:Iy},Ly=eo.DOM,Hy=Ot.explode,Fy=Ot.each,zy=Ot.extend,jy=0,Wy=!1,Uy=[],$y=[],qy=function(e){Fy(Ey.get(),function(t){"scroll"===e.type?t.fire("ScrollWindow",e):t.fire("ResizeWindow",e)})},Vy=function(e){e!==Wy&&(e?Jt(window).on("resize scroll",qy):Jt(window).off("resize scroll",qy),Wy=e)},Xy=function(e){var t=$y;delete Uy[e.id];for(var n=0;n<Uy.length;n++)if(Uy[n]===e){Uy.splice(n,1);break}return $y=L.filter($y,function(t){return e!==t}),Ey.activeEditor===e&&(Ey.activeEditor=$y.length>0?$y[0]:null),Ey.focusedEditor===e&&(Ey.focusedEditor=null),t.length!==$y.length};zy(Ey={defaultSettings:{},$:Jt,majorVersion:"4",minorVersion:"7.11",releaseDate:"2018-04-11",editors:Uy,i18n:My,activeEditor:null,settings:{},setup:function(){var e,t,n,r,i="";if(t=hy.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),n=window.tinymce||window.tinyMCEPreInit)e=n.base||n.baseURL,i=n.suffix;else{for(var o=document.getElementsByTagName("script"),a=0;a<o.length;a++){var s=(r=o[a].src).substring(r.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(r)){-1!==s.indexOf(".min")&&(i=".min"),e=r.substring(0,r.lastIndexOf("/"));break}}!e&&document.currentScript&&(-1!==(r=document.currentScript.src).indexOf(".min")&&(i=".min"),e=r.substring(0,r.lastIndexOf("/")))}this.baseURL=new hy(t).toAbsolute(e),this.documentBaseURL=t,this.baseURI=new hy(this.baseURL),this.suffix=i,function(e){e.on("AddEditor",m.curry(Dy,e)),e.on("RemoveEditor",m.curry(Py,e))}(this)},overrideDefaults:function(e){var t,n;(t=e.base_url)&&(this.baseURL=new hy(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new hy(this.baseURL)),n=e.suffix,e.suffix&&(this.suffix=n),this.defaultSettings=e;var r=e.plugin_base_urls;for(var i in r)so.PluginManager.urls[i]=r[i]},init:function(e){var t,n,r=this;n=Ot.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var i=function(e){var t=e.id;return t||(t=(t=e.name)&&!Ly.get(t)?e.name:Ly.uniqueId(),e.setAttribute("id",t)),t},o=function(e,t){return t.constructor===RegExp?t.test(e.className):Ly.hasClass(e,t)},a=function(e){t=e},s=function(){var t,u=0,l=[],c=function(e,n,i){var o=new Sy(e,n,r);l.push(o),o.on("init",function(){++u===t.length&&a(l)}),o.targetElm=o.targetElm||i,o.render()};Ly.unbind(window,"ready",s),function(t){var n=e[t];n&&n.apply(r,Array.prototype.slice.call(arguments,2))}("onpageload"),t=Jt.unique(function(e){var t,n=[];if(fe.ie&&fe.ie<11)return rh.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(e.types)return Fy(e.types,function(e){n=n.concat(Ly.select(e.selector))}),n;if(e.selector)return Ly.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":(t=e.elements||"").length>0&&Fy(Hy(t),function(e){var t;(t=Ly.get(e))?n.push(t):Fy(document.forms,function(t){Fy(t.elements,function(t){t.name===e&&(e="mce_editor_"+jy++,Ly.setAttrib(t,"id",e),n.push(t))})})});break;case"textareas":case"specific_textareas":Fy(Ly.select("textarea"),function(t){e.editor_deselector&&o(t,e.editor_deselector)||e.editor_selector&&!o(t,e.editor_selector)||n.push(t)})}return n}(e)),e.types?Fy(e.types,function(n){Ot.each(t,function(t){return!Ly.is(t,n.selector)||(c(i(t),zy({},e,n),t),!1)})}):(Ot.each(t,function(e){var t;(t=r.get(e.id))&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(Xy(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0,t=null)}),0===(t=Ot.grep(t,function(e){return!r.get(e.id)})).length?a([]):Fy(t,function(t){!function(e,t){return e.inline&&t.tagName.toLowerCase()in n}(e,t)?c(i(t),e,t):rh.initError("Could not initialize inline editor on invalid inline target element",t)}))};return r.settings=e,Ly.bind(window,"ready",s),new de(function(e){t?e(t):a=function(t){e(t)}})},get:function(e){return 0===arguments.length?$y.slice(0):_.isString(e)?L.find($y,function(t){return t.id===e}).getOr(null):_.isNumber(e)&&$y[e]?$y[e]:null},add:function(e){var t=this;return Uy[e.id]===e?e:(null===t.get(e.id)&&("length"!==e.id&&(Uy[e.id]=e),Uy.push(e),$y.push(e)),Vy(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),Ty||(Ty=function(){t.fire("BeforeUnload")},Ly.bind(window,"beforeunload",Ty)),e)},createEditor:function(e,t){return this.add(new Sy(e,t,this))},remove:function(e){var t,n,r=this;if(e)return _.isString(e)?(e=e.selector||e,void Fy(Ly.select(e),function(e){(n=r.get(e.id))&&r.remove(n)})):(n=e,_.isNull(r.get(n.id))?null:(Xy(n)&&r.fire("RemoveEditor",{editor:n}),0===$y.length&&Ly.unbind(window,"beforeunload",Ty),n.remove(),Vy($y.length>0),n));for(t=$y.length-1;t>=0;t--)r.remove($y[t])},execCommand:function(e,t,n){var r=this.get(n);switch(e){case"mceAddEditor":return this.get(n)||new Sy(n,this.settings,this).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?(r.isHidden()?r.show():r.hide(),!0):(this.execCommand("mceAddEditor",0,n),!0)}return!!this.activeEditor&&this.activeEditor.execCommand(e,t,n)},triggerSave:function(){Fy($y,function(e){e.save()})},addI18n:function(e,t){My.add(e,t)},translate:function(e){return My.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},kd),Ey.setup();var Yy=Ey;function Ky(e){return{walk:function(t,n){return dm.walk(e,t,n)},split:Gp.split,normalize:function(t){return jf.normalize(e,t).fold(m.constant(!1),function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0})}}}!function(e){e.compareRanges=Df.isEq,e.getCaretRangeFromPoint=Eg.fromPoint,e.getSelectedNode=Fo,e.getNode=zo}(Ky||(Ky={}));var Jy,Gy,Qy=Ky,Zy=Math.min,eb=Math.max,tb=Math.round,nb=function(e,t,n){var r,i,o,a,s,u;return r=t.x,i=t.y,o=e.w,a=e.h,s=t.w,u=t.h,"b"===(n=(n||"").split(""))[0]&&(i+=u),"r"===n[1]&&(r+=s),"c"===n[0]&&(i+=tb(u/2)),"c"===n[1]&&(r+=tb(s/2)),"b"===n[3]&&(i-=a),"r"===n[4]&&(r-=o),"c"===n[3]&&(i-=tb(a/2)),"c"===n[4]&&(r-=tb(o/2)),rb(r,i,o,a)},rb=function(e,t,n,r){return{x:e,y:t,w:n,h:r}},ib={inflate:function(e,t,n){return rb(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},relativePosition:nb,findBestRelativePosition:function(e,t,n,r){var i,o;for(o=0;o<r.length;o++)if((i=nb(e,t,r[o])).x>=n.x&&i.x+i.w<=n.w+n.x&&i.y>=n.y&&i.y+i.h<=n.h+n.y)return r[o];return null},intersect:function(e,t){var n,r,i,o;return n=eb(e.x,t.x),r=eb(e.y,t.y),i=Zy(e.x+e.w,t.x+t.w),o=Zy(e.y+e.h,t.y+t.h),i-n<0||o-r<0?null:rb(n,r,i-n,o-r)},clamp:function(e,t,n){var r,i,o,a,s,u,l,c,f,d;return s=e.x,u=e.y,l=e.x+e.w,c=e.y+e.h,f=t.x+t.w,d=t.y+t.h,r=eb(0,t.x-s),i=eb(0,t.y-u),o=eb(0,l-f),a=eb(0,c-d),s+=r,u+=i,n&&(l+=r,c+=i,s-=o,u-=a),rb(s,u,(l-=o)-s,(c-=a)-u)},create:rb,fromClientRect:function(e){return rb(e.left,e.top,e.width,e.height)}},ob={},ab={add:function(e,t){ob[e.toLowerCase()]=t},has:function(e){return!!ob[e.toLowerCase()]},get:function(e){var t=e.toLowerCase(),n=ob.hasOwnProperty(t)?ob[t]:null;if(null===n)throw new Error("Could not find module for type: "+e);return n},create:function(e,t){var n;if("string"==typeof e?(t=t||{}).type=e:e=(t=e).type,e=e.toLowerCase(),!(n=ob[e]))throw new Error("Could not find control by type: "+e);return(n=new n(t)).type=e,n}},sb=Ot.each,ub=Ot.extend,lb=function(){};lb.extend=Jy=function(e){var t,n,r,i=this.prototype,o=function(){var e,t,n;if(!Gy&&(this.init&&this.init.apply(this,arguments),t=this.Mixins))for(e=t.length;e--;)(n=t[e]).init&&n.init.apply(this,arguments)},a=function(){return this},s=function(e,t){return function(){var n,r=this._super;return this._super=i[e],n=t.apply(this,arguments),this._super=r,n}};for(n in Gy=!0,t=new this,Gy=!1,e.Mixins&&(sb(e.Mixins,function(t){for(var n in t)"init"!==n&&(e[n]=t[n])}),i.Mixins&&(e.Mixins=i.Mixins.concat(e.Mixins))),e.Methods&&sb(e.Methods.split(","),function(t){e[t]=a}),e.Properties&&sb(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){return void 0!==e?(this[n]=e,this):this[n]}}),e.Statics&&sb(e.Statics,function(e,t){o[t]=e}),e.Defaults&&i.Defaults&&(e.Defaults=ub({},i.Defaults,e.Defaults)),e)"function"==typeof(r=e[n])&&i[n]?t[n]=s(n,r):t[n]=r;return o.prototype=t,o.constructor=o,o.extend=Jy,o};var cb=Math.min,fb=Math.max,db=Math.round,hb=function(e,t){var n,r,i,o;if(t=t||'"',null===e)return"null";if("string"==(i=typeof e))return r="\bb\tt\nn\ff\rr\"\"''\\\\",t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,i){return'"'===t&&"'"===e?e:(n=r.indexOf(i))+1?"\\"+r.charAt(n+1):(e=i.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+t;if("object"===i){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(n=0,r="[";n<e.length;n++)r+=(n>0?",":"")+hb(e[n],t);return r+"]"}for(o in r="{",e)e.hasOwnProperty(o)&&(r+="function"!=typeof e[o]?(r.length>1?","+t:t)+o+t+":"+hb(e[o],t):"");return r+"}"}return""+e},pb={serialize:hb,parse:function(e){try{return JSON.parse(e)}catch(e){}}},mb={callbacks:{},count:0,send:function(e){var t=this,n=eo.DOM,r=void 0!==e.count?e.count:t.count,i="tinymce_jsonp_"+r;t.callbacks[r]=function(o){n.remove(i),delete t.callbacks[r],e.callback(o)},n.add(n.doc.body,"script",{id:i,src:e.url,type:"text/javascript"}),t.count++}},gb={send:function(e){var t,n=0,r=function(){!e.async||4===t.readyState||n++>1e4?(e.success&&n<1e4&&200===t.status?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,n>1e4?"TIMED_OUT":"GENERAL",t,e),t=null):setTimeout(r,10)};if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",gb.fire("beforeInitialize",{settings:e}),t=new ah){if(t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),e.requestheaders&&Ot.each(e.requestheaders,function(e){t.setRequestHeader(e.key,e.value)}),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=gb.fire("beforeSend",{xhr:t,settings:e}).xhr).send(e.data),!e.async)return r();setTimeout(r,10)}}};Ot.extend(gb,kd);var vb=Ot.extend,yb=function(e){this.settings=vb({},e),this.count=0};yb.sendRPC=function(e){return(new yb).send(e)},yb.prototype={send:function(e){var t=e.error,n=e.success;(e=vb(this.settings,e)).success=function(r,i){void 0===(r=pb.parse(r))&&(r={error:"JSON Parse error."}),r.error?t.call(e.error_scope||e.scope,r.error,i):n.call(e.success_scope||e.scope,r.result)},e.error=function(n,r){t&&t.call(e.error_scope||e.scope,n,r)},e.data=pb.serialize({id:e.id||"c"+this.count++,method:e.method,params:e.params}),e.content_type="application/json",gb.send(e)}};var bb=window.localStorage,wb=Yy,xb={geom:{Rect:ib},util:{Promise:de,Delay:ge,Tools:Ot,VK:qh,URI:hy,Class:lb,EventDispatcher:Cd,Observable:kd,I18n:My,XHR:gb,JSON:pb,JSONRequest:yb,JSONP:mb,LocalStorage:bb,Color:function(e){var t={},n=0,r=0,i=0,o=function(e){var o;return"object"==typeof e?"r"in e?(n=e.r,r=e.g,i=e.b):"v"in e&&function(e,t,o){var a,s,u,l;if(e=(parseInt(e,10)||0)%360,t=parseInt(t,10)/100,o=parseInt(o,10)/100,t=fb(0,cb(t,1)),o=fb(0,cb(o,1)),0!==t){switch(a=e/60,u=(s=o*t)*(1-Math.abs(a%2-1)),l=o-s,Math.floor(a)){case 0:n=s,r=u,i=0;break;case 1:n=u,r=s,i=0;break;case 2:n=0,r=s,i=u;break;case 3:n=0,r=u,i=s;break;case 4:n=u,r=0,i=s;break;case 5:n=s,r=0,i=u;break;default:n=r=i=0}n=db(255*(n+l)),r=db(255*(r+l)),i=db(255*(i+l))}else n=r=i=db(255*o)}(e.h,e.s,e.v):(o=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(n=parseInt(o[1],10),r=parseInt(o[2],10),i=parseInt(o[3],10)):(o=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(n=parseInt(o[1],16),r=parseInt(o[2],16),i=parseInt(o[3],16)):(o=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(n=parseInt(o[1]+o[1],16),r=parseInt(o[2]+o[2],16),i=parseInt(o[3]+o[3],16)),n=n<0?0:n>255?255:n,r=r<0?0:r>255?255:r,i=i<0?0:i>255?255:i,t};return e&&o(e),t.toRgb=function(){return{r:n,g:r,b:i}},t.toHsv=function(){return function(e,t,n){var r,i,o,a;return i=0,(o=cb(e/=255,cb(t/=255,n/=255)))===(a=fb(e,fb(t,n)))?{h:0,s:0,v:100*(i=o)}:(r=(a-o)/a,i=a,{h:db(60*((e===o?3:n===o?1:5)-(e===o?t-n:n===o?e-t:n-e)/(a-o))),s:db(100*r),v:db(100*i)})}(n,r,i)},t.toHex=function(){var e=function(e){return(e=parseInt(e,10).toString(16)).length>1?e:"0"+e};return"#"+e(n)+e(r)+e(i)},t.parse=o,t}},dom:{EventUtils:ke,Sizzle:ut,DomQuery:Jt,TreeWalker:Vr,DOMUtils:eo,ScriptLoader:oo,RangeUtils:Qy,Serializer:wg,ControlSelection:kg,BookmarkManager:Cg,Selection:nv,Event:ke.Event},html:{Styles:$i,Entities:Oi,Node:ig,Schema:Wi,SaxParser:rp,DomParser:mg,Writer:Ju,Serializer:Gu},ui:{Factory:ab},Env:fe,AddOnManager:so,Formatter:Vm,UndoManager:gp,EditorCommands:wd,WindowManager:Zd,NotificationManager:Qd,EditorObservable:Rd,Shortcuts:Ld,Editor:Sy,FocusManager:Ny,EditorManager:Yy,DOM:eo.DOM,ScriptLoader:oo.ScriptLoader,PluginManager:so.PluginManager,ThemeManager:so.ThemeManager,trim:Ot.trim,isArray:Ot.isArray,is:Ot.is,toArray:Ot.toArray,makeMap:Ot.makeMap,each:Ot.each,map:Ot.map,grep:Ot.grep,inArray:Ot.inArray,extend:Ot.extend,create:Ot.create,walk:Ot.walk,createNS:Ot.createNS,resolve:Ot.resolve,explode:Ot.explode,_addCacheSuffix:Ot._addCacheSuffix,isOpera:fe.opera,isWebKit:fe.webkit,isIE:fe.ie,isGecko:fe.gecko,isMac:fe.mac},Cb=wb=Ot.extend(wb,xb);!function(e){window.tinymce=e,window.tinyMCE=e}(Cb),function(t){try{e.exports=t}catch(e){}}(Cb)}()},function(e,t){!function(){"use strict";var e,t=tinymce.util.Tools.resolve("tinymce.ThemeManager"),n=tinymce.util.Tools.resolve("tinymce.EditorManager"),r=tinymce.util.Tools.resolve("tinymce.util.Tools"),i=function(e){return!1!==o(e)},o=function(e){return e.getParam("menubar")},a=function(e){return e.getParam("toolbar_items_size")},s=function(e){return e.getParam("menu")},u=function(e){return!1===e.settings.skin},l=function(e){var t=e.getParam("resize","vertical");return!1===t?"none":"both"===t?"both":"vertical"},c=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),f=tinymce.util.Tools.resolve("tinymce.ui.Factory"),d=tinymce.util.Tools.resolve("tinymce.util.I18n"),h=function(e){return e.fire("ResizeEditor")},p=function(e){return e.fire("BeforeRenderUI")},m=function(e,t){return function(){var n=e.find(t)[0];n&&n.focus(!0)}},g=function(e,t){e.shortcuts.add("Alt+F9","",m(t,"menubar")),e.shortcuts.add("Alt+F10,F10","",m(t,"toolbar")),e.shortcuts.add("Alt+F11","",m(t,"elementpath")),t.on("cancel",function(){e.focus()})},v=tinymce.util.Tools.resolve("tinymce.geom.Rect"),y=tinymce.util.Tools.resolve("tinymce.util.Delay"),b=function(e){return function(){return e}},w={noop:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},noarg:function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e()}},compose:function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,arguments))}},constant:b,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var a=r.concat(i);return e.apply(null,a)}},not:function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,arguments)}},die:function(e){return function(){throw new Error(e)}},apply:function(e){return e()},call:function(e){e()},never:b(!1),always:b(!0)},x=w.never,C=w.always,_=function(){return S},S=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r={fold:function(e,t){return e()},is:x,isSome:x,isNone:C,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:n,orThunk:t,map:_,ap:_,each:function(){},bind:_,flatten:_,exists:x,forall:C,filter:_,equals:e,equals_:e,toArray:function(){return[]},toString:w.constant("none()")};return Object.freeze&&Object.freeze(r),r}(),k=function(e){var t=function(){return e},n=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:C,isNone:x,getOr:t,getOrThunk:t,getOrDie:t,or:n,orThunk:n,map:function(t){return k(t(e))},ap:function(t){return t.fold(_,function(t){return k(t(e))})},each:function(t){t(e)},bind:r,flatten:t,exists:r,forall:r,filter:function(t){return t(e)?i:S},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(x,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return i},T={some:k,none:_,from:function(e){return null===e||void 0===e?S:k(e)}},E=function(e){return e?e.getRoot().uiContainer:null},N={getUiContainerDelta:function(e){var t=E(e);if(t&&"static"!==c.DOM.getStyle(t,"position",!0)){var n=c.DOM.getPos(t),r=t.scrollLeft-n.x,i=t.scrollTop-n.y;return T.some({x:r,y:i})}return T.none()},setUiContainer:function(e,t){var n=c.DOM.select(e.settings.ui_container)[0];t.getRoot().uiContainer=n},getUiContainer:E,inheritUiContainer:function(e,t){return t.uiContainer=E(e)}},A=function(e,t,n){var i,o=[];if(t)return r.each(t.split(/[ ,]/),function(t){var r,a=function(){var n=e.selection;t.settings.stateSelector&&n.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&n.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})};"|"===t?i=null:(i||(i={type:"buttongroup",items:[]},o.push(i)),e.buttons[t]&&(r=t,"function"==typeof(t=e.buttons[r])&&(t=t()),t.type=t.type||"button",t.size=n,t=f.create(t),i.items.push(t),e.initialized?a():e.on("init",a)))}),{type:"toolbar",layout:"flow",items:o}},R=A,O=function(e,t){var n=[];if(r.each(function(e){var t=e.getParam("toolbar");return!1===t?[]:r.isArray(t)?r.grep(t,function(e){return e.length>0}):function(e,t){for(var n=[],r=1;r<10;r++){var i=e["toolbar"+r];if(!i)break;n.push(i)}var o=e.toolbar?[e.toolbar]:["undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"];return n.length>0?n:o}(e.settings)}(e),function(r){var i;(i=r)&&n.push(A(e,i,t))}),n.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:n}},D=c.DOM,P=function(e){return{left:e.x,top:e.y,width:e.w,height:e.h,right:e.x+e.w,bottom:e.y+e.h}},I=function(e,t){e.moveTo(t.left,t.top)},B=function(e,t,n,r,i,o){return o=P({x:t,y:n,w:o.w,h:o.h}),e&&(o=e({elementRect:P(r),contentAreaRect:P(i),panelRect:o})),o},M=function(e){var t,n=function(){return e.contextToolbars||[]},i=function(t,n){var i,o,a,s,u,l,c,f=function(e){return e.getParam("inline_toolbar_position_handler")}(e);if(!e.removed)if(t&&t.toolbar.panel){var d,h,p,m;c=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],u=t.toolbar.panel,n&&u.show(),d=t.element,h=D.getPos(e.getContentAreaContainer()),p=e.dom.getRect(d),"BODY"===(m=e.dom.getRoot()).nodeName&&(p.x-=m.ownerDocument.documentElement.scrollLeft||m.scrollLeft,p.y-=m.ownerDocument.documentElement.scrollTop||m.scrollTop),p.x+=h.x,p.y+=h.y,a=p,o=D.getRect(u.getEl()),s=D.getRect(e.getContentAreaContainer()||e.getBody());var g=N.getUiContainerDelta(u).getOr({x:0,y:0});if(a.x+=g.x,a.y+=g.y,o.x+=g.x,o.y+=g.y,s.x+=g.x,s.y+=g.y,"inline"!==D.getStyle(t.element,"display",!0)){var y=t.element.getBoundingClientRect();a.w=y.width,a.h=y.height}e.inline||(s.w=e.getDoc().documentElement.offsetWidth),e.selection.controlSelection.isResizable(t.element)&&a.w<25&&(a=v.inflate(a,0,8)),i=v.findBestRelativePosition(o,a,s,c),a=v.clamp(a,s),i?(l=v.relativePosition(o,a,i),I(u,B(f,l.x,l.y,a,s,o))):(s.h+=o.h,(a=v.intersect(s,a))?(i=v.findBestRelativePosition(o,a,s,["bc-tc","bl-tl","br-tr"]))?(l=v.relativePosition(o,a,i),I(u,B(f,l.x,l.y,a,s,o))):I(u,B(f,a.x,a.y,a,s,o)):u.hide()),function(e,t,n){t=t?t.substr(0,2):"",r.each({t:"down",b:"up"},function(r,i){e.classes.toggle("arrow-"+r,n(i,t.substr(0,1)))}),r.each({l:"left",r:"right"},function(r,i){e.classes.toggle("arrow-"+r,n(i,t.substr(1,1)))})}(u,i,function(e,t){return e===t})}else!function(e){r.each(e.contextToolbars,function(e){e.panel&&e.panel.hide()})}(e)},o=function(t){return function(){y.requestAnimationFrame(function(){e.selection&&i(u(e.selection.getNode()),t)})}},a=function(n){var r;if(n.toolbar.panel)return n.toolbar.panel.show(),void i(n);r=f.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:R(e,n.toolbar.items),oncancel:function(){e.focus()}}),N.setUiContainer(e,r),function(n){if(!t){var r=o(!0),i=N.getUiContainer(n);t=e.selection.getScrollContainer()||e.getWin(),D.bind(t,"scroll",r),D.bind(i,"scroll",r),e.on("remove",function(){D.unbind(t,"scroll",r),D.unbind(i,"scroll",r)})}}(r),n.toolbar.panel=r,r.renderTo().reflow(),i(n)},s=function(){r.each(n(),function(e){e.panel&&e.panel.hide()})},u=function(t){var r,i,o,a=n();for(r=(o=e.$(t).parents().add(t)).length-1;r>=0;r--)for(i=a.length-1;i>=0;i--)if(a[i].predicate(o[r]))return{toolbar:a[i],element:o[r]};return null};e.on("click keyup setContent ObjectResized",function(t){("setcontent"!==t.type||t.selection)&&y.setEditorTimeout(e,function(){var t;(t=u(e.selection.getNode()))?(s(),a(t)):s()})}),e.on("blur hide contextmenu",s),e.on("ObjectResizeStart",function(){var t=u(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.hide()}),e.on("ResizeEditor ResizeWindow",o(!0)),e.on("nodeChange",o(!1)),e.on("remove",function(){r.each(n(),function(e){e.panel&&e.panel.remove()}),e.contextToolbars={}}),e.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var t=u(e.selection.getNode());t&&t.toolbar.panel&&t.toolbar.panel.items()[0].focus()})},L=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(t)===e}},H={isString:L("string"),isObject:L("object"),isArray:L("array"),isNull:L("null"),isBoolean:L("boolean"),isUndefined:L("undefined"),isFunction:L("function"),isNumber:L("number")},F=void 0===(e=Array.prototype.indexOf)?function(e,t){return V(e,t)}:function(t,n){return e.call(t,n)},z=function(e,t){return F(e,t)>-1},j=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},W=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)},U=function(e,t){for(var n=e.length-1;n>=0;n--)t(e[n],n,e)},$=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];t(o,r,e)&&n.push(o)}return n},q=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return T.some(n);return T.none()},V=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},X=Array.prototype.push,Y=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);X.apply(t,e[n])}return t},K=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n,e))return!1;return!0},J=Array.prototype.slice,G=H.isFunction(Array.from)?Array.from:function(e){return J.call(e)},Q={map:j,each:W,eachr:U,partition:function(e,t){for(var n=[],r=[],i=0,o=e.length;i<o;i++){var a=e[i];(t(a,i,e)?n:r).push(a)}return{pass:n,fail:r}},filter:$,groupBy:function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],i=[],o=0,a=e.length;o<a;o++){var s=e[o],u=t(s);u!==n&&(r.push(i),i=[]),n=u,i.push(s)}return 0!==i.length&&r.push(i),r},indexOf:function(e,t){var n=F(e,t);return-1===n?T.none():T.some(n)},foldr:function(e,t,n){return U(e,function(e){n=t(n,e)}),n},foldl:function(e,t,n){return W(e,function(e){n=t(n,e)}),n},find:function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e))return T.some(i)}return T.none()},findIndex:q,flatten:Y,bind:function(e,t){var n=j(e,t);return Y(n)},forall:K,exists:function(e,t){return q(e,t).isSome()},contains:z,equal:function(e,t){return e.length===t.length&&K(e,function(e,n){return e===t[n]})},reverse:function(e){var t=J.call(e,0);return t.reverse(),t},chunk:function(e,t){for(var n=[],r=0;r<e.length;r+=t){var i=e.slice(r,r+t);n.push(i)}return n},difference:function(e,t){return $(e,function(e){return!z(t,e)})},mapToObject:function(e,t){for(var n={},r=0,i=e.length;r<i;r++){var o=e[r];n[String(o)]=t(o,r)}return n},pure:function(e){return[e]},sort:function(e,t){var n=J.call(e,0);return n.sort(t),n},range:function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},head:function(e){return 0===e.length?T.none():T.some(e[0])},last:function(e){return 0===e.length?T.none():T.some(e[e.length-1])},from:G},Z={file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck"},table:{title:"Table"},help:{title:"Help"}},ee=function(e,t){return"|"===e?{name:"|",item:{text:"|"}}:t?{name:e,item:t}:null},te=function(e){return e&&"|"===e.item.text},ne=function(e,t,n,i){var o,a,s,u;return t?(a=t[i],u=!0):a=Z[i],a&&(o={text:a.title},s=[],r.each((a.items||"").split(/[ ,]/),function(t){var n=ee(t,e[t]);n&&s.push(n)}),u||r.each(e,function(e,t){e.context!==i||function(e,t){return Q.findIndex(e,function(e){return e.name===t}).isSome()}(s,t)||("before"===e.separator&&s.push({name:"|",item:{text:"|"}}),e.prependToContext?s.unshift(ee(t,e)):s.push(ee(t,e)),"after"===e.separator&&s.push({name:"|",item:{text:"|"}}))}),o.menu=Q.map(function(e,t){var n=Q.filter(e,function(e){return!1===t.hasOwnProperty(e.name)}),r=Q.filter(n,function(e,t,n){return!te(e)||!te(n[t-1])});return Q.filter(r,function(e,t,n){return!te(e)||t>0&&t<n.length-1})}(s,n),function(e){return e.item}),!o.menu.length)?null:o},re=function(e){for(var t=[],n=function(e){var t,n=[],r=s(e);if(r)for(t in r)n.push(t);else for(t in Z)n.push(t);return n}(e),i=r.makeMap(function(e){return e.getParam("removed_menuitems","")}(e).split(/[ ,]/)),a=o(e),u="string"==typeof a?a.split(/[ ,]/):n,l=0;l<u.length;l++){var c=u[l],f=ne(e.menuItems,s(e),i,c);f&&t.push(f)}return t},ie=c.DOM,oe=function(e){return{width:e.clientWidth,height:e.clientHeight}},ae=function(e,t,n){var r,i,o,a;r=e.getContainer(),i=e.getContentAreaContainer().firstChild,o=oe(r),a=oe(i),null!==t&&(t=Math.max(function(e){return e.getParam("min_width",100,"number")}(e),t),t=Math.min(function(e){return e.getParam("max_width",65535,"number")}(e),t),ie.setStyle(r,"width",t+(o.width-a.width)),ie.setStyle(i,"width",t)),n=Math.max(function(e){return e.getParam("min_height",100,"number")}(e),n),n=Math.min(function(e){return e.getParam("max_height",65535,"number")}(e),n),ie.setStyle(i,"height",n),h(e)},se=ae,ue=tinymce.util.Tools.resolve("tinymce.Env"),le=function(e,t,n){var r,i=e.settings[n];i&&i((r=t.getEl("body"),{element:function(){return r}}))},ce=function(e){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:r.map(e.sidebars,function(t){var n=t.settings;return{type:"button",icon:n.icon,image:n.image,tooltip:n.tooltip,onclick:function(e,t,n){return function(i){var o=i.control,a=o.parents().filter("panel")[0],s=a.find("#"+t)[0],u=function(e,t){return r.grep(e,function(e){return e.name===t})[0]}(n,t);!function(e,t,n){r.each(n,function(n){var r=t.items().filter("#"+n.name)[0];r&&r.visible()&&n.name!==e&&(le(n,r,"onhide"),r.visible(!1))})}(t,a,n),o.parent().items().each(function(e){e.active(!1)}),s&&s.visible()?(le(u,s,"onhide"),s.hide(),o.active(!1)):(s?(s.show(),le(u,s,"onshow")):(s=f.create({type:"container",name:t,layout:"stack",classes:"sidebar-panel",html:""}),a.prepend(s),le(u,s,"onrender"),le(u,s,"onshow")),o.active(!0)),h(e)}}(e,t.name,e.sidebars)}})}]}},fe=function(e){var t=function(){e._skinLoaded=!0,function(e){e.fire("SkinLoaded")}(e)};return function(){e.initialized?t():e.on("init",t)}},de=c.DOM,he=function(e){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:e,html:""}},pe=function(e,t,n){var r,o,s;if(!1===u(e)&&n.skinUiCss?de.styleSheetLoader.load(n.skinUiCss,fe(e)):fe(e)(),r=t.panel=f.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===i(e)?null:{type:"menubar",border:"0 0 1 0",items:re(e)},O(e,a(e))]},function(e){return!(ue.ie&&!(ue.ie>=11)||!e.sidebars)&&e.sidebars.length>0}(e)?function(e){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[he("0"),ce(e)]}}(e):he("1 0 0 0")]}),N.setUiContainer(e,r),"none"!==l(e)&&(o={type:"resizehandle",direction:l(e),onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;s={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){"both"===l(e)?se(e,s.width+t.deltaX,s.height+t.deltaY):se(e,null,s.height+t.deltaY)}}),function(e){return e.getParam("statusbar",!0,"boolean")}(e)){var c=d.translate(["Powered by {0}",'<a href="https://www.tinymce.com/?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">tinymce</a>']),h=function(e){return e.getParam("branding",!0,"boolean")}(e)?{type:"label",classes:"branding",html:" "+c}:null;r.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:e},o,h]})}return p(e),e.on("SwitchMode",function(e){return function(t){e.find("*").disabled("readonly"===t.mode)}}(r)),r.renderBefore(n.targetNode).reflow(),function(e){return e.getParam("readonly",!1,"boolean")}(e)&&e.setMode("readonly"),n.width&&de.setStyle(r.getEl(),"width",n.width),e.on("remove",function(){r.remove(),r=null}),g(e,r),M(e),{iframeContainer:r.find("#iframe")[0].getEl(),editorContainer:r.getEl()}},me=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),ge=0,ve={id:function(){return"mceu_"+ge++},create:function(e,t,n){var i=document.createElement(e);return c.DOM.setAttribs(i,t),"string"==typeof n?i.innerHTML=n:r.each(n,function(e){e.nodeType&&i.appendChild(e)}),i},createFragment:function(e){return c.DOM.createFragment(e)},getWindowSize:function(){return c.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var r=e.getBoundingClientRect();t=Math.max(r.width||r.right-r.left,e.offsetWidth),n=Math.max(r.height||r.bottom-r.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,t){return c.DOM.getPos(e,t||ve.getContainer())},getContainer:function(){return ue.container?ue.container:document.body},getViewPort:function(e){return c.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,t){return c.DOM.addClass(e,t)},removeClass:function(e,t){return c.DOM.removeClass(e,t)},hasClass:function(e,t){return c.DOM.hasClass(e,t)},toggleClass:function(e,t,n){return c.DOM.toggleClass(e,t,n)},css:function(e,t,n){return c.DOM.setStyle(e,t,n)},getRuntimeStyle:function(e,t){return c.DOM.getStyle(e,t,!0)},on:function(e,t,n,r){return c.DOM.bind(e,t,n,r)},off:function(e,t,n){return c.DOM.unbind(e,t,n)},fire:function(e,t,n){return c.DOM.fire(e,t,n)},innerHtml:function(e,t){c.DOM.setHTML(e,t)}},ye=function(e){return"static"===ve.getRuntimeStyle(e,"position")},be=function(e){return e.state.get("fixed")};function we(e,t,n){var r,i,o,a,s,u,l,c,f,d;return f=xe(),o=(i=ve.getPos(t,N.getUiContainer(e))).x,a=i.y,be(e)&&ye(document.body)&&(o-=f.x,a-=f.y),r=e.getEl(),s=(d=ve.getSize(r)).width,u=d.height,l=(d=ve.getSize(t)).width,c=d.height,"b"===(n=(n||"").split(""))[0]&&(a+=c),"r"===n[1]&&(o+=l),"c"===n[0]&&(a+=Math.round(c/2)),"c"===n[1]&&(o+=Math.round(l/2)),"b"===n[3]&&(a-=u),"r"===n[4]&&(o-=s),"c"===n[3]&&(a-=Math.round(u/2)),"c"===n[4]&&(o-=Math.round(s/2)),{x:o,y:a,w:s,h:u}}var xe=function(){var e=window,t=Math.max(e.pageXOffset,document.body.scrollLeft,document.documentElement.scrollLeft),n=Math.max(e.pageYOffset,document.body.scrollTop,document.documentElement.scrollTop);return{x:t,y:n,w:t+(e.innerWidth||document.documentElement.clientWidth),h:n+(e.innerHeight||document.documentElement.clientHeight)}},Ce=function(e){var t=N.getUiContainer(e);return t&&!be(e)?function(e){return{x:0,y:0,w:e.scrollWidth-1,h:e.scrollHeight-1}}(t):xe()},_e={testMoveRel:function(e,t){for(var n=Ce(this),r=0;r<t.length;r++){var i=we(this,e,t[r]);if(be(this)){if(i.x>0&&i.x+i.w<n.w&&i.y>0&&i.y+i.h<n.h)return t[r]}else if(i.x>n.x&&i.x+i.w<n.w&&i.y>n.y&&i.y+i.h<n.h)return t[r]}return t[0]},moveRel:function(e,t){"string"!=typeof t&&(t=this.testMoveRel(e,t));var n=we(this,e,t);return this.moveTo(n.x,n.y)},moveBy:function(e,t){var n=this.layoutRect();return this.moveTo(n.x+e,n.y+t),this},moveTo:function(e,t){function n(e,t,n){return e<0?0:e+n>t&&(e=t-n)<0?0:e}if(this.settings.constrainToViewport){var r=Ce(this),i=this.layoutRect();e=n(e,r.w,i.w),t=n(t,r.h,i.h)}var o=N.getUiContainer(this);return o&&ye(o)&&!be(this)&&(e-=o.scrollLeft,t-=o.scrollTop),o&&(e+=1,t+=1),this.state.get("rendered")?this.layoutRect({x:e,y:t}).repaint():(this.settings.x=e,this.settings.y=t),this.fire("move",{x:e,y:t}),this}},Se=tinymce.util.Tools.resolve("tinymce.util.Class"),ke=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),Te=function(e){var t;if(e)return"number"==typeof e?{top:e=e||0,left:e,bottom:e,right:e}:(1===(t=(e=e.split(" ")).length)?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],10)||0,right:parseInt(e[1],10)||0,bottom:parseInt(e[2],10)||0,left:parseInt(e[3],10)||0})},Ee=function(e,t){function n(t){var n=parseFloat(function(t){var n=e.ownerDocument.defaultView;if(n){var r=n.getComputedStyle(e,null);return r?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),r.getPropertyValue(t)):null}return e.currentStyle[t]}(t));return isNaN(n)?0:n}return{top:n(t+"TopWidth"),right:n(t+"RightWidth"),bottom:n(t+"BottomWidth"),left:n(t+"LeftWidth")}};function Ne(){}function Ae(e){this.cls=[],this.cls._map={},this.onchange=e||Ne,this.prefix=""}r.extend(Ae.prototype,{add:function(e){return e&&!this.contains(e)&&(this.cls._map[e]=!0,this.cls.push(e),this._change()),this},remove:function(e){if(this.contains(e)){var t=void 0;for(t=0;t<this.cls.length&&this.cls[t]!==e;t++);this.cls.splice(t,1),delete this.cls._map[e],this._change()}return this},toggle:function(e,t){var n=this.contains(e);return n!==t&&(n?this.remove(e):this.add(e),this._change()),this},contains:function(e){return!!this.cls._map[e]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),Ae.prototype.toString=function(){var e;if(this.clsValue)return this.clsValue;e="";for(var t=0;t<this.cls.length;t++)t>0&&(e+=" "),e+=this.prefix+this.cls[t];return e};var Re,Oe,De,Pe=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,Ie=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,Be=/^\s*|\s*$/g,Me=Se.extend({init:function(e){var t=this.match;function n(e,n,i){var o;function a(e){e&&n.push(e)}return a(function(e){if(e)return e=e.toLowerCase(),function(t){return"*"===e||t.type===e}}((o=Pe.exec(e.replace(Be,"")))[1])),a(function(e){if(e)return function(t){return t._name===e}}(o[2])),a(function(e){if(e)return e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.classes.contains(e[n]))return!1;return!0}}(o[3])),a(function(e,t,n){if(e)return function(r){var i=r[e]?r[e]():"";return t?"="===t?i===n:"*="===t?i.indexOf(n)>=0:"~="===t?(" "+i+" ").indexOf(" "+n+" ")>=0:"!="===t?i!==n:"^="===t?0===i.indexOf(n):"$="===t&&i.substr(i.length-n.length)===n:!!n}}(o[4],o[5],o[6])),a(function(e){var n;if(e)return(e=/(?:not\((.+)\))|(.+)/i.exec(e))[1]?(n=r(e[1],[]),function(e){return!t(e,n)}):(e=e[2],function(t,n,r){return"first"===e?0===n:"last"===e?n===r-1:"even"===e?n%2==0:"odd"===e?n%2==1:!!t[e]&&t[e]()})}(o[7])),n.pseudo=!!o[7],n.direct=i,n}function r(e,t){var i,o,a,s=[];do{if(Ie.exec(""),(o=Ie.exec(e))&&(e=o[3],s.push(o[1]),o[2])){i=o[3];break}}while(o);for(i&&r(i,t),e=[],a=0;a<s.length;a++)">"!==s[a]&&e.push(n(s[a],[],">"===s[a-1]));return t.push(e),t}this._selectors=r(e,[])},match:function(e,t){var n,r,i,o,a,s,u,l,c,f,d,h,p;for(n=0,r=(t=t||this._selectors).length;n<r;n++){for(p=e,h=0,i=(o=(a=t[n]).length)-1;i>=0;i--)for(l=a[i];p;){if(l.pseudo)for(c=f=(d=p.parent().items()).length;c--&&d[c]!==p;);for(s=0,u=l.length;s<u;s++)if(!l[s](p,c,f)){s=u+1;break}if(s===u){h++;break}if(i===o-1)break;p=p.parent()}if(h===o)return!0}return!1},find:function(e){var t,n,r=[],i=this._selectors;function o(e,t,n){var i,a,s,u,l,c=t[n];for(i=0,a=e.length;i<a;i++){for(l=e[i],s=0,u=c.length;s<u;s++)if(!c[s](l,i,a)){s=u+1;break}if(s===u)n===t.length-1?r.push(l):l.items&&o(l.items(),t,n+1);else if(c.direct)return;l.items&&o(l.items(),t,n)}}if(e.items){for(t=0,n=i.length;t<n;t++)o(e.items(),i[t],0);n>1&&(r=function(e){for(var t,n=[],r=e.length;r--;)(t=e[r]).__checked||(n.push(t),t.__checked=1);for(r=n.length;r--;)delete n[r].__checked;return n}(r))}return Re||(Re=Me.Collection),new Re(r)}}),Le=Array.prototype.push,He=Array.prototype.slice;De={length:0,init:function(e){e&&this.add(e)},add:function(e){return r.isArray(e)?Le.apply(this,e):e instanceof Oe?this.add(e.toArray()):Le.call(this,e),this},set:function(e){var t,n=this.length;for(this.length=0,this.add(e),t=this.length;t<n;t++)delete this[t];return this},filter:function(e){var t,n,r,i,o=[];for("string"==typeof e?(e=new Me(e),i=function(t){return e.match(t)}):i=e,t=0,n=this.length;t<n;t++)i(r=this[t])&&o.push(r);return new Oe(o)},slice:function(){return new Oe(He.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(e){return r.each(this,e),this},toArray:function(){return r.toArray(this)},indexOf:function(e){for(var t=this.length;t--&&this[t]!==e;);return t},reverse:function(){return new Oe(r.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].classes.contains(e)},prop:function(e,t){var n;return void 0!==t?(this.each(function(n){n[e]&&n[e](t)}),this):(n=this[0])&&n[e]?n[e]():void 0},exec:function(e){var t=r.toArray(arguments).slice(1);return this.each(function(n){n[e]&&n[e].apply(n,t)}),this},remove:function(){for(var e=this.length;e--;)this[e].remove();return this},addClass:function(e){return this.each(function(t){t.classes.add(e)})},removeClass:function(e){return this.each(function(t){t.classes.remove(e)})}},r.each("fire on off show hide append prepend before after reflow".split(" "),function(e){De[e]=function(){var t=r.toArray(arguments);return this.each(function(n){e in n&&n[e].apply(n,t)}),this}}),r.each("text name disabled active selected checked visible parent value data".split(" "),function(e){De[e]=function(t){return this.prop(e,t)}}),Oe=Se.extend(De),Me.Collection=Oe;var Fe=Oe,ze=function(e){this.create=e.create};ze.create=function(e,t){return new ze({create:function(n,r){var i,o=function(e){n.set(r,e.value)};return n.on("change:"+r,function(n){e.set(t,n.value)}),e.on("change:"+t,o),(i=n._bindings)||(i=n._bindings=[],n.on("destroy",function(){for(var e=i.length;e--;)i[e]()})),i.push(function(){e.off("change:"+t,o)}),e.get(t)}})};var je=tinymce.util.Tools.resolve("tinymce.util.Observable");function We(e){return e.nodeType>0}var Ue,$e,qe=Se.extend({Mixins:[je],init:function(e){var t,n;for(t in e=e||{})(n=e[t])instanceof ze&&(e[t]=n.create(this,t));this.data=e},set:function(e,t){var n,i,o=this.data[e];if(t instanceof ze&&(t=t.create(this,e)),"object"==typeof e){for(n in e)this.set(n,e[n]);return this}return function e(t,n){var i,o;if(t===n)return!0;if(null===t||null===n)return t===n;if("object"!=typeof t||"object"!=typeof n)return t===n;if(r.isArray(n)){if(t.length!==n.length)return!1;for(i=t.length;i--;)if(!e(t[i],n[i]))return!1}if(We(t)||We(n))return t===n;for(i in o={},n){if(!e(t[i],n[i]))return!1;o[i]=!0}for(i in t)if(!o[i]&&!e(t[i],n[i]))return!1;return!0}(o,t)||(this.data[e]=t,i={target:this,name:e,value:t,oldValue:o},this.fire("change:"+e,i),this.fire("change",i)),this},get:function(e){return this.data[e]},has:function(e){return e in this.data},bind:function(e){return ze.create(this,e)},destroy:function(){this.fire("destroy")}}),Ve={},Xe={add:function(e){var t=e.parent();if(t){if(!t._layout||t._layout.isNative())return;Ve[t._id]||(Ve[t._id]=t),Ue||(Ue=!0,y.requestAnimationFrame(function(){var e,t;for(e in Ue=!1,Ve)(t=Ve[e]).state.get("rendered")&&t.reflow();Ve={}},document.body))}},remove:function(e){Ve[e._id]&&delete Ve[e._id]}},Ye="onmousewheel"in document,Ke=!1,Je=0,Ge={Statics:{classPrefix:"mce-"},isRtl:function(){return $e.rtl},classPrefix:"mce-",init:function(e){var t,n,i=this;function o(e){var t;for(e=e.split(" "),t=0;t<e.length;t++)i.classes.add(e[t])}i.settings=e=r.extend({},i.Defaults,e),i._id=e.id||"mceu_"+Je++,i._aria={role:e.role},i._elmCache={},i.$=me,i.state=new qe({visible:!0,active:!1,disabled:!1,value:""}),i.data=new qe(e.data),i.classes=new Ae(function(){i.state.get("rendered")&&(i.getEl().className=this.toString())}),i.classes.prefix=i.classPrefix,(t=e.classes)&&(i.Defaults&&(n=i.Defaults.classes)&&t!==n&&o(n),o(t)),r.each("title text name visible disabled active value".split(" "),function(t){t in e&&i[t](e[t])}),i.on("click",function(){if(i.disabled())return!1}),i.settings=e,i.borderBox=Te(e.border),i.paddingBox=Te(e.padding),i.marginBox=Te(e.margin),e.hidden&&i.hide()},Properties:"parent,name",getContainerElm:function(){return N.getUiContainer(this)||ve.getContainer()},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},initLayoutRect:function(){var e,t,n,r,i,o,a,s,u,l,c=this.settings,f=this.getEl();e=this.borderBox=this.borderBox||Ee(f,"border"),this.paddingBox=this.paddingBox||Ee(f,"padding"),this.marginBox=this.marginBox||Ee(f,"margin"),l=ve.getSize(f),s=c.minWidth,u=c.minHeight,i=s||l.width,o=u||l.height,n=c.width,r=c.height,a=void 0!==(a=c.autoResize)?a:!n&&!r,n=n||i,r=r||o;var d=e.left+e.right,h=e.top+e.bottom,p=c.maxWidth||65535,m=c.maxHeight||65535;return this._layoutRect=t={x:c.x||0,y:c.y||0,w:n,h:r,deltaW:d,deltaH:h,contentW:n-d,contentH:r-h,innerW:n-d,innerH:r-h,startMinWidth:s||0,startMinHeight:u||0,minW:Math.min(i,p),minH:Math.min(o,m),maxW:p,maxH:m,autoResize:a,scrollW:0},this._lastLayoutRect={},t},layoutRect:function(e){var t,n,r,i,o,a=this._layoutRect;return a||(a=this.initLayoutRect()),e?(r=a.deltaW,i=a.deltaH,void 0!==e.x&&(a.x=e.x),void 0!==e.y&&(a.y=e.y),void 0!==e.minW&&(a.minW=e.minW),void 0!==e.minH&&(a.minH=e.minH),void 0!==(n=e.w)&&(n=(n=n<a.minW?a.minW:n)>a.maxW?a.maxW:n,a.w=n,a.innerW=n-r),void 0!==(n=e.h)&&(n=(n=n<a.minH?a.minH:n)>a.maxH?a.maxH:n,a.h=n,a.innerH=n-i),void 0!==(n=e.innerW)&&(n=(n=n<a.minW-r?a.minW-r:n)>a.maxW-r?a.maxW-r:n,a.innerW=n,a.w=n+r),void 0!==(n=e.innerH)&&(n=(n=n<a.minH-i?a.minH-i:n)>a.maxH-i?a.maxH-i:n,a.innerH=n,a.h=n+i),void 0!==e.contentW&&(a.contentW=e.contentW),void 0!==e.contentH&&(a.contentH=e.contentH),(t=this._lastLayoutRect).x===a.x&&t.y===a.y&&t.w===a.w&&t.h===a.h||((o=$e.repaintControls)&&o.map&&!o.map[this._id]&&(o.push(this),o.map[this._id]=!0),t.x=a.x,t.y=a.y,t.w=a.w,t.h=a.h),this):a},repaint:function(){var e,t,n,r,i,o,a,s,u,l;u=document.createRange?function(e){return e}:Math.round,e=this.getEl().style,r=this._layoutRect,s=this._lastRepaintRect||{},o=(i=this.borderBox).left+i.right,a=i.top+i.bottom,r.x!==s.x&&(e.left=u(r.x)+"px",s.x=r.x),r.y!==s.y&&(e.top=u(r.y)+"px",s.y=r.y),r.w!==s.w&&(l=u(r.w-o),e.width=(l>=0?l:0)+"px",s.w=r.w),r.h!==s.h&&(l=u(r.h-a),e.height=(l>=0?l:0)+"px",s.h=r.h),this._hasBody&&r.innerW!==s.innerW&&(l=u(r.innerW),(n=this.getEl("body"))&&((t=n.style).width=(l>=0?l:0)+"px"),s.innerW=r.innerW),this._hasBody&&r.innerH!==s.innerH&&(l=u(r.innerH),(n=n||this.getEl("body"))&&((t=t||n.style).height=(l>=0?l:0)+"px"),s.innerH=r.innerH),this._lastRepaintRect=s,this.fire("repaint",{},!1)},updateLayoutRect:function(){this.parent()._lastRect=null,ve.css(this.getEl(),{width:"",height:""}),this._layoutRect=this._lastRepaintRect=this._lastLayoutRect=null,this.initLayoutRect()},on:function(e,t){var n=this;return Qe(n).on(e,function(e){var t,r;return"string"!=typeof e?e:function(i){return t||n.parentsAndSelf().each(function(n){var i=n.settings.callbacks;if(i&&(t=i[e]))return r=n,!1}),t?t.call(r,i):(i.action=e,void this.fire("execute",i))}}(t)),n},off:function(e,t){return Qe(this).off(e,t),this},fire:function(e,t,n){if((t=t||{}).control||(t.control=this),t=Qe(this).fire(e,t),!1!==n&&this.parent)for(var r=this.parent();r&&!t.isPropagationStopped();)r.fire(e,t,!1),r=r.parent();return t},hasEventListeners:function(e){return Qe(this).has(e)},parents:function(e){var t,n=new Fe;for(t=this.parent();t;t=t.parent())n.add(t);return e&&(n=n.filter(e)),n},parentsAndSelf:function(e){return new Fe(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},innerHtml:function(e){return this.$el.html(e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=me("#"+t)[0]),this._elmCache[t]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this.getEl(this.ariaTarget);return void 0===t?this._aria[e]:(this._aria[e]=t,this.state.get("rendered")&&n.setAttribute("role"===e?e:"aria-"+e,t),this)},encode:function(e,t){return!1!==t&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return $e.translate?$e.translate(e):e},before:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this),!0),this},after:function(e){var t=this.parent();return t&&t.insert(e,t.items().indexOf(this)),this},remove:function(){var e,t,n=this,r=n.getEl(),i=n.parent();if(n.items){var o=n.items().toArray();for(t=o.length;t--;)o[t].remove()}i&&i.items&&(e=[],i.items().each(function(t){t!==n&&e.push(t)}),i.items().set(e),i._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&me(r).off();var a=n.getRoot().controlIdLookup;return a&&delete a[n._id],r&&r.parentNode&&r.parentNode.removeChild(r),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(e){return me(e).before(this.renderHtml()),this.postRender(),this},renderTo:function(e){return me(e||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var e,t,n,r,i,o=this,a=o.settings;for(r in o.$el=me(o.getEl()),o.state.set("rendered",!0),a)0===r.indexOf("on")&&o.on(r.substr(2),a[r]);if(o._eventsRoot){for(n=o.parent();!i&&n;n=n.parent())i=n._eventsRoot;if(i)for(r in i._nativeEvents)o._nativeEvents[r]=!0}Ze(o),a.style&&(e=o.getEl())&&(e.setAttribute("style",a.style),e.style.cssText=a.style),o.settings.border&&(t=o.borderBox,o.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left}));var s=o.getRoot();for(var u in s.controlIdLookup||(s.controlIdLookup={}),s.controlIdLookup[o._id]=o,o._aria)o.aria(u,o._aria[u]);!1===o.state.get("visible")&&(o.getEl().style.display="none"),o.bindStates(),o.state.on("change:visible",function(e){var t,n=e.value;o.state.get("rendered")&&(o.getEl().style.display=!1===n?"none":"",o.getEl().getBoundingClientRect()),(t=o.parent())&&(t._lastRect=null),o.fire(n?"show":"hide"),Xe.add(o)}),o.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(e){var t,n,r,i,o,a,s=this.getEl(),u=s.parentNode,l=function(e,t){var n,r,i=s;for(n=r=0;i&&i!==t&&i.nodeType;)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;return{x:n,y:r}}(0,u);return t=l.x,n=l.y,r=s.offsetWidth,i=s.offsetHeight,o=u.clientWidth,a=u.clientHeight,"end"===e?(t-=o-r,n-=a-i):"center"===e&&(t-=o/2-r/2,n-=a/2-i/2),u.scrollLeft=t,u.scrollTop=n,this},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t),e=t,t=t.parent()}e||(e=this);for(var r=n.length;r--;)n[r].rootControl=e;return e},reflow:function(){Xe.remove(this);var e=this.parent();return e&&e._layout&&!e._layout.isNative()&&e.reflow(),this}};function Qe(e){return e._eventDispatcher||(e._eventDispatcher=new ke({scope:e,toggleEvent:function(t,n){n&&ke.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e.state.get("rendered")&&Ze(e))}})),e._eventDispatcher}function Ze(e){var t,n,r,i,o,a;function s(t){var n=e.getParentCtrl(t.target);n&&n.fire(t.type,t)}function u(){var e=i._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),i._lastHoverCtrl=null)}function l(t){var n,r,o,a=e.getParentCtrl(t.target),s=i._lastHoverCtrl,u=0;if(a!==s){if(i._lastHoverCtrl=a,(r=a.parents().toArray().reverse()).push(a),s){for((o=s.parents().toArray().reverse()).push(s),u=0;u<o.length&&r[u]===o[u];u++);for(n=o.length-1;n>=u;n--)(s=o[n]).fire("mouseleave",{target:s.getEl()})}for(n=u;n<r.length;n++)(a=r[n]).fire("mouseenter",{target:a.getEl()})}}function c(t){t.preventDefault(),"mousewheel"===t.type?(t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail),t=e.fire("wheel",t)}if(o=e._nativeEvents){for((r=e.parents().toArray()).unshift(e),t=0,n=r.length;!i&&t<n;t++)i=r[t]._eventsRoot;for(i||(i=r[r.length-1]||e),e._eventsRoot=i,n=t,t=0;t<n;t++)r[t]._eventsRoot=i;var f=i._delegates;for(a in f||(f=i._delegates={}),o){if(!o)return!1;"wheel"!==a||Ke?("mouseenter"===a||"mouseleave"===a?i._hasMouseEnter||(me(i.getEl()).on("mouseleave",u).on("mouseover",l),i._hasMouseEnter=1):f[a]||(me(i.getEl()).on(a,s),f[a]=!0),o[a]=!1):Ye?me(e.getEl()).on("mousewheel",c):me(e.getEl()).on("DOMMouseScroll",c)}}}r.each("text title visible disabled active value".split(" "),function(e){Ge[e]=function(t){return 0===arguments.length?this.state.get(e):(void 0!==t&&this.state.set(e,t),this)}});var et=$e=Se.extend(Ge),tt=function(e){return!!e.getAttribute("data-mce-tabstop")};function nt(e){var t,n,r=e.root;function i(e){return e&&1===e.nodeType}try{t=document.activeElement}catch(e){t=document.body}function o(e){return i(e=e||t)?e.getAttribute("role"):null}function a(e){for(var n,r=e||t;r=r.parentNode;)if(n=o(r))return n}function s(e){var n=t;if(i(n))return n.getAttribute("aria-"+e)}function u(e){var t=e.tagName.toUpperCase();return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t}function l(e){var t=[];return function e(n){if(1===n.nodeType&&"none"!==n.style.display&&!n.disabled){(function(e){return!(!u(e)||e.hidden)||!!tt(e)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(o(e))})(n)&&t.push(n);for(var r=0;r<n.childNodes.length;r++)e(n.childNodes[r])}}(e||r.getEl()),t}function c(e){var t,r;(r=(e=e||n).parents().toArray()).unshift(e);for(var i=0;i<r.length&&!(t=r[i]).settings.ariaRoot;i++);return t}function f(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function d(e,n){var r=-1,i=c();n=n||l(i.getEl());for(var o=0;o<n.length;o++)n[o]===t&&(r=o);r+=e,i.lastAriaIndex=f(r,n)}function h(){"tablist"===a()?d(-1,l(t.parentNode)):n.parent().submenu?v():d(-1)}function p(){var e=o(),n=a();"tablist"===n?d(1,l(t.parentNode)):"menuitem"===e&&"menu"===n&&s("haspopup")?y():d(1)}function m(){d(-1)}function g(){var e=o(),t=a();"menuitem"===e&&"menubar"===t?y():"button"===e&&s("haspopup")?y({key:"down"}):d(1)}function v(){n.fire("cancel")}function y(e){e=e||{},n.fire("click",{target:t,aria:e})}return n=r.getParentCtrl(t),r.on("keydown",function(e){function r(e,n){u(t)||tt(t)||"slider"!==o(t)&&!1!==n(e)&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:r(e,h);break;case 39:r(e,p);break;case 38:r(e,m);break;case 40:r(e,g);break;case 27:v();break;case 14:case 13:case 32:r(e,y);break;case 9:!function(e){if("tablist"===a()){var t=l(n.getEl("body"))[0];t&&t.focus()}else d(e.shiftKey?-1:1)}(e),e.preventDefault()}}),r.on("focusin",function(e){t=e.target,n=e.control}),{focusFirst:function(e){var t=c(e),n=l(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?f(t.lastAriaIndex,n):f(0,n)}}}var rt={},it=et.extend({init:function(e){var t=this;t._super(e),(e=t.settings).fixed&&t.state.set("fixed",!0),t._items=new Fe,t.isRtl()&&t.classes.add("rtl"),t.bodyClasses=new Ae(function(){t.state.get("rendered")&&(t.getEl("body").className=this.toString())}),t.bodyClasses.prefix=t.classPrefix,t.classes.add("container"),t.bodyClasses.add("container-body"),e.containerCls&&t.classes.add(e.containerCls),t._layout=f.create((e.layout||"")+"layout"),t.settings.items?t.add(t.settings.items):t.add(t.render()),t._hasBody=!0},items:function(){return this._items},find:function(e){return(e=rt[e]=rt[e]||new Me(e)).find(this)},add:function(e){return this.items().add(this.create(e)).parent(this),this},focus:function(e){var t,n,r;if(!e||!(n=this.keyboardNav||this.parents().eq(-1)[0].keyboardNav))return r=this.find("*"),this.statusbar&&r.add(this.statusbar.items()),r.each(function(e){if(e.settings.autofocus)return t=null,!1;e.canFocus&&(t=t||e)}),t&&t.focus(),this;n.focusFirst(this)},replace:function(e,t){for(var n,r=this.items(),i=r.length;i--;)if(r[i]===e){r[i]=t;break}i>=0&&((n=t.getEl())&&n.parentNode.removeChild(n),(n=e.getEl())&&n.parentNode.removeChild(n)),t.parent(this)},create:function(e){var t,n=this,i=[];return r.isArray(e)||(e=[e]),r.each(e,function(e){e&&(e instanceof et||("string"==typeof e&&(e={type:e}),t=r.extend({},n.settings.defaults,e),e.type=t.type=t.type||e.type||n.settings.defaultType||(t.defaults?t.defaults.type:null),e=f.create(t)),i.push(e))}),i},renderNew:function(){var e=this;return e.items().each(function(t,n){var r;t.parent(e),t.state.get("rendered")||((r=e.getEl("body")).hasChildNodes()&&n<=r.childNodes.length-1?me(r.childNodes[n]).before(t.renderHtml()):me(r).append(t.renderHtml()),t.postRender(),Xe.add(t))}),e._layout.applyClasses(e.items().filter(":visible")),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){return this.items().set(this.create(e).concat(this.items().toArray())),this.renderNew()},insert:function(e,t,n){var r,i,o;return e=this.create(e),r=this.items(),!n&&t<r.length-1&&(t+=1),t>=0&&t<r.length&&(i=r.slice(0,t).toArray(),o=r.slice(t).toArray(),r.set(i.concat(e,o))),this.renderNew()},fromJSON:function(e){for(var t in e)this.find("#"+t).value(e[t]);return this},toJSON:function(){var e={};return this.find("*").each(function(t){var n=t.name(),r=t.value();n&&void 0!==r&&(e[n]=r)}),e},renderHtml:function(){var e=this._layout,t=this.settings.role;return this.preRender(),e.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"'+(t?' role="'+this.settings.role+'"':"")+'><div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+e.renderHtml(this)+"</div></div>"},postRender:function(){var e;return this.items().exec("postRender"),this._super(),this._layout.postRender(this),this.state.set("rendered",!0),this.settings.style&&this.$el.css(this.settings.style),this.settings.border&&(e=this.borderBox,this.$el.css({"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),this.parent()||(this.keyboardNav=nt({root:this})),this},initLayoutRect:function(){var e=this._super();return this._layout.recalc(this),e},recalc:function(){var e=this._layoutRect,t=this._lastRect;if(!t||t.w!==e.w||t.h!==e.h)return this._layout.recalc(this),e=this.layoutRect(),this._lastRect={x:e.x,y:e.y,w:e.w,h:e.h},!0},reflow:function(){var e;if(Xe.remove(this),this.visible()){for(et.repaintControls=[],et.repaintControls.map={},this.recalc(),e=et.repaintControls.length;e--;)et.repaintControls[e].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),et.repaintControls=[]}return this}});function ot(e){var t,n;if(e.changedTouches)for(t="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<t.length;n++)e[t[n]]=e.changedTouches[0][t[n]]}function at(e,t){var n,r,i,o,a,s,u,l=t.document||document;t=t||{};var c=l.getElementById(t.handle||e);i=function(e){var i,f,d=function(e){var t,n,r,i,o,a,s,u,l=Math.max;return t=e.documentElement,n=e.body,r=l(t.scrollWidth,n.scrollWidth),i=l(t.clientWidth,n.clientWidth),o=l(t.offsetWidth,n.offsetWidth),a=l(t.scrollHeight,n.scrollHeight),s=l(t.clientHeight,n.clientHeight),u=l(t.offsetHeight,n.offsetHeight),{width:r<o?i:r,height:a<u?s:a}}(l);ot(e),e.preventDefault(),r=e.button,i=c,s=e.screenX,u=e.screenY,f=window.getComputedStyle?window.getComputedStyle(i,null).getPropertyValue("cursor"):i.runtimeStyle.cursor,n=me("<div></div>").css({position:"absolute",top:0,left:0,width:d.width,height:d.height,zIndex:2147483647,opacity:1e-4,cursor:f}).appendTo(l.body),me(l).on("mousemove touchmove",a).on("mouseup touchend",o),t.start(e)},a=function(e){if(ot(e),e.button!==r)return o(e);e.deltaX=e.screenX-s,e.deltaY=e.screenY-u,e.preventDefault(),t.drag(e)},o=function(e){ot(e),me(l).off("mousemove touchmove",a).off("mouseup touchend",o),n.remove(),t.stop&&t.stop(e)},this.destroy=function(){me(c).off()},me(c).on("mousedown touchstart",i)}var st,ut,lt,ct,ft={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var e=this,t=2;function n(){var n,r,i;function o(i,o,a,s,u,l){var c,f,d,h,p,m,g,v;if(f=e.getEl("scroll"+i)){if(g=o.toLowerCase(),v=a.toLowerCase(),me(e.getEl("absend")).css(g,e.layoutRect()[s]-1),!u)return void me(f).css("display","none");me(f).css("display","block"),c=e.getEl("body"),d=e.getEl("scroll"+i+"t"),h=c["client"+a]-2*t,p=(h-=n&&r?f["client"+l]:0)/c["scroll"+a],(m={})[g]=c["offset"+o]+t,m[v]=h,me(f).css(m),(m={})[g]=c["scroll"+o]*p,m[v]=h*p,me(d).css(m)}}i=e.getEl("body"),n=i.scrollWidth>i.clientWidth,r=i.scrollHeight>i.clientHeight,o("h","Left","Width","contentW",n,"Height"),o("v","Top","Height","contentH",r,"Width")}e.settings.autoScroll&&(e._hasScroll||(e._hasScroll=!0,function(){function n(n,r,i,o,a){var s,u=e._id+"-scroll"+n,l=e.classPrefix;me(e.getEl()).append('<div id="'+u+'" class="'+l+"scrollbar "+l+"scrollbar-"+n+'"><div id="'+u+'t" class="'+l+'scrollbar-thumb"></div></div>'),e.draghelper=new at(u+"t",{start:function(){s=e.getEl("body")["scroll"+r],me("#"+u).addClass(l+"active")},drag:function(u){var l,c,f,d,h=e.layoutRect();c=h.contentW>h.innerW,f=h.contentH>h.innerH,d=e.getEl("body")["client"+i]-2*t,l=(d-=c&&f?e.getEl("scroll"+n)["client"+a]:0)/e.getEl("body")["scroll"+i],e.getEl("body")["scroll"+r]=s+u["delta"+o]/l},stop:function(){me("#"+u).removeClass(l+"active")}})}e.classes.add("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}(),e.on("wheel",function(t){var r=e.getEl("body");r.scrollLeft+=10*(t.deltaX||0),r.scrollTop+=10*t.deltaY,n()}),me(e.getEl("body")).on("scroll",n)),n())}},dt=it.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[ft],renderHtml:function(){var e=this._layout,t=this.settings.html;return this.preRender(),e.preRender(this),void 0===t?t='<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+e.renderHtml(this)+"</div>":("function"==typeof t&&(t=t.call(this)),this._hasBody=!1),'<div id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1" role="group">'+(this._preBodyHtml||"")+t+"</div>"}}),ht={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(e,t){if(e<=1||t<=1){var n=ve.getWindowSize();e=e<=1?e*n.w:e,t=t<=1?t*n.h:t}return this._layoutRect.autoResize=!1,this.layoutRect({minW:e,minH:t,w:e,h:t}).reflow()},resizeBy:function(e,t){var n=this.layoutRect();return this.resizeTo(n.w+e,n.h+t)}},pt=[],mt=[];function gt(e,t){for(;e;){if(e===t)return!0;e=e.parent()}}function vt(e){var t=ve.getViewPort().y;function n(t,n){for(var r,i=0;i<pt.length;i++)if(pt[i]!==e)for(r=pt[i].parent();r&&(r=r.parent());)r===e&&pt[i].fixed(t).moveBy(0,n).repaint()}e.settings.autofix&&(e.state.get("fixed")?e._autoFixY>t&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),n(!1,e._autoFixY-t)):(e._autoFixY=e.layoutRect().y,e._autoFixY<t&&(e.fixed(!0).layoutRect({y:0}).repaint(),n(!0,t-e._autoFixY))))}function yt(e,t){var n,r,i=bt.zIndex||65535;if(e)mt.push(t);else for(n=mt.length;n--;)mt[n]===t&&mt.splice(n,1);if(mt.length)for(n=0;n<mt.length;n++)mt[n].modal&&(i++,r=mt[n]),mt[n].getEl().style.zIndex=i,mt[n].zIndex=i,i++;var o=me("#"+t.classPrefix+"modal-block",t.getContainerElm())[0];r?me(o).css("z-index",r.zIndex-1):o&&(o.parentNode.removeChild(o),ct=!1),bt.currentZIndex=i}var bt=dt.extend({Mixins:[_e,ht],init:function(e){var t=this;t._super(e),t._eventsRoot=t,t.classes.add("floatpanel"),e.autohide&&(st||(st=function(e){2!==e.button&&function(e){for(var t=pt.length;t--;){var n=pt[t],r=n.getParentCtrl(e.target);if(n.settings.autohide){if(r&&(gt(r,n)||n.parent()===r))continue;(e=n.fire("autohide",{target:e.target})).isDefaultPrevented()||n.hide()}}}(e)},me(document).on("click touchstart",st)),function(){if(!lt){var e=document.documentElement,t=e.clientWidth,n=e.clientHeight;lt=function(){document.all&&t===e.clientWidth&&n===e.clientHeight||(t=e.clientWidth,n=e.clientHeight,bt.hideAll())},me(window).on("resize",lt)}}(),pt.push(t)),e.autofix&&(ut||(ut=function(){var e;for(e=pt.length;e--;)vt(pt[e])},me(window).on("scroll",ut)),t.on("move",function(){vt(this)})),t.on("postrender show",function(e){if(e.control===t){var n,r=t.classPrefix;t.modal&&!ct&&((n=me("#"+r+"modal-block",t.getContainerElm()))[0]||(n=me('<div id="'+r+'modal-block" class="'+r+"reset "+r+'fade"></div>').appendTo(t.getContainerElm())),y.setTimeout(function(){n.addClass(r+"in"),me(t.getEl()).addClass(r+"in")}),ct=!0),yt(!0,t)}}),t.on("show",function(){t.parents().each(function(e){if(e.state.get("fixed"))return t.fixed(!0),!1})}),e.popover&&(t._preBodyHtml='<div class="'+t.classPrefix+'arrow"></div>',t.classes.add("popover").add("bottom").add(t.isRtl()?"end":"start")),t.aria("label",e.ariaLabel),t.aria("labelledby",t._id),t.aria("describedby",t.describedBy||t._id+"-none")},fixed:function(e){if(this.state.get("fixed")!==e){if(this.state.get("rendered")){var t=ve.getViewPort();e?this.layoutRect().y-=t.y:this.layoutRect().y+=t.y}this.classes.toggle("fixed",e),this.state.set("fixed",e)}return this},show:function(){var e,t=this._super();for(e=pt.length;e--&&pt[e]!==this;);return-1===e&&pt.push(this),t},hide:function(){return wt(this),yt(!1,this),this._super()},hideAll:function(){bt.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),yt(!1,this)),this},remove:function(){wt(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});function wt(e){var t;for(t=pt.length;t--;)pt[t]===e&&pt.splice(t,1);for(t=mt.length;t--;)mt[t]===e&&mt.splice(t,1)}bt.hideAll=function(){for(var e=pt.length;e--;){var t=pt[e];t&&t.settings.autohide&&(t.hide(),pt.splice(e,1))}};var xt=function(e,t){return!(!e||t.settings.ui_container)},Ct=function(e,t,n){var r,o,s=c.DOM,l=function(e){return e.getParam("fixed_toolbar_container")}(e);l&&(o=s.select(l)[0]);var d=function(){if(r&&r.moveRel&&r.visible()&&!r._fixed){var t=e.selection.getScrollContainer(),n=e.getBody(),i=0,o=0;if(t){var a=s.getPos(n),u=s.getPos(t);i=Math.max(0,u.x-a.x),o=Math.max(0,u.y-a.y)}r.fixed(!1).moveRel(n,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(i,o)}},h=function(){r&&(r.show(),d(),s.addClass(e.getBody(),"mce-edit-focus"))},m=function(){r&&(r.hide(),bt.hideAll(),s.removeClass(e.getBody(),"mce-edit-focus"))},v=function(){r?r.visible()||h():(r=t.panel=f.create({type:o?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:xt(o,e),fixed:xt(o,e),border:1,items:[!1===i(e)?null:{type:"menubar",border:"0 0 1 0",items:re(e)},O(e,a(e))]}),N.setUiContainer(e,r),p(e),o?r.renderTo(o).reflow():r.renderTo().reflow(),g(e,r),h(),M(e),e.on("nodeChange",d),e.on("ResizeWindow",d),e.on("activate",h),e.on("deactivate",m),e.nodeChanged())};return e.settings.content_editable=!0,e.on("focus",function(){!1===u(e)&&n.skinUiCss?s.styleSheetLoader.load(n.skinUiCss,v,v):v()}),e.on("blur hide",m),e.on("remove",function(){r&&(r.remove(),r=null)}),!1===u(e)&&n.skinUiCss?s.styleSheetLoader.load(n.skinUiCss,fe(e)):fe(e)(),{}};function _t(e,t){var n,r,i=this,o=et.classPrefix;i.show=function(a,s){function u(){n&&(me(e).append('<div class="'+o+"throbber"+(t?" "+o+"throbber-inline":"")+'"></div>'),s&&s())}return i.hide(),n=!0,a?r=y.setTimeout(u,a):u(),i},i.hide=function(){var t=e.lastChild;return y.clearTimeout(r),t&&-1!==t.className.indexOf("throbber")&&t.parentNode.removeChild(t),n=!1,i}}var St=function(e,t,r){var i=function(e){var t=e.settings,r=t.skin,i=t.skin_url;if(!1!==r){var o=r||"lightgray";i=i?e.documentBaseURI.toAbsolute(i):n.baseURL+"/skins/"+o}return i}(e);return i&&(r.skinUiCss=i+"/skin.min.css",e.contentCSS.push(i+"/content"+(e.inline?".inline":"")+".min.css")),function(e,t){var n;e.on("ProgressState",function(e){n=n||new _t(t.panel.getEl("body")),e.state?n.show(e.time):n.hide()})}(e,t),function(e){return e.getParam("inline",!1,"boolean")}(e)?Ct(e,t,r):pe(e,t,r)},kt=et.extend({Mixins:[_e],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var e=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'" role="presentation"><div class="'+e+'tooltip-arrow"></div><div class="'+e+'tooltip-inner">'+this.encode(this.state.get("text"))+"</div></div>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().lastChild.innerHTML=e.encode(t.value)}),e._super()},repaint:function(){var e,t;e=this.getEl().style,t=this._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}}),Tt=et.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&!1!==Tt.tooltips&&(t.on("mouseenter",function(n){var r=t.tooltip().moveTo(-65535);if(n.control===t){var i=r.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);r.classes.toggle("tooltip-n","bc-tc"===i),r.classes.toggle("tooltip-nw","bc-tl"===i),r.classes.toggle("tooltip-ne","bc-tr"===i),r.moveRel(t.getEl(),i)}else r.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().remove(),t._tooltip=null})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new kt({type:"tooltip"}),N.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var e=this.settings;this._super(),this.parent()||!e.width&&!e.height||(this.initLayoutRect(),this.repaint()),e.autofocus&&this.focus()},bindStates:function(){var e=this;function t(t){e.aria("disabled",t),e.classes.toggle("disabled",t)}function n(t){e.aria("pressed",t),e.classes.toggle("active",t)}return e.state.on("change:disabled",function(e){t(e.value)}),e.state.on("change:active",function(e){n(e.value)}),e.state.get("disabled")&&t(!0),e.state.get("active")&&n(!0),e._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),Et=Tt.extend({Defaults:{value:0},init:function(e){this._super(e),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(e){return Math.round(e)})},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'"><div class="'+t+'bar-container"><div class="'+t+'bar"></div></div><div class="'+t+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){var e=this;function t(t){t=e.settings.filter(t),e.getEl().lastChild.innerHTML=t+"%",e.getEl().firstChild.firstChild.style.width=t+"%"}return e.state.on("change:value",function(e){t(e.value)}),t(e.state.get("value")),e._super()}}),Nt=function(e,t){e.getEl().lastChild.textContent=t+(e.progressBar?" "+e.progressBar.value()+"%":"")},At=et.extend({Mixins:[_e],Defaults:{classes:"widget notification"},init:function(e){var t=this;t._super(e),t.maxWidth=e.maxWidth,e.text&&t.text(e.text),e.icon&&(t.icon=e.icon),e.color&&(t.color=e.color),e.type&&t.classes.add("notification-"+e.type),e.timeout&&(e.timeout<0||e.timeout>0)&&!e.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0),e.progressBar&&(t.progressBar=new Et),t.on("click",function(e){-1!==e.target.className.indexOf(t.classPrefix+"close")&&t.close()})},renderHtml:function(){var e,t=this.classPrefix,n="",r="",i="";return this.icon&&(n='<i class="'+t+"ico "+t+"i-"+this.icon+'"></i>'),e=' style="max-width: '+this.maxWidth+"px;"+(this.color?"background-color: "+this.color+';"':'"'),this.closeButton&&(r='<button type="button" class="'+t+'close" aria-hidden="true">Ã</button>'),this.progressBar&&(i=this.progressBar.renderHtml()),'<div id="'+this._id+'" class="'+this.classes+'"'+e+' role="presentation">'+n+'<div class="'+t+'notification-inner">'+this.state.get("text")+"</div>"+i+r+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var e=this;return y.setTimeout(function(){e.$el.addClass(e.classPrefix+"in"),Nt(e,e.state.get("text"))},100),e._super()},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl().firstChild.innerHTML=t.value,Nt(e,t.value)}),e.progressBar&&(e.progressBar.bindStates(),e.progressBar.state.on("change:value",function(t){Nt(e,e.state.get("text"))})),e._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var e,t;e=this.getEl().style,t=this._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=65534}});var Rt=[],Ot="";function Dt(e){var t,n=me("meta[name=viewport]")[0];!1!==ue.overrideViewPort&&(n||((n=document.createElement("meta")).setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(n)),(t=n.getAttribute("content"))&&void 0!==Ot&&(Ot=t),n.setAttribute("content",e?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":Ot))}var Pt=bt.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var t=this;t._super(e),t.isRtl()&&t.classes.add("rtl"),t.classes.add("window"),t.bodyClasses.add("window-body"),t.state.set("fixed",!0),e.buttons&&(t.statusbar=new dt({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:t.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),t.statusbar.classes.add("foot"),t.statusbar.parent(t)),t.on("click",function(e){var n=t.classPrefix+"close";(ve.hasClass(e.target,n)||ve.hasClass(e.target.parentNode,n))&&t.close()}),t.on("cancel",function(){t.close()}),t.on("move",function(e){e.control===t&&bt.hideAll()}),t.aria("describedby",t.describedBy||t._id+"-none"),t.aria("label",e.title),t._fullscreen=!1},recalc:function(){var e,t,n,r,i=this.statusbar;this._fullscreen&&(this.layoutRect(ve.getWindowSize()),this.layoutRect().contentH=this.layoutRect().innerH),this._super(),e=this.layoutRect(),this.settings.title&&!this._fullscreen&&(t=e.headerW)>e.w&&(n=e.x-Math.max(0,t/2),this.layoutRect({w:t,x:n}),r=!0),i&&(i.layoutRect({w:this.layoutRect().innerW}).recalc(),(t=i.layoutRect().minW+e.deltaW)>e.w&&(n=e.x-Math.max(0,t-e.w),this.layoutRect({w:t,x:n}),r=!0)),r&&this.recalc()},initLayoutRect:function(){var e,t=this._super(),n=0;if(this.settings.title&&!this._fullscreen){e=this.getEl("head");var r=ve.getSize(e);t.headerW=r.width,t.headerH=r.height,n+=t.headerH}this.statusbar&&(n+=this.statusbar.layoutRect().h),t.deltaH+=n,t.minH+=n,t.h+=n;var i=ve.getWindowSize();return t.x=this.settings.x||Math.max(0,i.w/2-t.w/2),t.y=this.settings.y||Math.max(0,i.h/2-t.h/2),t},renderHtml:function(){var e=this._layout,t=this._id,n=this.classPrefix,r=this.settings,i="",o="",a=r.html;return this.preRender(),e.preRender(this),r.title&&(i='<div id="'+t+'-head" class="'+n+'window-head"><div id="'+t+'-title" class="'+n+'title">'+this.encode(r.title)+'</div><div id="'+t+'-dragh" class="'+n+'dragh"></div><button type="button" class="'+n+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),r.url&&(a='<iframe src="'+r.url+'" tabindex="-1"></iframe>'),void 0===a&&(a=e.renderHtml(this)),this.statusbar&&(o=this.statusbar.renderHtml()),'<div id="'+t+'" class="'+this.classes+'" hidefocus="1"><div class="'+this.classPrefix+'reset" role="application">'+i+'<div id="'+t+'-body" class="'+this.bodyClasses+'">'+a+"</div>"+o+"</div></div>"},fullscreen:function(e){var t,n,r=this,i=document.documentElement,o=r.classPrefix;if(e!==r._fullscreen)if(me(window).on("resize",function(){var e;if(r._fullscreen)if(t)r._timer||(r._timer=y.setTimeout(function(){var e=ve.getWindowSize();r.moveTo(0,0).resizeTo(e.w,e.h),r._timer=0},50));else{e=(new Date).getTime();var n=ve.getWindowSize();r.moveTo(0,0).resizeTo(n.w,n.h),(new Date).getTime()-e>50&&(t=!0)}}),n=r.layoutRect(),r._fullscreen=e,e){r._initial={x:n.x,y:n.y,w:n.w,h:n.h},r.borderBox=Te("0"),r.getEl("head").style.display="none",n.deltaH-=n.headerH+2,me([i,document.body]).addClass(o+"fullscreen"),r.classes.add("fullscreen");var a=ve.getWindowSize();r.moveTo(0,0).resizeTo(a.w,a.h)}else r.borderBox=Te(r.settings.border),r.getEl("head").style.display="",n.deltaH+=n.headerH,me([i,document.body]).removeClass(o+"fullscreen"),r.classes.remove("fullscreen"),r.moveTo(r._initial.x,r._initial.y).resizeTo(r._initial.w,r._initial.h);return r.reflow()},postRender:function(){var e,t=this;setTimeout(function(){t.classes.add("in"),t.fire("open")},0),t._super(),t.statusbar&&t.statusbar.postRender(),t.focus(),this.dragHelper=new at(t._id+"-dragh",{start:function(){e={x:t.layoutRect().x,y:t.layoutRect().y}},drag:function(n){t.moveTo(e.x+n.deltaX,e.y+n.deltaY)}}),t.on("submit",function(e){e.isDefaultPrevented()||t.close()}),Rt.push(t),Dt(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e;for(this.dragHelper.destroy(),this._super(),this.statusbar&&this.statusbar.remove(),function(e,t){(function(){for(var e=0;e<Rt.length;e++)if(Rt[e]._fullscreen)return!0;return!1})()&&!1===t&&me([document.documentElement,document.body]).removeClass(e+"fullscreen")}(this.classPrefix,!1),e=Rt.length;e--;)Rt[e]===this&&Rt.splice(e,1);Dt(Rt.length>0)},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});!function(){if(!ue.desktop){var e={w:window.innerWidth,h:window.innerHeight};y.setInterval(function(){var t=window.innerWidth,n=window.innerHeight;e.w===t&&e.h===n||(e={w:t,h:n},me(window).trigger("resize"))},100)}me(window).on("resize",function(){var e,t,n=ve.getWindowSize();for(e=0;e<Rt.length;e++)t=Rt[e].layoutRect(),Rt[e].moveTo(Rt[e].settings.x||Math.max(0,n.w/2-t.w/2),Rt[e].settings.y||Math.max(0,n.h/2-t.h/2))})}();var It,Bt=Pt.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(e){var t,n=e.callback||function(){};function r(e,t,r){return{type:"button",text:e,subtype:r?"primary":"",onClick:function(e){e.control.parents()[1].close(),n(t)}}}switch(e.buttons){case Bt.OK_CANCEL:t=[r("Ok",!0,!0),r("Cancel",!1)];break;case Bt.YES_NO:case Bt.YES_NO_CANCEL:t=[r("Yes",1,!0),r("No",0)],e.buttons===Bt.YES_NO_CANCEL&&t.push(r("Cancel",-1));break;default:t=[r("Ok",!0,!0)]}return new Pt({padding:20,x:e.x,y:e.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:t,title:e.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:e.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:e.onClose,onCancel:function(){n(!1)}}).renderTo(document.body).reflow()},alert:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,Bt.msgBox(e)},confirm:function(e,t){return"string"==typeof e&&(e={text:e}),e.callback=t,e.buttons=Bt.OK_CANCEL,Bt.msgBox(e)}}}),Mt=function(e){return{renderUI:function(t){return St(e,this,t)},resizeTo:function(t,n){return se(e,t,n)},resizeBy:function(t,n){return function(e,t,n){var r=e.getContentAreaContainer();ae(e,r.clientWidth+t,r.clientHeight+n)}(e,t,n)},getNotificationManagerImpl:function(){return function(e){var t=function(e){return e.inline?e.getElement():e.getContentAreaContainer()};return{open:function(n,i){var o,a=r.extend(n,{maxWidth:(o=t(e),ve.getSize(o).width)}),s=new At(a);return s.args=a,a.timeout>0&&(s.timer=setTimeout(function(){s.close(),i()},a.timeout)),s.on("close",function(){i()}),s.renderTo(),s},close:function(e){e.close()},reposition:function(n){!function(e){Q.each(e,function(e){e.moveTo(0,0)})}(n),function(n){if(n.length>0){var r=n.slice(0,1)[0],i=t(e);r.moveRel(i,"tc-tc"),Q.each(n,function(e,t){t>0&&e.moveRel(n[t-1].getEl(),"bc-tc")})}}(n)},getArgs:function(e){return e.args}}}(e)},getWindowManagerImpl:function(){return{open:function(e,t,n){var r;return e.title=e.title||" ",e.url=e.url||e.file,e.url&&(e.width=parseInt(e.width||320,10),e.height=parseInt(e.height||240,10)),e.body&&(e.items={defaults:e.defaults,type:e.bodyType||"form",items:e.body,data:e.data,callbacks:e.commands}),e.url||e.buttons||(e.buttons=[{text:"Ok",subtype:"primary",onclick:function(){r.find("form")[0].submit()}},{text:"Cancel",onclick:function(){r.close()}}]),(r=new Pt(e)).on("close",function(){n(r)}),e.data&&r.on("postRender",function(){this.find("*").each(function(t){var n=t.name();n in e.data&&t.value(e.data[n])})}),r.features=e||{},r.params=t||{},r=r.renderTo(document.body).reflow()},alert:function(e,t,n){var r;return(r=Bt.alert(e,function(){t()})).on("close",function(){n(r)}),r},confirm:function(e,t,n){var r;return(r=Bt.confirm(e,function(e){t(e)})).on("close",function(){n(r)}),r},close:function(e){e.close()},getParams:function(e){return e.params},setParams:function(e,t){e.params=t}}}}},Lt=Se.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=r.extend({},this.Defaults,e)},preRender:function(e){e.bodyClasses.add(this.settings.containerClass)},applyClasses:function(e){var t,n,r,i,o=this.settings;t=o.firstControlClass,n=o.lastControlClass,e.each(function(e){e.classes.remove(t).remove(n).add(o.controlClass),e.visible()&&(r||(r=e),i=e)}),r&&r.classes.add(t),i&&i.classes.add(n)},renderHtml:function(e){var t="";return this.applyClasses(e.items()),e.items().each(function(e){t+=e.renderHtml()}),t},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),Ht=Lt.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}}),Ft=Tt.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n._super(e),e=n.settings,t=n.settings.size,n.on("click mousedown",function(e){e.preventDefault()}),n.on("touchstart",function(e){n.fire("click",e),e.preventDefault()}),e.subtype&&n.classes.add(e.subtype),t&&n.classes.add("btn-"+t),e.icon&&n.icon(e.icon)},icon:function(e){return arguments.length?(this.state.set("icon",e),this):this.state.get("icon")},repaint:function(){var e,t=this.getEl().firstChild;t&&((e=t.style).width=e.height="100%"),this._super()},renderHtml:function(){var e,t,n=this._id,r=this.classPrefix,i=this.state.get("icon"),o=this.state.get("text"),a="",s=this.settings;return(e=s.image)?(i="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",o&&(this.classes.add("btn-has-text"),a='<span class="'+r+'txt">'+this.encode(o)+"</span>"),i=i?r+"ico "+r+"i-"+i:"",t="boolean"==typeof s.active?' aria-pressed="'+s.active+'"':"",'<div id="'+n+'" class="'+this.classes+'" tabindex="-1"'+t+'><button id="'+n+'-button" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+e+"></i>":"")+a+"</button></div>"},bindStates:function(){var e=this,t=e.$,n=e.classPrefix+"txt";function r(r){var i=t("span."+n,e.getEl());r?(i[0]||(t("button:first",e.getEl()).append('<span class="'+n+'"></span>'),i=t("span."+n,e.getEl())),i.html(e.encode(r))):i.remove(),e.classes.toggle("btn-has-text",!!r)}return e.state.on("change:text",function(e){r(e.value)}),e.state.on("change:icon",function(t){var n=t.value,i=e.classPrefix;e.settings.icon=n,n=n?i+"ico "+i+"i-"+e.settings.icon:"";var o=e.getEl().firstChild,a=o.getElementsByTagName("i")[0];n?(a&&a===o.firstChild||(a=document.createElement("i"),o.insertBefore(a,o.firstChild)),a.className=n):a&&o.removeChild(a),r(e.state.get("text"))}),e._super()}}),zt=Ft.extend({init:function(e){e=r.extend({text:"Browse...",multiple:!1,accept:null},e),this._super(e),this.classes.add("browsebutton"),e.multiple&&this.classes.add("multiple")},postRender:function(){var e=this,t=ve.create("input",{type:"file",id:e._id+"-browse",accept:e.settings.accept});e._super(),me(t).on("change",function(t){var n=t.target.files;e.value=function(){return n.length?e.settings.multiple?n:n[0]:null},t.preventDefault(),n.length&&e.fire("change",t)}),me(t).on("click",function(e){e.stopPropagation()}),me(e.getEl("button")).on("click",function(e){e.stopPropagation(),t.click()}),e.getEl().appendChild(t)},remove:function(){me(this.getEl("button")).off(),me(this.getEl("input")).off(),this._super()}}),jt=it.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this._layout;return this.classes.add("btn-group"),this.preRender(),e.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+(this.settings.html||"")+e.renderHtml(this)+"</div></div>"}}),Wt=Tt.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){return arguments.length?(this.state.set("checked",e),this):this.state.get("checked")},value:function(e){return arguments.length?this.checked(e):this.checked()},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'" unselectable="on" aria-labelledby="'+e+'-al" tabindex="-1"><i class="'+t+"ico "+t+'i-checkbox"></i><span id="'+e+'-al" class="'+t+'label">'+this.encode(this.state.get("text"))+"</span></div>"},bindStates:function(){var e=this;function t(t){e.classes.toggle("checked",t),e.aria("checked",t)}return e.state.on("change:text",function(t){e.getEl("al").firstChild.data=e.translate(t.value)}),e.state.on("change:checked change:value",function(n){e.fire("change"),t(n.value)}),e.state.on("change:icon",function(t){var n=t.value,r=e.classPrefix;if(void 0===n)return e.settings.icon;e.settings.icon=n,n=n?r+"ico "+r+"i-"+e.settings.icon:"";var i=e.getEl().firstChild,o=i.getElementsByTagName("i")[0];n?(o&&o===i.firstChild||(o=document.createElement("i"),i.insertBefore(o,i.firstChild)),o.className=n):o&&i.removeChild(o)}),e.state.get("checked")&&t(!0),e._super()}}),Ut=tinymce.util.Tools.resolve("tinymce.util.VK"),$t=Tt.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.classes.add("combobox"),t.subinput=!0,t.ariaTarget="inp",e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",function(n){var r=n.target,i=t.getEl();if(me.contains(i,r)||r===i)for(;r&&r!==i;)r.id&&-1!==r.id.indexOf("-open")&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),r=r.parentNode}),t.on("keydown",function(e){var n;13===e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){if("INPUT"===e.target.nodeName){var n=t.state.get("value"),r=e.target.value;r!==n&&(t.state.set("value",r),t.fire("autocomplete",e))}}),t.on("mouseover",function(e){var n=t.tooltip().moveTo(-65535);if(t.statusLevel()&&-1!==e.target.className.indexOf(t.classPrefix+"status")){var r=t.statusMessage()||"Ok",i=n.text(r).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]);n.classes.toggle("tooltip-n","bc-tc"===i),n.classes.toggle("tooltip-nw","bc-tl"===i),n.classes.toggle("tooltip-ne","bc-tr"===i),n.moveRel(e.target,i)}})},statusLevel:function(e){return arguments.length>0&&this.state.set("statusLevel",e),this.state.get("statusLevel")},statusMessage:function(e){return arguments.length>0&&this.state.set("statusMessage",e),this.state.get("statusMessage")},showMenu:function(){var e,t=this,n=t.settings;t.menu||((e=n.menu||[]).length?e={type:"menu",items:e}:e.type=e.type||"menu",t.menu=f.create(e).parent(t).renderTo(t.getContainerElm()),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(e){e.control===t.menu&&t.focus()}),t.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()===t.value())})}).fire("show"),t.menu.on("select",function(e){t.value(e.control.value())}),t.on("focusin",function(e){"INPUT"===e.target.tagName.toUpperCase()&&t.menu.hide()}),t.aria("expanded",!0)),t.menu.show(),t.menu.layoutRect({w:t.layoutRect().w}),t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,t,n=this.getEl(),r=this.getEl("open"),i=this.layoutRect(),o=0,a=n.firstChild;this.statusLevel()&&"none"!==this.statusLevel()&&(o=parseInt(ve.getRuntimeStyle(a,"padding-right"),10)-parseInt(ve.getRuntimeStyle(a,"padding-left"),10)),e=r?i.w-ve.getSize(r).width-10:i.w-10;var s=document;return s.all&&(!s.documentMode||s.documentMode<=8)&&(t=this.layoutRect().h-2+"px"),me(a).css({width:e-o,lineHeight:t}),this._super(),this},postRender:function(){var e=this;return me(this.getEl("inp")).on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)}),e._super()},renderHtml:function(){var e,t,n,r=this._id,i=this.settings,o=this.classPrefix,a=this.state.get("value")||"",s="",u="";return"spellcheck"in i&&(u+=' spellcheck="'+i.spellcheck+'"'),i.maxLength&&(u+=' maxlength="'+i.maxLength+'"'),i.size&&(u+=' size="'+i.size+'"'),i.subtype&&(u+=' type="'+i.subtype+'"'),n='<i id="'+r+'-status" class="mce-status mce-ico" style="display: none"></i>',this.disabled()&&(u+=' disabled="disabled"'),(e=i.icon)&&"caret"!==e&&(e=o+"ico "+o+"i-"+i.icon),t=this.state.get("text"),(e||t)&&(s='<div id="'+r+'-open" class="'+o+"btn "+o+'open" tabIndex="-1" role="button"><button id="'+r+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==e?'<i class="'+e+'"></i>':'<i class="'+o+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",this.classes.add("has-open")),'<div id="'+r+'" class="'+this.classes+'"><input id="'+r+'-inp" class="'+o+'textbox" value="'+this.encode(a,!1)+'" hidefocus="1"'+u+' placeholder="'+this.encode(i.placeholder)+'" />'+n+s+"</div>"},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(e,t){var n=this;if(0!==e.length){n.menu?n.menu.items().remove():n.menu=f.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(n).renderTo(),r.each(e,function(e){var r,i;n.menu.add({text:e.title,url:e.previewUrl,match:t,classes:"menu-item-ellipsis",onclick:(r=e.value,i=e.title,function(){n.fire("selectitem",{title:i,value:r})})})}),n.menu.renderNew(),n.hideMenu(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()});var i=n.layoutRect().w;n.menu.layoutRect({w:i,minW:0,maxW:i}),n.menu.repaint(),n.menu.reflow(),n.menu.show(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])}else n.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var e=this;e.state.on("change:value",function(t){e.getEl("inp").value!==t.value&&(e.getEl("inp").value=t.value)}),e.state.on("change:disabled",function(t){e.getEl("inp").disabled=t.value}),e.state.on("change:statusLevel",function(t){var n=e.getEl("status"),r=e.classPrefix,i=t.value;ve.css(n,"display","none"===i?"none":""),ve.toggleClass(n,r+"i-checkmark","ok"===i),ve.toggleClass(n,r+"i-warning","warn"===i),ve.toggleClass(n,r+"i-error","error"===i),e.classes.toggle("has-status","none"!==i),e.repaint()}),ve.on(e.getEl("status"),"mouseleave",function(){e.tooltip().hide()}),e.on("cancel",function(t){e.menu&&e.menu.visible()&&(t.stopPropagation(),e.hideMenu())});var t=function(e,t){t&&t.items().length>0&&t.items().eq(e)[0].focus()};return e.on("keydown",function(n){var r=n.keyCode;"INPUT"===n.target.nodeName&&(r===Ut.DOWN?(n.preventDefault(),e.fire("autocomplete"),t(0,e.menu)):r===Ut.UP&&(n.preventDefault(),t(-1,e.menu)))}),e._super()},remove:function(){me(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),qt=$t.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.classes.add("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl("open"),n=t?t.getElementsByTagName("i")[0]:null;if(n)try{n.style.background=e}catch(e){}},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.state.get("rendered")&&e.repaintColor(t.value)}),e._super()}}),Vt=Ft.extend({showPanel:function(){var e=this,t=e.settings;if(e.classes.add("opened"),e.panel)e.panel.show();else{var n=t.panel;n.type&&(n={layout:"grid",items:n}),n.role=n.role||"dialog",n.popover=!0,n.autohide=!0,n.ariaRoot=!0,e.panel=new bt(n).on("hide",function(){e.classes.remove("opened")}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}var r=e.panel.testMoveRel(e.getEl(),t.popoverAlign||(e.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"]));e.panel.classes.toggle("start","l"===r.substr(-1)),e.panel.classes.toggle("end","r"===r.substr(-1));var i="t"===r.substr(0,1);e.panel.classes.toggle("bottom",!i),e.panel.classes.toggle("top",i),e.panel.moveRel(e.getEl(),r)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),Xt=c.DOM,Yt=Vt.extend({init:function(e){this._super(e),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var e=this._id,t=this.classPrefix,n=this.state.get("text"),r=this.settings.icon?t+"ico "+t+"i-"+this.settings.icon:"",i=this.settings.image?" style=\"background-image: url('"+this.settings.image+"')\"":"",o="";return n&&(this.classes.add("btn-has-text"),o='<span class="'+t+'txt">'+this.encode(n)+"</span>"),'<div id="'+e+'" class="'+this.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+'<span id="'+e+'-preview" class="'+t+'preview"></span>'+o+'</button><button type="button" class="'+t+'open" hidefocus="1" tabindex="-1"> <i class="'+t+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(n){n.aria&&"down"===n.aria.key||n.control!==e||Xt.getParent(n.target,"."+e.classPrefix+"open")||(n.stopImmediatePropagation(),t.call(e,n))}),delete e.settings.onclick,e._super()}}),Kt=tinymce.util.Tools.resolve("tinymce.util.Color"),Jt=Tt.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){var e,t,n,r,i,o=this,a=o.color();function s(e,t){var n,r,i=ve.getPos(e);return n=t.pageX-i.x,r=t.pageY-i.y,{x:n=Math.max(0,Math.min(n/e.clientWidth,1)),y:r=Math.max(0,Math.min(r/e.clientHeight,1))}}function u(e,t){var a=(360-e.h)/360;ve.css(n,{top:100*a+"%"}),t||ve.css(i,{left:e.s+"%",top:100-e.v+"%"}),r.style.background=Kt({s:100,v:100,h:e.h}).toHex(),o.color().parse({s:e.s,v:e.v,h:e.h})}function l(t){var n;n=s(r,t),e.s=100*n.x,e.v=100*(1-n.y),u(e),o.fire("change")}function c(n){var r;r=s(t,n),(e=a.toHsv()).h=360*(1-r.y),u(e,!0),o.fire("change")}t=o.getEl("h"),n=o.getEl("hp"),r=o.getEl("sv"),i=o.getEl("svp"),o._repaint=function(){u(e=a.toHsv())},o._super(),o._svdraghelper=new at(o._id+"-sv",{start:l,drag:l}),o._hdraghelper=new at(o._id+"-h",{start:c,drag:c}),o._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){if(!arguments.length)return this.color().toHex();this.color().parse(e),this._rendered&&this._repaint()},color:function(){return this._color||(this._color=Kt()),this._color},renderHtml:function(){var e,t=this._id,n=this.classPrefix,r="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return e='<div id="'+t+'-h" class="'+n+'colorpicker-h" style="background: -ms-linear-gradient(top,'+r+");background: linear-gradient(to bottom,"+r+');">'+function(){var e,t,i,o,a="";for(i="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",e=0,t=(o=r.split(",")).length-1;e<t;e++)a+='<div class="'+n+'colorpicker-h-chunk" style="height:'+100/t+"%;"+i+o[e]+",endColorstr="+o[e+1]+");-ms-"+i+o[e]+",endColorstr="+o[e+1]+')"></div>';return a}()+'<div id="'+t+'-hp" class="'+n+'colorpicker-h-marker"></div></div>','<div id="'+t+'" class="'+this.classes+'"><div id="'+t+'-sv" class="'+n+'colorpicker-sv"><div class="'+n+'colorpicker-overlay1"><div class="'+n+'colorpicker-overlay2"><div id="'+t+'-svp" class="'+n+'colorpicker-selector1"><div class="'+n+'colorpicker-selector2"></div></div></div></div></div>'+e+"</div>"}}),Gt=Tt.extend({init:function(e){e=r.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},e),this._super(e),this.classes.add("dropzone"),e.multiple&&this.classes.add("multiple")},renderHtml:function(){var e,t,n=this.settings;return e={id:this._id,hidefocus:"1"},t=ve.create("div",e,"<span>"+this.translate(n.text)+"</span>"),n.height&&ve.css(t,"height",n.height+"px"),n.width&&ve.css(t,"width",n.width+"px"),t.className=this.classes,t.outerHTML},postRender:function(){var e=this,t=function(t){t.preventDefault(),e.classes.toggle("dragenter"),e.getEl().className=e.classes};e._super(),e.$el.on("dragover",function(e){e.preventDefault()}),e.$el.on("dragenter",t),e.$el.on("dragleave",t),e.$el.on("drop",function(t){if(t.preventDefault(),!e.state.get("disabled")){var n=function(t){var n=e.settings.accept;if("string"!=typeof n)return t;var i=new RegExp("("+n.split(/\s*,\s*/).join("|")+")$","i");return r.grep(t,function(e){return i.test(e.name)})}(t.dataTransfer.files);e.value=function(){return n.length?e.settings.multiple?n:n[0]:null},n.length&&e.fire("change",t)}})},remove:function(){this.$el.off(),this._super()}}),Qt=Tt.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="Â»"),t._super(e),t.classes.add("path"),t.canFocus=!0,t.on("click",function(e){var n;(n=e.target.getAttribute("data-index"))&&t.fire("select",{value:t.row()[n],index:n})}),t.row(t.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(e){return arguments.length?(this.state.set("row",e),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var e=this;return e.state.on("change:row",function(t){e.innerHtml(e._getDataPathHtml(t.value))}),e._super()},_getDataPathHtml:function(e){var t,n,r=e||[],i="",o=this.classPrefix;for(t=0,n=r.length;t<n;t++)i+=(t>0?'<div class="'+o+'divider" aria-hidden="true"> '+this.settings.delimiter+" </div>":"")+'<div role="button" class="'+o+"path-item"+(t===n-1?" "+o+"last":"")+'" data-index="'+t+'" tabindex="-1" id="'+this._id+"-"+t+'" aria-level="'+(t+1)+'">'+r[t].name+"</div>";return i||(i='<div class="'+o+'path-item">Â </div>'),i}}),Zt=Qt.extend({postRender:function(){var e=this,t=e.settings.editor;function n(e){if(1===e.nodeType){if("BR"===e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}return!1!==t.settings.elementpath&&(e.on("select",function(e){t.focus(),t.selection.select(this.row()[e.index].element),t.nodeChanged()}),t.on("nodeChange",function(r){for(var i=[],o=r.parents,a=o.length;a--;)if(1===o[a].nodeType&&!n(o[a])){var s=t.fire("ResolveName",{name:o[a].nodeName.toLowerCase(),target:o[a]});if(s.isDefaultPrevented()||i.push({name:s.name,element:o[a]}),s.isPropagationStopped())break}e.row(i)})),e._super()}}),en=it.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this._layout,t=this.classPrefix;return this.classes.add("formitem"),e.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1">'+(this.settings.title?'<div id="'+this._id+'-title" class="'+t+'title">'+this.settings.title+"</div>":"")+'<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+e.renderHtml(this)+"</div></div>"}}),tn=it.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,t=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),t.each(function(t){var n,i=t.settings.label;i&&((n=new en(r.extend({items:{type:"label",id:t._id+"-l",text:i,flex:0,forId:t._id,disabled:t.disabled()}},e.settings.formItemDefaults))).type="formitem",t.aria("labelledby",t._id+"-l"),void 0===t.settings.flex&&(t.settings.flex=1),e.replace(t,n),n.add(t))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){var e=this;function t(){var t,n,r=0,i=[];if(!1!==e.settings.labelGapCalc)for(("children"===e.settings.labelGapCalc?e.find("formitem"):e.items()).filter("formitem").each(function(e){var t=e.items()[0],n=t.getEl().clientWidth;r=n>r?n:r,i.push(t)}),n=e.settings.labelGap||0,t=i.length;t--;)i[t].settings.minWidth=r+n}e._super(),e.on("show",t),t()}}),nn=tn.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this._layout,t=this.classPrefix;return this.preRender(),e.preRender(this),'<fieldset id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1">'+(this.settings.title?'<legend id="'+this._id+'-title" class="'+t+'fieldset-title">'+this.settings.title+"</legend>":"")+'<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+e.renderHtml(this)+"</div></fieldset>"}}),rn=0,on=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:w.constant(e)}},an=on,sn=function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(null,arguments)),t}},un=function(e){return function(t){return function(e){return e.dom().nodeType}(t)===e}},ln=(un(1),un(3),un(9),sn(function(){return ln(an(document))}),function(e){var t=e.dom().body;if(null===t||void 0===t)throw"Body is not available yet";return an(t)}),cn=(It=Object.keys,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return Q.each(e,function(e,n){r[e]=w.constant(t[n])}),r}}),fn=("undefined"!=typeof window?window:Function("return this;")(),function(){return dn(0,0)}),dn=function(e,t){return{major:e,minor:t}},hn={nu:dn,detect:function(e,t){var n=String(t).toLowerCase();return 0===e.length?fn():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return dn(r(1),r(2))}(e,n)},unknown:fn},pn=function(e,t){return function(){return t===e}},mn=function(e){var t=e.current;return{current:t,version:e.version,isEdge:pn("Edge",t),isChrome:pn("Chrome",t),isIE:pn("IE",t),isOpera:pn("Opera",t),isFirefox:pn("Firefox",t),isSafari:pn("Safari",t)}},gn=function(){return mn({current:void 0,version:hn.unknown()})},vn=mn,yn=(w.constant("Edge"),w.constant("Chrome"),w.constant("IE"),w.constant("Opera"),w.constant("Firefox"),w.constant("Safari"),function(e,t){return function(){return t===e}}),bn=function(e){var t=e.current;return{current:t,version:e.version,isWindows:yn("Windows",t),isiOS:yn("iOS",t),isAndroid:yn("Android",t),isOSX:yn("OSX",t),isLinux:yn("Linux",t),isSolaris:yn("Solaris",t),isFreeBSD:yn("FreeBSD",t)}},wn=function(){return bn({current:void 0,version:hn.unknown()})},xn=bn,Cn=(w.constant("Windows"),w.constant("iOS"),w.constant("Android"),w.constant("Linux"),w.constant("OSX"),w.constant("Solaris"),w.constant("FreeBSD"),function(e,t){var n=String(t).toLowerCase();return Q.find(e,function(e){return e.search(n)})}),_n=function(e,t){return-1!==e.indexOf(t)},Sn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,kn=function(e){return function(t){return _n(t,e)}},Tn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return _n(e,"edge/")&&_n(e,"chrome")&&_n(e,"safari")&&_n(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Sn],search:function(e){return _n(e,"chrome")&&!_n(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return _n(e,"msie")||_n(e,"trident")}},{name:"Opera",versionRegexes:[Sn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:kn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:kn("firefox")},{name:"Safari",versionRegexes:[Sn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(_n(e,"safari")||_n(e,"mobile/"))&&_n(e,"applewebkit")}}],En=[{name:"Windows",search:kn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return _n(e,"iphone")||_n(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:kn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:kn("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:kn("linux"),versionRegexes:[]},{name:"Solaris",search:kn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:kn("freebsd"),versionRegexes:[]}],Nn={browsers:w.constant(Tn),oses:w.constant(En)},An=function(e){var t=Nn.browsers(),n=Nn.oses(),r=function(e,t){return Cn(e,t).map(function(e){var n=hn.detect(e.versionRegexes,t);return{current:e.name,version:n}})}(t,e).fold(gn,vn),i=function(e,t){return Cn(e,t).map(function(e){var n=hn.detect(e.versionRegexes,t);return{current:e.name,version:n}})}(n,e).fold(wn,xn);return{browser:r,os:i,deviceType:function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),i=e.isiOS()&&!r,o=e.isAndroid()&&3===e.version.major,a=e.isAndroid()&&4===e.version.major,s=r||o||a&&!0===/mobile/i.test(n),u=e.isiOS()||e.isAndroid(),l=u&&!s,c=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:w.constant(r),isiPhone:w.constant(i),isTablet:w.constant(s),isPhone:w.constant(l),isTouch:w.constant(u),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:w.constant(c)}}(i,r,e)}},Rn=function(e){return 1!==e.nodeType&&9!==e.nodeType||0===e.childElementCount},On=function(e,t){var n=void 0===t?document:t.dom();return Rn(n)?[]:Q.map(n.querySelectorAll(e),an)},Dn=function(e,t){var n=void 0===t?document:t.dom();return Rn(n)?T.none():T.from(n.querySelector(e)).map(an)},Pn=(sn(function(){var e=navigator.userAgent;return An(e)})().browser.isIE(),cn("element","offset"),function(e,t){return On(t,e)}),In=r.trim,Bn=function(e){return function(t){if(t&&1===t.nodeType){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},Mn=Bn("true"),Ln=Bn("false"),Hn=function(e,t,n,r,i){return{type:e,title:t,url:n,level:r,attach:i}},Fn=function(e){return e.innerText||e.textContent},zn=function(e){return function(e){return e&&"A"===e.nodeName&&(e.id||e.name)}(e)&&Wn(e)},jn=function(e){return e&&/^(H[1-6])$/.test(e.nodeName)},Wn=function(e){return function(e){for(;e=e.parentNode;){var t=e.contentEditable;if(t&&"inherit"!==t)return Mn(e)}return!1}(e)&&!Ln(e)},Un=function(e){return jn(e)&&Wn(e)},$n=function(e){var t=function(e){return e.id?e.id:function(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++rn+String(t)}("h")}(e);return Hn("header",Fn(e),"#"+t,function(e){return jn(e)?parseInt(e.nodeName.substr(1),10):0}(e),function(){e.id=t})},qn=function(e){var t=e.id||e.name,n=Fn(e);return Hn("anchor",n||"#"+t,"#"+t,0,w.noop)},Vn=function(e){return In(e.title).length>0},Xn=function(e){var t=function(e){var t,n;return t="h1,h2,h3,h4,h5,h6,a:not([href])",n=e,Q.map(Pn(an(n),t),function(e){return e.dom()})}(e);return Q.filter(function(e){return Q.map(Q.filter(e,Un),$n)}(t).concat(function(e){return Q.map(Q.filter(e,zn),qn)}(t)),Vn)},Yn={},Kn=function(e){return{title:e.title,value:{title:{raw:e.title},url:e.url,attach:e.attach}}},Jn=function(e,t){return{title:e,value:{title:e,url:t,attach:w.noop}}},Gn=function(e,t,n){var r=t in e?e[t]:n;return!1===r?null:r},Qn=function(e,t,n,i){var o,a={title:"-"},s=function(e){var i=e.hasOwnProperty(n)?e[n]:[],o=Q.filter(i,function(e){return function(e,t){return!Q.exists(t,function(t){return t.url===e})}(e,t)});return r.map(o,function(e){return{title:e,value:{title:e,url:e,attach:w.noop}}})},u=function(e){return function(e){return r.map(e,Kn)}(Q.filter(t,function(t){return t.type===e}))};return!1===i.typeahead_urls?[]:"file"===n?(o=[Zn(e,s(Yn)),Zn(e,u("header")),Zn(e,function(){var e=u("anchor"),t=Gn(i,"anchor_top","#top"),n=Gn(i,"anchor_bottom","#bottom");return null!==t&&e.unshift(Jn("<top>",t)),null!==n&&e.push(Jn("<bottom>",n)),e}())],Q.foldl(o,function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(a,t)},[])):Zn(e,s(Yn))},Zn=function(e,t){var n=e.toLowerCase(),i=r.grep(t,function(e){return-1!==e.title.toLowerCase().indexOf(n)});return 1===i.length&&i[0].title===e?[]:i},er=$t.extend({Statics:{clearHistory:function(){Yn={}}},init:function(e){var t,i,o,a=this,s=window.tinymce?window.tinymce.activeEditor:n.activeEditor,u=s.settings,l=e.filetype;e.spellcheck=!1,(o=u.file_picker_types||u.file_browser_callback_types)&&(o=r.makeMap(o,/[, ]/)),o&&!o[l]||(!(i=u.file_picker_callback)||o&&!o[l]?!(i=u.file_browser_callback)||o&&!o[l]||(t=function(){i(a.getEl("inp").id,a.value(),l,window)}):t=function(){var e=a.fire("beforecall").meta;e=r.extend({filetype:l},e),i.call(s,function(e,t){a.value(e).fire("change",{meta:t})},a.value(),e)}),t&&(e.icon="browse",e.onaction=t),a._super(e),a.classes.add("filepicker"),function(e,t,n,r){var i=function(i){var o=Xn(n),a=Qn(i,o,r,t);e.showAutoComplete(a,i)};e.on("autocomplete",function(){i(e.value())}),e.on("selectitem",function(t){var n=t.value;e.value(n.url);var i=function(e){var t=n.title;return t.raw?t.raw:t}();"image"===r?e.fire("change",{meta:{alt:i,attach:n.attach}}):e.fire("change",{meta:{text:i,attach:n.attach}}),e.focus()}),e.on("click",function(t){0===e.value().length&&"INPUT"===t.target.nodeName&&i("")}),e.on("PostRender",function(){e.getRoot().on("submit",function(t){t.isDefaultPrevented()||function(e,t){var n=Yn[t];/^https?/.test(e)&&(n?Q.indexOf(n,e).isNone()&&(Yn[t]=n.slice(0,5).concat(e)):Yn[t]=[e])}(e.value(),r)})})}(a,u,s.getBody(),l),function(e,t,n){var r=t.filepicker_validator_handler;r&&e.state.on("change:value",function(t){var i;0!==(i=t.value).length?r({url:i,type:n},function(t){var n=function(e){var t=e.status,n=e.message;return"valid"===t?{status:"ok",message:n}:"unknown"===t?{status:"warn",message:n}:"invalid"===t?{status:"warn",message:n}:{status:"none",message:""}}(t);e.statusMessage(n.message),e.statusLevel(n.status)}):e.statusLevel("none")})}(a,u,l)}}),tr=Ht.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox;e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}}),nr=Ht.extend({recalc:function(e){var t,n,r,i,o,a,s,u,l,c,f,d,h,p,m,g,v,y,b,w,x,C,_,S,k,T,E,N,A,R,O,D,P,I,B,M,L,H=[],F=Math.max,z=Math.min;for(r=e.items().filter(":visible"),i=e.layoutRect(),o=e.paddingBox,a=e.settings,d=e.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,u=e.isRtl()?a.pack||"end":a.pack,l=a.spacing||0,"row-reversed"!==d&&"column-reverse"!==d||(r=r.set(r.toArray().reverse()),d=d.split("-")[0]),"column"===d?(S="y",C="h",_="minH",k="maxH",E="innerH",T="top",N="deltaH",A="contentH",I="left",D="w",R="x",O="innerW",P="minW",B="right",M="deltaW",L="contentW"):(S="x",C="w",_="minW",k="maxW",E="innerW",T="left",N="deltaW",A="contentW",I="top",D="h",R="y",O="innerH",P="minH",B="bottom",M="deltaH",L="contentH"),f=i[E]-o[T]-o[T],x=c=0,t=0,n=r.length;t<n;t++)p=(h=r[t]).layoutRect(),m=h.settings.flex,f-=t<n-1?l:0,m>0&&(c+=m,p[k]&&H.push(h),p.flex=m),f-=p[_],(g=o[I]+p[P]+o[B])>x&&(x=g);if((b={})[_]=f<0?i[_]-f+i[N]:i[E]-f+i[N],b[P]=x+i[M],b[A]=i[E]-f,b[L]=x,b.minW=z(b.minW,i.maxW),b.minH=z(b.minH,i.maxH),b.minW=F(b.minW,i.startMinWidth),b.minH=F(b.minH,i.startMinHeight),!i.autoResize||b.minW===i.minW&&b.minH===i.minH){for(y=f/c,t=0,n=H.length;t<n;t++)v=(p=(h=H[t]).layoutRect())[k],(g=p[_]+p.flex*y)>v?(f-=p[k]-p[_],c-=p.flex,p.flex=0,p.maxFlexSize=v):p.maxFlexSize=0;for(y=f/c,w=o[T],b={},0===c&&("end"===u?w=f+o[T]:"center"===u?(w=Math.round(i[E]/2-(i[E]-f)/2)+o[T])<0&&(w=o[T]):"justify"===u&&(w=o[T],l=Math.floor(f/(r.length-1)))),b[R]=o[I],t=0,n=r.length;t<n;t++)g=(p=(h=r[t]).layoutRect()).maxFlexSize||p[_],"center"===s?b[R]=Math.round(i[O]/2-p[D]/2):"stretch"===s?(b[D]=F(p[P]||0,i[O]-o[I]-o[B]),b[R]=o[I]):"end"===s&&(b[R]=i[O]-p[D]-o.top),p.flex>0&&(g+=p.flex*y),b[C]=g,b[S]=w,h.layoutRect(b),h.recalc&&h.recalc(),w+=g+l}else if(b.w=b.minW,b.h=b.minH,e.layoutRect(b),this.recalc(e),null===e._lastRect){var j=e.parent();j&&(j._lastRect=null,j.recalc())}}}),rr=Lt.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})},isNative:function(){return!0}}),ir=function(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},or=function(e,t){return function(){var n=this;e.formatter?e.formatter.formatChanged(t,function(e){n.active(e)}):e.on("init",function(){e.formatter.formatChanged(t,function(e){n.active(e)})})}},ar=function(e){return e?e.split(",")[0]:""},sr=function(e){e.addButton("fontselect",function(){var t=function(e){var t=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(e.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return r.map(t,function(e){return{text:{raw:e[0]},value:e[1],textStyle:-1===e[1].indexOf("dings")?"font-family:"+e[1]:""}})}(e);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:t,fixedWidth:!0,onPostRender:function(e,t){return function(){var n=this;e.on("init nodeChange",function(i){var o=e.queryCommandValue("FontName"),a=function(e,t){var n;return r.each(e,function(e){e.value.toLowerCase()===t.toLowerCase()&&(n=e.value)}),r.each(e,function(e){n||ar(e.value).toLowerCase()!==ar(t).toLowerCase()||(n=e.value)}),n}(t,o);n.value(a||null),!a&&o&&n.text(ar(o))})}}(e,t),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}})},ur=function(e,t){return/[0-9.]+px$/.test(e)?function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(72*parseInt(e,10)/96,t||0)+"pt":e},lr=function(e,t,n){var i;return r.each(e,function(e){e.value===n?i=n:e.value===t&&(i=t)}),i},cr=function(e){!function(e){e.addButton("fontsizeselect",function(){var t=function(e){var t=e.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt";return r.map(t.split(" "),function(e){var t=e,n=e,r=e.split("=");return r.length>1&&(t=r[0],n=r[1]),{text:t,value:n}})}(e);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:function(e,t){return function(){var n=this;e.on("init nodeChange",function(r){var i,o,a,s;if(i=e.queryCommandValue("FontSize"))for(a=3;!s&&a>=0;a--)o=ur(i,a),s=lr(t,o,i);n.value(s||null),s||n.text(o)})}}(e,t),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}})}(e)},fr=function(e,t){var n=t.length;return r.each(t,function(t){t.menu&&(t.hidden=0===fr(e,t.menu));var r=t.format;r&&(t.hidden=!e.formatter.canApply(r)),t.hidden&&n--}),n},dr=function(e,t){var n=t.items().length;return t.items().each(function(t){t.menu&&t.visible(dr(e,t.menu)>0),!t.menu&&t.settings.menu&&t.visible(fr(e,t.settings.menu)>0);var r=t.settings.format;r&&t.visible(e.formatter.canApply(r)),t.visible()||n--}),n},hr=function(e){var t=function(e){for(var t=(e=e.replace(/;$/,"").split(";")).length;t--;)e[t]=e[t].split("=");return e}(e.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");e.addMenuItem("blockformats",{text:"Blocks",menu:function(e,t){return r.map(t,function(t){return{text:t[0],onclick:ir(e,t[1]),textStyle:function(){return e.formatter.getCssText(t[1])}}})}(e,t)}),e.addButton("formatselect",function(e,t){return function(){var n=[];return r.each(t,function(t){n.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})}),{type:"listbox",text:t[0][0],values:n,fixedWidth:!0,onselect:function(t){if(t.control){var n=t.control.value();ir(e,n)()}},onPostRender:function(e,t,n){return function(){var n=this;e.on("nodeChange",function(i){var o=e.formatter,a=null;r.each(i.parents,function(e){if(r.each(t,function(t){if(o.matchNode(e,t.value)&&(a=t.value),a)return!1}),a)return!1}),n.value(a)})}}(e,n)}}}(e,t))},pr=function(e,t){var n,i;if("string"==typeof t)i=t.split(" ");else if(r.isArray(t))return Q.flatten(r.map(t,function(t){return pr(e,t)}));return n=r.grep(i,function(t){return"|"===t||t in e.menuItems}),r.map(n,function(t){return"|"===t?{text:"-"}:e.menuItems[t]})},mr=function(e){return e&&"-"===e.text},gr=function(e){var t=e.settings.insert_button_items;return function(e){var t=Q.filter(e,function(e,t,n){return!mr(e)||!mr(n[t-1])});return Q.filter(t,function(e,t,n){return!mr(e)||t>0&&t<n.length-1})}(t?pr(e,t):function(e,t){var n=[{text:"-"}],i=r.grep(e.menuItems,function(e){return"insert"===e.context});return r.each(i,function(e){"before"===e.separator&&n.push({text:"|"}),e.prependToContext?n.unshift(e):n.push(e),"after"===e.separator&&n.push({text:"|"})}),n}(e))},vr=function(e){(function(e){!function(e){r.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{active:!1,tooltip:t,onPostRender:or(e,n),onclick:ir(e,n)})})}(e),function(e){r.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})})}(e),function(e){r.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(t,n){e.addButton(n,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:or(e,n)})})}(e)})(e),function(e){r.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:ir(e,"code")})}(e)},yr=function(e,t){return function(){var n=this,r=function(){var n="redo"===t?"hasRedo":"hasUndo";return!!e.undoManager&&e.undoManager[n]()};n.disabled(!r()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){n.disabled(e.readonly||!r())})}},br={setup:function(e){!function(e){e.rtl&&(et.rtl=!0)}(e),function(e){e.on("mousedown",function(){bt.hideAll()})}(e),function(e){e.settings.ui_container&&(ue.container=function(e,t){return Dn(t,e)}(an(document.body),e.settings.ui_container).fold(w.constant(null),function(e){return e.dom()}))}(e),Tt.tooltips=!ue.iOS,et.translate=function(e){return n.translate(e)},hr(e),function(e){e.addMenuItem("align",{text:"Align",menu:[{text:"Left",icon:"alignleft",onclick:ir(e,"alignleft")},{text:"Center",icon:"aligncenter",onclick:ir(e,"aligncenter")},{text:"Right",icon:"alignright",onclick:ir(e,"alignright")},{text:"Justify",icon:"alignjustify",onclick:ir(e,"alignjustify")}]}),r.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(t,n){e.addButton(n,{active:!1,tooltip:t[0],cmd:t[1],onPostRender:or(e,n)})})}(e),vr(e),function(e){!function(e){e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:yr(e,"undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:yr(e,"redo"),cmd:"redo"})}(e),function(e){e.addButton("undo",{tooltip:"Undo",onPostRender:yr(e,"undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:yr(e,"redo"),cmd:"redo"})}(e)}(e),cr(e),function(e){sr(e)}(e),function(e){var t=function(e){var t=0,n=[],i=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],o=function(e){var i=[];if(e)return r.each(e,function(e){var r={text:e.title,icon:e.icon};if(e.items)r.menu=o(e.items);else{var a=e.format||"custom"+t++;e.format||(e.name=a,n.push(e)),r.format=a,r.cmd=e.cmd}i.push(r)}),i};return e.on("init",function(){r.each(n,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:e.settings.style_formats_merge?e.settings.style_formats?o(i.concat(e.settings.style_formats)):o(i):o(e.settings.style_formats||i),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return e.formatter.getCssText(this.settings.format)},onPostRender:function(){var t=this;t.parent().on("show",function(){var n,r;(n=t.settings.format)&&(t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))),(r=t.settings.cmd)&&t.active(e.queryCommandState(r))})},onclick:function(){this.settings.format&&ir(e,this.settings.format)(),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}}(e);!function(e,t){e.addMenuItem("formats",{text:"Formats",menu:t})}(e,t),function(e,t){e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:t,onShowMenu:function(){e.settings.style_formats_autohide&&dr(e,this.menu)}})}(e,t)}(e),function(e){!function(e){e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:function(e){return function(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}}(e),cmd:"mceToggleVisualAid"})}(e)}(e),function(e){!function(e){e.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(gr(e)),this.menu.renderNew()}})}(e)}(e)}},wr=Ht.extend({recalc:function(e){var t,n,r,i,o,a,s,u,l,c,f,d,h,p,m,g,v,y,b,w,x,C,_,S,k,T,E,N,A=[],R=[];t=e.settings,i=e.items().filter(":visible"),o=e.layoutRect(),r=t.columns||Math.ceil(Math.sqrt(i.length)),n=Math.ceil(i.length/r),y=t.spacingH||t.spacing||0,b=t.spacingV||t.spacing||0,w=t.alignH||t.align,x=t.alignV||t.align,g=e.paddingBox,N="reverseRows"in t?t.reverseRows:e.isRtl(),w&&"string"==typeof w&&(w=[w]),x&&"string"==typeof x&&(x=[x]);for(f=0;f<r;f++)A.push(0);for(d=0;d<n;d++)R.push(0);for(d=0;d<n;d++)for(f=0;f<r&&(c=i[d*r+f]);f++)S=(l=c.layoutRect()).minW,k=l.minH,A[f]=S>A[f]?S:A[f],R[d]=k>R[d]?k:R[d];for(T=o.innerW-g.left-g.right,C=0,f=0;f<r;f++)C+=A[f]+(f>0?y:0),T-=(f>0?y:0)+A[f];for(E=o.innerH-g.top-g.bottom,_=0,d=0;d<n;d++)_+=R[d]+(d>0?b:0),E-=(d>0?b:0)+R[d];if(C+=g.left+g.right,_+=g.top+g.bottom,(u={}).minW=C+(o.w-o.innerW),u.minH=_+(o.h-o.innerH),u.contentW=u.minW-o.deltaW,u.contentH=u.minH-o.deltaH,u.minW=Math.min(u.minW,o.maxW),u.minH=Math.min(u.minH,o.maxH),u.minW=Math.max(u.minW,o.startMinWidth),u.minH=Math.max(u.minH,o.startMinHeight),!o.autoResize||u.minW===o.minW&&u.minH===o.minH){var O;o.autoResize&&((u=e.layoutRect(u)).contentW=u.minW-o.deltaW,u.contentH=u.minH-o.deltaH),O="start"===t.packV?0:E>0?Math.floor(E/n):0;var D=0,P=t.flexWidths;if(P)for(f=0;f<P.length;f++)D+=P[f];else D=r;var I=T/D;for(f=0;f<r;f++)A[f]+=P?P[f]*I:I;for(p=g.top,d=0;d<n;d++){for(h=g.left,s=R[d]+O,f=0;f<r&&(c=i[N?d*r+r-1-f:d*r+f]);f++)m=c.settings,l=c.layoutRect(),a=Math.max(A[f],l.startMinWidth),l.x=h,l.y=p,"center"===(v=m.alignH||(w?w[f]||w[0]:null))?l.x=h+a/2-l.w/2:"right"===v?l.x=h+a-l.w:"stretch"===v&&(l.w=a),"center"===(v=m.alignV||(x?x[f]||x[0]:null))?l.y=p+s/2-l.h/2:"bottom"===v?l.y=p+s-l.h:"stretch"===v&&(l.h=s),c.layoutRect(l),h+=a+y,c.recalc&&c.recalc();p+=s+b}}else if(u.w=u.minW,u.h=u.minH,e.layoutRect(u),this.recalc(e),null===e._lastRect){var B=e.parent();B&&(B._lastRect=null,B.recalc())}}}),xr=Tt.extend({renderHtml:function(){return this.classes.add("iframe"),this.canFocus=!1,'<iframe id="'+this._id+'" class="'+this.classes+'" tabindex="-1" src="'+(this.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=e,t&&t()):y.setTimeout(function(){n.html(e)}),this}}),Cr=Tt.extend({init:function(e){this._super(e),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},help:function(e){this.state.set("help",e)},renderHtml:function(){var e=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+this.encode(this.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+e+"ico "+e+'i-help"></i></button></div></div>'},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.getEl("body").firstChild.data=e.encode(t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e.state.on("change:help",function(t){e.classes.toggle("has-help",t.value),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}}),_r=Tt.extend({init:function(e){this._super(e),this.classes.add("widget").add("label"),this.canFocus=!1,e.multiline&&this.classes.add("autoscroll"),e.strong&&this.classes.add("strong")},initLayoutRect:function(){var e=this._super();return this.settings.multiline&&(ve.getSize(this.getEl()).width>e.maxW&&(e.minW=e.maxW,this.classes.add("multiline")),this.getEl().style.width=e.minW+"px",e.startMinH=e.h=e.minH=Math.min(e.maxH,ve.getSize(this.getEl()).height)),e},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(e){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(e)},renderHtml:function(){var e,t,n=this.settings.forId,r=this.settings.html?this.settings.html:this.encode(this.state.get("text"));return!n&&(t=this.settings.forName)&&(e=this.getRoot().find("#"+t)[0])&&(n=e._id),n?'<label id="'+this._id+'" class="'+this.classes+'"'+(n?' for="'+n+'"':"")+">"+r+"</label>":'<span id="'+this._id+'" class="'+this.classes+'">'+r+"</span>"},bindStates:function(){var e=this;return e.state.on("change:text",function(t){e.innerHtml(e.encode(t.value)),e.state.get("rendered")&&e.updateLayoutRect()}),e._super()}}),Sr=it.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){this._super(e),this.classes.add("toolbar")},postRender:function(){return this.items().each(function(e){e.classes.add("toolbar-item")}),this._super()}}),kr=Sr.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),Tr=Ft.extend({init:function(e){this._renderOpen=!0,this._super(e),e=this.settings,this.classes.add("menubtn"),e.fixedWidth&&this.classes.add("fixed-width"),this.aria("haspopup",!0),this.state.set("menu",e.menu||this.render())},showMenu:function(e){var t,n=this;if(n.menu&&n.menu.visible()&&!1!==e)return n.hideMenu();n.menu||(t=n.state.get("menu")||[],n.classes.add("opened"),t.length?t={type:"menu",animate:!0,items:t}:(t.type=t.type||"menu",t.animate=!0),t.renderTo?n.menu=t.parent(n).show().renderTo():n.menu=f.create(t).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(e){e.control===n.menu&&(n.activeMenu("show"===e.type),n.classes.toggle("opened","show"===e.type)),n.aria("expanded","show"===e.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.repaint(),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),n.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),this.menu.hide())},activeMenu:function(e){this.classes.toggle("active",e)},renderHtml:function(){var e,t=this._id,n=this.classPrefix,r=this.settings.icon,i=this.state.get("text"),o="";return(e=this.settings.image)?(r="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",i&&(this.classes.add("btn-has-text"),o='<span class="'+n+'txt">'+this.encode(i)+"</span>"),r=this.settings.icon?n+"ico "+n+"i-"+r:"",this.aria("role",this.parent()instanceof kr?"menuitem":"button"),'<div id="'+t+'" class="'+this.classes+'" tabindex="-1" aria-labelledby="'+t+'"><button id="'+t+'-open" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+e+"></i>":"")+o+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}(t.target,e.getEl())&&(e.focus(),e.showMenu(!t.aria),t.aria&&e.menu.items().filter(":visible")[0].focus())}),e.on("mouseenter",function(t){var n,r=t.control,i=e.parent();r&&i&&r instanceof Tr&&r.parent()===i&&(i.items().filter("MenuButton").each(function(e){e.hideMenu&&e!==r&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())}),n&&(r.focus(),r.showMenu()))}),e._super()},bindStates:function(){var e=this;return e.state.on("change:menu",function(){e.menu&&e.menu.remove(),e.menu=null}),e._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Er=bt.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){if(e.autohide=!0,e.constrainToViewport=!0,"function"==typeof e.items&&(e.itemsFactory=e.items,e.items=[]),e.itemDefaults)for(var t=e.items,n=t.length;n--;)t[n]=r.extend({},e.itemDefaults,t[n]);this._super(e),this.classes.add("menu"),e.animate&&11!==ue.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var e,t=this;function n(){t.throbber&&(t.throbber.hide(),t.throbber=null)}t.settings.itemsFactory&&(t.throbber||(t.throbber=new _t(t.getEl("body"),!0),0===t.items().length?(t.throbber.show(),t.fire("loading")):t.throbber.show(100,function(){t.items().remove(),t.fire("loading")}),t.on("hide close",n)),t.requestTime=e=(new Date).getTime(),t.settings.itemsFactory(function(r){0!==r.length?t.requestTime===e&&(t.getEl().style.width="",t.getEl("body").style.width="",n(),t.items().remove(),t.getEl("body").innerHTML="",t.add(r),t.renderNew(),t.fire("loaded")):t.hide()}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;if(n.icon||n.image||n.selectable)return e._hasIcons=!0,!1}),e.settings.itemsFactory&&e.on("postrender",function(){e.settings.itemsFactory&&e.load()}),e.on("show hide",function(t){t.control===e&&("show"===t.type?y.setTimeout(function(){e.classes.add("in")},0):e.classes.remove("in"))}),e._super()}}),Nr=Tr.extend({init:function(e){var t,n,r,i,o=this;o._super(e),e=o.settings,o._values=t=e.values,t&&(void 0!==e.value&&function t(i){for(var a=0;a<i.length;a++){if(n=i[a].selected||e.value===i[a].value)return r=r||i[a].text,o.state.set("value",i[a].value),!0;if(i[a].menu&&t(i[a].menu))return!0}}(t),!n&&t.length>0&&(r=t[0].text,o.state.set("value",t[0].value)),o.state.set("menu",t)),o.state.set("text",e.text||r),o.classes.add("listbox"),o.on("select",function(t){var n=t.control;i&&(t.lastControl=i),e.multiple?n.active(!n.active()):o.value(t.control.value()),i=n})},value:function(e){return 0===arguments.length?this.state.get("value"):void 0===e?this:(this.settings.values?r.grep(this.settings.values,function(t){return t.value===e}).length>0?this.state.set("value",e):null===e&&this.state.set("value",null):this.state.set("value",e),this)},bindStates:function(){var e=this;return e.on("show",function(t){var n,r;n=t.control,r=e.value(),n instanceof Er&&n.items().each(function(e){e.hasMenus()||e.active(e.value()===r)})}),e.state.on("change:value",function(t){var n=function e(t,n){var r;if(t)for(var i=0;i<t.length;i++){if(t[i].value===n)return t[i];if(t[i].menu&&(r=e(t[i].menu,n)))return r}}(e.state.get("menu"),t.value);n?e.text(n.text):e.text(e.settings.text)}),e._super()}}),Ar=Tt.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t;this._super(e),e=this.settings,this.classes.add("menu-item"),e.menu&&this.classes.add("menu-item-expand"),e.preview&&this.classes.add("menu-item-preview"),"-"!==(t=this.state.get("text"))&&"|"!==t||(this.classes.add("menu-item-sep"),this.aria("role","separator"),this.state.set("text","-")),e.selectable&&(this.aria("role","menuitemcheckbox"),this.classes.add("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||this.classes.add("menu-item-normal"),this.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&this.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,t=this,n=t.settings,r=t.parent();if(r.items().each(function(e){e!==t&&e.hideMenu()}),n.menu){(e=t.menu)?e.show():((e=n.menu).length?e={type:"menu",items:e}:e.type=e.type||"menu",r.settings.itemDefaults&&(e.itemDefaults=r.settings.itemDefaults),(e=t.menu=f.create(e).parent(t).renderTo()).reflow(),e.on("cancel",function(n){n.stopPropagation(),t.focus(),e.hide()}),e.on("show hide",function(e){e.control.items&&e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),e.on("hide",function(n){n.control===e&&t.classes.remove("selected")}),e.submenu=!0),e._parentMenu=r,e.classes.add("menu-sub");var i=e.testMoveRel(t.getEl(),t.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(t.getEl(),i),e.rel=i,i="menu-sub-"+i,e.classes.remove(e._lastRel).add(i),e._lastRel=i,t.classes.add("selected"),t.aria("expanded",!0)}},hideMenu:function(){return this.menu&&(this.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),this.menu.hide(),this.aria("expanded",!1)),this},renderHtml:function(){var e,t=this._id,n=this.settings,r=this.classPrefix,i=this.state.get("text"),o=this.settings.icon,a="",s=n.shortcut,u=this.encode(n.url);function l(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function c(e){var t=n.match||"";return t?e.replace(new RegExp(l(t),"gi"),function(e){return"!mce~match["+e+"]mce~match!"}):e}function f(e){return e.replace(new RegExp(l("!mce~match["),"g"),"<b>").replace(new RegExp(l("]mce~match!"),"g"),"</b>")}return o&&this.parent().classes.add("menu-has-icons"),n.image&&(a=" style=\"background-image: url('"+n.image+"')\""),s&&(s=function(e){var t,n,r;for(r=ue.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},e=e.split("+"),t=0;t<e.length;t++)(n=r[e[t].toLowerCase()])&&(e[t]=n);return e.join("+")}(s)),o=r+"ico "+r+"i-"+(this.settings.icon||"none"),e="-"!==i?'<i class="'+o+'"'+a+"></i>Â ":"",i=f(this.encode(c(i))),u=f(this.encode(c(u))),'<div id="'+t+'" class="'+this.classes+'" tabindex="-1">'+e+("-"!==i?'<span id="'+t+'-text" class="'+r+'text">'+i+"</span>":"")+(s?'<div id="'+t+'-shortcut" class="'+r+'menu-shortcut">'+s+"</div>":"")+(n.menu?'<div class="'+r+'caret"></div>':"")+(u?'<div class="'+r+'menu-item-link">'+u+"</div>":"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var r=e.getEl("text");r&&(r.setAttribute("style",n),e._textStyle=n)}return e.on("mouseenter click",function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),y.requestAnimationFrame(function(){e.parent().hideAll()})))}),e._super(),e},hover:function(){return this.parent().items().each(function(e){e.classes.remove("selected")}),this.classes.toggle("selected",!0),this},active:function(e){return function(e,t){var n=e._textStyle;if(n){var r=e.getEl("text");r.setAttribute("style",n),t&&(r.style.color="",r.style.backgroundColor="")}}(this,e),void 0!==e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Rr=Wt.extend({Defaults:{classes:"radio",role:"radio"}}),Or=Tt.extend({renderHtml:function(){var e=this.classPrefix;return this.classes.add("resizehandle"),"both"===this.settings.direction&&this.classes.add("resizehandle-both"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"><i class="'+e+"ico "+e+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new at(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!==e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});function Dr(e){var t="";if(e)for(var n=0;n<e.length;n++)t+='<option value="'+e[n]+'">'+e[n]+"</option>";return t}var Pr=Tt.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(e){var t=this;t._super(e),t.settings.size&&(t.size=t.settings.size),t.settings.options&&(t._options=t.settings.options),t.on("keydown",function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))})},options:function(e){return arguments.length?(this.state.set("options",e),this):this.state.get("options")},renderHtml:function(){var e,t="";return e=Dr(this._options),this.size&&(t=' size = "'+this.size+'"'),'<select id="'+this._id+'" class="'+this.classes+'"'+t+">"+e+"</select>"},bindStates:function(){var e=this;return e.state.on("change:options",function(t){e.getEl().innerHTML=Dr(t.value)}),e._super()}});function Ir(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}function Br(e,t,n){e.setAttribute("aria-"+t,n)}function Mr(e,t){var n,r,i,o,a;"v"===e.settings.orientation?(i="top",r="height",n="h"):(i="left",r="width",n="w"),a=e.getEl("handle"),o=((e.layoutRect()[n]||100)-ve.getSize(a)[r])*((t-e._minValue)/(e._maxValue-e._minValue))+"px",a.style[i]=o,a.style.height=e.layoutRect().h+"px",Br(a,"valuenow",t),Br(a,"valuetext",""+e.settings.previewFilter(t)),Br(a,"valuemin",e._minValue),Br(a,"valuemax",e._maxValue)}var Lr=Tt.extend({init:function(e){e.previewFilter||(e.previewFilter=function(e){return Math.round(100*e)/100}),this._super(e),this.classes.add("slider"),"v"===e.orientation&&this.classes.add("vertical"),this._minValue=H.isNumber(e.minValue)?e.minValue:0,this._maxValue=H.isNumber(e.maxValue)?e.maxValue:100,this._initValue=this.state.get("value")},renderHtml:function(){var e=this._id,t=this.classPrefix;return'<div id="'+e+'" class="'+this.classes+'"><div id="'+e+'-handle" class="'+t+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var e,t,n,r,i,o,a=this;e=a._minValue,t=a._maxValue,"v"===a.settings.orientation?(n="screenY",r="top",i="height",o="h"):(n="screenX",r="left",i="width",o="w"),a._super(),function(e,t){function n(n){var r,i;r=a.value(),r=Ir(r=function(e,t,n){return n*(t-e)-e}(e,t,(r+(i=e))/(t-i)+.05*n),e,t),a.value(r),a.fire("dragstart",{value:r}),a.fire("drag",{value:r}),a.fire("dragend",{value:r})}a.on("keydown",function(e){switch(e.keyCode){case 37:case 38:n(-1);break;case 39:case 40:n(1)}})}(e,t),function(e,t,s){var u,l,c,f,d;a._dragHelper=new at(a._id,{handle:a._id+"-handle",start:function(e){u=e[n],l=parseInt(a.getEl("handle").style[r],10),c=(a.layoutRect()[o]||100)-ve.getSize(s)[i],a.fire("dragstart",{value:d})},drag:function(i){var o=i[n]-u;f=Ir(l+o,0,c),s.style[r]=f+"px",d=e+f/c*(t-e),a.value(d),a.tooltip().text(""+a.settings.previewFilter(d)).show().moveRel(s,"bc tc"),a.fire("drag",{value:d})},stop:function(){a.tooltip().hide(),a.fire("dragend",{value:d})}})}(e,t,a.getEl("handle"))},repaint:function(){this._super(),Mr(this,this.value())},bindStates:function(){var e=this;return e.state.on("change:value",function(t){Mr(e,t.value)}),e._super()}}),Hr=Tt.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}}),Fr=Tr.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,t,n=this.getEl(),r=this.layoutRect();return this._super(),e=n.firstChild,t=n.lastChild,me(e).css({width:r.w-ve.getSize(t).width,height:r.h-2}),me(t).css({height:r.h-2}),this},activeMenu:function(e){me(this.getEl().lastChild).toggleClass(this.classPrefix+"active",e)},renderHtml:function(){var e,t,n=this._id,r=this.classPrefix,i=this.state.get("icon"),o=this.state.get("text"),a=this.settings,s="";return(e=a.image)?(i="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",i=a.icon?r+"ico "+r+"i-"+i:"",o&&(this.classes.add("btn-has-text"),s='<span class="'+r+'txt">'+this.encode(o)+"</span>"),t="boolean"==typeof a.active?' aria-pressed="'+a.active+'"':"",'<div id="'+n+'" class="'+this.classes+'" role="button"'+t+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(i?'<i class="'+i+'"'+e+"></i>":"")+s+'</button><button type="button" class="'+r+'open" hidefocus="1" tabindex="-1">'+(this._menuBtnText?(i?"Â ":"")+this._menuBtnText:"")+' <i class="'+r+'caret"></i></button></div>'},postRender:function(){var e=this.settings.onclick;return this.on("click",function(t){var n=t.target;if(t.control===this)for(;n;){if(t.aria&&"down"!==t.aria.key||"BUTTON"===n.nodeName&&-1===n.className.indexOf("open"))return t.stopImmediatePropagation(),void(e&&e.call(this,t));n=n.parentNode}}),delete this.settings.onclick,this._super()}}),zr=rr.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),jr=dt.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var t;this.activeTabId&&(t=this.getEl(this.activeTabId),me(t).removeClass(this.classPrefix+"active"),t.setAttribute("aria-selected","false")),this.activeTabId="t"+e,(t=this.getEl("t"+e)).setAttribute("aria-selected","true"),me(t).addClass(this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,n){e!==n&&t.hide()})},renderHtml:function(){var e=this,t=e._layout,n="",r=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,i){var o=e._id+"-t"+i;t.aria("role","tabpanel"),t.aria("labelledby",o),n+='<div id="'+o+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+r+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.bodyClasses+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(n&&n.id===e._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]===t.target&&e.activateTab(r)})},initLayoutRect:function(){var e,t,n;t=(t=ve.getSize(this.getEl("head")).width)<0?0:t,n=0,this.items().each(function(e){t=Math.max(t,e.layoutRect().minW),n=Math.max(n,e.layoutRect().minH)}),this.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=t,e.settings.h=n,e.layoutRect({x:0,y:0,w:t,h:n})});var r=ve.getSize(this.getEl("head")).height;return this.settings.minWidth=t,this.settings.minHeight=n+r,(e=this._super()).deltaH+=r,e.innerH=e.h-e.deltaH,e}}),Wr=Tt.extend({init:function(e){var t=this;t._super(e),t.classes.add("textbox"),e.multiline?t.classes.add("multiline"):(t.on("keydown",function(e){var n;13===e.keyCode&&(e.preventDefault(),t.parents().reverse().each(function(e){if(e.toJSON)return n=e,!1}),t.fire("submit",{data:n.toJSON()}))}),t.on("keyup",function(e){t.state.set("value",e.target.value)}))},repaint:function(){var e,t,n,r,i,o=0;e=this.getEl().style,t=this._layoutRect,i=this._lastRepaintRect||{};var a=document;return!this.settings.multiline&&a.all&&(!a.documentMode||a.documentMode<=8)&&(e.lineHeight=t.h-o+"px"),r=(n=this.borderBox).left+n.right+8,o=n.top+n.bottom+(this.settings.multiline?8:0),t.x!==i.x&&(e.left=t.x+"px",i.x=t.x),t.y!==i.y&&(e.top=t.y+"px",i.y=t.y),t.w!==i.w&&(e.width=t.w-r+"px",i.w=t.w),t.h!==i.h&&(e.height=t.h-o+"px",i.h=t.h),this._lastRepaintRect=i,this.fire("repaint",{},!1),this},renderHtml:function(){var e,t,n=this.settings;return e={id:this._id,hidefocus:"1"},r.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(t){e[t]=n[t]}),this.disabled()&&(e.disabled="disabled"),n.subtype&&(e.type=n.subtype),(t=ve.create(n.multiline?"textarea":"input",e)).value=this.state.get("value"),t.className=this.classes,t.outerHTML},value:function(e){return arguments.length?(this.state.set("value",e),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var e=this;e.getEl().value=e.state.get("value"),e._super(),e.$el.on("change",function(t){e.state.set("value",t.target.value),e.fire("change",t)})},bindStates:function(){var e=this;return e.state.on("change:value",function(t){e.getEl().value!==t.value&&(e.getEl().value=t.value)}),e.state.on("change:disabled",function(t){e.getEl().disabled=t.value}),e._super()},remove:function(){this.$el.off(),this._super()}}),Ur=function(){return{Selector:Me,Collection:Fe,ReflowQueue:Xe,Control:et,Factory:f,KeyboardNavigation:nt,Container:it,DragHelper:at,Scrollable:ft,Panel:dt,Movable:_e,Resizable:ht,FloatPanel:bt,Window:Pt,MessageBox:Bt,Tooltip:kt,Widget:Tt,Progress:Et,Notification:At,Layout:Lt,AbsoluteLayout:Ht,Button:Ft,ButtonGroup:jt,Checkbox:Wt,ComboBox:$t,ColorBox:qt,PanelButton:Vt,ColorButton:Yt,ColorPicker:Jt,Path:Qt,ElementPath:Zt,FormItem:en,Form:tn,FieldSet:nn,FilePicker:er,FitLayout:tr,FlexLayout:nr,FlowLayout:rr,FormatControls:br,GridLayout:wr,Iframe:xr,InfoBox:Cr,Label:_r,Toolbar:Sr,MenuBar:kr,MenuButton:Tr,MenuItem:Ar,Throbber:_t,Menu:Er,ListBox:Nr,Radio:Rr,ResizeHandle:Or,SelectBox:Pr,Slider:Lr,Spacer:Hr,SplitButton:Fr,StackLayout:zr,TabPanel:jr,TextBox:Wr,DropZone:Gt,BrowseButton:zt}};r.each(Ur(),function(e,t){f.add(t,e)}),function(e){e.ui?r.each(Ur(),function(t,n){e.ui[n]=t}):e.ui=Ur()}(window.tinymce?window.tinymce:{}),t.add("modern",function(e){return br.setup(e),Mt(e)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=function(e,t,n){var r="UL"===t?"InsertUnorderedList":"InsertOrderedList";e.execCommand(r,!1,!1===n?null:{"list-style-type":n})},r=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},i=function(e){return t.map(e,function(e){return{text:function(e){return e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()})}(e),data:"default"===e?"":e}})},o=function(e,n){return function(i){var o=i.control;e.on("NodeChange",function(i){var a=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(i.parents,r),s=-1!==a?i.parents.slice(0,a):i.parents,u=t.grep(s,function(e){return function(t){return t&&/^(OL|UL|DL)$/.test(t.nodeName)&&function(e,t){return e.$.contains(e.getBody(),t)}(e,t)}}(e));o.active(u.length>0&&u[0].nodeName===n)})}},a=function(e,t,r,a,s,u){e.addButton(t,{active:!1,type:"splitbutton",tooltip:r,menu:i(u),onPostRender:o(e,s),onshow:function(e){return function(t){var n=function(e){var t=e.dom.getParent(e.selection.getNode(),"ol,ul");return e.dom.getStyle(t,"listStyleType")||""}(e);t.control.items().each(function(e){e.active(e.settings.data===n)})}}(e),onselect:function(t){n(e,s,t.control.settings.data)},onclick:function(){e.execCommand(a)}})},s=function(e,t,n,r,i,s){s.length>0?a(e,t,n,r,i,s):function(e,t,n,r,i,a){e.addButton(t,{active:!1,type:"button",tooltip:n,onPostRender:o(e,i),onclick:function(){e.execCommand(r)}})}(e,t,n,r,i)};e.add("advlist",function(e){(function(e,n){var r=e.settings.plugins?e.settings.plugins:"";return-1!==t.inArray(r.split(/[ ,]/),"lists")})(e)&&(function(e){s(e,"numlist","Numbered list","InsertOrderedList","OL",function(e){var t=e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return t?t.split(/[ ,]/):[]}(e)),s(e,"bullist","Bullet list","InsertUnorderedList","UL",function(e){var t=e.getParam("advlist_bullet_styles","default,circle,disc,square");return t?t.split(/[ ,]/):[]}(e))}(e),function(e){e.addCommand("ApplyUnorderedListStyle",function(t,r){n(e,"UL",r["list-style-type"])}),e.addCommand("ApplyOrderedListStyle",function(t,r){n(e,"OL",r["list-style-type"])})}(e))})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function(e,t){if(t<0&&(t=0),3===e.nodeType){var n=e.data.length;t>n&&(t=n)}return t},r=function(e,t,r){1!==t.nodeType||t.hasChildNodes()?e.setStart(t,n(t,r)):e.setStartBefore(t)},i=function(e,t,r){1!==t.nodeType||t.hasChildNodes()?e.setEnd(t,n(t,r)):e.setEndAfter(t)},o=function(e,t,n){var o,a,s,u,l,c,f,d,h,p,m=function(e){return e.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)}(e),g=function(e){return e.getParam("default_link_target","")}(e);if("A"!==e.selection.getNode().tagName){if((o=e.selection.getRng(!0).cloneRange()).startOffset<5){if(!(d=o.endContainer.previousSibling)){if(!o.endContainer.firstChild||!o.endContainer.firstChild.nextSibling)return;d=o.endContainer.firstChild.nextSibling}if(h=d.length,r(o,d,h),i(o,d,h),o.endOffset<5)return;a=o.endOffset,u=d}else{if(3!==(u=o.endContainer).nodeType&&u.firstChild){for(;3!==u.nodeType&&u.firstChild;)u=u.firstChild;3===u.nodeType&&(r(o,u,0),i(o,u,u.nodeValue.length))}a=1===o.endOffset?2:o.endOffset-1-t}s=a;do{r(o,u,a>=2?a-2:0),i(o,u,a>=1?a-1:0),a-=1,p=o.toString()}while(" "!==p&&""!==p&&160!==p.charCodeAt(0)&&a-2>=0&&p!==n);!function(e,t){return e===n||" "===e||160===e.charCodeAt(0)}(o.toString())?0===o.startOffset?(r(o,u,0),i(o,u,s)):(r(o,u,a),i(o,u,s)):(r(o,u,a),i(o,u,s),a+=1),"."===(c=o.toString()).charAt(c.length-1)&&i(o,u,s-1),(f=(c=o.toString().trim()).match(m))&&("www."===f[1]?f[1]="http://www.":/@$/.test(f[1])&&!/^mailto:/.test(f[1])&&(f[1]="mailto:"+f[1]),l=e.selection.getBookmark(),e.selection.setRng(o),e.execCommand("createlink",!1,f[1]+f[2]),g&&e.dom.setAttrib(e.selection.getNode(),"target",g),e.selection.moveToBookmark(l),e.nodeChanged())}};e.add("autolink",function(e){!function(e){var n;e.on("keydown",function(t){if(13===t.keyCode)return function(e){o(e,-1,"")}(e)}),t.ie?e.on("focus",function(){if(!n){n=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}}):(e.on("keypress",function(t){if(41===t.keyCode)return function(e){o(e,-1,"(")}(e)}),e.on("keyup",function(t){if(32===t.keyCode)return function(e){o(e,0,"")}(e)}))}(e)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),n=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),r=tinymce.util.Tools.resolve("tinymce.util.VK"),i=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),o=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),s=function(e){return e&&"BR"===e.nodeName},u=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},l=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},c=function(e){return e&&/^(TH|TD)$/.test(e.nodeName)},f=s,d=function(e){return e.parentNode.firstChild===e},h=function(e){return e.parentNode.lastChild===e},p=function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},m=function(e,t){return e&&e.nodeName in t},g=function(e,t){return!!s(t)&&!(!e.isBlock(t.nextSibling)||s(t.previousSibling))},v=function(e,t,n){var r=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&r},y=function(e,t){return e.isChildOf(t,e.getRoot())},b=function(e,n){var r=t.getNode(e,n);return l(e)&&function(e){return e&&3===e.nodeType}(r)?{container:r,offset:n>=e.childNodes.length?r.data.length:0}:{container:e,offset:n}},w=function(e){var t=e.cloneRange(),n=b(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);var r=b(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},x=a.DOM,C=function(e){var t={},n=function(n){var r,i,o;i=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"],1===i.nodeType&&(r=x.create("span",{"data-mce-type":"bookmark"}),i.hasChildNodes()?(o=Math.min(o,i.childNodes.length-1),n?i.insertBefore(r,i.childNodes[o]):x.insertAfter(r,i.childNodes[o])):i.appendChild(r),i=r,o=0),t[n?"startContainer":"endContainer"]=i,t[n?"startOffset":"endOffset"]=o};return n(!0),e.collapsed||n(),t},_=function(e){function t(t){var n,r,i;n=i=e[t?"startContainer":"endContainer"],r=e[t?"startOffset":"endOffset"],n&&(1===n.nodeType&&(r=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1}(n),n=n.parentNode,x.remove(i),!n.hasChildNodes()&&x.isBlock(n)&&n.appendChild(x.create("br"))),e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=r)}t(!0),t();var n=x.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),w(n)},S=a.DOM,k=function(e,t){o.each(o.grep(e.select("ol,ul",t)),function(t){!function(e,t){var n,r=t.parentNode;"LI"===r.nodeName&&r.firstChild===t&&((n=r.previousSibling)&&"LI"===n.nodeName?(n.appendChild(t),v(e,r)&&S.remove(r)):S.setStyle(r,"listStyleType","none")),u(r)&&(n=r.previousSibling)&&"LI"===n.nodeName&&n.appendChild(t)}(e,t)})},T=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),E=function(e){var t=e.selection.getStart(!0);return e.dom.getParent(t,"OL,UL,DL",N(e,t))},N=function(e,t){var n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},A={getParentList:E,getSelectedSubLists:function(e){var t=E(e),n=e.selection.getSelectedBlocks();return function(e,t){return e&&1===t.length&&t[0]===e}(t,n)?function(e){return o.grep(e.querySelectorAll("ol,ul,dl"),function(e){return u(e)})}(t):o.grep(n,function(e){return u(e)&&t!==e})},getSelectedListItems:function(e){var t=e.selection.getSelectedBlocks();return o.grep(function(e,t){var n=o.map(t,function(t){return e.dom.getParent(t,"li,dd,dt",N(e,t))||t});return T.unique(n)}(e,t),function(e){return l(e)})},getClosestListRootElm:N},R=tinymce.util.Tools.resolve("tinymce.Env"),O=a.DOM,D=function(e,t,n){var r,i,o,a=O.createFragment(),s=e.schema.getBlockElements();if(e.settings.forced_root_block&&(n=n||e.settings.forced_root_block),n&&((i=O.create(n)).tagName===e.settings.forced_root_block&&O.setAttribs(i,e.settings.forced_root_block_attrs),m(t.firstChild,s)||a.appendChild(i)),t)for(;r=t.firstChild;){var u=r.nodeName;o||"SPAN"===u&&"bookmark"===r.getAttribute("data-mce-type")||(o=!0),m(r,s)?(a.appendChild(r),i=null):n?(i||(i=O.create(n),a.appendChild(i)),i.appendChild(r)):a.appendChild(r)}return e.settings.forced_root_block?o||R.ie&&!(R.ie>10)||i.appendChild(O.create("br",{"data-mce-bogus":"1"})):a.appendChild(O.create("br")),a},P=a.DOM,I=function(e,t,n,r){var i,a,s,u,l;for(s=P.select('span[data-mce-type="bookmark"]',t),r=r||D(e,n),(i=P.createRng()).setStartAfter(n),i.setEndAfter(t),u=(a=i.extractContents()).firstChild;u;u=u.firstChild)if("LI"===u.nodeName&&e.dom.isEmpty(u)){P.remove(u);break}e.dom.isEmpty(a)||P.insertAfter(a,t),P.insertAfter(r,t),v(e.dom,n.parentNode)&&(l=n.parentNode,o.each(s,function(e){l.parentNode.insertBefore(e,n.parentNode)}),P.remove(l)),P.remove(n),v(e.dom,t)&&P.remove(t)},B=a.DOM,M=function(e,t){v(e,t)&&B.remove(t)},L=function(e,t){var n,r,i=t.parentNode;return i?(n=i.parentNode,!(i!==e.getBody()&&("DD"===t.nodeName?(B.rename(t,"DT"),0):d(t)&&h(t)?("LI"===n.nodeName?(B.insertAfter(t,n),M(e.dom,n),B.remove(i)):u(n)?B.remove(i,!0):(n.insertBefore(D(e,t),i),B.remove(i)),0):d(t)?("LI"===n.nodeName?(B.insertAfter(t,n),t.appendChild(i),M(e.dom,n)):u(n)?n.insertBefore(t,i):(n.insertBefore(D(e,t),i),B.remove(t)),0):h(t)?("LI"===n.nodeName?B.insertAfter(t,n):u(n)?B.insertAfter(t,i):(B.insertAfter(D(e,t),i),B.remove(t)),0):("LI"===n.nodeName?(i=n,r=D(e,t,"LI")):r=u(n)?D(e,t,"LI"):D(e,t),I(e,i,t,r),k(e.dom,i.parentNode),0)))):(M(e.dom,t),!0)},H=L,F=function(e){var t=A.getSelectedListItems(e);if(t.length){var n=C(e.selection.getRng()),r=void 0,i=void 0,o=A.getClosestListRootElm(e,e.selection.getStart(!0));for(r=t.length;r--;)for(var a=t[r].parentNode;a&&a!==o;){for(i=t.length;i--;)if(t[i]===a){t.splice(r,1);break}a=a.parentNode}for(r=0;r<t.length&&(L(e,t[r])||0!==r);r++);return e.selection.setRng(_(n)),e.nodeChanged(),!0}},z=function(e,t){o.each(t,function(t,n){e.setAttribute(n,t)})},j=function(e,t,n){!function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)}(e,t,n),function(e,t,n){z(t,n["list-attributes"]),o.each(e.select("li",t),function(e){z(e,n["list-item-attributes"])})}(e,t,n)},W=function(e,t,n,r){var i,o;for(i=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],1===i.nodeType&&(i=i.childNodes[Math.min(o,i.childNodes.length-1)]||i),!n&&f(i.nextSibling)&&(i=i.nextSibling);i.parentNode!==r;){if(p(e,i))return i;if(/^(TD|TH)$/.test(i.parentNode.nodeName))return i;i=i.parentNode}return i},U=function(e,t,n){void 0===n&&(n={});var r,a=e.selection.getRng(!0),s="LI",l=A.getClosestListRootElm(e,e.selection.getStart(!0)),c=e.dom;"false"!==c.getContentEditable(e.selection.getNode())&&("DL"===(t=t.toUpperCase())&&(s="DT"),r=C(a),o.each(function(e,t,n){for(var r,a=[],s=e.dom,u=W(e,t,!0,n),l=W(e,t,!1,n),c=[],d=u;d&&(c.push(d),d!==l);d=d.nextSibling);return o.each(c,function(t){if(p(e,t))return a.push(t),void(r=null);if(s.isBlock(t)||f(t))return f(t)&&s.remove(t),void(r=null);var o=t.nextSibling;i.isBookmarkNode(t)&&(p(e,o)||!o&&t.parentNode===n)?r=null:(r||(r=s.create("p"),t.parentNode.insertBefore(r,t),a.push(r)),r.appendChild(t))}),a}(e,a,l),function(r){var i,a;(a=r.previousSibling)&&u(a)&&a.nodeName===t&&function(e,t,n){var r=c.getStyle(t,"list-style-type"),i=n?n["list-style-type"]:"";return r===(null===i?"":i)}(0,a,n)?(i=a,r=c.rename(r,s),a.appendChild(r)):(i=c.create(t),r.parentNode.insertBefore(i,r),i.appendChild(r),r=c.rename(r,s)),function(e,t,n){o.each(["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"],function(n){return e.setStyle(t,((r={})[n]="",r));var r})}(c,r),j(c,i,n),V(e.dom,i)}),e.selection.setRng(_(r)))},$=function(e){var t=C(e.selection.getRng(!0)),n=A.getClosestListRootElm(e,e.selection.getStart(!0)),r=A.getSelectedListItems(e),i=o.grep(r,function(t){return e.dom.isEmpty(t)});r=o.grep(r,function(t){return!e.dom.isEmpty(t)}),o.each(i,function(t){v(e.dom,t)&&H(e,t)}),o.each(r,function(t){var r,i;if(t.parentNode!==e.getBody()){for(r=t;r&&r!==n;r=r.parentNode)u(r)&&(i=r);I(e,i,t),k(e.dom,i.parentNode)}}),e.selection.setRng(_(t))},q=function(e,t,n){return function(e,t){return e&&t&&u(e)&&e.nodeName===t.nodeName}(t,n)&&function(e,t,n){return e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)}(e,t,n)&&(r=n,t.className===r.className);var r},V=function(e,t){var n,r;if(n=t.nextSibling,q(e,t,n)){for(;r=n.firstChild;)t.appendChild(r);e.remove(n)}if(n=t.previousSibling,q(e,t,n)){for(;r=n.lastChild;)t.insertBefore(r,t.firstChild);e.remove(n)}},X=function(e){return"list-style-type"in e},Y={toggleList:function(e,t,n){var r=A.getParentList(e),i=A.getSelectedSubLists(e);n=n||{},r&&i.length>0?function(e,t,n,r,i){if(t.nodeName!==r||X(i)){var a=C(e.selection.getRng(!0));o.each([t].concat(n),function(t){!function(e,t,n,r){if(t.nodeName!==n){var i=e.rename(t,n);j(e,i,r)}else j(e,t,r)}(e.dom,t,r,i)}),e.selection.setRng(_(a))}else $(e)}(e,r,i,t,n):function(e,t,n,r){if(t!==e.getBody())if(t)if(t.nodeName!==n||X(r)){var i=C(e.selection.getRng(!0));j(e.dom,t,r),V(e.dom,e.dom.rename(t,n)),e.selection.setRng(_(i))}else $(e);else U(e,n,r)}(e,r,t,n)},removeList:$,mergeWithAdjacentLists:V},K=function(e,r,i,o){var a,s,u=r.startContainer,l=r.startOffset;if(3===u.nodeType&&(i?l<u.data.length:l>0))return u;for(a=e.schema.getNonEmptyElements(),1===u.nodeType&&(u=t.getNode(u,l)),s=new n(u,o),i&&g(e.dom,u)&&s.next();u=s[i?"next":"prev2"]();){if("LI"===u.nodeName&&!u.hasChildNodes())return u;if(a[u.nodeName])return u;if(3===u.nodeType&&u.data.length>0)return u}},J=function(e,t){var n=t.childNodes;return 1===n.length&&!u(n[0])&&e.isBlock(n[0])},G=function(e,t,n){var r,i,o=t.parentNode;y(e,t)&&y(e,n)&&(u(n.lastChild)&&(i=n.lastChild),o===n.lastChild&&f(o.previousSibling)&&e.remove(o.previousSibling),(r=n.lastChild)&&f(r)&&t.hasChildNodes()&&e.remove(r),v(e,n,!0)&&e.$(n).empty(),function(e,t,n){var r,i;if(i=J(e,n)?n.firstChild:n,function(e,t){J(e,t)&&e.remove(t.firstChild,!0)}(e,t),!v(e,t,!0))for(;r=t.firstChild;)i.appendChild(r)}(e,t,n),i&&n.appendChild(i),e.remove(t),v(e,o)&&o!==e.getRoot()&&e.remove(o))},Q=function(e,t){var n,r,i,o=e.dom,a=e.selection,s=a.getStart(),u=A.getClosestListRootElm(e,s),l=o.getParent(a.getStart(),"LI",u);if(l){if((n=l.parentNode)===e.getBody()&&v(o,n))return!0;if(r=w(a.getRng(!0)),(i=o.getParent(K(e,r,t,u),"LI",u))&&i!==l)return t?function(e,t,n,r){var i=e.dom;if(i.isEmpty(r))!function(e,t,n){e.dom.$(n).empty(),G(e.dom,t,n),e.selection.setCursorLocation(n)}(e,n,r);else{var o=C(t);G(i,n,r),e.selection.setRng(_(o))}}(e,r,i,l):function(e,t,n,r){var i=C(t);G(e.dom,n,r);var o=_(i);e.selection.setRng(o)}(e,r,l,i),!0;if(!i&&!t&&Y.removeList(e))return!0}return!1},Z=function(e,t){return e.selection.isCollapsed()?function(e,t){return Q(e,t)||function(e,t){var n=e.dom,r=e.selection.getStart(),i=A.getClosestListRootElm(e,r),o=n.getParent(r,n.isBlock,i);if(o&&n.isEmpty(o)){var a=w(e.selection.getRng(!0)),s=n.getParent(K(e,a,t,i),"LI",i);if(s)return e.undoManager.transact(function(){!function(e,t,n){var r=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),r&&e.isEmpty(r)&&e.remove(r)}(n,o,i),Y.mergeWithAdjacentLists(n,s.parentNode),e.selection.select(s,!0),e.selection.collapse(t)}),!0}return!1}(e,t)}(e,t):function(e){var t=e.selection.getStart(),n=A.getClosestListRootElm(e,t);return!!(e.dom.getParent(t,"LI,DT,DD",n)||A.getSelectedListItems(e).length>0)&&(e.undoManager.transact(function(){e.execCommand("Delete"),k(e.dom,e.getBody())}),!0)}(e)},ee=Z,te=a.DOM,ne=function(e,t){var n;if(u(e)){for(;n=e.firstChild;)t.appendChild(n);te.remove(e)}},re=function(e){var t,n,r,i,o=A.getSelectedListItems(e);if(o.length){for(var a=C(e.selection.getRng(!0)),s=0;s<o.length&&(n=void 0,r=void 0,i=void 0,("DT"===(t=o[s]).nodeName?(te.rename(t,"DD"),1):(n=t.previousSibling)&&u(n)?(n.appendChild(t),1):n&&"LI"===n.nodeName&&u(n.lastChild)?(n.lastChild.appendChild(t),ne(t.lastChild,n.lastChild),1):(n=t.nextSibling)&&u(n)?(n.insertBefore(t,n.firstChild),1):(n=t.previousSibling)&&"LI"===n.nodeName&&(r=te.create(t.parentNode.nodeName),(i=te.getStyle(t.parentNode,"listStyleType"))&&te.setStyle(r,"listStyleType",i),n.appendChild(r),r.appendChild(t),ne(t.lastChild,r),1))||0!==s);s++);return e.selection.setRng(_(a)),e.nodeChanged(),!0}},ie=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}},oe=function(e){(function(e){return e.getParam("lists_indent_on_tab",!0)})(e)&&function(e){e.on("keydown",function(t){t.keyCode!==r.TAB||r.metaKeyPressed(t)||e.dom.getParent(e.selection.getStart(),"LI,DT,DD")&&(t.preventDefault(),t.shiftKey?F(e):re(e))})}(e),function(e){e.on("keydown",function(t){t.keyCode===r.BACKSPACE?Z(e,!1)&&t.preventDefault():t.keyCode===r.DELETE&&Z(e,!0)&&t.preventDefault()})}(e)},ae=function(e,t){return function(n){var r=n.control;e.on("NodeChange",function(e){var n=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}(e.parents,c),i=-1!==n?e.parents.slice(0,n):e.parents,a=o.grep(i,u);r.active(a.length>0&&a[0].nodeName===t)})}};e.add("lists",function(e){return oe(e),function(e){(function(e,t){var n=e.settings.plugins?e.settings.plugins:"";return-1!==o.inArray(n.split(/[ ,]/),"advlist")})(e)||(e.addButton("numlist",{active:!1,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:ae(e,"OL")}),e.addButton("bullist",{active:!1,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:ae(e,"UL")})),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(e){return function(t){var n=t.control;e.on("nodechange",function(){var t=A.getSelectedListItems(e),r=t.length>0&&d(t[0]);n.disabled(r)})}}(e)})}(e),function(e){e.on("BeforeExecCommand",function(t){var n,r=t.command.toLowerCase();if("indent"===r?re(e)&&(n=!0):"outdent"===r&&F(e)&&(n=!0),n)return e.fire("ExecCommand",{command:t.command}),t.preventDefault(),!0}),e.addCommand("InsertUnorderedList",function(t,n){Y.toggleList(e,"UL",n)}),e.addCommand("InsertOrderedList",function(t,n){Y.toggleList(e,"OL",n)}),e.addCommand("InsertDefinitionList",function(t,n){Y.toggleList(e,"DL",n)}),e.addQueryStateHandler("InsertUnorderedList",ie(e,"UL")),e.addQueryStateHandler("InsertOrderedList",ie(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",ie(e,"DL"))}(e),function(e){return{backspaceDelete:function(t){ee(e,t)}}}(e)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.VK"),n=function(e){return e.target_list},r=function(e){return e.rel_list},i=function(e){return e.link_class_list},o=n,a=function(e){return!1!==n(e)},s=r,u=function(e){return void 0!==r(e)},l=i,c=function(e){return void 0!==i(e)},f=function(e){return"boolean"==typeof e.allow_unsafe_link_target&&e.allow_unsafe_link_target},d=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),h=tinymce.util.Tools.resolve("tinymce.Env"),p=tinymce.util.Tools.resolve("tinymce.util.Tools"),m=function(e,t){var n=["noopener"],r=e?e.split(/\s+/):[],i=function(e){return e.filter(function(e){return-1===p.inArray(n,e)})};return(r=t?function(e){return(e=i(e)).length?e.concat(n):n}(r):i(r)).length?function(e){return p.trim(e.sort().join(" "))}(r):null},g=function(e,t){return t=t||e.selection.getNode(),y(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")},v=function(e){return e&&"A"===e.nodeName&&e.href},y=function(e){return e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)},b=function(e,t){return function(n){e.undoManager.transact(function(){var r=e.selection.getNode(),i=g(e,r),o={href:n.href,target:n.target?n.target:null,rel:n.rel?n.rel:null,class:n.class?n.class:null,title:n.title?n.title:null};u(e.settings)||!1!==f(e.settings)||(o.rel=m(o.rel,"_blank"===o.target)),n.href===t.href&&(t.attach(),t={}),i?(e.focus(),n.hasOwnProperty("text")&&("innerText"in i?i.innerText=n.text:i.textContent=n.text),e.dom.setAttribs(i,o),e.selection.select(i),e.undoManager.add()):y(r)?function(e,t,n){var r,i;(i=e.dom.select("img",t)[0])&&(r=e.dom.create("a",n),i.parentNode.insertBefore(r,i),r.appendChild(i))}(e,r,o):n.hasOwnProperty("text")?e.insertContent(e.dom.createHTML("a",o,e.dom.encode(n.text))):e.execCommand("mceInsertLink",!1,o)})}},w=function(e){return function(){e.undoManager.transact(function(){var t=e.selection.getNode();y(t)?function(e,t){var n,r;(r=e.dom.select("img",t)[0])&&(n=e.dom.getParents(r,"a[href]",t)[0])&&(n.parentNode.insertBefore(r,n),e.dom.remove(n))}(e,t):e.execCommand("unlink")})}},x=v,C=function(e){return p.grep(e,v).length>0},_=g,S=m,k=tinymce.util.Tools.resolve("tinymce.util.Delay"),T=tinymce.util.Tools.resolve("tinymce.util.XHR"),E={},N=function(e,t,n){var r=function(e,n){return n=n||[],p.each(e,function(e){var i={text:e.text||e.title};e.menu?i.menu=r(e.menu):(i.value=e.value,t&&t(i)),n.push(i)}),n};return r(e,n||[])},A=function(e,t,n){var r=e.selection.getRng();k.setEditorTimeout(e,function(){e.windowManager.confirm(t,function(t){e.selection.setRng(r),n(t)})})},R=function(e,t){var n,r,i,d,h,m,g,v,y,x,C,k={},T=e.selection,R=e.dom,O=function(e){var t=i.find("#text");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),i.find("#href").value(e.control.value())},D=function(){r||!d||k.text||this.parent().parent().find("#text")[0].value(this.value())};d=function(e){return!(/</.test(e)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(e)||-1===e.indexOf("href=")))}(T.getContent()),n=_(e),k.text=r=function(e,t){return function(e){return e.replace(/\uFEFF/g,"")}(t?t.innerText||t.textContent:e.getContent({format:"text"}))}(e.selection,n),k.href=n?R.getAttrib(n,"href"):"",n?k.target=R.getAttrib(n,"target"):function(e){return"string"==typeof e.default_link_target}(e.settings)&&(k.target=function(e){return e.default_link_target}(e.settings)),(C=R.getAttrib(n,"rel"))&&(k.rel=C),(C=R.getAttrib(n,"class"))&&(k.class=C),(C=R.getAttrib(n,"title"))&&(k.title=C),d&&(h={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){k.text=this.value()}}),t&&(m={type:"listbox",label:"Link list",values:N(t,function(t){t.value=e.convertURL(t.value||t.url,"href")},[{text:"None",value:""}]),onselect:O,value:e.convertURL(k.href,"href"),onPostRender:function(){m=this}}),a(e.settings)&&(void 0===o(e.settings)&&function(e,t){e.settings.target_list=t}(e,[{text:"None",value:""},{text:"New window",value:"_blank"}]),v={name:"target",type:"listbox",label:"Target",values:N(o(e.settings))}),u(e.settings)&&(g={name:"rel",type:"listbox",label:"Rel",values:N(s(e.settings),function(t){!1===f(e.settings)&&(t.value=S(t.value,"_blank"===k.target))})}),c(e.settings)&&(y={name:"class",type:"listbox",label:"Class",values:N(l(e.settings),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"a",classes:[t.value]})})})}),function(e){return!1!==e.link_title}(e.settings)&&(x={name:"title",type:"textbox",label:"Title",value:k.title}),i=e.windowManager.open({title:"Insert link",data:k,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(t){var n=t.meta||{};m&&m.value(e.convertURL(this.value(),"href")),p.each(t.meta,function(e,t){var n=i.find("#"+t);"text"===t?0===r.length&&(n.value(e),k.text=e):n.value(e)}),n.attach&&(E={href:this.value(),attach:n.attach}),n.text||D.call(this)},onkeyup:D,onpaste:D,onbeforecall:function(e){e.meta=i.toJSON()}},h,x,function(t){var n=[];if(p.each(e.dom.select("a:not([href])"),function(e){var r=e.name||e.id;r&&n.push({text:r,value:"#"+r,selected:-1!==t.indexOf("#"+r)})}),n.length)return n.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:n,onselect:O}}(k.href),m,g,v,y],onSubmit:function(t){var n=function(e){return"boolean"==typeof e.link_assume_external_targets&&e.link_assume_external_targets}(e.settings),i=b(e,E),o=w(e),a=p.extend({},k,t.data),s=a.href;s?(d&&a.text!==r||delete a.text,s.indexOf("@")>0&&-1===s.indexOf("//")&&-1===s.indexOf("mailto:")?A(e,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){e&&(a.href="mailto:"+s),i(a)}):!0===n&&!/^\w+:/i.test(s)||!1===n&&/^\s*www[\.|\d\.]/i.test(s)?A(e,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){e&&(a.href="http://"+s),i(a)}):i(a)):o()}})},O=function(e,t){return e.dom.getParent(t,"a[href]")},D=function(e){return O(e,e.selection.getStart())},P=function(e,t){if(t){var n=function(e){return e.getAttribute("data-mce-href")||e.getAttribute("href")}(t);if(/^#/.test(n)){var r=e.$(n);r.length&&e.selection.scrollIntoView(r[0],!0)}else!function(e){if(!h.ie||h.ie>10){var t=document.createElement("a");t.target="_blank",t.href=e,t.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(e,t){document.body.appendChild(e),e.dispatchEvent(t),document.body.removeChild(e)}(t,n)}else{var r=window.open("","_blank");if(r){r.opener=null;var i=r.document;i.open(),i.write('<meta http-equiv="refresh" content="0; url='+d.DOM.encode(e)+'">'),i.close()}}}(t.href)}},I=function(e){return function(){!function(e){!function(e,t){var n=function(e){return e.link_list}(e.settings);"string"==typeof n?T.send({url:n,success:function(n){t(e,JSON.parse(n))}}):"function"==typeof n?n(function(n){t(e,n)}):t(e,n)}(e,R)}(e)}},B=function(e){return function(){P(e,D(e))}},M=function(e){return function(){var t=this;e.on("nodechange",function(n){t.active(!e.readonly&&!!_(e,n.element))})}},L=function(e){e.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:B(e),onPostRender:function(e){return function(){var t=this,n=function(e){C(e.parents)?t.show():t.hide()};C(e.dom.getParents(e.selection.getStart()))||t.hide(),e.on("nodechange",n),t.on("remove",function(){e.off("nodechange",n)})}}(e),prependToContext:!0}),e.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:I(e),stateSelector:"a[href]",context:"insert",prependToContext:!0}),e.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:w(e),stateSelector:"a[href]"})},H=function(e){e.addContextToolbar&&e.addContextToolbar(function(e){return function(t){var n,r,i;return!!(function(e){return"boolean"==typeof e.link_context_toolbar&&e.link_context_toolbar}(e.settings)&&!function(e){var t=e.plugins.contextmenu;return!!t&&t.isContextMenuVisible()}(e)&&x(t)&&3===(i=(r=(n=e.selection).getRng()).startContainer).nodeType&&n.isCollapsed()&&r.startOffset>0&&r.startOffset<i.data.length)}}(e),"openlink | link unlink")};e.add("link",function(e){(function(e){e.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:I(e),onpostrender:M(e)}),e.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:w(e),onpostrender:M(e)}),e.addContextToolbar&&e.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:B(e)})})(e),L(e),H(e),function(e){e.on("click",function(n){var r=O(e,n.target);r&&t.metaKeyPressed(n)&&(n.preventDefault(),P(e,r))}),e.on("keydown",function(t){var n=D(e);n&&13===t.keyCode&&function(e){return!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey}(t)&&(t.preventDefault(),P(e,n))})}(e),function(e){e.addCommand("mceLink",I(e))}(e),function(e){e.addShortcut("Meta+K","",I(e))}(e)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t={hasDimensions:function(e){return!1!==e.settings.image_dimensions},hasAdvTab:function(e){return!0===e.settings.image_advtab},getPrependUrl:function(e){return e.getParam("image_prepend_url","")},getClassList:function(e){return e.getParam("image_class_list")},hasDescription:function(e){return!1!==e.settings.image_description},hasImageTitle:function(e){return!0===e.settings.image_title},hasImageCaption:function(e){return!0===e.settings.image_caption},getImageList:function(e){return e.getParam("image_list",!1)},hasUploadUrl:function(e){return e.getParam("images_upload_url",!1)},hasUploadHandler:function(e){return e.getParam("images_upload_handler",!1)},getUploadUrl:function(e){return e.getParam("images_upload_url")},getUploadHandler:function(e){return e.getParam("images_upload_handler")},getUploadBasePath:function(e){return e.getParam("images_upload_base_path")},getUploadCredentials:function(e){return e.getParam("images_upload_credentials")}},n="undefined"!=typeof window?window:Function("return this;")(),r=function(e,t){for(var r=void 0!==t&&null!==t?t:n,i=0;i<e.length&&void 0!==r&&null!==r;++i)r=r[e[i]];return r},i={getOrDie:function(e,t){var n=function(e,t){return function(e,t){var n=e.split(".");return r(n,t)}(e,t)}(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n}};function o(){return new(i.getOrDie("FileReader"))}var a=tinymce.util.Tools.resolve("tinymce.util.Promise"),s=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=tinymce.util.Tools.resolve("tinymce.util.XHR"),l=function(e,t){return Math.max(parseInt(e,10),parseInt(t,10))},c={getImageSize:function(e,t){var n=document.createElement("img");function r(e,r){n.parentNode&&n.parentNode.removeChild(n),t({width:e,height:r})}n.onload=function(){r(l(n.width,n.clientWidth),l(n.height,n.clientHeight))},n.onerror=function(){r(0,0)};var i=n.style;i.visibility="hidden",i.position="fixed",i.bottom=i.left="0px",i.width=i.height="auto",document.body.appendChild(n),n.src=e},buildListItems:function(e,t,n){return function e(n,r){return r=r||[],s.each(n,function(n){var i={text:n.text||n.title};n.menu?i.menu=e(n.menu):(i.value=n.value,t(i)),r.push(i)}),r}(e,n||[])},removePixelSuffix:function(e){return e&&(e=e.replace(/px$/,"")),e},addPixelSuffix:function(e){return e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e},mergeMargins:function(e){if(e.margin){var t=e.margin.split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e},createImageList:function(e,n){var r=t.getImageList(e);"string"==typeof r?u.send({url:r,success:function(e){n(JSON.parse(e))}}):"function"==typeof r?r(n):n(r)},waitLoadImage:function(e,n,r){function i(){r.onload=r.onerror=null,e.selection&&(e.selection.select(r),e.nodeChanged())}r.onload=function(){n.width||n.height||!t.hasDimensions(e)||e.dom.setAttribs(r,{width:r.clientWidth,height:r.clientHeight}),i()},r.onerror=i},blobToDataUri:function(e){return new a(function(t,n){var r=new o;r.onload=function(){t(r.result)},r.onerror=function(){n(o.error.message)},r.readAsDataURL(e)})}},f=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),d=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(t)===e}},h={isString:d("string"),isObject:d("object"),isArray:d("array"),isNull:d("null"),isBoolean:d("boolean"),isUndefined:d("undefined"),isFunction:d("function"),isNumber:d("number")},p=function(e){return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},i=0;i<t.length;i++){var o=t[i];for(var a in o)o.hasOwnProperty(a)&&(r[a]=e(r[a],o[a]))}return r}},m=p(function(e,t){return h.isObject(e)&&h.isObject(t)?m(e,t):t}),g=p(function(e,t){return t}),v={deepMerge:m,merge:g},y=f.DOM,b=function(e){return e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight?c.removePixelSuffix(e.style.marginLeft):""},w=function(e){return e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom?c.removePixelSuffix(e.style.marginTop):""},x=function(e){return e.style.borderWidth?c.removePixelSuffix(e.style.borderWidth):""},C=function(e,t){return e.hasAttribute(t)?e.getAttribute(t):""},_=function(e,t){return e.style[t]?e.style[t]:""},S=function(e){return null!==e.parentNode&&"FIGURE"===e.parentNode.nodeName},k=function(e,t,n){e.setAttribute(t,n)},T=function(e,t){var n=e.getAttribute("style"),r=t(null!==n?n:"");r.length>0?(e.setAttribute("style",r),e.setAttribute("data-mce-style",r)):e.removeAttribute("style")},E=function(e,t){return function(e,n,r){e.style[n]?(e.style[n]=c.addPixelSuffix(r),T(e,t)):k(e,n,r)}},N=function(e,t){return e.style[t]?c.removePixelSuffix(e.style[t]):C(e,t)},A=function(e,t){var n=c.addPixelSuffix(t);e.style.marginLeft=n,e.style.marginRight=n},R=function(e,t){var n=c.addPixelSuffix(t);e.style.marginTop=n,e.style.marginBottom=n},O=function(e,t){var n=c.addPixelSuffix(t);e.style.borderWidth=n},D=function(e,t){e.style.borderStyle=t},P=function(e){return"FIGURE"===e.nodeName},I=function(e,t){return{src:C(t,"src"),alt:C(t,"alt"),title:C(t,"title"),width:N(t,"width"),height:N(t,"height"),class:C(t,"class"),style:e(C(t,"style")),caption:S(t),hspace:b(t),vspace:w(t),border:x(t),borderStyle:_(t,"borderStyle")}},B=function(e,t,n,r,i){n[r]!==t[r]&&i(e,r,n[r])},M=function(e,t){return function(n,r,i){e(n,i),T(n,t)}},L=function(e,t,n){var r=I(e,n);B(n,r,t,"caption",function(e,t,n){return function(e){S(e)?function(e){var t=e.parentNode;y.insertAfter(e,t),y.remove(t)}(e):function(e){var t=y.create("figure",{class:"image"});y.insertAfter(t,e),t.appendChild(e),t.appendChild(y.create("figcaption",{contentEditable:!0},"Caption")),t.contentEditable="false"}(e)}(e)}),B(n,r,t,"src",k),B(n,r,t,"alt",k),B(n,r,t,"title",k),B(n,r,t,"width",E(0,e)),B(n,r,t,"height",E(0,e)),B(n,r,t,"class",k),B(n,r,t,"style",M(function(e,t){return k(e,"style",t)},e)),B(n,r,t,"hspace",M(A,e)),B(n,r,t,"vspace",M(R,e)),B(n,r,t,"border",M(O,e)),B(n,r,t,"borderStyle",M(D,e))},H=function(e,t){var n=e.dom.styles.parse(t),r=c.mergeMargins(n),i=e.dom.styles.parse(e.dom.styles.serialize(r));return e.dom.styles.serialize(i)},F=function(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||t.getAttribute("data-mce-object")||t.getAttribute("data-mce-placeholder"))?null:t},z=function(e,t){var n=e.dom,r=n.getParent(t.parentNode,function(t){return e.schema.getTextBlockElements()[t.nodeName]});return r?n.split(r,t):t},j=function(e){var t=F(e);return t?I(function(t){return H(e,t)},t):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""}},W=function(e,t){var n=F(e);n?t.src?function(e,t){var n=F(e);if(L(function(t){return H(e,t)},t,n),function(e,t){e.dom.setAttrib(t,"src",t.getAttribute("src"))}(e,n),P(n.parentNode)){var r=n.parentNode;z(e,r),e.selection.select(n.parentNode)}else e.selection.select(n),c.waitLoadImage(e,t,n)}(e,t):function(e,t){if(t){var n=e.dom.is(t.parentNode,"figure.image")?t.parentNode:t;e.dom.remove(n),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}}(e,n):t.src&&function(e,t){var n=function(e,t){var n=document.createElement("img");if(L(e,v.merge(t,{caption:!1}),n),k(n,"alt",t.alt),t.caption){var r=y.create("figure",{class:"image"});return r.appendChild(n),r.appendChild(y.create("figcaption",{contentEditable:!0},"Caption")),r.contentEditable="false",r}return n}(function(t){return H(e,t)},t);e.dom.setAttrib(n,"data-mce-id","__mcenew"),e.focus(),e.selection.setContent(n.outerHTML);var r=e.dom.select('*[data-mce-id="__mcenew"]')[0];if(e.dom.setAttrib(r,"data-mce-id",null),P(r)){var i=z(e,r);e.selection.select(i)}else e.selection.select(r)}(e,t)},U=function(e,t){t.find("#style").each(function(n){var r=function(e,t){var n=document.createElement("img");return k(n,"style",t.style),(b(n)||""!==t.hspace)&&A(n,t.hspace),(w(n)||""!==t.vspace)&&R(n,t.vspace),(x(n)||""!==t.border)&&O(n,t.border),(_(n,"borderStyle")||""!==t.borderStyle)&&D(n,t.borderStyle),e(n.getAttribute("style"))}(function(t){return H(e,t)},v.merge({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""},t.toJSON()));n.value(r)})},$={makeTab:function(e){return{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:function(e){return function(n){var r=e.dom,i=n.control.rootControl;if(t.hasAdvTab(e)){var o=i.toJSON(),a=r.parseStyle(o.style);i.find("#vspace").value(""),i.find("#hspace").value(""),((a=c.mergeMargins(a))["margin-top"]&&a["margin-bottom"]||a["margin-right"]&&a["margin-left"])&&(a["margin-top"]===a["margin-bottom"]?i.find("#vspace").value(c.removePixelSuffix(a["margin-top"])):i.find("#vspace").value(""),a["margin-right"]===a["margin-left"]?i.find("#hspace").value(c.removePixelSuffix(a["margin-right"])):i.find("#hspace").value("")),a["border-width"]?i.find("#border").value(c.removePixelSuffix(a["border-width"])):i.find("#border").value(""),a["border-style"]?i.find("#borderStyle").value(a["border-style"]):i.find("#borderStyle").value(""),i.find("#style").value(r.serializeStyle(r.parseStyle(r.serializeStyle(a))))}}}(e)},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,defaults:{type:"textbox",maxWidth:50,onchange:function(t){U(e,t.control.rootControl)}},items:[{label:"Vertical space",name:"vspace"},{label:"Border width",name:"border"},{label:"Horizontal space",name:"hspace"},{label:"Border style",type:"listbox",name:"borderStyle",width:90,maxWidth:90,onselect:function(t){U(e,t.control.rootControl)},values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}}},q=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},V=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],i=e.find("#constrain")[0];n&&r&&i&&t(n,r,i.checked())},X=function(e,t,n){var r=e.state.get("oldVal"),i=t.state.get("oldVal"),o=e.value(),a=t.value();n&&r&&i&&o&&a&&(o!==r?(a=Math.round(o/r*a),isNaN(a)||t.value(a)):(o=Math.round(a/i*o),isNaN(o)||e.value(o))),q(e,t)},Y=function(e){V(e,X)},K={createUi:function(){var e=function(e){Y(e.control.rootControl)};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:e,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},syncSize:function(e){V(e,q)},updateSize:Y},J=function(e){e.meta=e.control.rootControl.toJSON()},G=function(e,n){var r=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:function(n){!function(e,n){var r,i,o,a=e.meta||{},u=e.control,l=u.rootControl,f=l.find("#image-list")[0];f&&f.value(n.convertURL(u.value(),"src")),s.each(a,function(e,t){l.find("#"+t).value(e)}),a.width||a.height||(r=n.convertURL(u.value(),"src"),i=t.getPrependUrl(n),o=new RegExp("^(?:[a-z]+:)?//","i"),i&&!o.test(r)&&r.substring(0,i.length)!==i&&(r=i+r),u.value(r),c.getImageSize(n.documentBaseURI.toAbsolute(u.value()),function(e){e.width&&e.height&&t.hasDimensions(n)&&(l.find("#width").value(e.width),l.find("#height").value(e.height),K.syncSize(l))}))}(n,e)},onbeforecall:J},n];return t.hasDescription(e)&&r.push({name:"alt",type:"textbox",label:"Image description"}),t.hasImageTitle(e)&&r.push({name:"title",type:"textbox",label:"Image Title"}),t.hasDimensions(e)&&r.push(K.createUi()),t.getClassList(e)&&r.push({name:"class",type:"listbox",label:"Class",values:c.buildListItems(t.getClassList(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"img",classes:[t.value]})})})}),t.hasImageCaption(e)&&r.push({name:"caption",type:"checkbox",label:"Caption"}),r},Q={makeTab:function(e,t){return{title:"General",type:"form",items:G(e,t)}},getGeneralItems:G},Z=function(){return i.getOrDie("URL")},ee=tinymce.util.Tools.resolve("tinymce.ui.Factory"),te=function(){},ne=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t};function re(e){var t=function(t,n,r,o){var a,s;(a=new function(){return new(i.getOrDie("XMLHttpRequest"))}).open("POST",e.url),a.withCredentials=e.credentials,a.upload.onprogress=function(e){o(e.loaded/e.total*100)},a.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){var t;a.status<200||a.status>=300?r("HTTP Error: "+a.status):(t=JSON.parse(a.responseText))&&"string"==typeof t.location?n(ne(e.basePath,t.location)):r("Invalid JSON: "+a.responseText)},(s=new FormData).append("file",t.blob(),t.filename()),a.send(s)};return e=s.extend({credentials:!1,handler:t},e),{upload:function(n){return e.url||e.handler!==t?function(e,t){return new a(function(n,r){try{t(e,n,r,te)}catch(e){r(e.message)}})}(n,e.handler):a.reject("Upload url missing from the settings.")}}}var ie=function(e){return function(n){var r=ee.get("Throbber"),i=n.control.rootControl,o=new r(i.getEl()),a=n.control.value(),s=function(e){return Z().createObjectURL(e)}(a),u=re({url:t.getUploadUrl(e),basePath:t.getUploadBasePath(e),credentials:t.getUploadCredentials(e),handler:t.getUploadHandler(e)}),l=function(){var e;o.hide(),e=s,Z().revokeObjectURL(e)};return o.show(),c.blobToDataUri(a).then(function(t){var n=e.editorUpload.blobCache.create({blob:a,blobUri:s,name:a.name?a.name.replace(/\.[^\.]+$/,""):null,base64:t.split(",")[1]});return u.upload(n).then(function(e){var t=i.find("#src");return t.value(e),i.find("tabpanel")[0].activateTab(0),t.fire("change"),l(),e})}).catch(function(t){e.windowManager.alert(t),l()})}},oe={makeTab:function(e){return{title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for an image",type:"browsebutton",accept:".jpg,.jpeg,.png,.gif",onchange:ie(e)},{text:"OR",type:"label"}]},{text:"Drop an image here",type:"dropzone",accept:".jpg,.jpeg,.png,.gif",height:100,onchange:ie(e)}]}}},ae=function(e){return function(){return e}},se={noop:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},noarg:function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e()}},compose:function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,arguments))}},constant:ae,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var a=r.concat(i);return e.apply(null,a)}},not:function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,arguments)}},die:function(e){return function(){throw new Error(e)}},apply:function(e){return e()},call:function(e){e()},never:ae(!1),always:ae(!0)},ue=function(e,t){var n=t.control.getRoot();K.updateSize(n),e.undoManager.transact(function(){var t=v.merge(j(e),n.toJSON());W(e,t)}),e.editorUpload.uploadImagesAuto()};function le(e){function n(n){var r,i,o=j(e);if(n&&(i={type:"listbox",label:"Image list",name:"image-list",values:c.buildListItems(n,function(t){t.value=e.convertURL(t.value||t.url,"src")},[{text:"None",value:""}]),value:o.src&&e.convertURL(o.src,"src"),onselect:function(e){var t=r.find("#alt");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),r.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){i=this}}),t.hasAdvTab(e)||t.hasUploadUrl(e)||t.hasUploadHandler(e)){var a=[Q.makeTab(e,i)];t.hasAdvTab(e)&&a.push($.makeTab(e)),(t.hasUploadUrl(e)||t.hasUploadHandler(e))&&a.push(oe.makeTab(e)),r=e.windowManager.open({title:"Insert/edit image",data:o,bodyType:"tabpanel",body:a,onSubmit:se.curry(ue,e)})}else r=e.windowManager.open({title:"Insert/edit image",data:o,body:Q.getGeneralItems(e,i),onSubmit:se.curry(ue,e)});K.syncSize(r)}return{open:function(){c.createImageList(e,n)}}}var ce=function(e){var t=e.attr("class");return t&&/\bimage\b/.test(t)},fe=function(e){return function(t){for(var n,r=t.length,i=function(t){t.attr("contenteditable",e?"true":null)};r--;)n=t[r],ce(n)&&(n.attr("contenteditable",e?"false":null),s.each(n.getAll("figcaption"),i))}};e.add("image",function(e){(function(e){e.on("preInit",function(){e.parser.addNodeFilter("figure",fe(!0)),e.serializer.addNodeFilter("figure",fe(!1))})})(e),function(e){e.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:le(e).open,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"}),e.addMenuItem("image",{icon:"image",text:"Image",onclick:le(e).open,context:"insert",prependToContext:!0})}(e),function(e){e.addCommand("mceImage",le(e).open)}(e)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(e,t){var n=function(e,t){return e.fire("insertCustomChar",{chr:t})}(e,t).chr;e.execCommand("mceInsertContent",!1,n)},n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=n.isArray,i=function(e){return r(e)?[].concat((t=e,n.grep(t,function(e){return r(e)&&2===e.length}))):"function"==typeof e?e():[];var t},o=function(e){return function(e,t){var n=function(e){return e.settings.charmap}(e);n&&(t=i(n));var r=function(e){return e.settings.charmap_append}(e);return r?[].concat(t).concat(i(r)):t}(e,[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]])},a=function(e){for(;e;){if("TD"===e.nodeName)return e;e=e.parentNode}},s=function(e){var n,r={type:"container",html:function(e){var t,n,r,i=Math.min(e.length,25),o=Math.ceil(e.length/i);for(t='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',r=0;r<o;r++){for(t+="<tr>",n=0;n<i;n++){var a=r*i+n;if(a<e.length){var s=e[a],u=parseInt(s[0],10),l=s?String.fromCharCode(u):"&nbsp;";t+='<td title="'+s[1]+'"><div tabindex="-1" title="'+s[1]+'" role="button" data-chr="'+u+'">'+l+"</div></td>"}else t+="<td />"}t+="</tr>"}return t+"</tbody></table>"}(o(e)),onclick:function(r){var i=r.target;if(/^(TD|DIV)$/.test(i.nodeName)){var o=a(i).firstChild;if(o&&o.hasAttribute("data-chr")){var s=o.getAttribute("data-chr"),u=parseInt(s,10);isNaN(u)||t(e,String.fromCharCode(u)),r.ctrlKey||n.close()}}},onmouseover:function(e){var t=a(e.target);t&&t.firstChild?(n.find("#preview").text(t.firstChild.firstChild.data),n.find("#previewTitle").text(t.title)):(n.find("#preview").text(" "),n.find("#previewTitle").text(" "))}};n=e.windowManager.open({title:"Special character",spacing:10,padding:10,items:[r,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){n.close()}}]})};e.add("charmap",function(e){return function(e){e.addCommand("mceShowCharmap",function(){s(e)})}(e),function(e){e.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),e.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"})}(e),function(e){return{getCharMap:function(){return o(e)},insertChar:function(n){t(e,n)}}}(e)})}()},function(e,t){!function(){"use strict";var e=function(e){return function(t){for(var n=0;n<t.length;n++)(r=t[n]).attr("href")||!r.attr("id")&&!r.attr("name")||r.firstChild||t[n].attr("contenteditable",e);var r}};tinymce.util.Tools.resolve("tinymce.PluginManager").add("anchor",function(t){(function(t){t.on("PreInit",function(){t.parser.addNodeFilter("a",e("false")),t.serializer.addNodeFilter("a",e(null))})})(t),function(e){e.addCommand("mceAnchor",function(){!function(e){var t=function(e){var t=e.selection.getNode();return"A"===t.tagName&&""===e.dom.getAttrib(t,"href")?t.id||t.name:""}(e);e.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:t},onsubmit:function(t){var n=t.data.id;(function(e,t){return function(e){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(e)}(t)?(function(e,t){var n=e.selection.getNode();"A"===n.tagName&&""===e.dom.getAttrib(n,"href")?(n.removeAttribute("name"),n.id=t):(e.focus(),e.selection.collapse(!0),e.execCommand("mceInsertContent",!1,e.dom.createHTML("a",{id:t})))}(e,t),!1):(e.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!0)})(e,n)&&t.preventDefault()}})}(e)})}(t),function(e){e.addButton("anchor",{icon:"anchor",tooltip:"Anchor",cmd:"mceAnchor",stateSelector:"a:not([href])"}),e.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",cmd:"mceAnchor"})}(t)})}()},function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r=function(e){return n.DOM.select(e.settings.ui_container)[0]},i=function(e,t){return{x:e,y:t}},o=function(e,t,n){return i(e.x+t,e.y+n)},a=function(e,t){if(e&&"static"!==n.DOM.getStyle(e,"position",!0)){var r=n.DOM.getPos(e),i=r.x-e.scrollLeft,a=r.y-e.scrollTop;return o(t,-i,-a)}return o(t,0,0)},s=tinymce.util.Tools.resolve("tinymce.ui.Factory"),u=tinymce.util.Tools.resolve("tinymce.util.Tools"),l=function(e,t,l){e.on("contextmenu",function(c){(function(e,t){return c.ctrlKey&&!function(e){return e.settings.contextmenu_never_use_native}(e)})(e)||(c.preventDefault(),function(e,t,n,i){null===i.get()?i.set(function(e,t){var n,i,o=[];i=function(e){return e.getParam("contextmenu","link openlink image inserttable | cell row column deletetable")}(e),u.each(i.split(/[ ,]/),function(t){var n=e.menuItems[t];"|"===t&&(n={text:t}),n&&(n.shortcut="",o.push(n))});for(var a=0;a<o.length;a++)"|"===o[a].text&&(0!==a&&a!==o.length-1||o.splice(a,1));return(n=s.create("menu",{items:o,context:"contextmenu",classes:"contextmenu"})).uiContainer=r(e),n.renderTo(r(e)),n.on("hide",function(e){e.control===this&&t.set(!1)}),e.on("remove",function(){n.remove(),n=null}),n}(e,n)):i.get().show(),i.get().moveTo(t.x,t.y),n.set(!0)}(e,function(e,t){if(e.inline)return a(r(e),function(e){return i(e.pageX,e.pageY)}(t));var s,u,l,c=(s=e.getContentAreaContainer(),u=function(e){return i(e.clientX,e.clientY)}(t),l=n.DOM.getPos(s),o(u,l.x,l.y));return a(r(e),c)}(e,c),t,l))})};t.add("contextmenu",function(t){var n=e(null),r=e(!1);return l(t,r,n),function(e){return{isContextMenuVisible:function(){return e.get()}}}(r)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function(e){return e.getParam("pagebreak_split_block",!1)},r=function(){return'<img src="'+t.transparentSrc+'" class="mce-pagebreak" data-mce-resize="false" data-mce-placeholder />'},i=r,o=function(){return"mce-pagebreak"};e.add("pagebreak",function(e){(function(e){e.addCommand("mcePageBreak",function(){e.settings.pagebreak_split_block?e.insertContent("<p>"+i()+"</p>"):e.insertContent(i())})})(e),function(e){e.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),e.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"})}(e),function(e){var t=function(e){return e.getParam("pagebreak_separator","\x3c!-- pagebreak --\x3e")}(e),i=new RegExp(t.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(e){return"\\"+e}),"gi");e.on("BeforeSetContent",function(e){e.content=e.content.replace(i,r())}),e.on("PreInit",function(){e.serializer.addNodeFilter("img",function(r){for(var i,o,a=r.length;a--;)if((o=(i=r[a]).attr("class"))&&-1!==o.indexOf("mce-pagebreak")){var s=i.parent;if(e.schema.getBlockElements()[s.name]&&n(e)){s.type=3,s.value=t,s.raw=!0,i.remove();continue}i.type=3,i.value=t,i.raw=!0}})})}(e),function(e){e.on("ResolveName",function(t){"IMG"===t.target.nodeName&&e.dom.hasClass(t.target,o())&&(t.name="pagebreak")})}(e)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(e){return e.getParam("media_scripts")},i=function(e){return e.getParam("media_live_embeds",!0)},o=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),a=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),s=function(e,t){if(e)for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n].filter))return e[n]},u=function(e){return function(t){return t?t.style[e].replace(/px$/,""):""}},l=function(e){return function(t,n){t&&(t.style[e]=function(e){return/^[0-9.]+$/.test(e)?e+"px":e}(n))}},c={getMaxWidth:u("maxWidth"),getMaxHeight:u("maxHeight"),setMaxWidth:l("maxWidth"),setMaxHeight:l("maxHeight")},f=a.DOM,d=function(e){return f.getAttrib(e,"data-ephox-embed-iri")},h=function(e,t){return function(e){var t=f.createFragment(e);return""!==d(t.firstChild)}(t)?function(e){var t=f.createFragment(e).firstChild;return{type:"ephox-embed-iri",source1:d(t),source2:"",poster:"",width:c.getMaxWidth(t),height:c.getMaxHeight(t)}}(t):function(e,t){var r={};return o({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(t,i){if(r.source1||"param"!==t||(r.source1=i.map.movie),"iframe"!==t&&"object"!==t&&"embed"!==t&&"video"!==t&&"audio"!==t||(r.type||(r.type=t),r=n.extend(i.map,r)),"script"===t){var o=s(e,i.map.src);if(!o)return;r={type:"script",source1:i.map.src,width:o.width,height:o.height}}"source"===t&&(r.source1?r.source2||(r.source2=i.map.src):r.source1=i.map.src),"img"!==t||r.poster||(r.poster=i.map.src)}}).parse(t),r.source1=r.source1||r.src||r.data,r.source2=r.source2||"",r.poster=r.poster||"",r}(e,t)},p=tinymce.util.Tools.resolve("tinymce.util.Promise"),m=function(e){return{mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"}[e.toLowerCase().split(".").pop()]||""},g=tinymce.util.Tools.resolve("tinymce.html.Writer"),v=tinymce.util.Tools.resolve("tinymce.html.Schema"),y=a.DOM,b=function(e,t){var n,r,i,o;for(n in t)if(i=""+t[n],e.map[n])for(r=e.length;r--;)(o=e[r]).name===n&&(i?(e.map[n]=i,o.value=i):(delete e.map[n],e.splice(r,1)));else i&&(e.push({name:n,value:i}),e.map[n]=i)},w=function(e,t,n){return function(e){var t=y.createFragment(e);return""!==y.getAttrib(t.firstChild,"data-ephox-embed-iri")}(e)?function(e,t){var n=y.createFragment(e).firstChild;return c.setMaxWidth(n,t.width),c.setMaxHeight(n,t.height),function(e){var t=g();return o(t).parse(e),t.getContent()}(n.outerHTML)}(e,t):function(e,t,n){var r,i=g(),a=0;return o({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(e){i.comment(e)},cdata:function(e){i.cdata(e)},text:function(e,t){i.text(e,t)},start:function(e,o,s){switch(e){case"video":case"object":case"embed":case"img":case"iframe":void 0!==t.height&&void 0!==t.width&&b(o,{width:t.width,height:t.height})}if(n)switch(e){case"video":b(o,{poster:t.poster,src:""}),t.source2&&b(o,{src:""});break;case"iframe":b(o,{src:t.source1});break;case"source":if(++a<=2&&(b(o,{src:t["source"+a],type:t["source"+a+"mime"]}),!t["source"+a]))return;break;case"img":if(!t.poster)return;r=!0}i.start(e,o,s)},end:function(e){if("video"===e&&n)for(var o=1;o<=2;o++)if(t["source"+o]){var s=[];s.map={},a<o&&(b(s,{src:t["source"+o],type:t["source"+o+"mime"]}),i.start("source",s,!0))}if(t.poster&&"object"===e&&n&&!r){var u=[];u.map={},b(u,{src:t.poster,width:t.width,height:t.height}),i.start("img",u,!0)}i.end(e)}},v({})).parse(e),i.getContent()}(e,t,n)},x=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],C={},_=function(e){return function(t){return function(e,t){var i=n.extend({},t);if(!i.source1&&(n.extend(i,h(r(e),i.embed)),!i.source1))return"";i.source2||(i.source2=""),i.poster||(i.poster=""),i.source1=e.convertURL(i.source1,"source"),i.source2=e.convertURL(i.source2,"source"),i.source1mime=m(i.source1),i.source2mime=m(i.source2),i.poster=e.convertURL(i.poster,"poster");var o=function(e){var t=x.filter(function(t){return t.regex.test(e)});return t.length>0?n.extend({},t[0],{url:function(e,t){for(var n=e.regex.exec(t),r=e.url,i=function(e){r=r.replace("$"+e,function(){return n[e]?n[e]:""})},o=0;o<n.length;o++)i(o);return r.replace(/\?$/,"")}(t[0],e)}):null}(i.source1);if(o&&(i.source1=o.url,i.type=o.type,i.allowFullscreen=o.allowFullscreen,i.width=i.width||o.w,i.height=i.height||o.h),i.embed)return w(i.embed,i,!0);var a=s(r(e),i.source1);a&&(i.type="script",i.width=a.width,i.height=a.height);var u=function(e){return e.getParam("audio_template_callback")}(e),l=function(e){return e.getParam("video_template_callback")}(e);return i.width=i.width||300,i.height=i.height||150,n.each(i,function(t,n){i[n]=e.dom.encode(t)}),"iframe"===i.type?function(e){var t=e.allowFullscreen?' allowFullscreen="1"':"";return'<iframe src="'+e.source1+'" width="'+e.width+'" height="'+e.height+'"'+t+"></iframe>"}(i):"application/x-shockwave-flash"===i.source1mime?function(e){var t='<object data="'+e.source1+'" width="'+e.width+'" height="'+e.height+'" type="application/x-shockwave-flash">';return e.poster&&(t+='<img src="'+e.poster+'" width="'+e.width+'" height="'+e.height+'" />'),t+"</object>"}(i):-1!==i.source1mime.indexOf("audio")?function(e,t){return u?u(e):'<audio controls="controls" src="'+e.source1+'">'+(e.source2?'\n<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</audio>"}(i):"script"===i.type?'<script src="'+i.source1+'"><\/script>':function(e,t){return l?l(e):'<video width="'+e.width+'" height="'+e.height+'"'+(e.poster?' poster="'+e.poster+'"':"")+' controls="controls">\n<source src="'+e.source1+'"'+(e.source1mime?' type="'+e.source1mime+'"':"")+" />\n"+(e.source2?'<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</video>"}(i)}(e,t)}},S=function(e,t){var n=function(e){return e.getParam("media_url_resolver")}(e);return n?function(e,t,n){return new p(function(r,i){var o=function(n){return n.html&&(C[e.source1]=n),r({url:e.source1,html:n.html?n.html:t(e)})};C[e.source1]?o(C[e.source1]):n({url:e.source1},o,i)})}(t,_(e),n):function(e,t){return new p(function(n){n({html:t(e),url:e.source1})})}(t,_(e))},k=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},T=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],i=e.find("#constrain")[0];n&&r&&i&&t(n,r,i.checked())},E=function(e,t,n){var r=e.state.get("oldVal"),i=t.state.get("oldVal"),o=e.value(),a=t.value();n&&r&&i&&o&&a&&(o!==r?(a=Math.round(o/r*a),isNaN(a)||t.value(a)):(o=Math.round(a/i*o),isNaN(o)||e.value(o))),k(e,t)},N=function(e){T(e,E)},A=N,R=t.ie&&t.ie<=8?"onChange":"onInput",O=function(e){return function(t){var n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})}},D=function(e,t){return function(i){var o=i.html,a=e.find("#embed")[0],s=n.extend(h(r(t),o),{source1:i.url});e.fromJSON(s),a&&(a.value(o),A(e))}},P=function(e,t){var n=e.dom.select("img[data-mce-object]");e.insertContent(t),function(e,t){var n,r,i=e.dom.select("img[data-mce-object]");for(n=0;n<t.length;n++)for(r=i.length-1;r>=0;r--)t[n]===i[r]&&i.splice(r,1);e.selection.select(i[0])}(e,n),e.nodeChanged()},I=function(e){var t,i,o=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout(function(){S(e,t.toJSON()).then(D(t,e)).catch(O(e))},1)},onchange:function(r){S(e,t.toJSON()).then(D(t,e)).catch(O(e)),function(e,t){n.each(t,function(t,n){e.find("#"+n).value(t)})}(t,r.meta)},onbeforecall:function(e){e.meta=t.toJSON()}}],a=[];if(function(e){return e.getParam("media_alt_source",!0)}(e)&&a.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),function(e){return e.getParam("media_poster",!0)}(e)&&a.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),function(e){return e.getParam("media_dimensions",!0)}(e)){var s=function(e){var t=function(){e(function(e){N(e)})};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}}(function(e){e(t),i=t.toJSON(),t.find("#embed").value(w(i.embed,i))});o.push(s)}i=function(e){var t=e.selection.getNode(),n=t.getAttribute("data-ephox-embed-iri");return n?{source1:n,"data-ephox-embed-iri":n,width:c.getMaxWidth(t),height:c.getMaxHeight(t)}:t.getAttribute("data-mce-object")?h(r(e),e.serializer.serialize(t,{selection:!0})):{}}(e);var u={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:function(e){var t=e.selection.getNode();if(t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri"))return e.selection.getContent()}(e),multiline:!0,rows:5,label:"Source"};u[R]=function(){i=n.extend({},h(r(e),this.value())),this.parent().parent().fromJSON(i)};var l=[{title:"General",type:"form",items:o},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},u]}];a.length>0&&l.push({title:"Advanced",type:"form",items:a}),function(e){T(e,k)}(t=e.windowManager.open({title:"Insert/edit media",data:i,bodyType:"tabpanel",body:l,onSubmit:function(){A(t),function(e,t){var n=e.toJSON();n.embed=w(n.embed,n),n.embed&&function(e){return C.hasOwnProperty(e)}(n.source1)?P(t,n.embed):S(t,n).then(function(e){P(t,e.html)}).catch(O(t))}(t,e)}}))},B=tinymce.util.Tools.resolve("tinymce.html.Node"),M=function(e,t){if(!1===function(e){return e.getParam("media_filter_html",!0)}(e))return t;var n,r=g();return o({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(e){r.comment(e)},cdata:function(e){r.cdata(e)},text:function(e,t){r.text(e,t)},start:function(t,i,o){if(n=!0,"script"!==t&&"noscript"!==t){for(var a=0;a<i.length;a++){if(0===i[a].name.indexOf("on"))return;"style"===i[a].name&&(i[a].value=e.dom.serializeStyle(e.dom.parseStyle(i[a].value),t))}r.start(t,i,o),n=!1}},end:function(e){n||r.end(e)}},v({})).parse(t),r.getContent()},L=function(e,n){var r,i=n.name;return(r=new B("img",1)).shortEnded=!0,F(e,n,r),r.attr({width:n.attr("width")||"300",height:n.attr("height")||("audio"===i?"30":"150"),style:n.attr("style"),src:t.transparentSrc,"data-mce-object":i,class:"mce-object mce-object-"+i}),r},H=function(e,t){var n,r,i,o=t.name;return(n=new B("span",1)).attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":o,class:"mce-preview-object mce-object-"+o}),F(e,t,n),(r=new B(o,1)).attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),style:t.attr("style"),class:t.attr("class"),width:t.attr("width"),height:t.attr("height"),frameborder:"0"}),(i=new B("span",1)).attr("class","mce-shim"),n.append(r),n.append(i),n},F=function(e,t,n){var r,i,o,a,s;for(a=(o=t.attributes).length;a--;)r=o[a].name,i=o[a].value,"width"!==r&&"height"!==r&&"style"!==r&&("data"!==r&&"src"!==r||(i=e.convertURL(i,r)),n.attr("data-mce-p-"+r,i));(s=t.firstChild&&t.firstChild.value)&&(n.attr("data-mce-html",escape(M(e,s))),n.firstChild=null)},z=function(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri"))return!0;return!1},j=function(e){return function(n){for(var o,a,u=n.length;u--;)(o=n[u]).parent&&(o.parent.attr("data-mce-object")||("script"!==o.name||(a=s(r(e),o.attr("src"))))&&(a&&(a.width&&o.attr("width",a.width.toString()),a.height&&o.attr("height",a.height.toString())),"iframe"===o.name&&i(e)&&t.ceFalse?z(o)||o.replace(H(e,o)):z(o)||o.replace(L(e,o))))}};e.add("media",function(e){return function(e){e.addCommand("mceMedia",function(){I(e)})}(e),function(e){e.addButton("media",{tooltip:"Insert/edit media",cmd:"mceMedia",stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),e.addMenuItem("media",{icon:"media",text:"Media",cmd:"mceMedia",context:"insert",prependToContext:!0})}(e),function(e){e.on("ResolveName",function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)})}(e),function(e){e.on("preInit",function(){var t=e.schema.getSpecialElements();n.each("video audio iframe object".split(" "),function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")});var r=e.schema.getBoolAttrs();n.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){r[e]={}}),e.parser.addNodeFilter("iframe,video,audio,object,embed,script",j(e)),e.serializer.addAttributeFilter("data-mce-object",function(t,n){for(var r,i,o,a,s,u,l,c,f=t.length;f--;)if((r=t[f]).parent){for(l=r.attr(n),i=new B(l,1),"audio"!==l&&"script"!==l&&((c=r.attr("class"))&&-1!==c.indexOf("mce-preview-object")?i.attr({width:r.firstChild.attr("width"),height:r.firstChild.attr("height")}):i.attr({width:r.attr("width"),height:r.attr("height")})),i.attr({style:r.attr("style")}),o=(a=r.attributes).length;o--;){var d=a[o].name;0===d.indexOf("data-mce-p-")&&i.attr(d.substr(11),a[o].value)}"script"===l&&i.attr("type","text/javascript"),(s=r.attr("data-mce-html"))&&((u=new B("#text",3)).raw=!0,u.value=M(e,unescape(s)),i.append(u)),r.replace(i)}})}),e.on("setContent",function(){e.$("span.mce-preview-object").each(function(t,n){var r=e.$(n);0===r.find("span.mce-shim",n).length&&r.append('<span class="mce-shim"></span>')})})}(e),function(e){e.on("click keyup",function(){var t=e.selection.getNode();t&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")}),e.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");"audio"!==t&&"script"!==t||e.preventDefault()}),e.on("objectResized",function(e){var t,n=e.target;n.getAttribute("data-mce-object")&&(t=n.getAttribute("data-mce-html"))&&(t=unescape(t),n.setAttribute("data-mce-html",escape(w(t,{width:e.width,height:e.height}))))})}(e),function(e){return{showDialog:function(){I(e)}}}(e)})}()},function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools");function r(e){return e&&1===e.nodeType&&"false"===e.contentEditable}var i=function(e,t,n,i,o){var a,s,u,l,c,f,d=[],h=0;function p(e,t){if(t=t||0,!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");var n=e.index;if(t>0){var r=e[t];if(!r)throw new Error("Invalid capture group");n+=e[0].indexOf(r),e[0]=r}return[n,n+e[0].length,[e[0]]]}if(u=t.ownerDocument,l=o.getBlockElements(),c=o.getWhiteSpaceElements(),f=o.getShortEndedElements(),s=function e(t){var n;if(3===t.nodeType)return t.data;if(c[t.nodeName]&&!l[t.nodeName])return"";if(n="",r(t))return"\n";if((l[t.nodeName]||f[t.nodeName])&&(n+="\n"),t=t.firstChild)do{n+=e(t)}while(t=t.nextSibling);return n}(t)){if(e.global)for(;a=e.exec(s);)d.push(p(a,i));else a=s.match(e),d.push(p(a,i));return d.length&&(h=d.length,function(e,t,n){var i,o,a,s,u=[],d=0,h=e,p=t.shift(),m=0;e:for(;;){if((l[h.nodeName]||f[h.nodeName]||r(h))&&d++,3===h.nodeType&&(!o&&h.length+d>=p[1]?(o=h,s=p[1]-d):i&&u.push(h),!i&&h.length+d>p[0]&&(i=h,a=p[0]-d),d+=h.length),i&&o){if(h=n({startNode:i,startNodeIndex:a,endNode:o,endNodeIndex:s,innerNodes:u,match:p[2],matchIndex:m}),d-=o.length-s,i=null,o=null,u=[],m++,!(p=t.shift()))break}else if(c[h.nodeName]&&!l[h.nodeName]||!h.firstChild){if(h.nextSibling){h=h.nextSibling;continue}}else if(!r(h)){h=h.firstChild;continue}for(;;){if(h.nextSibling){h=h.nextSibling;break}if(h.parentNode===e)break e;h=h.parentNode}}}(t,d,function(e){var t;if("function"!=typeof e){var n=e.nodeType?e:u.createElement(e);t=function(e,t){var r=n.cloneNode(!1);return r.setAttribute("data-mce-index",t),e&&r.appendChild(u.createTextNode(e)),r}}else t=e;return function(e){var n,r,i,o=e.startNode,a=e.endNode,s=e.matchIndex;if(o===a){var l=o;i=l.parentNode,e.startNodeIndex>0&&(n=u.createTextNode(l.data.substring(0,e.startNodeIndex)),i.insertBefore(n,l));var c=t(e.match[0],s);return i.insertBefore(c,l),e.endNodeIndex<l.length&&(r=u.createTextNode(l.data.substring(e.endNodeIndex)),i.insertBefore(r,l)),l.parentNode.removeChild(l),c}n=u.createTextNode(o.data.substring(0,e.startNodeIndex)),r=u.createTextNode(a.data.substring(e.endNodeIndex));for(var f=t(o.data.substring(e.startNodeIndex),s),d=[],h=0,p=e.innerNodes.length;h<p;++h){var m=e.innerNodes[h],g=t(m.data,s);m.parentNode.replaceChild(g,m),d.push(g)}var v=t(a.data.substring(0,e.endNodeIndex),s);return(i=o.parentNode).insertBefore(n,o),i.insertBefore(f,o),i.removeChild(o),(i=a.parentNode).insertBefore(v,a),i.insertBefore(r,a),i.removeChild(a),v}}(n))),h}},o=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},a=function(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)},s=function(e,t){var r,i=[];if((r=n.toArray(e.getBody().getElementsByTagName("span"))).length)for(var a=0;a<r.length;a++){var s=o(r[a]);null!==s&&s.length&&s===t.toString()&&i.push(r[a])}return i},u=function(e,t,n){var r=t.get(),i=e.dom;(n=!1!==n)?r++:r--,i.removeClass(s(e,t.get()),"mce-match-marker-selected");var o=s(e,r);return o.length?(i.addClass(s(e,r),"mce-match-marker-selected"),e.selection.scrollIntoView(o[0]),r):-1},l=function(e,t){var n=t.parentNode;e.remove(t),e.isEmpty(n)&&e.remove(n)},c=function(e,t){var n=u(e,t,!0);-1!==n&&t.set(n)},f=function(e,t){var n=u(e,t,!1);-1!==n&&t.set(n)},d=function(e){var t=o(e);return null!==t&&t.length>0},h=function(e,t,r){var i,s,u,l;for(s=n.toArray(e.getBody().getElementsByTagName("span")),i=0;i<s.length;i++){var c=o(s[i]);null!==c&&c.length&&(c===t.get().toString()&&(u||(u=s[i].firstChild),l=s[i].firstChild),a(s[i]))}if(u&&l){var f=e.dom.createRng();return f.setStart(u,0),f.setEnd(l,l.data.length),!1!==r&&e.selection.setRng(f),f}},p=function(e,t){return s(e,t.get()+1).length>0},m=function(e,t){return s(e,t.get()-1).length>0},g={done:h,find:function(e,t,n,r,o){n=(n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).replace(/\s/g,"\\s"),n=o?"\\b"+n+"\\b":n;var a=function(e,t,n){var r,o;return(o=e.dom.create("span",{"data-mce-bogus":1})).className="mce-match-marker",r=e.getBody(),h(e,t,!1),i(n,r,o,!1,e.schema)}(e,t,new RegExp(n,r?"g":"gi"));return a&&(t.set(-1),t.set(u(e,t,!0))),a},next:c,prev:f,replace:function(e,t,r,i,s){var u,h,g,v,y,b,w=t.get();for(i=!1!==i,g=e.getBody(),h=n.grep(n.toArray(g.getElementsByTagName("span")),d),u=0;u<h.length;u++){var x=o(h[u]);if(v=y=parseInt(x,10),s||v===t.get()){for(r.length?(h[u].firstChild.nodeValue=r,a(h[u])):l(e.dom,h[u]);h[++u];){if((v=parseInt(o(h[u]),10))!==y){u--;break}l(e.dom,h[u])}i&&w--}else y>t.get()&&h[u].setAttribute("data-mce-index",y-1)}return t.set(w),i?(b=p(e,t),c(e,t)):(b=m(e,t),f(e,t)),!s&&b},hasNext:p,hasPrev:m},v=function(e,t){var r,i={};function o(){s.statusbar.find("#next").disabled(!1===g.hasNext(e,t)),s.statusbar.find("#prev").disabled(!1===g.hasPrev(e,t))}function a(){e.windowManager.alert("Could not find the specified string.",function(){s.find("#find")[0].focus()})}e.undoManager.add(),r=n.trim(e.selection.getContent({format:"text"}));var s=e.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){e.focus(),g.done(e,t),e.undoManager.add()},onSubmit:function(n){var r,u,l,c;return n.preventDefault(),u=s.find("#case").checked(),c=s.find("#words").checked(),(l=s.find("#find").value()).length?i.text===l&&i.caseState===u&&i.wholeWord===c?g.hasNext(e,t)?(g.next(e,t),void o()):void a():((r=g.find(e,t,l,u,c))||a(),s.statusbar.items().slice(1).disabled(0===r),o(),void(i={text:l,caseState:u,wholeWord:c})):(g.done(e,t,!1),void s.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){s.submit()}},{text:"Replace",disabled:!0,onclick:function(){g.replace(e,t,s.find("#replace").value())||(s.statusbar.items().slice(1).disabled(!0),t.set(-1),i={})}},{text:"Replace all",disabled:!0,onclick:function(){g.replace(e,t,s.find("#replace").value(),!0,!0),s.statusbar.items().slice(1).disabled(!0),i={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){g.prev(e,t),o()}},{text:"Next",name:"next",disabled:!0,onclick:function(){g.next(e,t),o()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:r},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})},y=function(e,t){return function(){v(e,t)}};t.add("searchreplace",function(t){var n=e(-1);return function(e,t){e.addCommand("SearchReplace",function(){v(e,t)})}(t,n),function(e,t){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:y(e,t),separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",onclick:y(e,t)}),e.shortcuts.add("Meta+F","",y(e,t))}(t,n),function(e,t){return{done:function(n){return g.done(e,t,n)},find:function(n,r,i){return g.find(e,t,n,r,i)},next:function(){return g.next(e,t)},prev:function(){return g.prev(e,t)},replace:function(n,r,i){return g.replace(e,t,n,r,i)}}}(t,n)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),n=function(e){return e.getParam("code_dialog_height",Math.min(t.DOM.getViewPort().h-200,500))},r=function(e){var t=function(e){return e.getParam("code_dialog_width",600)}(e),r=n(e);e.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:t,minHeight:r,spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(t){!function(e,t){e.focus(),e.undoManager.transact(function(){e.setContent(t)}),e.selection.setCursorLocation(),e.nodeChanged()}(e,t.data.code)}}).find("#code").value(function(e){return e.getContent({source_view:!0})}(e))};e.add("code",function(e){return function(e){e.addCommand("mceCodeEditor",function(){r(e)})}(e),function(e){e.addButton("code",{icon:"code",tooltip:"Source code",onclick:function(){r(e)}}),e.addMenuItem("code",{icon:"code",text:"Source code",onclick:function(){r(e)}})}(e),{}})}()},function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(e){return{isFullscreen:function(){return null!==e.get()}}},r=function(e,t){e.fire("FullscreenStateChanged",{state:t})},i=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils").DOM,o=function(e,t){e.addCommand("mceFullScreen",function(){!function(e,t){var n,o,a,s,u,l,c=document.body,f=document.documentElement,d=t.get(),h=function(){var e,t,n,r;i.setStyle(a,"height",(n=window,r=document.body,r.offsetWidth&&(e=r.offsetWidth,t=r.offsetHeight),n.innerWidth&&n.innerHeight&&(e=n.innerWidth,t=n.innerHeight),{w:e,h:t}).h-(o.clientHeight-a.clientHeight))},p=function(){i.unbind(window,"resize",h)};if(n=(o=e.getContainer()).style,s=(a=e.getContentAreaContainer().firstChild).style,d)s.width=d.iframeWidth,s.height=d.iframeHeight,d.containerWidth&&(n.width=d.containerWidth),d.containerHeight&&(n.height=d.containerHeight),i.removeClass(c,"mce-fullscreen"),i.removeClass(f,"mce-fullscreen"),i.removeClass(o,"mce-fullscreen"),u=d.scrollPos,window.scrollTo(u.x,u.y),i.unbind(window,"resize",d.resizeHandler),e.off("remove",d.removeHandler),t.set(null),r(e,!1);else{var m={scrollPos:(l=i.getViewPort(),{x:l.x,y:l.y}),containerWidth:n.width,containerHeight:n.height,iframeWidth:s.width,iframeHeight:s.height,resizeHandler:h,removeHandler:p};s.width=s.height="100%",n.width=n.height="",i.addClass(c,"mce-fullscreen"),i.addClass(f,"mce-fullscreen"),i.addClass(o,"mce-fullscreen"),i.bind(window,"resize",h),e.on("remove",p),h(),t.set(m),r(e,!0)}}(e,t)})},a=function(e){return function(t){var n=t.control;e.on("FullscreenStateChanged",function(e){n.active(e.state)})}};t.add("fullscreen",function(t){var r=e(null);return t.settings.inline?n(r):(o(t,r),function(e){e.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,cmd:"mceFullScreen",onPostRender:a(e),context:"view"}),e.addButton("fullscreen",{active:!1,tooltip:"Fullscreen",cmd:"mceFullScreen",onPostRender:a(e)})}(t),t.addShortcut("Ctrl+Shift+F","","mceFullScreen"),n(r))})}()},function(e,t){!function(){"use strict";var e,t,n=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=function(e){return function(){return e}},i={noop:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},noarg:function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e()}},compose:function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e(t.apply(null,arguments))}},constant:r,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];var a=r.concat(i);return e.apply(null,a)}},not:function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,arguments)}},die:function(e){return function(){throw new Error(e)}},apply:function(e){return e()},call:function(e){e()},never:r(!1),always:r(!0)},o=i.never,a=i.always,s=function(){return u},u=function(){var e=function(e){return e.isNone()},t=function(e){return e()},n=function(e){return e},r={fold:function(e,t){return e()},is:o,isSome:o,isNone:a,getOr:n,getOrThunk:t,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:n,orThunk:t,map:s,ap:s,each:function(){},bind:s,flatten:s,exists:o,forall:a,filter:s,equals:e,equals_:e,toArray:function(){return[]},toString:i.constant("none()")};return Object.freeze&&Object.freeze(r),r}(),l=function(e){var t=function(){return e},n=function(){return i},r=function(t){return t(e)},i={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:a,isNone:o,getOr:t,getOrThunk:t,getOrDie:t,or:n,orThunk:n,map:function(t){return l(t(e))},ap:function(t){return t.fold(s,function(t){return l(t(e))})},each:function(t){t(e)},bind:r,flatten:t,exists:r,forall:r,filter:function(t){return t(e)?i:u},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(o,function(t){return n(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return i},c={some:l,none:s,from:function(e){return null===e||void 0===e?u:l(e)}},f=function(e){return function(t){return function(e){if(null===e)return"null";var t=typeof e;return"object"===t&&Array.prototype.isPrototypeOf(e)?"array":"object"===t&&String.prototype.isPrototypeOf(e)?"string":t}(t)===e}},d={isString:f("string"),isObject:f("object"),isArray:f("array"),isNull:f("null"),isBoolean:f("boolean"),isUndefined:f("undefined"),isFunction:f("function"),isNumber:f("number")},h=void 0===(e=Array.prototype.indexOf)?function(e,t){return w(e,t)}:function(t,n){return e.call(t,n)},p=function(e,t){return h(e,t)>-1},m=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;i++){var o=e[i];r[i]=t(o,i,e)}return r},g=function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n,e)},v=function(e,t){for(var n=e.length-1;n>=0;n--)t(e[n],n,e)},y=function(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];t(o,r,e)&&n.push(o)}return n},b=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n,e))return c.some(n);return c.none()},w=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},x=Array.prototype.push,C=function(e){for(var t=[],n=0,r=e.length;n<r;++n){if(!Array.prototype.isPrototypeOf(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);x.apply(t,e[n])}return t},_=function(e,t){for(var n=0,r=e.length;n<r;++n)if(!0!==t(e[n],n,e))return!1;return!0},S=Array.prototype.slice,k=d.isFunction(Array.from)?Array.from:function(e){return S.call(e)},T={map:m,each:g,eachr:v,partition:function(e,t){for(var n=[],r=[],i=0,o=e.length;i<o;i++){var a=e[i];(t(a,i,e)?n:r).push(a)}return{pass:n,fail:r}},filter:y,groupBy:function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],i=[],o=0,a=e.length;o<a;o++){var s=e[o],u=t(s);u!==n&&(r.push(i),i=[]),n=u,i.push(s)}return 0!==i.length&&r.push(i),r},indexOf:function(e,t){var n=h(e,t);return-1===n?c.none():c.some(n)},foldr:function(e,t,n){return v(e,function(e){n=t(n,e)}),n},foldl:function(e,t,n){return g(e,function(e){n=t(n,e)}),n},find:function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t(i,n,e))return c.some(i)}return c.none()},findIndex:b,flatten:C,bind:function(e,t){var n=m(e,t);return C(n)},forall:_,exists:function(e,t){return b(e,t).isSome()},contains:p,equal:function(e,t){return e.length===t.length&&_(e,function(e,n){return e===t[n]})},reverse:function(e){var t=S.call(e,0);return t.reverse(),t},chunk:function(e,t){for(var n=[],r=0;r<e.length;r+=t){var i=e.slice(r,r+t);n.push(i)}return n},difference:function(e,t){return y(e,function(e){return!p(t,e)})},mapToObject:function(e,t){for(var n={},r=0,i=e.length;r<i;r++){var o=e[r];n[String(o)]=t(o,r)}return n},pure:function(e){return[e]},sort:function(e,t){var n=S.call(e,0);return n.sort(t),n},range:function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},head:function(e){return 0===e.length?c.none():c.some(e[0])},last:function(e){return 0===e.length?c.none():c.some(e[e.length-1])},from:k},E=void 0===(t=Object.keys)?function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}:t,N=function(e,t){for(var n=E(e),r=0,i=n.length;r<i;r++){var o=n[r];t(e[o],o,e)}},A=function(e,t){var n={};return N(e,function(r,i){var o=t(r,i,e);n[o.k]=o.v}),n},R=function(e,t){var n=[];return N(e,function(e,r){n.push(t(e,r))}),n},O=function(e){return R(e,function(e){return e})},D={bifilter:function(e,t){var n={},r={};return N(e,function(e,i){(t(e,i)?n:r)[i]=e}),{t:n,f:r}},each:N,map:function(e,t){return A(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},mapToArray:R,tupleMap:A,find:function(e,t){for(var n=E(e),r=0,i=n.length;r<i;r++){var o=n[r],a=e[o];if(t(a,o,e))return c.some(a)}return c.none()},keys:E,values:O,size:function(e){return O(e).length}},P=function(e){return e.slice(0).sort()},I=function(e,t){throw new Error("All required keys ("+P(e).join(", ")+") were not specified. Specified keys were: "+P(t).join(", ")+".")},B=function(e){throw new Error("Unsupported keys for object: "+P(e).join(", "))},M=function(e,t){if(!d.isArray(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");T.each(t,function(t){if(!d.isString(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")})},L=function(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+P(e).join(", ")+") were not.")},H=function(e){var t=P(e);T.find(t,function(e,n){return n<t.length-1&&e===t[n+1]}).each(function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")})},F={immutable:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+t.length+" arguments");var r={};return T.each(e,function(e,n){r[e]=i.constant(t[n])}),r}},immutableBag:function(e,t){var n=e.concat(t);if(0===n.length)throw new Error("You must specify at least one required or optional field.");return M("required",e),M("optional",t),H(n),function(r){var o=D.keys(r);T.forall(e,function(e){return T.contains(o,e)})||I(e,o);var a=T.filter(o,function(e){return!T.contains(n,e)});a.length>0&&B(a);var s={};return T.each(e,function(e){s[e]=i.constant(r[e])}),T.each(t,function(e){s[e]=i.constant(Object.prototype.hasOwnProperty.call(r,e)?c.some(r[e]):c.none())}),s}}},z=F.immutable("width","height"),j=F.immutable("rows","columns"),W=F.immutable("row","column"),U=F.immutable("x","y"),$=F.immutable("element","rowspan","colspan"),q=F.immutable("element","rowspan","colspan","isNew"),V={dimensions:z,grid:j,address:W,coords:U,extended:F.immutable("element","rowspan","colspan","row","column"),detail:$,detailnew:q,rowdata:F.immutable("element","cells","section"),elementnew:F.immutable("element","isNew"),rowdatanew:F.immutable("element","cells","section","isNew"),rowcells:F.immutable("cells","section"),rowdetails:F.immutable("details","section"),bounds:F.immutable("startRow","startCol","finishRow","finishCol")},X=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:i.constant(e)}},Y={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return X(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return X(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return X(n)},fromDom:X,fromPoint:function(e,t,n){return c.from(e.dom().elementFromPoint(t,n)).map(X)}},K=function(e){return 1!==e.nodeType&&9!==e.nodeType||0===e.childElementCount},J={all:function(e,t){var n=void 0===t?document:t.dom();return K(n)?[]:T.map(n.querySelectorAll(e),Y.fromDom)},is:function(e,t){var n=e.dom();if(1!==n.nodeType)return!1;if(void 0!==n.matches)return n.matches(t);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(t);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(t);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},one:function(e,t){var n=void 0===t?document:t.dom();return K(n)?c.none():c.from(n.querySelector(e)).map(Y.fromDom)}},G=function(e,t){var n=[],r=function(e){return n.push(e),t(e)},i=t(e);do{i=i.bind(r)}while(i.isSome());return n},Q="undefined"!=typeof window?window:Function("return this;")(),Z=function(e,t){return function(e,t){for(var n=void 0!==t&&null!==t?t:Q,r=0;r<e.length&&void 0!==n&&null!==n;++r)n=n[e[r]];return n}(e.split("."),t)},ee=function(){return function(e,t){var n=function(e,t){return Z(e,t)}(e,t);if(void 0===n||null===n)throw e+" not available on this browser";return n}("Node")},te=function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(null,arguments)),t}},ne=function(){return re(0,0)},re=function(e,t){return{major:e,minor:t}},ie=function(e,t){var n=String(t).toLowerCase();return 0===e.length?ne():function(e,t){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}}(e,t);if(!n)return{major:0,minor:0};var r=function(e){return Number(t.replace(n,"$"+e))};return re(r(1),r(2))}(e,n)},oe=ne,ae=function(e,t){return function(){return t===e}},se=function(e){var t=e.current;return{current:t,version:e.version,isEdge:ae("Edge",t),isChrome:ae("Chrome",t),isIE:ae("IE",t),isOpera:ae("Opera",t),isFirefox:ae("Firefox",t),isSafari:ae("Safari",t)}},ue=function(){return se({current:void 0,version:oe()})},le=se,ce=(i.constant("Edge"),i.constant("Chrome"),i.constant("IE"),i.constant("Opera"),i.constant("Firefox"),i.constant("Safari"),function(e,t){return function(){return t===e}}),fe=function(e){var t=e.current;return{current:t,version:e.version,isWindows:ce("Windows",t),isiOS:ce("iOS",t),isAndroid:ce("Android",t),isOSX:ce("OSX",t),isLinux:ce("Linux",t),isSolaris:ce("Solaris",t),isFreeBSD:ce("FreeBSD",t)}},de=function(){return fe({current:void 0,version:oe()})},he=fe,pe=(i.constant("Windows"),i.constant("iOS"),i.constant("Android"),i.constant("Linux"),i.constant("OSX"),i.constant("Solaris"),i.constant("FreeBSD"),function(e,t){var n=String(t).toLowerCase();return T.find(e,function(e){return e.search(n)})}),me=function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t},ge=function(e,t){return me(e,t,e.length-t.length)},ve=ge,ye=function(e,t){return-1!==e.indexOf(t)},be=function(e){return e.replace(/^\s+|\s+$/g,"")},we=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,xe=function(e){return function(t){return ye(t,e)}},Ce=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return ye(e,"edge/")&&ye(e,"chrome")&&ye(e,"safari")&&ye(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,we],search:function(e){return ye(e,"chrome")&&!ye(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return ye(e,"msie")||ye(e,"trident")}},{name:"Opera",versionRegexes:[we,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:xe("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:xe("firefox")},{name:"Safari",versionRegexes:[we,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(ye(e,"safari")||ye(e,"mobile/"))&&ye(e,"applewebkit")}}],_e=[{name:"Windows",search:xe("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return ye(e,"iphone")||ye(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:xe("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:xe("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:xe("linux"),versionRegexes:[]},{name:"Solaris",search:xe("sunos"),versionRegexes:[]},{name:"FreeBSD",search:xe("freebsd"),versionRegexes:[]}],Se={browsers:i.constant(Ce),oses:i.constant(_e)},ke=function(e){var t=Se.browsers(),n=Se.oses(),r=function(e,t){return pe(e,t).map(function(e){var n=ie(e.versionRegexes,t);return{current:e.name,version:n}})}(t,e).fold(ue,le),o=function(e,t){return pe(e,t).map(function(e){var n=ie(e.versionRegexes,t);return{current:e.name,version:n}})}(n,e).fold(de,he);return{browser:r,os:o,deviceType:function(e,t,n){var r=e.isiOS()&&!0===/ipad/i.test(n),o=e.isiOS()&&!r,a=e.isAndroid()&&3===e.version.major,s=e.isAndroid()&&4===e.version.major,u=r||a||s&&!0===/mobile/i.test(n),l=e.isiOS()||e.isAndroid(),c=l&&!u,f=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n);return{isiPad:i.constant(r),isiPhone:i.constant(o),isTablet:i.constant(u),isPhone:i.constant(c),isTouch:i.constant(l),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:i.constant(f)}}(o,r,e)}},Te={detect:te(function(){var e=navigator.userAgent;return ke(e)})},Ee=function(e,t){return e.dom()===t.dom()},Ne=Te.detect().browser.isIE()?function(e,t){return function(e,t){return function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)}(e,t,ee().DOCUMENT_POSITION_CONTAINED_BY)}(e.dom(),t.dom())}:function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},Ae={eq:Ee,isEqualNode:function(e,t){return e.dom().isEqualNode(t.dom())},member:function(e,t){return T.exists(t,i.curry(Ee,e))},contains:Ne,is:J.is},Re=function(e){return Y.fromDom(e.dom().ownerDocument)},Oe=function(e){var t=e.dom();return c.from(t.parentNode).map(Y.fromDom)},De=function(e){var t=e.dom();return c.from(t.previousSibling).map(Y.fromDom)},Pe=function(e){var t=e.dom();return c.from(t.nextSibling).map(Y.fromDom)},Ie=function(e){var t=e.dom();return T.map(t.childNodes,Y.fromDom)},Be=function(e,t){var n=e.dom().childNodes;return c.from(n[t]).map(Y.fromDom)},Me=F.immutable("element","offset"),Le={owner:Re,defaultView:function(e){var t=e.dom().ownerDocument.defaultView;return Y.fromDom(t)},documentElement:function(e){var t=Re(e);return Y.fromDom(t.dom().documentElement)},parent:Oe,findIndex:function(e){return Oe(e).bind(function(t){var n=Ie(t);return T.findIndex(n,function(t){return Ae.eq(e,t)})})},parents:function(e,t){for(var n=d.isFunction(t)?t:i.constant(!1),r=e.dom(),o=[];null!==r.parentNode&&void 0!==r.parentNode;){var a=r.parentNode,s=Y.fromDom(a);if(o.push(s),!0===n(s))break;r=a}return o},siblings:function(e){return Oe(e).map(Ie).map(function(t){return T.filter(t,function(t){return!Ae.eq(e,t)})}).getOr([])},prevSibling:De,offsetParent:function(e){var t=e.dom();return c.from(t.offsetParent).map(Y.fromDom)},prevSiblings:function(e){return T.reverse(G(e,De))},nextSibling:Pe,nextSiblings:function(e){return G(e,Pe)},children:Ie,child:Be,firstChild:function(e){return Be(e,0)},lastChild:function(e){return Be(e,e.dom().childNodes.length-1)},childNodesCount:function(e){return e.dom().childNodes.length},hasChildNodes:function(e){return e.dom().hasChildNodes()},leaf:function(e,t){var n=Ie(e);return n.length>0&&t<n.length?Me(n[t],0):Me(e,t)}},He=function(e,t,n){return T.bind(Le.children(e),function(e){return J.is(e,t)?n(e)?[e]:[]:He(e,t,n)})},Fe={firstLayer:function(e,t){return He(e,t,i.constant(!0))},filterFirstLayer:He},ze=function(e){return e.dom().nodeName.toLowerCase()},je=function(e){return e.dom().nodeType},We=function(e){return function(t){return je(t)===e}},Ue=We(1),$e=We(3),qe=We(9),Ve={name:ze,type:je,value:function(e){return e.dom().nodeValue},isElement:Ue,isText:$e,isDocument:qe,isComment:function(e){return 8===je(e)||"#comment"===ze(e)}},Xe=function(e,t,n){if(!(d.isString(n)||d.isBoolean(n)||d.isNumber(n)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Ye=function(e,t,n){Xe(e.dom(),t,n)},Ke=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},Je=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},Ge={clone:function(e){return T.foldl(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},set:Ye,setAll:function(e,t){var n=e.dom();D.each(t,function(e,t){Xe(n,t,e)})},get:Ke,has:Je,remove:function(e,t){e.dom().removeAttribute(t)},hasNone:function(e){var t=e.dom().attributes;return void 0===t||null===t||0===t.length},transfer:function(e,t,n){Ve.isElement(e)&&Ve.isElement(t)&&T.each(n,function(n){!function(e,t,n){Je(e,n)&&!Je(t,n)&&Ye(t,n,Ke(e,n))}(e,t,n)})}},Qe=te(function(){return Ze(Y.fromDom(document))}),Ze=function(e){var t=e.dom().body;if(null===t||void 0===t)throw"Body is not available yet";return Y.fromDom(t)},et={body:Qe,getBody:Ze,inBody:function(e){var t=Ve.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)}},tt=function(e,t){var n=[];return T.each(Le.children(e),function(e){t(e)&&(n=n.concat([e])),n=n.concat(tt(e,t))}),n},nt={all:function(e){return tt(et.body(),e)},ancestors:function(e,t,n){return T.filter(Le.parents(e,n),t)},siblings:function(e,t){return T.filter(Le.siblings(e),t)},children:function(e,t){return T.filter(Le.children(e),t)},descendants:tt},rt={all:function(e){return J.all(e)},ancestors:function(e,t,n){return nt.ancestors(e,function(e){return J.is(e,t)},n)},siblings:function(e,t){return nt.siblings(e,function(e){return J.is(e,t)})},children:function(e,t){return nt.children(e,function(e){return J.is(e,t)})},descendants:function(e,t){return J.all(t,e)}};function it(e,t,n,r,i){return e(n,r)?c.some(n):d.isFunction(i)&&i(n)?c.none():t(n,r,i)}var ot=function(e,t,n){for(var r=e.dom(),o=d.isFunction(n)?n:i.constant(!1);r.parentNode;){r=r.parentNode;var a=Y.fromDom(r);if(t(a))return c.some(a);if(o(a))break}return c.none()},at=function(e,t){return T.find(e.dom().childNodes,i.compose(t,Y.fromDom)).map(Y.fromDom)},st=function(e,t){var n=function(e){for(var r=0;r<e.childNodes.length;r++){if(t(Y.fromDom(e.childNodes[r])))return c.some(Y.fromDom(e.childNodes[r]));var i=n(e.childNodes[r]);if(i.isSome())return i}return c.none()};return n(e.dom())},ut={first:function(e){return st(et.body(),e)},ancestor:ot,closest:function(e,t,n){return it(function(e){return t(e)},ot,e,t,n)},sibling:function(e,t){var n=e.dom();return n.parentNode?at(Y.fromDom(n.parentNode),function(n){return!Ae.eq(e,n)&&t(n)}):c.none()},child:at,descendant:st},lt=function(e,t,n){return ut.ancestor(e,function(e){return J.is(e,t)},n)},ct={first:function(e){return J.one(e)},ancestor:lt,sibling:function(e,t){return ut.sibling(e,function(e){return J.is(e,t)})},child:function(e,t){return ut.child(e,function(e){return J.is(e,t)})},descendant:function(e,t){return J.one(t,e)},closest:function(e,t,n){return it(J.is,lt,e,t,n)}},ft=function(e,t,n){var r=void 0!==n?n:i.constant(!1);return r(t)?c.none():T.contains(e,Ve.name(t))?c.some(t):ct.ancestor(t,e.join(","),function(e){return J.is(e,"table")||r(e)})},dt=function(e,t){return Le.parent(t).map(function(t){return rt.children(t,e)})},ht=function(e,t){return ft(["td","th"],e,t)},pt=function(e){return Fe.firstLayer(e,"th,td")},mt=(i.curry(dt,"th,td"),function(e,t){return ct.closest(e,"table",t)}),gt=function(e){return Fe.firstLayer(e,"tr")},vt=(i.curry(dt,"tr"),function(e){var t=gt(e);return T.map(t,function(e){var t=e,n=Le.parent(t).bind(function(e){var t=Ve.name(e);return"tfoot"===t||"thead"===t||"tbody"===t?t:"tbody"}),r=T.map(pt(e),function(e){var t=Ge.has(e,"rowspan")?parseInt(Ge.get(e,"rowspan"),10):1,n=Ge.has(e,"colspan")?parseInt(Ge.get(e,"colspan"),10):1;return V.detail(e,t,n)});return V.rowdata(t,r,n)})}),yt=function(e,t){return e+","+t},bt=function(e,t){var n=T.bind(e.all(),function(e){return e.cells()});return T.filter(n,t)},wt=function(e){var t={},n=[],r=e.length,o=0;T.each(e,function(e,r){var i=[];T.each(e.cells(),function(e,n){for(var a=0;void 0!==t[yt(r,a)];)a++;for(var s=V.extended(e.element(),e.rowspan(),e.colspan(),r,a),u=0;u<e.colspan();u++)for(var l=0;l<e.rowspan();l++){var c=a+u,f=yt(r+l,c);t[f]=s,o=Math.max(o,c+1)}i.push(s)}),n.push(V.rowdata(e.element(),i,e.section()))});var a=V.grid(r,o);return{grid:i.constant(a),access:i.constant(t),all:i.constant(n)}},xt=function(e,t,n){var r=e.access()[yt(t,n)];return void 0!==r?c.some(r):c.none()},Ct=function(e,t,n){var r=bt(e,function(e){return n(t,e.element())});return r.length>0?c.some(r[0]):c.none()},_t=bt,St=function(e){var t=T.map(e.all(),function(e){return e.cells()});return T.flatten(t)},kt={isSupported:function(e){return void 0!==e.style}},Tt=function(e,t,n){if(!d.isString(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);kt.isSupported(e)&&e.style.setProperty(t,n)},Et=function(e,t){kt.isSupported(e)&&e.style.removeProperty(t)},Nt=function(e,t,n){var r=e.dom();Tt(r,t,n)},At=function(e,t){return kt.isSupported(e)?e.style.getPropertyValue(t):""},Rt=function(e,t){var n=e.dom(),r=At(n,t);return c.from(r).filter(function(e){return e.length>0})},Ot={copy:function(e,t){var n=e.dom(),r=t.dom();kt.isSupported(n)&&kt.isSupported(r)&&(r.style.cssText=n.style.cssText)},set:Nt,preserve:function(e,t){var n=Ge.get(e,"style"),r=t(e);return(void 0===n?Ge.remove:Ge.set)(e,"style",n),r},setAll:function(e,t){var n=e.dom();D.each(t,function(e,t){Tt(n,t,e)})},setOptions:function(e,t){var n=e.dom();D.each(t,function(e,t){e.fold(function(){Et(n,t)},function(e){Tt(n,t,e)})})},remove:function(e,t){var n=e.dom();Et(n,t),Ge.has(e,"style")&&""===be(Ge.get(e,"style"))&&Ge.remove(e,"style")},get:function(e,t){var n=e.dom(),r=window.getComputedStyle(n).getPropertyValue(t),i=""!==r||et.inBody(e)?r:At(n,t);return null===i?void 0:i},getRaw:Rt,getAllRaw:function(e){var t={},n=e.dom();if(kt.isSupported(n))for(var r=0;r<n.style.length;r++){var i=n.style.item(r);t[i]=n.style[i]}return t},isValidValue:function(e,t,n){var r=Y.fromTag(e);return Nt(r,t,n),Rt(r,t).isSome()},reflow:function(e){return e.dom().offsetWidth},transfer:function(e,t,n){Ve.isElement(e)&&Ve.isElement(t)&&T.each(n,function(n){!function(e,t,n){Rt(e,n).each(function(e){Rt(t,n).isNone()&&Nt(t,n,e)})}(e,t,n)})}},Dt=function(e,t){Le.parent(e).each(function(n){n.dom().insertBefore(t.dom(),e.dom())})},Pt=function(e,t){e.dom().appendChild(t.dom())},It={before:Dt,after:function(e,t){Le.nextSibling(e).fold(function(){Le.parent(e).each(function(e){Pt(e,t)})},function(e){Dt(e,t)})},prepend:function(e,t){Le.firstChild(e).fold(function(){Pt(e,t)},function(n){e.dom().insertBefore(t.dom(),n.dom())})},append:Pt,appendAt:function(e,t,n){Le.child(e,n).fold(function(){Pt(e,t)},function(e){Dt(e,t)})},wrap:function(e,t){Dt(e,t),Pt(t,e)}},Bt={before:function(e,t){T.each(t,function(t){It.before(e,t)})},after:function(e,t){T.each(t,function(n,r){var i=0===r?e:t[r-1];It.after(i,n)})},prepend:function(e,t){T.each(t.slice().reverse(),function(t){It.prepend(e,t)})},append:function(e,t){T.each(t,function(t){It.append(e,t)})}},Mt=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},Lt={empty:function(e){e.dom().textContent="",T.each(Le.children(e),function(e){Mt(e)})},remove:Mt,unwrap:function(e){var t=Le.children(e);t.length>0&&Bt.before(e,t),Mt(e)}},Ht=F.immutable("minRow","minCol","maxRow","maxCol"),Ft=function(e,t,n){var r=e[n].element(),i=Y.fromTag("td");It.append(i,Y.fromTag("br")),(t?It.append:It.prepend)(r,i)},zt=function(e,t){var n=function(e){return J.is(e.element(),t)},r=vt(e),i=wt(r),o=function(e,t){var n=e.grid().columns(),r=e.grid().rows(),i=n,o=0,a=0;return D.each(e.access(),function(e){if(t(e)){var n=e.row(),s=n+e.rowspan()-1,u=e.column(),l=u+e.colspan()-1;n<r?r=n:s>o&&(o=s),u<i?i=u:l>a&&(a=l)}}),Ht(r,i,o,a)}(i,n),a="th:not("+t+"),td:not("+t+")",s=Fe.filterFirstLayer(e,"th,td",function(e){return J.is(e,a)});return T.each(s,Lt.remove),function(e,t,n,r){for(var i=t.grid().columns(),o=t.grid().rows(),a=0;a<o;a++)for(var s=!1,u=0;u<i;u++)a<n.minRow()||a>n.maxRow()||u<n.minCol()||u>n.maxCol()||(xt(t,a,u).filter(r).isNone()?Ft(e,s,a):s=!0)}(r,i,o,n),function(e,t){var n=T.filter(Fe.firstLayer(e,"tr"),function(e){return 0===e.dom().childElementCount});T.each(n,Lt.remove),t.minCol()!==t.maxCol()&&t.minRow()!==t.maxRow()||T.each(Fe.firstLayer(e,"th,td"),function(e){Ge.remove(e,"rowspan"),Ge.remove(e,"colspan")}),Ge.remove(e,"width"),Ge.remove(e,"height"),Ot.remove(e,"width"),Ot.remove(e,"height")}(e,o),e},jt=function(e,t){return Y.fromDom(e.dom().cloneNode(t))},Wt=function(e){return jt(e,!0)},Ut=function(e){return jt(e,!1)},$t=Wt,qt=function(e,t){var n=function(e,t){var n=Y.fromTag(t),r=Ge.clone(e);return Ge.setAll(n,r),n}(e,t),r=Le.children(Wt(e));return Bt.append(n,r),n},Vt=function(e,t){var n=function(t){return e(t)?c.from(t.dom().nodeValue):c.none()},r=Te.detect().browser,i=r.isIE()&&10===r.version.major?function(e){try{return n(e)}catch(e){return c.none()}}:n;return{get:function(t){if(!e(t))throw new Error("Can only get text value of a text node");return i(t).getOr("")},getOption:i,set:function(t,n){if(!e(t))throw new Error("Can only set raw text value of a text node");t.dom().nodeValue=n}}}(Ve.isText),Xt={get:function(e){return Vt.get(e)},getOption:function(e){return Vt.getOption(e)},set:function(e,t){Vt.set(e,t)}},Yt=["img","br"],Kt=function(e){return"img"===Ve.name(e)?1:Xt.getOption(e).fold(function(){return Le.children(e).length},function(e){return e.length})},Jt=function(e){var t;return t=e,Xt.getOption(t).filter(function(e){return 0!==e.trim().length||e.indexOf("Â ")>-1}).isSome()||T.contains(Yt,Ve.name(e))},Gt=function(e){return ut.descendant(e,Jt)},Qt=function(e){return function(e,t){var n=function(e){for(var r=Le.children(e),i=r.length-1;i>=0;i--){var o=r[i];if(t(o))return c.some(o);var a=n(o);if(a.isSome())return a}return c.none()};return n(e)}(e,Jt)},Zt=function(){var e=Y.fromTag("td");return It.append(e,Y.fromTag("br")),e},en=function(e,t,n){var r=qt(e,t);return D.each(n,function(e,t){null===e?Ge.remove(r,t):Ge.set(r,t,e)}),r},tn=function(e){return e},nn=function(e){return function(){return Y.fromTag("tr",e.dom())}},rn=function(e,t,n){return{row:nn(t),cell:function(t){var r=Le.owner(t.element()),i=Y.fromTag(Ve.name(t.element()),r.dom()),o=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),a=o.length>0?function(e,t,n){return Gt(e).map(function(r){var i=n.join(","),o=rt.ancestors(r,i,function(t){return Ae.eq(t,e)});return T.foldr(o,function(e,t){var n=Ut(t);return It.append(e,n),n},t)}).getOr(t)}(t.element(),i,o):i;return It.append(a,Y.fromTag("br")),Ot.copy(t.element(),i),Ot.remove(i,"height"),1!==t.colspan()&&Ot.remove(t.element(),"width"),e(t.element(),i),i},replace:en,gap:Zt}},on=function(e){return{row:nn(e),cell:Zt,replace:tn,gap:Zt}},an=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function sn(){return{up:i.constant({selector:ct.ancestor,closest:ct.closest,predicate:ut.ancestor,all:Le.parents}),down:i.constant({selector:rt.descendants,predicate:nt.descendants}),styles:i.constant({get:Ot.get,getRaw:Ot.getRaw,set:Ot.set,remove:Ot.remove}),attrs:i.constant({get:Ge.get,set:Ge.set,remove:Ge.remove,copyTo:function(e,t){var n=Ge.clone(e);Ge.setAll(t,n)}}),insert:i.constant({before:It.before,after:It.after,afterAll:Bt.after,append:It.append,appendAll:Bt.append,prepend:It.prepend,wrap:It.wrap}),remove:i.constant({unwrap:Lt.unwrap,remove:Lt.remove}),create:i.constant({nu:Y.fromTag,clone:function(e){return Y.fromDom(e.dom().cloneNode(!1))},text:Y.fromText}),query:i.constant({comparePosition:function(e,t){return e.dom().compareDocumentPosition(t.dom())},prevSibling:Le.prevSibling,nextSibling:Le.nextSibling}),property:i.constant({children:Le.children,name:Ve.name,parent:Le.parent,isText:Ve.isText,isComment:Ve.isComment,isElement:Ve.isElement,getText:Xt.get,setText:Xt.set,isBoundary:function(e){return!!Ve.isElement(e)&&("body"===Ve.name(e)||T.contains(an,Ve.name(e)))},isEmptyTag:function(e){return!!Ve.isElement(e)&&T.contains(["br","img","hr","input"],Ve.name(e))}}),eq:Ae.eq,is:Ae.is}}F.immutable("left","right");var un=function(e,t,n,r){var i=t(e,n);return T.foldr(r,function(n,r){var i=t(e,r);return ln(e,n,i)},i)},ln=function(e,t,n){return t.bind(function(t){return n.filter(i.curry(e.eq,t))})},cn=function(e,t,n,r){var o=void 0!==r?r:i.constant(!1),a=[t].concat(e.up().all(t)),s=[n].concat(e.up().all(n)),u=function(e){return T.findIndex(e,o).fold(function(){return e},function(t){return e.slice(0,t+1)})},l=u(a),c=u(s),f=T.find(l,function(t){return T.exists(c,function(e,t){return i.curry(e.eq,t)}(e,t))});return{firstpath:i.constant(l),secondpath:i.constant(c),shared:i.constant(f)}},fn=function(e,t,n){return function(e,t,n){return n.length>0?function(e,t,n,r){return un(e,t,n[0],n.slice(1))}(e,t,n):c.none()}(e,t,n)},dn=sn(),hn=function(e,t){return fn(dn,function(t,n){return e(n)},t)},pn=function(e,t,n){return function(e,t,n,r){return cn(e,t,n,r)}(dn,e,t,n)},mn=function(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()},gn=function(e,t){var n=t.column(),r=t.column()+t.colspan()-1,i=t.row(),o=t.row()+t.rowspan()-1;return n<=e.finishCol()&&r>=e.startCol()&&i<=e.finishRow()&&o>=e.startRow()},vn=function(e,t,n){var r=Ct(e,t,Ae.eq),i=Ct(e,n,Ae.eq);return r.bind(function(e){return i.map(function(t){return n=e,r=t,V.bounds(Math.min(n.row(),r.row()),Math.min(n.column(),r.column()),Math.max(n.row()+n.rowspan()-1,r.row()+r.rowspan()-1),Math.max(n.column()+n.colspan()-1,r.column()+r.colspan()-1));var n,r})})},yn=vn,bn=function(e,t,n){return vn(e,t,n).bind(function(t){return function(e,t){for(var n=!0,r=i.curry(mn,t),o=t.startRow();o<=t.finishRow();o++)for(var a=t.startCol();a<=t.finishCol();a++)n=n&&xt(e,o,a).exists(r);return n?c.some(t):c.none()}(e,t)})},wn=function(e,t,n){return yn(e,t,n).map(function(t){var n=_t(e,i.curry(gn,t));return T.map(n,function(e){return e.element()})})},xn=function(e,t){return Ct(e,t,function(e,t){return Ae.contains(t,e)}).bind(function(e){return e.element()})},Cn=function(e){var t=vt(e);return wt(t)},_n=function(e,t,n){return mt(e).bind(function(r){return function(e,t,n,r){return Ct(e,t,Ae.eq).bind(function(t){var i=n>0?t.row()+t.rowspan()-1:t.row(),o=r>0?t.column()+t.colspan()-1:t.column();return xt(e,i+n,o+r).map(function(e){return e.element()})})}(Cn(r),e,t,n)})},Sn=function(e,t,n,r,i){var o=Cn(e),a=Ae.eq(e,n)?t:xn(o,t),s=Ae.eq(e,i)?r:xn(o,r);return wn(o,a,s)},kn=function(e,t){return ct.ancestor(e,"table")},Tn=F.immutableBag(["boxes","start","finish"],[]),En=function(e,t,n){var r=function(e){return function(t){return n(t)||Ae.eq(t,e)}};return Ae.eq(e,t)?c.some(Tn({boxes:c.some([e]),start:e,finish:t})):kn(e).bind(function(i){return kn(t).bind(function(o){if(Ae.eq(i,o))return c.some(Tn({boxes:function(e,t,n){var r=Cn(e);return wn(r,t,n)}(i,e,t),start:e,finish:t}));if(Ae.contains(i,o)){var a=(s=rt.ancestors(t,"td,th",r(i))).length>0?s[s.length-1]:t;return c.some(Tn({boxes:Sn(i,e,i,t,o),start:e,finish:a}))}if(Ae.contains(o,i)){var s,u=(s=rt.ancestors(e,"td,th",r(o))).length>0?s[s.length-1]:e;return c.some(Tn({boxes:Sn(o,e,i,t,o),start:e,finish:u}))}return pn(e,t).shared().bind(function(a){return ct.closest(a,"table",n).bind(function(n){var a=rt.ancestors(t,"td,th",r(n)),s=a.length>0?a[a.length-1]:t,u=rt.ancestors(e,"td,th",r(n)),l=u.length>0?u[u.length-1]:e;return c.some(Tn({boxes:Sn(n,e,i,t,o),start:l,finish:s}))})})})})},Nn=En,An=function(e,t){var n=rt.descendants(e,t);return n.length>0?c.some(n):c.none()},Rn=function(e,t,n,r,o){return function(e,t){return T.find(e,function(e){return J.is(e,t)})}(e,o).bind(function(e){return _n(e,t,n).bind(function(e){return function(e,t){return ct.ancestor(e,"table").bind(function(n){return ct.descendant(n,t).bind(function(t){return En(t,e).bind(function(e){return e.boxes().map(function(t){return{boxes:i.constant(t),start:i.constant(e.start()),finish:i.constant(e.finish())}})})})})}(e,r)})})},On=function(e,t,n){return ct.descendant(e,t).bind(function(t){return ct.descendant(e,n).bind(function(e){return hn(kn,[t,e]).map(function(n){return{first:i.constant(t),last:i.constant(e),table:i.constant(n)}})})})},Dn=function(e,t,n){return On(e,t,n).bind(function(t){var n=function(t){return Ae.eq(e,t)},r=ct.ancestor(t.first(),"thead,tfoot,tbody,table",n),i=ct.ancestor(t.last(),"thead,tfoot,tbody,table",n);return r.bind(function(e){return i.bind(function(n){return Ae.eq(e,n)?function(e,t,n){var r=Cn(e);return bn(r,t,n)}(t.table(),t.first(),t.last()):c.none()})})})},Pn={selected:i.constant("data-mce-selected"),selectedSelector:i.constant("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:i.constant("[data-mce-selected]"),firstSelected:i.constant("data-mce-first-selected"),firstSelectedSelector:i.constant("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:i.constant("data-mce-last-selected"),lastSelectedSelector:i.constant("td[data-mce-last-selected],th[data-mce-last-selected]")},In=function(e){if(!d.isArray(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return T.each(e,function(r,i){var o=D.keys(r);if(1!==o.length)throw new Error("one and only one name per case");var a=o[0],s=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!d.isArray(s))throw new Error("case arguments must be an array");t.push(a),n[a]=function(){var n=arguments.length;if(n!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+n);for(var r=new Array(n),o=0;o<r.length;o++)r[o]=arguments[o];return{fold:function(){if(arguments.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length);return arguments[i].apply(null,r)},match:function(e){var n=D.keys(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!T.forall(t,function(e){return T.contains(n,e)}))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,r)},log:function(e){console.log(e,{constructors:t,constructor:a,params:r})}}}}),n},Bn=In([{none:[]},{multiple:["elements"]},{single:["selection"]}]),Mn={cata:function(e,t,n,r){return e.fold(t,n,r)},none:Bn.none,multiple:Bn.multiple,single:Bn.single},Ln=function(e,t){return Mn.cata(t.get(),i.constant([]),i.identity,i.constant([e]))},Hn=Ln,Fn=function(e){return{element:i.constant(e),mergable:c.none,unmergable:c.none,selection:i.constant([e])}},zn=F.immutable("element","clipboard","generators"),jn={noMenu:Fn,forMenu:function(e,t,n){return{element:i.constant(n),mergable:i.constant(function(e,t){return Mn.cata(t.get(),c.none,function(t,n){return 0===t.length?c.none():Dn(e,Pn.firstSelectedSelector(),Pn.lastSelectedSelector()).bind(function(e){return t.length>1?c.some({bounds:i.constant(e),cells:i.constant(t)}):c.none()})},c.none)}(t,e)),unmergable:i.constant(function(e,t){var n=Ln(e,t);return n.length>0&&T.forall(n,function(e){return Ge.has(e,"rowspan")&&parseInt(Ge.get(e,"rowspan"),10)>1||Ge.has(e,"colspan")&&parseInt(Ge.get(e,"colspan"),10)>1})?c.some(n):c.none()}(n,e)),selection:i.constant(Hn(n,e))}},notCell:function(e){return Fn(e)},paste:zn,pasteRows:function(e,t,n,r,o){return{element:i.constant(n),mergable:c.none,unmergable:c.none,selection:i.constant(Hn(n,e)),clipboard:i.constant(r),generators:i.constant(o)}}},Wn=function(e,t,n,r){e.on("BeforeGetContent",function(n){!0===n.selection&&Mn.cata(t.get(),i.noop,function(t){n.preventDefault(),mt(t[0]).map($t).map(function(e){return[zt(e,Pn.attributeSelector())]}).each(function(t){n.content=T.map(t,function(t){return function(e,t){return e.selection.serializer.serialize(t.dom(),{})}(e,t)}).join("")})},i.noop)}),e.on("BeforeSetContent",function(t){!0===t.selection&&!0===t.paste&&c.from(e.dom.getParent(e.selection.getStart(),"th,td")).each(function(i){var o=Y.fromDom(i);mt(o).bind(function(i){var a=T.filter(function(e,t){var n=(t||document).createElement("div");return n.innerHTML=e,Le.children(Y.fromDom(n))}(t.content),function(e){return"meta"!==Ve.name(e)});if(1===a.length&&"table"===Ve.name(a[0])){t.preventDefault();var s=Y.fromDom(e.getDoc()),u=on(s),l=jn.paste(o,a[0],u);n.pasteCells(i,l).each(function(t){e.selection.setRng(t),e.focus(),r.clear(i)})}})})})};function Un(e,t){var n=function(n){var r=t(n);if(r<=0||null===r){var i=Ot.get(n,e);return parseFloat(i)||0}return r},r=function(e,t){return T.foldl(t,function(t,n){var r=Ot.get(e,n),i=void 0===r?0:parseInt(r,10);return isNaN(i)?t:t+i},0)};return{set:function(t,n){if(!d.isNumber(n)&&!n.match(/^[0-9]+$/))throw e+".set accepts only positive integer values. Value was "+n;var r=t.dom();kt.isSupported(r)&&(r.style[e]=n+"px")},get:n,getOuter:n,aggregate:r,max:function(e,t,n){var i=r(e,n);return t>i?t-i:0}}}var $n=Un("height",function(e){return et.inBody(e)?e.dom().getBoundingClientRect().height:e.dom().offsetHeight}),qn=function(e){return $n.get(e)},Vn=function(e){return $n.getOuter(e)},Xn=Un("width",function(e){return e.dom().offsetWidth}),Yn=function(e){return Xn.get(e)},Kn=function(e){return Xn.getOuter(e)},Jn=Te.detect(),Gn=function(e,t,n){return function(e,t){var n=parseFloat(e);return isNaN(n)?t:n}(Ot.get(e,t),n)},Qn=/(\d+(\.\d+)?)(\w|%)*/,Zn=/(\d+(\.\d+)?)%/,er=/(\d+(\.\d+)?)px|em/,tr=function(e,t){Ot.set(e,"height",t+"px")},nr=function(e){var t=function(e){return Ot.getRaw(e,"height").getOrThunk(function(){return function(e){return Jn.browser.isIE()||Jn.browser.isEdge()?function(e){var t=Gn(e,"padding-top",0),n=Gn(e,"padding-bottom",0),r=Gn(e,"border-top-width",0),i=Gn(e,"border-bottom-width",0),o=e.dom().getBoundingClientRect().height;return"border-box"===Ot.get(e,"box-sizing")?o:o-t-n-(r+i)}(e):Gn(e,"height",qn(e))}(e)+"px"})}(e);return t?function(e,t,n,r){var i=parseInt(e,10);return ve(e,"%")&&"table"!==Ve.name(t)?function(e,t,n,r){var i=mt(e).map(function(e){var r=n(e);return Math.floor(t/100*r)}).getOr(t);return r(e,i),i}(t,i,n,r):i}(t,e,qn,tr):qn(e)},rr=function(e){return Ot.getRaw(e,"width").fold(function(){return c.from(Ge.get(e,"width"))},function(e){return c.some(e)})},ir=function(e,t){return e/t.pixelWidth()*100},or={percentageBasedSizeRegex:i.constant(Zn),pixelBasedSizeRegex:i.constant(er),setPixelWidth:function(e,t){Ot.set(e,"width",t+"px")},setPercentageWidth:function(e,t){Ot.set(e,"width",t+"%")},setHeight:tr,getPixelWidth:function(e,t){return rr(e).fold(function(){var t=Yn(e);return parseInt(t,10)},function(n){return function(e,t,n){if(er.test(t)){var r=er.exec(t);return parseInt(r[1],10)}if(Zn.test(t)){var i=Zn.exec(t);return parseFloat(i[1])/100*n.pixelWidth()}var o=Yn(e);return parseInt(o,10)}(e,n,t)})},getPercentageWidth:function(e,t){return rr(e).fold(function(){var n=Yn(e),r=parseInt(n,10);return ir(r,t)},function(n){return function(e,t,n){if(Zn.test(t)){var r=Zn.exec(t);return parseFloat(r[1])}var i=Yn(e),o=parseInt(i,10);return ir(o,n)}(e,n,t)})},getGenericWidth:function(e){return rr(e).bind(function(e){if(Qn.test(e)){var t=Qn.exec(e);return c.some({width:i.constant(t[1]),unit:i.constant(t[3])})}return c.none()})},setGenericWidth:function(e,t,n){Ot.set(e,"width",t+n)},getHeight:function(e){return function(e,t,n){return nr(e)/function(e,t){return Ge.has(e,t)?parseInt(Ge.get(e,t),10):1}(e,"rowspan")}(e)},getRawWidth:rr},ar=function(e,t){or.getGenericWidth(e).each(function(n){var r=n.width()/2;or.setGenericWidth(e,r,n.unit()),or.setGenericWidth(t,r,n.unit())})},sr=function(e,t){var n=t||Y.fromDom(document.documentElement);return ut.ancestor(e,i.curry(Ae.eq,n)).isSome()},ur=function(e,t){return{left:i.constant(e),top:i.constant(t),translate:function(n,r){return ur(e+n,t+r)}}},lr=function(e,t){return void 0!==e?e:void 0!==t?t:0},cr=function(e){var t=e.dom().ownerDocument,n=t.body,r=function(e){var t=e.dom();return t===t.window?e:Ve.isDocument(e)?t.defaultView||t.parentWindow:null}(Y.fromDom(t)),i=t.documentElement,o=lr(r.pageYOffset,i.scrollTop),a=lr(r.pageXOffset,i.scrollLeft),s=lr(i.clientTop,n.clientTop),u=lr(i.clientLeft,n.clientLeft);return function(e){var t=e.dom(),n=t.ownerDocument,r=n.body,i=Y.fromDom(n.documentElement);return r===t?ur(r.offsetLeft,r.offsetTop):sr(e,i)?function(e){var t=e.getBoundingClientRect();return ur(t.left,t.top)}(t):ur(0,0)}(e).translate(a-u,o-s)},fr=F.immutable("row","y"),dr=F.immutable("col","x"),hr=function(e){return cr(e).left()+Kn(e)},pr=function(e){return cr(e).left()},mr=function(e,t){return dr(e,pr(t))},gr=function(e,t){return dr(e,hr(t))},vr=function(e){return cr(e).top()},yr=function(e,t,n){if(0===n.length)return[];var r=T.map(n.slice(1),function(t,n){return t.map(function(t){return e(n,t)})}),i=n[n.length-1].map(function(e){return t(n.length-1,e)});return r.concat([i])},br={delta:i.identity,positions:i.curry(yr,function(e,t){return fr(e,vr(t))},function(e,t){return fr(e,vr(t)+Vn(t))}),edge:vr},wr={delta:i.identity,edge:pr,positions:i.curry(yr,mr,gr)},xr={height:br,rtl:{delta:function(e,t){return-e},edge:hr,positions:i.curry(yr,gr,mr)},ltr:wr},Cr={ltr:xr.ltr,rtl:xr.rtl};function _r(e){var t=function(t){return e(t).isRtl()?Cr.rtl:Cr.ltr};return{delta:function(e,n){return t(n).delta(e,n)},edge:function(e){return t(e).edge(e)},positions:function(e,n){return t(n).positions(e,n)}}}var Sr=function(e){var t=vt(e);return wt(t).grid()},kr=function(e){var t=e,n=function(){return t};return{get:n,set:function(e){t=e},clone:function(){return kr(n())}}},Tr=function(e,t){return Er(e,t,{validate:d.isFunction,label:"function"})},Er=function(e,t,n){if(0===t.length)throw new Error("You must specify at least one required field.");return M("required",t),H(t),function(r){var i=D.keys(r);T.forall(t,function(e){return T.contains(i,e)})||I(t,i),e(t,i);var o=T.filter(t,function(e){return!n.validate(r[e],e)});return o.length>0&&L(o,n.label),r}},Nr=i.noop,Ar={exactly:i.curry(Tr,function(e,t){var n=T.filter(t,function(t){return!T.contains(e,t)});n.length>0&&B(n)}),ensure:i.curry(Tr,Nr),ensureWith:i.curry(Er,Nr)},Rr=function(e){var t=Ge.has(e,"colspan")?parseInt(Ge.get(e,"colspan"),10):1,n=Ge.has(e,"rowspan")?parseInt(Ge.get(e,"rowspan"),10):1;return{element:i.constant(e),colspan:i.constant(t),rowspan:i.constant(n)}},Or=Ar.exactly(["cell","row","replace","gap"]),Dr=function(e,t){Or(e);var n=kr(c.none()),r=void 0!==t?t:Rr,i=function(t){return function(t){return e.cell(t)}(r(t))},o=function(e){var t=i(e);return n.get().isNone()&&n.set(c.some(t)),a=c.some({item:e,replacement:t}),t},a=c.none();return{getOrInit:function(e,t){return a.fold(function(){return o(e)},function(n){return t(e,n.item)?n.replacement:o(e)})},cursor:n.get}},Pr=function(e,t){return function(n){var r=kr(c.none());Or(n);var i=[],o=function(o){var a=n.replace(o,t,{scope:e});return i.push({item:o,sub:a}),r.get().isNone()&&r.set(c.some(a)),a};return{replaceOrInit:function(e,t){return function(e,t){return T.find(i,function(n){return t(n.item,e)})}(e,t).fold(function(){return o(e)},function(n){return t(e,n.item)?n.sub:o(e)})},cursor:r.get}}},Ir=function(e){Or(e);var t=kr(c.none());return{combine:function(n){return t.get().isNone()&&t.set(c.some(n)),function(){var t=e.cell({element:i.constant(n),colspan:i.constant(1),rowspan:i.constant(1)});return Ot.remove(t,"width"),Ot.remove(n,"width"),t}},cursor:t.get}},Br=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Mr=function(e,t){var n=e.property().name(t);return T.contains(Br,n)},Lr=function(e,t){return T.contains(["br","img","hr","input"],e.property().name(t))},Hr=sn(),Fr=function(e){return Mr(Hr,e)},zr=function(e){return function(e,t){var n=e.property().name(t);return T.contains(["ol","ul"],n)}(Hr,e)},jr=function(e){var t,n=function(e){return"br"===Ve.name(e)},r=function(e){return Qt(e).bind(function(t){var r,i=(r=t,Le.nextSibling(r).map(function(e){return!!Fr(e)||(function(e){return Lr(Hr,e)}(e)?"img"!==Ve.name(e):void 0)}).getOr(!1));return Le.parent(t).map(function(r){return!0===i||(o=r,"li"===Ve.name(o)||ut.ancestor(o,zr).isSome())||n(t)||Fr(r)&&!Ae.eq(e,r)?[]:[Y.fromTag("br")];var o})}).getOr([])},i=0===(t=T.bind(e,function(e){var t=Le.children(e);return function(e){return T.forall(e,function(e){return n(e)||Ve.isText(e)&&0===Xt.get(e).trim().length})}(t)?[]:t.concat(r(e))})).length?[Y.fromTag("br")]:t;Lt.empty(e[0]),Bt.append(e[0],i)},Wr=function(e){return function(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];if(0===t.length)throw new Error("Can't merge zero objects");for(var r={},i=0;i<t.length;i++){var o=t[i];for(var a in o)o.hasOwnProperty(a)&&(r[a]=e(r[a],o[a]))}return r}},Ur=Wr(function(e,t){return d.isObject(e)&&d.isObject(t)?Ur(e,t):t}),$r=Wr(function(e,t){return t}),qr={deepMerge:Ur,merge:$r},Vr=function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},Xr=function(e,t){for(var n=0;n<e.length;n++){var r=t(e[n],n);if(r.isSome())return r}return c.none()},Yr=function(e,t){return V.rowcells(t,e.section())},Kr=function(e,t){return e.cells()[t]},Jr=function(e,t,n){var r=e.cells(),i=r.slice(0,t),o=r.slice(t),a=i.concat([n]).concat(o);return Yr(e,a)},Gr=Yr,Qr=function(e,t,n){e.cells()[t]=n},Zr=Kr,ei=function(e,t){return Kr(e,t).element()},ti=function(e,t){var n=e.cells(),r=T.map(n,t);return V.rowcells(r,e.section())},ni=function(e){return e.cells().length},ri=function(e,t){if(0===e.length)return 0;var n=e[0];return T.findIndex(e,function(e){return!t(n.element(),e.element())}).fold(function(){return e.length},function(e){return e})},ii=function(e,t,n,r){var o=function(e,t){return e[t]}(e,t).cells().slice(n),a=ri(o,r),s=function(e,t){return T.map(e,function(e){return Zr(e,t)})}(e,n).slice(t),u=ri(s,r);return{colspan:i.constant(a),rowspan:i.constant(u)}},oi=function(e,t,n){for(var r=[],i=0;i<e.grid().rows();i++){for(var o=[],a=0;a<e.grid().columns();a++){var s=xt(e,i,a).map(function(e){return V.elementnew(e.element(),n)}).getOrThunk(function(){return V.elementnew(t.gap(),!0)});o.push(s)}var u=V.rowcells(o,e.all()[i].section());r.push(u)}return r},ai=function(e,t,n,r){n===r?Ge.remove(e,t):Ge.set(e,t,n)},si=function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n},ui=function(e,t){if(t<0||t>=e.length-1)return c.none();var n=e[t].fold(function(){var n=T.reverse(e.slice(0,t));return Xr(n,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return c.some({value:e,delta:0})}),r=e[t+1].fold(function(){var n=e.slice(t+1);return Xr(n,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return c.some({value:e,delta:1})});return n.bind(function(e){return r.map(function(t){var n=t.delta+e.delta;return Math.abs(t.value-e.value)/n})})},li=function(e,t,n){var r=e();return T.find(r,t).orThunk(function(){return c.from(r[0]).orThunk(n)}).map(function(e){return e.element()})},ci=function(e){var t=e.grid(),n=si(0,t.columns()),r=si(0,t.rows());return T.map(n,function(t){return li(function(){return T.bind(r,function(n){return xt(e,n,t).filter(function(e){return e.column()===t}).fold(i.constant([]),function(e){return[e]})})},function(e){return 1===e.colspan()},function(){return xt(e,0,t)})})},fi=function(e){var t=e.grid(),n=si(0,t.rows()),r=si(0,t.columns());return T.map(n,function(t){return li(function(){return T.bind(r,function(n){return xt(e,t,n).filter(function(e){return e.row()===t}).fold(i.constant([]),function(e){return[e]})})},function(e){return 1===e.rowspan()},function(){return xt(e,t,0)})})},di=function(e){var t=e.replace(/\./g,"-");return{resolve:function(e){return t+"-"+e}}},hi={resolve:di("ephox-snooker").resolve},pi=function(e,t){var n=Ge.get(e,t);return void 0===n||""===n?[]:n.split(" ")},mi=pi,gi=function(e){return mi(e,"class")},vi=function(e,t){return function(e,t,n){var r=pi(e,t).concat([n]);Ge.set(e,t,r.join(" "))}(e,"class",t)},yi=function(e,t){return function(e,t,n){var r=T.filter(pi(e,t),function(e){return e!==n});r.length>0?Ge.set(e,t,r.join(" ")):Ge.remove(e,t)}(e,"class",t)},bi=gi,wi=vi,xi=yi,Ci=function(e){return void 0!==e.dom().classList},_i=function(e,t){return Ci(e)&&e.dom().classList.contains(t)},Si={add:function(e,t){Ci(e)?e.dom().classList.add(t):wi(e,t)},remove:function(e,t){Ci(e)?e.dom().classList.remove(t):xi(e,t),function(e){0===(Ci(e)?e.dom().classList:bi(e)).length&&Ge.remove(e,"class")}(e)},toggle:function(e,t){return Ci(e)?e.dom().classList.toggle(t):function(e,t){T.contains(gi(e),t)?yi(e,t):vi(e,t)}(e,t)},toggler:function(e,t){var n=Ci(e),r=e.dom().classList;return function(e,t,n){var r=n||!1,i=function(){t(),r=!0},o=function(){e(),r=!1};return{on:i,off:o,toggle:function(){(r?o:i)()},isOn:function(){return r}}}(function(){n?r.remove(t):xi(e,t)},function(){n?r.add(t):wi(e,t)},_i(e,t))},has:_i},ki=hi.resolve("resizer-bar"),Ti=hi.resolve("resizer-rows"),Ei=hi.resolve("resizer-cols"),Ni=function(e){var t=rt.descendants(e.parent(),"."+ki);T.each(t,Lt.remove)},Ai=function(e,t,n){var r=e.origin();T.each(t,function(t,i){t.each(function(t){var i=n(r,t);Si.add(i,ki),It.append(e.parent(),i)})})},Ri=function(e,t,n,r,i,o){var a=cr(t);!function(e,t,n,r){Ai(e,t,function(e,t){var i=function(e,t,n,r,i){var o=Y.fromTag("div");return Ot.setAll(o,{position:"absolute",left:t+"px",top:n-i/2+"px",height:i+"px",width:r+"px"}),Ge.setAll(o,{"data-row":e,role:"presentation"}),o}(t.row(),n.left()-e.left(),t.y()-e.top(),r,7);return Si.add(i,Ti),i})}(e,n.length>0?i.positions(n,t):[],a,Kn(t)),function(e,t,n,r){Ai(e,t,function(e,t){var i=function(e,t,n,r,i){var o=Y.fromTag("div");return Ot.setAll(o,{position:"absolute",left:t-r/2+"px",top:n+"px",height:i+"px",width:r+"px"}),Ge.setAll(o,{"data-column":e,role:"presentation"}),o}(t.col(),t.x()-e.left(),n.top()-e.top(),7,r);return Si.add(i,Ei),i})}(e,r.length>0?o.positions(r,t):[],a,Vn(t))},Oi=function(e,t){var n=rt.descendants(e.parent(),"."+ki);T.each(n,t)},Di={refresh:function(e,t,n,r){Ni(e);var i=vt(t),o=wt(i),a=fi(o),s=ci(o);Ri(e,t,a,s,n,r)},hide:function(e){Oi(e,function(e){Ot.set(e,"display","none")})},show:function(e){Oi(e,function(e){Ot.set(e,"display","block")})},destroy:Ni,isRowBar:function(e){return Si.has(e,Ti)},isColBar:function(e){return Si.has(e,Ei)}},Pi=function(e,t){return function(e,t){return T.map(e,function(e){var n=function(e){return Xr(e,function(e){return Le.parent(e.element()).map(function(e){var t=Le.parent(e).isNone();return V.elementnew(e,t)})}).getOrThunk(function(){return V.elementnew(t.row(),!0)})}(e.details());return V.rowdatanew(n.element(),e.details(),e.section(),n.isNew())})}(function(e,t){var n=T.map(e,function(e,t){return T.map(e.cells(),function(e,t){return!1})});return T.map(e,function(r,i){var o=T.bind(r.cells(),function(r,o){if(!1===n[i][o]){var a=ii(e,i,o,t);return function(e,t,r,i){for(var o=e;o<e+r;o++)for(var a=t;a<t+i;a++)n[o][a]=!0}(i,o,a.rowspan(),a.colspan()),[V.detailnew(r.element(),a.rowspan(),a.colspan(),r.isNew())]}return[]});return V.rowdetails(o,r.section())})}(e,Ae.eq),t)},Ii=function(e,t){var n=T.flatten(T.map(e.all(),function(e){return e.cells()}));return T.find(n,function(e){return Ae.eq(t,e.element())})},Bi=function(e,t,n,r,o){return function(a,s,u,l,f){var d=vt(s),h=wt(d);return t(h,u).map(function(t){var n=oi(h,l,!1),r=e(n,t,Ae.eq,o(l)),a=Pi(r.grid(),l);return{grid:i.constant(a),cursor:r.cursor}}).fold(function(){return c.none()},function(e){var t=function(e,t){var n=[],r=[],o=function(t,i){t.length>0?function(t,i){var o=ct.child(e,i).getOrThunk(function(){var t=Y.fromTag(i,Le.owner(e).dom());return It.append(e,t),t});Lt.empty(o);var a=T.map(t,function(e){e.isNew()&&n.push(e.element());var t=e.element();return Lt.empty(t),T.each(e.cells(),function(e){e.isNew()&&r.push(e.element()),ai(e.element(),"colspan",e.colspan(),1),ai(e.element(),"rowspan",e.rowspan(),1),It.append(t,e.element())}),t});Bt.append(o,a)}(t,i):function(t){ct.child(e,t).bind(Lt.remove)}(i)},a=[],s=[],u=[];return T.each(t,function(e){switch(e.section()){case"thead":a.push(e);break;case"tbody":s.push(e);break;case"tfoot":u.push(e)}}),o(a,"thead"),o(s,"tbody"),o(u,"tfoot"),{newRows:i.constant(n),newCells:i.constant(r)}}(s,e.grid());return n(s,e.grid(),f),r(s),Di.refresh(a,s,xr.height,f),c.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})}},Mi=Pi,Li=function(e,t){return ht(t.element()).bind(function(t){return Ii(e,t)})},Hi=function(e,t){var n=T.map(t.selection(),function(t){return ht(t).bind(function(t){return Ii(e,t)})}),r=Vr(n);return r.length>0?c.some(r):c.none()},Fi=function(e,t){var n=T.map(t.selection(),function(t){return ht(t).bind(function(t){return Ii(e,t)})}),r=Vr(n);return r.length>0?c.some(qr.merge({cells:r},{generators:t.generators,clipboard:t.clipboard})):c.none()},zi=function(e){return{is:function(t){return e===t},isValue:i.always,isError:i.never,getOr:i.constant(e),getOrThunk:i.constant(e),getOrDie:i.constant(e),or:function(t){return zi(e)},orThunk:function(t){return zi(e)},fold:function(t,n){return n(e)},map:function(t){return zi(t(e))},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOption:function(){return c.some(e)}}},ji=function(e){return{is:i.never,isValue:i.never,isError:i.always,getOr:i.identity,getOrThunk:function(e){return e()},getOrDie:function(){return i.die(String(e))()},or:function(e){return e},orThunk:function(e){return e()},fold:function(t,n){return t(e)},map:function(t){return ji(e)},each:i.noop,bind:function(t){return ji(e)},exists:i.never,forall:i.always,toOption:c.none}},Wi={value:zi,error:ji},Ui=function(e,t){return T.map(e,function(){return V.elementnew(t.cell(),!0)})},$i=function(e,t,n){return T.map(e,function(e){return Gr(e,e.cells().concat(Ui(si(0,t),n)))})},qi=function(e,t,n){if(e.row()>=t.length||e.column()>ni(t[0]))return Wi.error("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column());var r=t.slice(e.row()),o=r[0].cells().slice(e.column()),a=ni(n[0]),s=n.length;return Wi.value({rowDelta:i.constant(r.length-s),colDelta:i.constant(o.length-a)})},Vi=function(e,t){var n=ni(e[0]),r=ni(t[0]);return{rowDelta:i.constant(0),colDelta:i.constant(n-r)}},Xi=function(e,t,n){var r=t.colDelta()<0?$i:i.identity;return(t.rowDelta()<0?function(e,t,n){return e.concat(function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n}(t,function(t){return Gr(e[e.length-1],Ui(e[e.length-1].cells(),n))}))}:i.identity)(r(e,Math.abs(t.colDelta()),n),Math.abs(t.rowDelta()),n)},Yi=function(e,t,n,r){for(var i=!0,o=0;o<e.length;o++)for(var a=0;a<ni(e[0]);a++){var s=n(ei(e[o],a),t);!0===s&&!1===i?Qr(e[o],a,V.elementnew(r(),!0)):!0===s&&(i=!1)}return e},Ki=function(e,t,n,r){var o=Zr(e[t],n),a=i.curry(r,o.element()),s=e[t];return e.length>1&&ni(s)>1&&(n>0&&a(ei(s,n-1))||n<s.length-1&&a(ei(s,n+1))||t>0&&a(ei(e[t-1],n))||t<e.length-1&&a(ei(e[t+1],n)))},Ji=function(e,t,n,r,i){!function(e,t,n,r){if(t>0&&t<e.length){var i=function(e,t){return T.foldl(e,function(e,n){return T.exists(e,function(e){return t(e.element(),n.element())})?e:e.concat([n])},[])}(e[t-1].cells(),n);T.each(i,function(i){for(var o=c.none(),a=t;a<e.length;a++)for(var s=0;s<ni(e[0]);s++){var u=e[a].cells()[s];n(u.element(),i.element())&&(o.isNone()&&(o=c.some(r())),o.each(function(t){Qr(e[a],s,V.elementnew(t,!0))}))}})}}(t,e,i,r.cell);var o=Vi(n,t),a=Xi(n,o,r),s=Vi(t,a),u=Xi(t,s,r);return u.slice(0,e).concat(a).concat(u.slice(e,u.length))},Gi=function(e,t,n,r,i){var o=e.slice(0,t),a=e.slice(t),s=ti(e[n],function(n,o){return t>0&&t<e.length&&r(ei(e[t-1],o),ei(e[t],o))?Zr(e[t],o):V.elementnew(i(n.element(),r),!0)});return o.concat([s]).concat(a)},Qi=function(e,t,n,r,i){return T.map(e,function(e){var o=t>0&&t<ni(e)&&r(ei(e,t-1),ei(e,t))?Zr(e,t):V.elementnew(i(ei(e,n),r),!0);return Jr(e,t,o)})},Zi=function(e,t,n,r){return T.map(e,function(e){return ti(e,function(e){return function(e){return T.exists(t,function(t){return n(e.element(),t.element())})}(e)?V.elementnew(r(e.element(),n),!0):e})})},eo=function(e,t,n,r){return void 0!==ei(e[t],n)&&t>0&&r(ei(e[t-1],n),ei(e[t],n))},to=function(e,t,n){return t>0&&n(ei(e,t-1),ei(e,t))},no=function(e,t,n,r){var i=T.bind(e,function(r,i){return eo(e,i,t,n)||to(r,t,n)?[]:[Zr(r,t)]});return Zi(e,i,n,r)},ro=function(e,t,n,r){var i=e[t],o=T.bind(i.cells(),function(r,o){return eo(e,t,o,n)||to(i,o,n)?[]:[r]});return Zi(e,o,n,r)},io=function(e){return{fold:e}},oo=function(){return io(function(e,t,n,r,i){return e()})},ao=function(e,t,n,r){var o=e.slice(0),a=function(e,t){return 0===e.length?oo():1===e.length?function(e){return io(function(t,n,r,i,o){return n(e)})}(0):0===t?function(e,t){return io(function(n,r,i,o,a){return i(e,t)})}(0,1):t===e.length-1?function(e,t){return io(function(n,r,i,o,a){return a(e,t)})}(t-1,t):t>0&&t<e.length-1?function(e,t,n){return io(function(r,i,o,a,s){return a(e,t,n)})}(t-1,t,t+1):oo()}(e,t),s=function(e){return T.map(e,i.constant(0))},u=i.constant(s(o)),l=function(e,t){if(n>=0){var i=Math.max(r.minCellWidth(),o[t]-n);return s(o.slice(0,e)).concat([n,i-o[t]]).concat(s(o.slice(t+1)))}var a=Math.max(r.minCellWidth(),o[e]+n),u=o[e]-a;return s(o.slice(0,e)).concat([a-o[e],u]).concat(s(o.slice(t+1)))},c=l;return a.fold(u,function(e){return r.singleColumnWidth(o[e],n)},c,function(e,t,n){return l(t,n)},function(e,t){if(n>=0)return s(o.slice(0,t)).concat([n]);var i=Math.max(r.minCellWidth(),o[t]+n);return s(o.slice(0,t)).concat([i-o[t]])})},so=function(e,t){return Ge.has(e,t)&&parseInt(Ge.get(e,t),10)>1},uo={hasColspan:function(e){return so(e,"colspan")},hasRowspan:function(e){return so(e,"rowspan")},minWidth:i.constant(10),minHeight:i.constant(10),getInt:function(e,t){return parseInt(Ot.get(e,t),10)}},lo=function(e,t,n){return Ot.getRaw(e,t).fold(function(){return n(e)+"px"},function(e){return e})},co=function(e){return lo(e,"width",or.getPixelWidth)},fo=function(e){return lo(e,"height",or.getHeight)},ho=function(e,t,n,r,o){var a=ci(e),s=T.map(a,function(e){return e.map(t.edge)});return T.map(a,function(e,t){return e.filter(i.not(uo.hasColspan)).fold(function(){var e=ui(s,t);return r(e)},function(e){return n(e,o)})})},po=function(e){return e.map(function(e){return e+"px"}).getOr("")},mo=function(e,t,n,r){var o=fi(e),a=T.map(o,function(e){return e.map(t.edge)});return T.map(o,function(e,t){return e.filter(i.not(uo.hasRowspan)).fold(function(){var e=ui(a,t);return r(e)},function(e){return n(e)})})},go={getRawWidths:function(e,t){return ho(e,t,co,po)},getPixelWidths:function(e,t,n){return ho(e,t,or.getPixelWidth,function(e){return e.getOrThunk(n.minCellWidth)},n)},getPercentageWidths:function(e,t,n){return ho(e,t,or.getPercentageWidth,function(e){return e.fold(function(){return n.minCellWidth()},function(e){return e/n.pixelWidth()*100})},n)},getPixelHeights:function(e,t){return mo(e,t,or.getHeight,function(e){return e.getOrThunk(uo.minHeight)})},getRawHeights:function(e,t){return mo(e,t,fo,po)}},vo=function(e,t,n){for(var r=0,i=e;i<t;i++)r+=void 0!==n[i]?n[i]:0;return r},yo=function(e,t){var n=St(e);return T.map(n,function(e){var n=vo(e.column(),e.column()+e.colspan(),t);return{element:e.element,width:i.constant(n),colspan:e.colspan}})},bo=function(e,t){var n=St(e);return T.map(n,function(e){var n=vo(e.row(),e.row()+e.rowspan(),t);return{element:e.element,height:i.constant(n),rowspan:e.rowspan}})},wo=function(e,t){return T.map(e.all(),function(e,n){return{element:e.element,height:i.constant(t[n])}})},xo=function(e){var t=parseInt(e,10),n=i.identity;return{width:i.constant(t),pixelWidth:i.constant(t),getWidths:go.getPixelWidths,getCellDelta:n,singleColumnWidth:function(e,t){return[Math.max(uo.minWidth(),e+t)-e]},minCellWidth:uo.minWidth,setElementWidth:or.setPixelWidth,setTableWidth:function(e,t,n){var r=T.foldr(t,function(e,t){return e+t},0);or.setPixelWidth(e,r)}}},Co=function(e){return or.getRawWidth(e).fold(function(){var t=Yn(e);return xo(t)},function(t){return function(e,t){if(or.percentageBasedSizeRegex().test(t))return function(e,t){var n=parseFloat(e),r=Yn(t);return{width:i.constant(n),pixelWidth:i.constant(r),getWidths:go.getPercentageWidths,getCellDelta:function(e){return e/r*100},singleColumnWidth:function(e,t){return[100-e]},minCellWidth:function(){return uo.minWidth()/r*100},setElementWidth:or.setPercentageWidth,setTableWidth:function(e,t,r){var i=n+r;or.setPercentageWidth(e,i)}}}(or.percentageBasedSizeRegex().exec(t)[1],e);if(or.pixelBasedSizeRegex().test(t)){var n=or.pixelBasedSizeRegex().exec(t);return xo(n[1])}var r=Yn(e);return xo(r)}(e,t)})},_o=function(e){return wt(e)},So=function(e){var t=vt(e);return _o(t)},ko={adjustWidth:function(e,t,n,r){var i=Co(e),o=i.getCellDelta(t),a=So(e),s=i.getWidths(a,r,i),u=ao(s,n,o,i),l=T.map(u,function(e,t){return e+s[t]}),c=yo(a,l);T.each(c,function(e){i.setElementWidth(e.element(),e.width())}),n===a.grid().columns()-1&&i.setTableWidth(e,l,o)},adjustHeight:function(e,t,n,r){var i=So(e),o=go.getPixelHeights(i,r),a=T.map(o,function(e,r){return n===r?Math.max(t+e,uo.minHeight()):e}),s=bo(i,a),u=wo(i,a);T.each(u,function(e){or.setHeight(e.element(),e.height())}),T.each(s,function(e){or.setHeight(e.element(),e.height())});var l,c=(l=a,T.foldr(l,function(e,t){return e+t},0));or.setHeight(e,c)},adjustWidthTo:function(e,t,n){var r=Co(e),i=_o(t),o=r.getWidths(i,n,r),a=yo(i,o);T.each(a,function(e){r.setElementWidth(e.element(),e.width())});var s=T.foldr(o,function(e,t){return t+e},0);a.length>0&&r.setElementWidth(e,s)}},To=function(e){0===pt(e).length&&Lt.remove(e)},Eo=F.immutable("grid","cursor"),No=function(e,t,n){return Ao(e,t,n).orThunk(function(){return Ao(e,0,0)})},Ao=function(e,t,n){return c.from(e[t]).bind(function(e){return c.from(e.cells()[n]).bind(function(e){return c.from(e.element())})})},Ro=function(e,t,n){return Eo(e,Ao(e,t,n))},Oo=function(e){return T.foldl(e,function(e,t){return T.exists(e,function(e){return e.row()===t.row()})?e:e.concat([t])},[]).sort(function(e,t){return e.row()-t.row()})},Do=function(e){return T.foldl(e,function(e,t){return T.exists(e,function(e){return e.column()===t.column()})?e:e.concat([t])},[]).sort(function(e,t){return e.column()-t.column()})},Po=function(e,t,n){var r=function(e,t){return T.map(e,function(e){var n=T.map(pt(e),function(e){var t=Ge.has(e,"rowspan")?parseInt(Ge.get(e,"rowspan"),10):1,n=Ge.has(e,"colspan")?parseInt(Ge.get(e,"colspan"),10):1;return V.detail(e,t,n)});return V.rowdata(e,n,t.section())})}(e,n),i=wt(r);return oi(i,t,!0)},Io=ko.adjustWidthTo,Bo={insertRowBefore:Bi(function(e,t,n,r){var i=t.row(),o=t.row(),a=Gi(e,o,i,n,r.getOrInit);return Ro(a,o,t.column())},Li,i.noop,i.noop,Dr),insertRowsBefore:Bi(function(e,t,n,r){var i=t[0].row(),o=t[0].row(),a=Oo(t),s=T.foldl(a,function(e,t){return Gi(e,o,i,n,r.getOrInit)},e);return Ro(s,o,t[0].column())},Hi,i.noop,i.noop,Dr),insertRowAfter:Bi(function(e,t,n,r){var i=t.row(),o=t.row()+t.rowspan(),a=Gi(e,o,i,n,r.getOrInit);return Ro(a,o,t.column())},Li,i.noop,i.noop,Dr),insertRowsAfter:Bi(function(e,t,n,r){var i=Oo(t),o=i[i.length-1].row(),a=i[i.length-1].row()+i[i.length-1].rowspan(),s=T.foldl(i,function(e,t){return Gi(e,a,o,n,r.getOrInit)},e);return Ro(s,a,t[0].column())},Hi,i.noop,i.noop,Dr),insertColumnBefore:Bi(function(e,t,n,r){var i=t.column(),o=t.column(),a=Qi(e,o,i,n,r.getOrInit);return Ro(a,t.row(),o)},Li,Io,i.noop,Dr),insertColumnsBefore:Bi(function(e,t,n,r){var i=Do(t),o=i[0].column(),a=i[0].column(),s=T.foldl(i,function(e,t){return Qi(e,a,o,n,r.getOrInit)},e);return Ro(s,t[0].row(),a)},Hi,Io,i.noop,Dr),insertColumnAfter:Bi(function(e,t,n,r){var i=t.column(),o=t.column()+t.colspan(),a=Qi(e,o,i,n,r.getOrInit);return Ro(a,t.row(),o)},Li,Io,i.noop,Dr),insertColumnsAfter:Bi(function(e,t,n,r){var i=t[t.length-1].column(),o=t[t.length-1].column()+t[t.length-1].colspan(),a=Do(t),s=T.foldl(a,function(e,t){return Qi(e,o,i,n,r.getOrInit)},e);return Ro(s,t[0].row(),o)},Hi,Io,i.noop,Dr),splitCellIntoColumns:Bi(function(e,t,n,r){var i=function(e,t,n,r,i){var o=n+1;return T.map(e,function(e,a){var s=a===t?V.elementnew(i(ei(e,n),r),!0):Zr(e,n);return Jr(e,o,s)})}(e,t.row(),t.column(),n,r.getOrInit);return Ro(i,t.row(),t.column())},Li,Io,i.noop,Dr),splitCellIntoRows:Bi(function(e,t,n,r){var i=function(e,t,n,r,i){var o=t+1,a=e.slice(0,o),s=e.slice(o),u=ti(e[t],function(e,t){return t===n?V.elementnew(i(e.element(),r),!0):e});return a.concat([u]).concat(s)}(e,t.row(),t.column(),n,r.getOrInit);return Ro(i,t.row(),t.column())},Li,i.noop,i.noop,Dr),eraseColumns:Bi(function(e,t,n,r){var i=Do(t),o=function(e,t,n){var r=T.map(e,function(e){var r=e.cells().slice(0,t).concat(e.cells().slice(n+1));return V.rowcells(r,e.section())});return T.filter(r,function(e){return e.cells().length>0})}(e,i[0].column(),i[i.length-1].column()),a=No(o,t[0].row(),t[0].column());return Eo(o,a)},Hi,Io,To,Dr),eraseRows:Bi(function(e,t,n,r){var i=Oo(t),o=function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))}(e,i[0].row(),i[i.length-1].row()),a=No(o,t[0].row(),t[0].column());return Eo(o,a)},Hi,i.noop,To,Dr),makeColumnHeader:Bi(function(e,t,n,r){var i=no(e,t.column(),n,r.replaceOrInit);return Ro(i,t.row(),t.column())},Li,i.noop,i.noop,Pr("row","th")),unmakeColumnHeader:Bi(function(e,t,n,r){var i=no(e,t.column(),n,r.replaceOrInit);return Ro(i,t.row(),t.column())},Li,i.noop,i.noop,Pr(null,"td")),makeRowHeader:Bi(function(e,t,n,r){var i=ro(e,t.row(),n,r.replaceOrInit);return Ro(i,t.row(),t.column())},Li,i.noop,i.noop,Pr("col","th")),unmakeRowHeader:Bi(function(e,t,n,r){var i=ro(e,t.row(),n,r.replaceOrInit);return Ro(i,t.row(),t.column())},Li,i.noop,i.noop,Pr(null,"td")),mergeCells:Bi(function(e,t,n,r){var o=t.cells();jr(o);var a=function(e,t,n,r){if(0===e.length)return e;for(var i=t.startRow();i<=t.finishRow();i++)for(var o=t.startCol();o<=t.finishCol();o++)Qr(e[i],o,V.elementnew(r(),!1));return e}(e,t.bounds(),0,i.constant(o[0]));return Eo(a,c.from(o[0]))},function(e,t){return t.mergable()},i.noop,i.noop,Ir),unmergeCells:Bi(function(e,t,n,r){var i=T.foldr(t,function(e,t){return Yi(e,t,n,r.combine(t))},e);return Eo(i,c.from(t[0]))},function(e,t){return t.unmergable()},Io,i.noop,Ir),pasteCells:Bi(function(e,t,n,r){var i,o,a,s,u=(i=t.clipboard(),o=t.generators(),a=vt(i),s=wt(a),oi(s,o,!0));return function(e,t,n,r,i){return qi(e,t,n).map(function(o){var a=Xi(t,o,r);return function(e,t,n,r,i){for(var o=e.row(),a=e.column(),s=o+n.length,u=a+ni(n[0]),l=o;l<s;l++)for(var c=a;c<u;c++){Ki(t,l,c,i)&&Yi(t,ei(t[l],c),i,r.cell);var f=ei(n[l-o],c-a),d=r.replace(f);Qr(t[l],c,V.elementnew(d,!0))}return t}(e,a,n,r,i)})}(V.address(t.row(),t.column()),e,u,t.generators(),n).fold(function(){return Eo(e,c.some(t.element()))},function(e){var n=No(e,t.row(),t.column());return Eo(e,n)})},function(e,t){return ht(t.element()).bind(function(n){return Ii(e,n).map(function(e){return qr.merge(e,{generators:t.generators,clipboard:t.clipboard})})})},Io,i.noop,Dr),pasteRowsBefore:Bi(function(e,t,n,r){var i=e[t.cells[0].row()],o=t.cells[0].row(),a=Po(t.clipboard(),t.generators(),i),s=Ji(o,e,a,t.generators(),n),u=No(s,t.cells[0].row(),t.cells[0].column());return Eo(s,u)},Fi,i.noop,i.noop,Dr),pasteRowsAfter:Bi(function(e,t,n,r){var i=e[t.cells[0].row()],o=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),a=Po(t.clipboard(),t.generators(),i),s=Ji(o,e,a,t.generators(),n),u=No(s,t.cells[0].row(),t.cells[0].column());return Eo(s,u)},Fi,i.noop,i.noop,Dr)},Mo=function(e){return Y.fromDom(e.getBody())},Lo={getBody:Mo,getIsRoot:function(e){return function(t){return Ae.eq(t,Mo(e))}},addSizeSuffix:function(e){return/^[0-9]+$/.test(e)&&(e+="px"),e},removePxSuffix:function(e){return e?e.replace(/px$/,""):""}},Ho=function(e){return"rtl"===Ot.get(e,"direction")?"rtl":"ltr"},Fo=Ho,zo={isRtl:i.constant(!1)},jo={isRtl:i.constant(!0)},Wo=function(e){return"rtl"===Fo(e)?jo:zo},Uo=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],$o={"border-collapse":"collapse",width:"100%"},qo={border:"1"},Vo=function(e){return e.getParam("table_cell_advtab",!0,"boolean")},Xo=function(e){return e.getParam("table_row_advtab",!0,"boolean")},Yo=function(e){return e.getParam("table_advtab",!0,"boolean")},Ko=function(e){return e.getParam("table_style_by_css",!1,"boolean")},Jo=function(e){return e.getParam("table_cell_class_list",[],"array")},Go=function(e){return e.getParam("table_row_class_list",[],"array")},Qo=function(e){return e.getParam("table_class_list",[],"array")},Zo=function(e){return!1===e.getParam("table_responsive_width")},ea=function(e,t){return e.fire("newrow",{node:t})},ta=function(e,t){return e.fire("newcell",{node:t})},na=function(e,t,n){var r=vt(e),i=wt(r);return Hi(i,t).map(function(e){var t=oi(i,n,!1).slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan());return function(e){return T.map(e,function(e){var t=Ut(e.element());return T.each(e.cells(),function(e){var n=$t(e.element());ai(n,"colspan",e.colspan(),1),ai(n,"rowspan",e.rowspan(),1),It.append(t,n)}),t})}(Mi(t,n))})},ra=tinymce.util.Tools.resolve("tinymce.util.Tools"),ia={applyAlign:function(e,t,n){n&&e.formatter.apply("align"+n,{},t)},applyVAlign:function(e,t,n){n&&e.formatter.apply("valign"+n,{},t)},unApplyAlign:function(e,t){ra.each("left center right".split(" "),function(n){e.formatter.remove("align"+n,{},t)})},unApplyVAlign:function(e,t){ra.each("top middle bottom".split(" "),function(n){e.formatter.remove("valign"+n,{},t)})},getTDTHOverallStyle:function(e,t,n){var r;return function(t,r){for(var i=0;i<r.length;i++){var o=e.getStyle(r[i],n);if(void 0===t&&(t=o),t!==o)return""}return t}(r,e.select("td,th",t))}},oa=function(e,t){var n=e.dom,r=t.control.rootControl,i=r.toJSON(),o=n.parseStyle(i.style);"style"===t.control.name()?(r.find("#borderStyle").value(o["border-style"]||"")[0].fire("select"),r.find("#borderColor").value(o["border-color"]||"")[0].fire("change"),r.find("#backgroundColor").value(o["background-color"]||"")[0].fire("change"),r.find("#width").value(o.width||"").fire("change"),r.find("#height").value(o.height||"").fire("change")):(o["border-style"]=i.borderStyle,o["border-color"]=i.borderColor,o["background-color"]=i.backgroundColor,o.width=i.width?Lo.addSizeSuffix(i.width):"",o.height=i.height?Lo.addSizeSuffix(i.height):""),r.find("#style").value(n.serializeStyle(n.parseStyle(n.serializeStyle(o))))},aa={createStyleForm:function(e){var t=function(){var t=function(e){return e.getParam("color_picker_callback")}(e);if(t)return function(n){return t.call(e,function(e){n.control.value(e).fire("change")},n.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:i.curry(oa,e)},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:i.curry(oa,e),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:t()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:t()}]}]}},buildListItems:function(e,t,n){var r=function(e,n){return n=n||[],ra.each(e,function(e){var i={text:e.text||e.title};e.menu?i.menu=r(e.menu):(i.value=e.value,t&&t(i)),n.push(i)}),n};return r(e,n||[])},updateStyleField:oa,extractAdvancedStyles:function(e,t){var n=e.parseStyle(e.getAttrib(t,"style")),r={};return n["border-style"]&&(r.borderStyle=n["border-style"]),n["border-color"]&&(r.borderColor=n["border-color"]),n["background-color"]&&(r.backgroundColor=n["background-color"]),r.style=e.serializeStyle(n),r}},sa=function(e,t,n){var r,i=e.dom;function o(e,t,n){n&&i.setAttrib(e,t,n)}function a(e,t,n){n&&i.setStyle(e,t,n)}aa.updateStyleField(e,n),r=n.control.rootControl.toJSON(),e.undoManager.transact(function(){ra.each(t,function(n){var s,u;o(n,"scope",r.scope),1===t.length?o(n,"style",r.style):(s=n,u=r.style,delete s.dataset.mceStyle,s.style.cssText+=";"+u),o(n,"class",r.class),a(n,"width",Lo.addSizeSuffix(r.width)),a(n,"height",Lo.addSizeSuffix(r.height)),r.type&&n.nodeName.toLowerCase()!==r.type&&(n=i.rename(n,r.type)),1===t.length&&(ia.unApplyAlign(e,n),ia.unApplyVAlign(e,n)),r.align&&ia.applyAlign(e,n,r.align),r.valign&&ia.applyVAlign(e,n,r.valign)}),e.focus()})},ua=function(e){var t,n,r,o=[];if(o=e.dom.select("td[data-mce-selected],th[data-mce-selected]"),t=e.dom.getParent(e.selection.getStart(),"td,th"),!o.length&&t&&o.push(t),t=t||o[0]){n=o.length>1?{width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:t.nodeName.toLowerCase()}:function(e,t){var n=e.dom,r={width:n.getStyle(t,"width")||n.getAttrib(t,"width"),height:n.getStyle(t,"height")||n.getAttrib(t,"height"),scope:n.getAttrib(t,"scope"),class:n.getAttrib(t,"class"),type:t.nodeName.toLowerCase(),style:"",align:"",valign:""};return ra.each("left center right".split(" "),function(n){e.formatter.matchNode(t,"align"+n)&&(r.align=n)}),ra.each("top middle bottom".split(" "),function(n){e.formatter.matchNode(t,"valign"+n)&&(r.valign=n)}),Vo(e)&&ra.extend(r,aa.extractAdvancedStyles(n,t)),r}(e,t),Jo(e).length>0&&(r={name:"class",type:"listbox",label:"Class",values:aa.buildListItems(Jo(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"td",classes:[t.value]})})})});var a={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:i.curry(aa.updateStyleField,e)},{label:"Height",name:"height",onchange:i.curry(aa.updateStyleField,e)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},r]};Vo(e)?e.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:n,body:[{title:"General",type:"form",items:a},aa.createStyleForm(e)],onsubmit:i.curry(sa,e,o)}):e.windowManager.open({title:"Cell properties",data:n,body:a,onsubmit:i.curry(sa,e,o)})}},la=function(e,t,n){var r=e.getParent(t,"table"),i=t.parentNode,o=e.select(n,r)[0];o||(o=e.create(n),r.firstChild?"CAPTION"===r.firstChild.nodeName?e.insertAfter(o,r.firstChild):r.insertBefore(o,r.firstChild):r.appendChild(o)),o.appendChild(t),i.hasChildNodes()||e.remove(i)};function ca(e,t,n,r){var i=e.dom;function o(e,t,n){n&&i.setAttrib(e,t,n)}aa.updateStyleField(e,r);var a=r.control.rootControl.toJSON();e.undoManager.transact(function(){ra.each(t,function(t){var r,s,u;o(t,"scope",a.scope),o(t,"style",a.style),o(t,"class",a.class),r=t,s="height",(u=Lo.addSizeSuffix(a.height))&&i.setStyle(r,s,u),a.type!==t.parentNode.nodeName.toLowerCase()&&la(e.dom,t,a.type),a.align!==n.align&&(ia.unApplyAlign(e,t),ia.applyAlign(e,t,a.align))}),e.focus()})}var fa=function(e){var t,n,r,o,a,s,u=e.dom,l=[];t=u.getParent(e.selection.getStart(),"table"),n=u.getParent(e.selection.getStart(),"td,th"),ra.each(t.rows,function(e){ra.each(e.cells,function(t){if(u.getAttrib(t,"data-mce-selected")||t===n)return l.push(e),!1})}),(r=l[0])&&(a=l.length>1?{height:"",scope:"",style:"",class:"",align:"",type:r.parentNode.nodeName.toLowerCase()}:function(e,t){var n=e.dom,r={height:n.getStyle(t,"height")||n.getAttrib(t,"height"),scope:n.getAttrib(t,"scope"),class:n.getAttrib(t,"class"),align:"",style:"",type:t.parentNode.nodeName.toLowerCase()};return ra.each("left center right".split(" "),function(n){e.formatter.matchNode(t,"align"+n)&&(r.align=n)}),Xo(e)&&ra.extend(r,aa.extractAdvancedStyles(n,t)),r}(e,r),Go(e).length>0&&(o={name:"class",type:"listbox",label:"Class",values:aa.buildListItems(Go(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"tr",classes:[t.value]})})})}),s={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},o]},Xo(e)?e.windowManager.open({title:"Row properties",data:a,bodyType:"tabpanel",body:[{title:"General",type:"form",items:s},aa.createStyleForm(e)],onsubmit:i.curry(ca,e,l,a)}):e.windowManager.open({title:"Row properties",data:a,body:s,onsubmit:i.curry(ca,e,l,a)}))},da=tinymce.util.Tools.resolve("tinymce.Env"),ha={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},pa=function(e,t){e.selection.select(t.dom(),!0),e.selection.collapse(!0)},ma=function(e,t,n){var r,o=function(e){return e.getParam("table_default_styles",$o,"object")}(e),a=function(e,t,n,r,i){void 0===i&&(i=ha);var o=Y.fromTag("table");Ot.setAll(o,i.styles),Ge.setAll(o,i.attributes);var a=Y.fromTag("tbody");It.append(o,a);for(var s=[],u=0;u<e;u++){for(var l=Y.fromTag("tr"),c=0;c<t;c++){var f=u<n||c<r?Y.fromTag("th"):Y.fromTag("td");c<r&&Ge.set(f,"scope","row"),u<n&&Ge.set(f,"scope","col"),It.append(f,Y.fromTag("br")),i.percentages&&Ot.set(f,"width",100/t+"%"),It.append(l,f)}s.push(l)}return Bt.append(a,s),o}(n,t,0,0,{styles:o,attributes:function(e){return e.getParam("table_default_attributes",qo,"object")}(e),percentages:(r=o.width,d.isString(r)&&-1!==r.indexOf("%")&&!Zo(e))});Ge.set(a,"data-mce-id","__mce");var s=function(e){var t=Y.fromTag("div"),n=Y.fromDom(e.dom().cloneNode(!0));return It.append(t,n),function(e){return e.dom().innerHTML}(t)}(a);return e.insertContent(s),ct.descendant(Lo.getBody(e),'table[data-mce-id="__mce"]').map(function(t){return Zo(e)&&Ot.set(t,"width",Ot.get(t,"width")),Ge.remove(t,"data-mce-id"),function(e,t){T.each(rt.descendants(t,"tr"),function(t){ea(e,t.dom()),T.each(rt.descendants(t,"th,td"),function(t){ta(e,t.dom())})})}(e,t),function(e,t){ct.descendant(t,"td,th").each(i.curry(pa,e))}(e,t),t.dom()}).getOr(null)};function ga(e,t,n,r){if("TD"===t.tagName||"TH"===t.tagName)e.setStyle(t,n,r);else if(t.children)for(var i=0;i<t.children.length;i++)ga(e,t.children[i],n,r)}var va=function(e,t,n){var r,i,o=e.dom;aa.updateStyleField(e,n),!1===(i=n.control.rootControl.toJSON()).class&&delete i.class,e.undoManager.transact(function(){t||(t=ma(e,i.cols||1,i.rows||1)),function(e,t,n){var r=e.dom,i={},o={};if(i.class=n.class,o.height=Lo.addSizeSuffix(n.height),r.getAttrib(t,"width")&&!Ko(e)?i.width=Lo.removePxSuffix(n.width):o.width=Lo.addSizeSuffix(n.width),Ko(e)?(o["border-width"]=Lo.addSizeSuffix(n.border),o["border-spacing"]=Lo.addSizeSuffix(n.cellspacing),ra.extend(i,{"data-mce-border-color":n.borderColor,"data-mce-cell-padding":n.cellpadding,"data-mce-border":n.border})):ra.extend(i,{border:n.border,cellpadding:n.cellpadding,cellspacing:n.cellspacing}),Ko(e)&&t.children)for(var a=0;a<t.children.length;a++)ga(r,t.children[a],{"border-width":Lo.addSizeSuffix(n.border),"border-color":n.borderColor,padding:Lo.addSizeSuffix(n.cellpadding)});n.style?ra.extend(o,r.parseStyle(n.style)):o=ra.extend({},r.parseStyle(r.getAttrib(t,"style")),o),i.style=r.serializeStyle(o),r.setAttribs(t,i)}(e,t,i),(r=o.select("caption",t)[0])&&!i.caption&&o.remove(r),!r&&i.caption&&((r=o.create("caption")).innerHTML=da.ie?"Â ":'<br data-mce-bogus="1"/>',t.insertBefore(r,t.firstChild)),ia.unApplyAlign(e,t),i.align&&ia.applyAlign(e,t,i.align),e.focus(),e.addVisual()})},ya=function(e,t){var n,r,o,a,s,u=e.dom,l={};!0===t?(n=u.getParent(e.selection.getStart(),"table"))&&(l=function(e,t){var n=e.dom,r={width:n.getStyle(t,"width")||n.getAttrib(t,"width"),height:n.getStyle(t,"height")||n.getAttrib(t,"height"),cellspacing:n.getStyle(t,"border-spacing")||n.getAttrib(t,"cellspacing"),cellpadding:n.getAttrib(t,"data-mce-cell-padding")||n.getAttrib(t,"cellpadding")||ia.getTDTHOverallStyle(e.dom,t,"padding"),border:n.getAttrib(t,"data-mce-border")||n.getAttrib(t,"border")||ia.getTDTHOverallStyle(e.dom,t,"border"),borderColor:n.getAttrib(t,"data-mce-border-color"),caption:!!n.select("caption",t)[0],class:n.getAttrib(t,"class")};return ra.each("left center right".split(" "),function(n){e.formatter.matchNode(t,"align"+n)&&(r.align=n)}),Yo(e)&&ra.extend(r,aa.extractAdvancedStyles(n,t)),r}(e,n)):(r={label:"Cols",name:"cols"},o={label:"Rows",name:"rows"}),Qo(e).length>0&&(l.class&&(l.class=l.class.replace(/\s*mce\-item\-table\s*/g,"")),a={name:"class",type:"listbox",label:"Class",values:aa.buildListItems(Qo(e),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({block:"table",classes:[t.value]})})})}),s={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:function(e){return e.getParam("table_appearance_options",!0,"boolean")}(e)?[r,o,{label:"Width",name:"width",onchange:i.curry(aa.updateStyleField,e)},{label:"Height",name:"height",onchange:i.curry(aa.updateStyleField,e)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[r,o,{label:"Width",name:"width",onchange:i.curry(aa.updateStyleField,e)},{label:"Height",name:"height",onchange:i.curry(aa.updateStyleField,e)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},a]},Yo(e)?e.windowManager.open({title:"Table properties",data:l,bodyType:"tabpanel",body:[{title:"General",type:"form",items:s},aa.createStyleForm(e)],onsubmit:i.curry(va,e,n)}):e.windowManager.open({title:"Table properties",data:l,body:s,onsubmit:i.curry(va,e,n)})},ba=ra.each,wa=function(e,t,n,r,o){var a=Lo.getIsRoot(e),s=function(){return Y.fromDom(e.dom.getParent(e.selection.getStart(),"th,td"))},u=function(e){return mt(e,a)},l=function(t){var i=s();u(i).each(function(o){var a=jn.forMenu(r,o,i);t(o,a).each(function(t){e.selection.setRng(t),e.focus(),n.clear(o)})})},f=function(t){var n=s();return u(n).bind(function(t){var o=Y.fromDom(e.getDoc()),a=jn.forMenu(r,t,n),s=rn(i.noop,o,c.none());return na(t,a,s)})},d=function(t){o.get().each(function(i){var o=T.map(i,function(e){return $t(e)}),a=s();u(a).bind(function(i){var s=Y.fromDom(e.getDoc()),u=on(s),l=jn.pasteRows(r,i,a,o,u);t(i,l).each(function(t){e.selection.setRng(t),e.focus(),n.clear(i)})})})};ba({mceTableSplitCells:function(){l(t.unmergeCells)},mceTableMergeCells:function(){l(t.mergeCells)},mceTableInsertRowBefore:function(){l(t.insertRowsBefore)},mceTableInsertRowAfter:function(){l(t.insertRowsAfter)},mceTableInsertColBefore:function(){l(t.insertColumnsBefore)},mceTableInsertColAfter:function(){l(t.insertColumnsAfter)},mceTableDeleteCol:function(){l(t.deleteColumn)},mceTableDeleteRow:function(){l(t.deleteRow)},mceTableCutRow:function(e){o.set(f()),l(t.deleteRow)},mceTableCopyRow:function(e){o.set(f())},mceTablePasteRowBefore:function(e){d(t.pasteRowsBefore)},mceTablePasteRowAfter:function(e){d(t.pasteRowsAfter)},mceTableDelete:function(){var t=Y.fromDom(e.dom.getParent(e.selection.getStart(),"th,td"));mt(t,a).filter(i.not(a)).each(function(t){var n=Y.fromText("");It.after(t,n),Lt.remove(t);var r=e.dom.createRng();r.setStart(n.dom(),0),r.setEnd(n.dom(),0),e.selection.setRng(r)})}},function(t,n){e.addCommand(n,t)}),ba({mceInsertTable:i.curry(ya,e),mceTableProps:i.curry(ya,e,!0),mceTableRowProps:i.curry(fa,e),mceTableCellProps:i.curry(ua,e)},function(t,n){e.addCommand(n,function(e,n){t(n)})})},xa=function(e){var t=c.from(e.dom().documentElement).map(Y.fromDom).getOr(e);return{parent:i.constant(t),view:i.constant(e),origin:i.constant(ur(0,0))}};function Ca(e){var t=F.immutable.apply(null,e),n=[];return{bind:function(e){if(void 0===e)throw"Event bind error: undefined handler";n.push(e)},unbind:function(e){n=T.filter(n,function(t){return t!==e})},trigger:function(){var e=t.apply(null,arguments);T.each(n,function(t){t(e)})}}}var _a={create:function(e){return{registry:D.map(e,function(e){return{bind:e.bind,unbind:e.unbind}}),trigger:D.map(e,function(e){return e.trigger})}}},Sa={mode:Ar.exactly(["compare","extract","mutate","sink"]),sink:Ar.exactly(["element","start","stop","destroy"]),api:Ar.exactly(["forceDrop","drop","move","delayDrop"])},ka={resolve:di("ephox-dragster").resolve},Ta=function(e,t,n,r,o){var a=function(e,t){return function(n){if(e(n)){var r=Y.fromDom(n.target),o=function(){n.stopPropagation()},a=function(){n.preventDefault()},s=i.compose(a,o),u=function(e,t,n,r,o,a,s){return{target:i.constant(e),x:i.constant(t),y:i.constant(n),stop:r,prevent:o,kill:a,raw:i.constant(s)}}(r,n.clientX,n.clientY,o,a,s,n);t(u)}}}(n,r);return e.dom().addEventListener(t,a,o),{unbind:i.curry(Ea,e,t,a,o)}},Ea=function(e,t,n,r){e.dom().removeEventListener(t,n,r)},Na=i.constant(!0),Aa={bind:function(e,t,n){return function(e,t,n,r){return Ta(e,t,n,r,!1)}(e,t,Na,n)},capture:function(e,t,n){return function(e,t,n,r){return Ta(e,t,n,r,!0)}(e,t,Na,n)}},Ra=Sa.mode({compare:function(e,t){return ur(t.left()-e.left(),t.top()-e.top())},extract:function(e){return c.some(ur(e.x(),e.y()))},sink:function(e,t){var n=function(e){var t=qr.merge({layerClass:ka.resolve("blocker")},e),n=Y.fromTag("div");return Ge.set(n,"role","presentation"),Ot.setAll(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Si.add(n,ka.resolve("blocker")),Si.add(n,t.layerClass),{element:function(){return n},destroy:function(){Lt.remove(n)}}}(t),r=Aa.bind(n.element(),"mousedown",e.forceDrop),i=Aa.bind(n.element(),"mouseup",e.drop),o=Aa.bind(n.element(),"mousemove",e.move),a=Aa.bind(n.element(),"mouseout",e.delayDrop);return Sa.sink({element:n.element,start:function(e){It.append(e,n.element())},stop:function(){Lt.remove(n.element())},destroy:function(){n.destroy(),i.unbind(),o.unbind(),a.unbind(),r.unbind()}})},mutate:function(e,t){e.mutate(t.left(),t.top())}});function Oa(){var e={onEvent:function(e,t){},reset:i.noop},t=function(){var e=c.none(),t=_a.create({move:Ca(["info"])});return{onEvent:function(n,r){r.extract(n).each(function(n){(function(t,n){var r=e.map(function(e){return t.compare(e,n)});return e=c.some(n),r})(r,n).each(function(e){t.trigger.move(e)})})},reset:function(){e=c.none()},events:t.registry}}(),n=e;return{on:function(){n.reset(),n=t},off:function(){n.reset(),n=e},isOn:function(){return n===t},onEvent:function(e,t){n.onEvent(e,t)},events:t.events}}var Da=function(e,t,n){var r=!1,i=_a.create({start:Ca([]),stop:Ca([])}),o=Oa(),a=function(){l.stop(),o.isOn()&&(o.off(),i.trigger.stop())},s=function(e,t){var n=null;return{cancel:function(){null!==n&&(clearTimeout(n),n=null)},throttle:function(){var r=arguments;null!==n&&clearTimeout(n),n=setTimeout(function(){e.apply(null,r),n=null,r=null},t)}}}(a,200);o.events.move.bind(function(n){t.mutate(e,n.info())});var u=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);if(r)return e.apply(null,t)}},l=t.sink(Sa.api({forceDrop:a,drop:u(a),move:u(function(e,n){s.cancel(),o.onEvent(e,t)}),delayDrop:u(s.throttle)}),n);return{element:l.element,go:function(e){l.start(e),o.on(),i.trigger.start()},on:function(){r=!0},off:function(){r=!1},destroy:function(){l.destroy()},events:i.registry}},Pa={transform:function(e,t){var n=void 0!==t?t:{},r=void 0!==n.mode?n.mode:Ra;return Da(e,r,t)}};var Ia={any:function(e){return ct.first(e).isSome()},ancestor:function(e,t,n){return ct.ancestor(e,t,n).isSome()},sibling:function(e,t){return ct.sibling(e,t).isSome()},child:function(e,t){return ct.child(e,t).isSome()},descendant:function(e,t){return ct.descendant(e,t).isSome()},closest:function(e,t,n){return ct.closest(e,t,n).isSome()}},Ba=hi.resolve("resizer-bar-dragging");function Ma(e,t){var n=xr.height,r=function(e,t,n){var r=function(){var e=_a.create({drag:Ca(["xDelta","yDelta","target"])}),t=c.none(),n=function(){var e=_a.create({drag:Ca(["xDelta","yDelta"])});return{mutate:function(t,n){e.trigger.drag(t,n)},events:e.registry}}();return n.events.drag.bind(function(n){t.each(function(t){e.trigger.drag(n.xDelta(),n.yDelta(),t)})}),{assign:function(e){t=c.some(e)},get:function(){return t},mutate:n.mutate,events:e.registry}}(),o=Pa.transform(r,{}),a=c.none(),s=function(e,t){return c.from(Ge.get(e,t))};r.events.drag.bind(function(e){s(e.target(),"data-row").each(function(t){var n=uo.getInt(e.target(),"top");Ot.set(e.target(),"top",n+e.yDelta()+"px")}),s(e.target(),"data-column").each(function(t){var n=uo.getInt(e.target(),"left");Ot.set(e.target(),"left",n+e.xDelta()+"px")})});var u=function(e,t){return uo.getInt(e,t)-parseInt(Ge.get(e,"data-initial-"+t),10)};o.events.stop.bind(function(){r.get().each(function(r){a.each(function(i){s(r,"data-row").each(function(e){var t=u(r,"top");Ge.remove(r,"data-initial-top"),p.trigger.adjustHeight(i,t,parseInt(e,10))}),s(r,"data-column").each(function(e){var t=u(r,"left");Ge.remove(r,"data-initial-left"),p.trigger.adjustWidth(i,t,parseInt(e,10))}),Di.refresh(e,i,n,t)})})});var l=function(t,n){p.trigger.startAdjust(),r.assign(t),Ge.set(t,"data-initial-"+n,parseInt(Ot.get(t,n),10)),Si.add(t,Ba),Ot.set(t,"opacity","0.2"),o.go(e.parent())},f=Aa.bind(e.parent(),"mousedown",function(e){Di.isRowBar(e.target())&&l(e.target(),"top"),Di.isColBar(e.target())&&l(e.target(),"left")}),d=function(t){return Ae.eq(t,e.view())},h=Aa.bind(e.view(),"mouseover",function(r){"table"===Ve.name(r.target())||Ia.closest(r.target(),"table",d)?(a="table"===Ve.name(r.target())?c.some(r.target()):ct.ancestor(r.target(),"table",d)).each(function(r){Di.refresh(e,r,n,t)}):et.inBody(r.target())&&Di.destroy(e)}),p=_a.create({adjustHeight:Ca(["table","delta","row"]),adjustWidth:Ca(["table","delta","column"]),startAdjust:Ca([])});return{destroy:function(){f.unbind(),h.unbind(),o.destroy(),Di.destroy(e)},refresh:function(r){Di.refresh(e,r,n,t)},on:o.on,off:o.off,hideBars:i.curry(Di.hide,e),showBars:i.curry(Di.show,e),events:p.registry}}(e,t,n),o=_a.create({beforeResize:Ca(["table"]),afterResize:Ca(["table"]),startDrag:Ca([])});return r.events.adjustHeight.bind(function(e){o.trigger.beforeResize(e.table());var t=n.delta(e.delta(),e.table());ko.adjustHeight(e.table(),t,e.row(),n),o.trigger.afterResize(e.table())}),r.events.startAdjust.bind(function(e){o.trigger.startDrag()}),r.events.adjustWidth.bind(function(e){o.trigger.beforeResize(e.table());var n=t.delta(e.delta(),e.table());ko.adjustWidth(e.table(),n,e.column(),t),o.trigger.afterResize(e.table())}),{on:r.on,off:r.off,hideBars:r.hideBars,showBars:r.showBars,destroy:r.destroy,events:o.registry}}var La=function(e,t){return e.inline?function(e,t){return{parent:i.constant(t),view:i.constant(e),origin:i.constant(ur(0,0))}}(Lo.getBody(e),function(){var e=Y.fromTag("div");return Ot.setAll(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),It.append(et.body(),e),e}()):xa(Y.fromDom(e.getDoc()))},Ha=function(e){var t,n,r=c.none(),i=c.none(),o=c.none(),a=/(\d+(\.\d+)?)%/,s=function(e){return"TABLE"===e.nodeName};return e.on("init",function(){var t=_r(Wo),n=La(e);if(o=c.some(n),function(e){var t=e.getParam("object_resizing",!0);return"table"===t||t}(e)&&function(e){return e.getParam("table_resize_bars",!0,"boolean")}(e)){var a=Ma(n,t);a.on(),a.events.startDrag.bind(function(t){r=c.some(e.selection.getRng())}),a.events.afterResize.bind(function(t){var n=t.table(),i=rt.descendants(n,"td[data-mce-style],th[data-mce-style]");T.each(i,function(e){Ge.remove(e,"data-mce-style")}),r.each(function(t){e.selection.setRng(t),e.focus()}),e.undoManager.add()}),i=c.some(a)}}),e.on("ObjectResizeStart",function(r){var i,o=r.target;s(o)&&(t=r.width,i=o,n=e.dom.getStyle(i,"width")||e.dom.getAttrib(i,"width"))}),e.on("ObjectResized",function(r){var i=r.target;if(s(i)){var o=i;if(a.test(n)){var u=parseFloat(a.exec(n)[1]),l=r.width*u/t;e.dom.setStyle(o,"width",l+"%")}else{var c=[];ra.each(o.rows,function(t){ra.each(t.cells,function(t){var n=e.dom.getStyle(t,"width",!0);c.push({cell:t,width:n})})}),ra.each(c,function(t){e.dom.setStyle(t.cell,"width",t.width),e.dom.setAttrib(t.cell,"width",null)})}}}),{lazyResize:function(){return i},lazyWire:function(){return o.getOr(xa(Y.fromDom(e.getBody())))},destroy:function(){i.each(function(e){e.destroy()}),o.each(function(t){!function(e,t){e.inline&&Lt.remove(t.parent())}(e,t)})}}},Fa=function(e){return{fold:e}},za=function(e){return Fa(function(t,n,r,i){return t(e)})},ja=function(e,t){return Fa(function(n,r,i,o){return i(e,t)})},Wa=function(e,t){return mt(e,t).bind(function(t){var n=pt(t);return T.findIndex(n,function(t){return Ae.eq(e,t)}).map(function(e){return{index:i.constant(e),all:i.constant(n)}})})},Ua=function(e,t){return Wa(e,t).fold(function(){return za(e)},function(t){return t.index()+1<t.all().length?ja(e,t.all()[t.index()+1]):function(e){return Fa(function(t,n,r,i){return i(e)})}(e)})},$a=function(e,t){return Wa(e,t).fold(function(){return za()},function(t){return t.index()-1>=0?ja(e,t.all()[t.index()-1]):function(e){return Fa(function(t,n,r,i){return n(e)})}(e)})},qa=In([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Va={before:qa.before,on:qa.on,after:qa.after,cata:function(e,t,n,r){return e.fold(t,n,r)},getStart:function(e){return e.fold(i.identity,i.identity,i.identity)}},Xa=In([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ya=F.immutable("start","soffset","finish","foffset"),Ka={domRange:Xa.domRange,relative:Xa.relative,exact:Xa.exact,exactFromRange:function(e){return Xa.exact(e.start(),e.soffset(),e.finish(),e.foffset())},range:Ya,getWin:function(e){var t=function(e){return e.match({domRange:function(e){return Y.fromDom(e.startContainer)},relative:function(e,t){return Va.getStart(e)},exact:function(e,t,n,r){return e}})}(e);return Le.defaultView(t)}},Ja=function(e,t,n,r){var i=function(e,t,n,r){var i=Le.owner(e).dom().createRange();return i.setStart(e.dom(),t),i.setEnd(n.dom(),r),i}(e,t,n,r),o=Ae.eq(e,n)&&t===r;return i.collapsed&&!o},Ga=function(e,t){e.selectNodeContents(t.dom())},Qa=function(e){e.deleteContents()},Za=function(e){return{left:i.constant(e.left),top:i.constant(e.top),right:i.constant(e.right),bottom:i.constant(e.bottom),width:i.constant(e.width),height:i.constant(e.height)}},es=function(e){return e.document.createRange()},ts=function(e,t){Qa(e),e.insertNode(t.dom())},ns=function(e,t){var n=e.document.createRange();return Ga(n,t),n},rs=Ga,is=function(e,t,n){var r,i=e.document.createRange();return r=i,t.fold(function(e){r.setStartBefore(e.dom())},function(e,t){r.setStart(e.dom(),t)},function(e){r.setStartAfter(e.dom())}),function(e,t){n.fold(function(t){e.setEndBefore(t.dom())},function(t,n){e.setEnd(t.dom(),n)},function(t){e.setEndAfter(t.dom())})}(i),i},os=function(e,t,n,r,i){var o=e.document.createRange();return o.setStart(t.dom(),n),o.setEnd(r.dom(),i),o},as=Qa,ss=function(e){var t=e.cloneContents();return Y.fromDom(t)},us=function(e){var t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?c.some(n).map(Za):c.none()},ls=function(e){var t=e.getBoundingClientRect();return t.width>0||t.height>0?c.some(t).map(Za):c.none()},cs=function(e,t){return t.compareBoundaryPoints(e.END_TO_START,e)<1&&t.compareBoundaryPoints(e.START_TO_END,e)>-1},fs=function(e){return e.toString()},ds=In([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),hs=function(e,t,n){return t(Y.fromDom(n.startContainer),n.startOffset,Y.fromDom(n.endContainer),n.endOffset)},ps=function(e,t){return function(e,t){var n=t.ltr();return n.collapsed?t.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return ds.rtl(Y.fromDom(e.endContainer),e.endOffset,Y.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return hs(0,ds.ltr,n)}):hs(0,ds.ltr,n)}(0,function(e,t){return t.match({domRange:function(e){return{ltr:i.constant(e),rtl:c.none}},relative:function(t,n){return{ltr:te(function(){return is(e,t,n)}),rtl:te(function(){return c.some(is(e,n,t))})}},exact:function(t,n,r,i){return{ltr:te(function(){return os(e,t,n,r,i)}),rtl:te(function(){return c.some(os(e,r,i,t,n))})}}})}(e,t))},ms=(ds.ltr,ds.rtl,ps),gs=function(e,t){return ps(e,t).match({ltr:function(t,n,r,i){var o=e.document.createRange();return o.setStart(t.dom(),n),o.setEnd(r.dom(),i),o},rtl:function(t,n,r,i){var o=e.document.createRange();return o.setStart(r.dom(),i),o.setEnd(t.dom(),n),o}})},vs=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},ys=function(e,t,n,r){var i=e.dom().createRange();i.selectNode(t.dom());var o=i.getClientRects();return Xr(o,function(e){return vs(e,n,r)?c.some(e):c.none()}).map(function(i){return function(e,t,n,r,i){var o=function(n){var r=e.dom().createRange();return r.setStart(t.dom(),n),r.collapse(!0),r},a=Xt.get(t).length,s=function(e,t,n,r,i){if(0===i)return 0;if(t===r)return i-1;for(var o=r,a=1;a<i;a++){var s=e(a),u=Math.abs(t-s.left);if(n>s.bottom);else{if(n<s.top||u>o)return a-1;o=u}}return 0}(function(e){return o(e).getBoundingClientRect()},n,r,i.right,a);return o(s)}(e,t,n,r,i)})},bs=function(e,t,n,r){return(Ve.isText(t)?ys:function(e,t,n,r){var i=e.dom().createRange(),o=Le.children(t);return Xr(o,function(t){return i.selectNode(t.dom()),vs(i.getBoundingClientRect(),n,r)?bs(e,t,n,r):c.none()})})(e,t,n,r)},ws=function(e,t){return t-e.left<e.right-t},xs=function(e,t,n){var r=e.dom().createRange();return r.selectNode(t.dom()),r.collapse(n),r},Cs=function(e,t,n){return(0===Le.children(t).length?function(e,t,n){var r=t.dom().getBoundingClientRect(),i=ws(r,n);return c.some(xs(e,t,i))}:function(e,t,n){var r=e.dom().createRange();r.selectNode(t.dom());var i=r.getBoundingClientRect(),o=ws(i,n);return(!0===o?Gt:Qt)(t).map(function(t){return xs(e,t,o)})})(e,t,n)},_s=document.caretPositionFromPoint?function(e,t,n){return c.from(e.dom().caretPositionFromPoint(t,n)).bind(function(t){if(null===t.offsetNode)return c.none();var n=e.dom().createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),c.some(n)})}:document.caretRangeFromPoint?function(e,t,n){return c.from(e.dom().caretRangeFromPoint(t,n))}:function(e,t,n){return Y.fromPoint(e,t,n).bind(function(r){var i=function(){return Cs(e,r,t)};return 0===Le.children(r).length?i():function(e,t,n,r){var i=e.dom().createRange();i.selectNode(t.dom());var o=i.getBoundingClientRect();return function(e,t,n,r){var i=e.dom().createRange();i.selectNode(t.dom());var o=i.getBoundingClientRect(),a=Math.max(o.left,Math.min(o.right,n)),s=Math.max(o.top,Math.min(o.bottom,r));return bs(e,t,a,s)}(e,t,Math.max(o.left,Math.min(o.right,n)),Math.max(o.top,Math.min(o.bottom,r)))}(e,r,t,n).orThunk(i)})},Ss=function(e,t){var n=Ve.name(e);return"input"===n?Va.after(e):T.contains(["br","img"],n)?0===t?Va.before(e):Va.after(e):Va.on(e,t)},ks=function(e,t){var n=e.fold(Va.before,Ss,Va.after),r=t.fold(Va.before,Ss,Va.after);return Ka.relative(n,r)},Ts=function(e,t,n,r){var i=Ss(e,t),o=Ss(n,r);return Ka.relative(i,o)},Es=ks,Ns=Ts,As=function(e,t){c.from(e.getSelection()).each(function(e){e.removeAllRanges(),e.addRange(t)})},Rs=function(e,t,n,r,i){var o=os(e,t,n,r,i);As(e,o)},Os=function(e,t){return ms(e,t).match({ltr:function(t,n,r,i){Rs(e,t,n,r,i)},rtl:function(t,n,r,i){var o=e.getSelection();o.setBaseAndExtent?o.setBaseAndExtent(t.dom(),n,r.dom(),i):o.extend?(o.collapse(t.dom(),n),o.extend(r.dom(),i)):Rs(e,r,i,t,n)}})},Ds=function(e){var t=e.getSelection();return t.rangeCount>0?function(e){var t=Y.fromDom(e.anchorNode),n=Y.fromDom(e.focusNode);return Ja(t,e.anchorOffset,n,e.focusOffset)?c.some(Ka.range(Y.fromDom(e.anchorNode),e.anchorOffset,Y.fromDom(e.focusNode),e.focusOffset)):function(e){if(e.rangeCount>0){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return c.some(Ka.range(Y.fromDom(t.startContainer),t.startOffset,Y.fromDom(n.endContainer),n.endOffset))}return c.none()}(e)}(t):c.none()},Ps={setExact:function(e,t,n,r,i){var o=Ns(t,n,r,i);Os(e,o)},getExact:Ds,get:function(e){return Ds(e).map(function(e){return Ka.exact(e.start(),e.soffset(),e.finish(),e.foffset())})},setRelative:function(e,t,n){var r=Es(t,n);Os(e,r)},toNative:function(e){var t=Ka.getWin(e).dom(),n=function(e,n,r,i){return os(t,e,n,r,i)},r=function(e){return e.match({domRange:function(e){var t=Y.fromDom(e.startContainer),n=Y.fromDom(e.endContainer);return Ts(t,e.startOffset,n,e.endOffset)},relative:ks,exact:Ts})}(e);return ms(t,r).match({ltr:n,rtl:n})},setToElement:function(e,t){var n=ns(e,t);As(e,n)},clear:function(e){e.getSelection().removeAllRanges()},clone:function(e,t){var n=gs(e,t);return ss(n)},replace:function(e,t,n){var r=gs(e,t),i=function(e,t){var n=(t||document).createDocumentFragment();return T.each(e,function(e){n.appendChild(e.dom())}),Y.fromDom(n)}(n,e.document);ts(r,i)},deleteAt:function(e,t){var n=gs(e,t);as(n)},forElement:function(e,t){var n=ns(e,t);return Ka.range(Y.fromDom(n.startContainer),n.startOffset,Y.fromDom(n.endContainer),n.endOffset)},getFirstRect:function(e,t){var n=gs(e,t);return us(n)},getBounds:function(e,t){var n=gs(e,t);return ls(n)},getAtPoint:function(e,t,n){return function(e,t,n){var r=Y.fromDom(e.document);return _s(r,t,n).map(function(e){return Ka.range(Y.fromDom(e.startContainer),e.startOffset,Y.fromDom(e.endContainer),e.endOffset)})}(e,t,n)},findWithin:function(e,t,n){return function(e,t,n){var r=gs(e,t),i=Y.fromDom(r.commonAncestorContainer);return Ve.isElement(i)?function(e,t,n,r){var i=es(e),o=(J.is(t,r)?[t]:[]).concat(rt.descendants(t,r));return T.filter(o,function(e){return rs(i,e),cs(n,i)})}(e,i,r,n):[]}(e,t,n)},getAsString:function(e,t){var n=gs(e,t);return fs(n)},isCollapsed:function(e,t,n,r){return Ae.eq(e,n)&&t===r}},Is=tinymce.util.Tools.resolve("tinymce.util.VK"),Bs=function(e,t){var n=Ka.exact(t,0,t,0);return Ps.toNative(n)},Ms=function(e,t,n,r,i){return n.fold(c.none,c.none,function(e,t){return Gt(t).map(function(e){return Bs(0,e)})},function(n){return mt(n,t).bind(function(t){var i=jn.noMenu(n);return e.undoManager.transact(function(){r.insertRowsAfter(t,i)}),function(e,t){var n=rt.descendants(t,"tr");return T.last(n).bind(function(e){return ct.descendant(e,"td,th").map(function(e){return Bs(0,e)})})}(0,t)})})},Ls=["table","li","dl"],Hs=function(e,t,n,r){if(e.keyCode===Is.TAB){var i=Lo.getBody(t),o=function(e){var t=Ve.name(e);return Ae.eq(e,i)||T.contains(Ls,t)},a=t.selection.getRng();if(a.collapsed){var s=Y.fromDom(a.startContainer);ht(s,o).each(function(i){e.preventDefault(),(e.shiftKey?function(e,t,n,r){return Ms(e,t,$a(n),r)}:function(e,t,n,r){return Ms(e,t,Ua(n),r)})(t,o,i,n,r).each(function(e){t.selection.setRng(e)})})}}},Fs={response:F.immutable("selection","kill")},zs=function(e){return function(t){return t===e}},js=zs(38),Ws=zs(40),Us={ltr:{isBackward:zs(37),isForward:zs(39)},rtl:{isBackward:zs(39),isForward:zs(37)},isUp:js,isDown:Ws,isNavigation:function(e){return e>=37&&e<=40}},$s={convertToRange:function(e,t){var n=gs(e,t);return{start:i.constant(Y.fromDom(n.startContainer)),soffset:i.constant(n.startOffset),finish:i.constant(Y.fromDom(n.endContainer)),foffset:i.constant(n.endOffset)}},makeSitus:function(e,t,n,r){return{start:i.constant(Va.on(e,t)),finish:i.constant(Va.on(n,r))}}},qs=Te.detect().browser.isSafari(),Vs=function(e){var t=void 0!==e?e.dom():document,n=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return ur(n,r)},Xs=function(e,t,n){(void 0!==n?n.dom():document).defaultView.scrollTo(e,t)},Ys=function(e,t){qs&&d.isFunction(e.dom().scrollIntoViewIfNeeded)?e.dom().scrollIntoViewIfNeeded(!1):e.dom().scrollIntoView(t)},Ks={get:Vs,to:Xs,by:function(e,t,n){(void 0!==n?n.dom():document).defaultView.scrollBy(e,t)},preserve:function(e,t){var n=Vs(e);t();var r=Vs(e);n.top()===r.top()&&n.left()===r.left()||Xs(n.left(),n.top(),e)},capture:function(e){var t=c.none(),n=function(){t=c.some(Vs(e))};return n(),{save:n,restore:function(){t.each(function(t){Xs(t.left(),t.top(),e)})}}},intoView:Ys,intoViewIfNeeded:function(e,t){var n=t.dom().getBoundingClientRect(),r=e.dom().getBoundingClientRect();r.top<n.top?Ys(e,!0):r.bottom>n.bottom&&Ys(e,!1)},setToElement:function(e,t){var n=cr(t),r=Y.fromDom(e.document);Xs(n.left(),n.top(),r)},scrollBarWidth:function(){var e=Y.fromHtml('<div style="width: 100px; height: 100px; overflow: scroll; position: absolute; top: -9999px;"></div>');It.after(et.body(),e);var t=e.dom().offsetWidth-e.dom().clientWidth;return Lt.remove(e),t}};function Js(e){return{elementFromPoint:function(t,n){return c.from(e.document.elementFromPoint(t,n)).map(Y.fromDom)},getRect:function(e){return e.dom().getBoundingClientRect()},getRangedRect:function(t,n,r,o){var a=Ka.exact(t,n,r,o);return Ps.getFirstRect(e,a).map(function(e){return D.map(e,i.apply)})},getSelection:function(){return Ps.get(e).map(function(t){return $s.convertToRange(e,t)})},fromSitus:function(t){var n=Ka.relative(t.start(),t.finish());return $s.convertToRange(e,n)},situsFromPoint:function(t,n){return Ps.getAtPoint(e,t,n).map(function(e){return{start:i.constant(Va.on(e.start(),e.soffset())),finish:i.constant(Va.on(e.finish(),e.foffset()))}})},clearSelection:function(){Ps.clear(e)},setSelection:function(t){Ps.setExact(e,t.start(),t.soffset(),t.finish(),t.foffset())},setRelativeSelection:function(t,n){Ps.setRelative(e,t,n)},selectContents:function(t){Ps.setToElement(e,t)},getInnerHeight:function(){return e.innerHeight},getScrollY:function(){return Ks.get(Y.fromDom(e.document)).top()},scrollBy:function(t,n){Ks.by(t,n,Y.fromDom(e.document))}}}var Gs=function(e,t,n,r,i){return Ae.eq(n,r)?c.none():Nn(n,r,t).bind(function(t){var r=t.boxes().getOr([]);return r.length>0?(i(e,r,t.start(),t.finish()),c.some(Fs.response(c.some($s.makeSitus(n,0,n,Kt(n))),!0))):c.none()})},Qs=function(e,t,n,r,i,o,a){return Ae.eq(n,i)&&r===o?c.none():ct.closest(n,"td,th",t).bind(function(n){return ct.closest(i,"td,th",t).bind(function(r){return Gs(e,t,n,r,a)})})},Zs=Gs,eu=function(e,t,n,r,i){return Rn(r,e,t,i.firstSelectedSelector(),i.lastSelectedSelector()).map(function(e){return i.clear(n),i.selectRange(n,e.boxes(),e.start(),e.finish()),e.boxes()})},tu=F.immutableBag(["left","top","right","bottom"],[]),nu={nu:tu,moveUp:function(e,t){return tu({left:e.left(),top:e.top()-t,right:e.right(),bottom:e.bottom()-t})},moveDown:function(e,t){return tu({left:e.left(),top:e.top()+t,right:e.right(),bottom:e.bottom()+t})},moveBottomTo:function(e,t){var n=e.bottom()-e.top();return tu({left:e.left(),top:t-n,right:e.right(),bottom:t})},moveTopTo:function(e,t){var n=e.bottom()-e.top();return tu({left:e.left(),top:t,right:e.right(),bottom:t+n})},getTop:function(e){return e.top()},getBottom:function(e){return e.bottom()},translate:function(e,t,n){return tu({left:e.left()+t,top:e.top()+n,right:e.right()+t,bottom:e.bottom()+n})},toString:function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"}},ru=function(e){return nu.nu({left:e.left,top:e.top,right:e.right,bottom:e.bottom})},iu=function(e,t){return c.some(e.getRect(t))},ou=function(e,t,n){return Ve.isElement(t)?iu(e,t).map(ru):Ve.isText(t)?function(e,t,n){return n>=0&&n<Kt(t)?e.getRangedRect(t,n,t,n+1):n>0?e.getRangedRect(t,n-1,t,n):c.none()}(e,t,n).map(ru):c.none()},au=function(e,t){return Ve.isElement(t)?iu(e,t).map(ru):Ve.isText(t)?e.getRangedRect(t,0,t,Kt(t)).map(ru):c.none()},su=F.immutable("item","mode"),uu=function(e,t,n,r){var i=void 0!==r?r:lu;return e.property().parent(t).map(function(e){return su(e,i)})},lu=function(e,t,n,r){var i=void 0!==r?r:cu;return n.sibling(e,t).map(function(e){return su(e,i)})},cu=function(e,t,n,r){var i=void 0!==r?r:cu,o=e.property().children(t);return n.first(o).map(function(e){return su(e,i)})},fu=[{current:uu,next:lu,fallback:c.none()},{current:lu,next:cu,fallback:c.some(uu)},{current:cu,next:cu,fallback:c.some(lu)}],du=function(e,t,n,r,i){return i=void 0!==i?i:fu,T.find(i,function(e){return e.current===n}).bind(function(n){return n.current(e,t,r,n.next).orThunk(function(){return n.fallback.bind(function(n){return du(e,t,n,r)})})})},hu={backtrack:uu,sidestep:lu,advance:cu,go:du},pu={left:function(){return{sibling:function(e,t){return e.query().prevSibling(t)},first:function(e){return e.length>0?c.some(e[e.length-1]):c.none()}}},right:function(){return{sibling:function(e,t){return e.query().nextSibling(t)},first:function(e){return e.length>0?c.some(e[0]):c.none()}}}},mu=function(e,t,n,r,i,o){return hu.go(e,t,r,i).bind(function(t){return o(t.item())?c.none():n(t.item())?c.some(t.item()):mu(e,t.item(),n,t.mode(),i,o)})},gu=function(e,t){return 0===e.property().children(t).length},vu=function(e,t,n,r){return function(e,t,n,r){return mu(e,t,n,hu.sidestep,pu.left(),r)}(e,t,n,r)},yu=function(e,t,n,r){return function(e,t,n,r){return mu(e,t,n,hu.sidestep,pu.right(),r)}(e,t,n,r)},bu={before:function(e,t,n){return vu(e,t,i.curry(gu,e),n)},after:function(e,t,n){return yu(e,t,i.curry(gu,e),n)},seekLeft:vu,seekRight:yu,walkers:function(){return{left:pu.left,right:pu.right}},walk:function(e,t,n,r,i){return hu.go(e,t,n,r,i)},backtrack:hu.backtrack,sidestep:hu.sidestep,advance:hu.advance},wu=sn(),xu={gather:function(e,t,n){return bu.gather(wu,e,t,n)},before:function(e,t){return bu.before(wu,e,t)},after:function(e,t){return bu.after(wu,e,t)},seekLeft:function(e,t,n){return bu.seekLeft(wu,e,t,n)},seekRight:function(e,t,n){return bu.seekRight(wu,e,t,n)},walkers:function(){return bu.walkers()},walk:function(e,t,n,r){return bu.walk(wu,e,t,n,r)}},Cu=In([{none:[]},{retry:["caret"]}]),_u=function(e,t,n){return ut.closest(t,Fr).fold(i.constant(!1),function(t){return au(e,t).exists(function(e){return function(e,t){return e.left()<t.left()||Math.abs(t.right()-e.left())<1||e.left()>t.right()}(n,e)})})},Su={point:nu.getTop,adjuster:function(e,t,n,r,i){var o=nu.moveUp(i,5);return Math.abs(n.top()-r.top())<1?Cu.retry(o):n.bottom()<i.top()?Cu.retry(o):n.bottom()===i.top()?Cu.retry(nu.moveUp(i,1)):_u(e,t,i)?Cu.retry(nu.translate(o,5,0)):Cu.none()},move:nu.moveUp,gather:xu.before},ku={point:nu.getBottom,adjuster:function(e,t,n,r,i){var o=nu.moveDown(i,5);return Math.abs(n.bottom()-r.bottom())<1?Cu.retry(o):n.top()>i.bottom()?Cu.retry(o):n.top()===i.bottom()?Cu.retry(nu.moveDown(i,1)):_u(e,t,i)?Cu.retry(nu.translate(o,5,0)):Cu.none()},move:nu.moveDown,gather:xu.after},Tu=function(e,t,n,r,i){return 0===i?c.some(r):function(e,t,n){return e.elementFromPoint(t,n).filter(function(e){return"table"===Ve.name(e)}).isSome()}(e,r.left(),t.point(r))?function(e,t,n,r,i){return Tu(e,t,n,t.move(r,5),i)}(e,t,n,r,i-1):e.situsFromPoint(r.left(),t.point(r)).bind(function(o){return o.start().fold(c.none,function(o,a){return au(e,o).bind(function(a){return t.adjuster(e,o,a,n,r).fold(c.none,function(r){return Tu(e,t,n,r,i-1)})}).orThunk(function(){return c.some(r)})},c.none)})},Eu=function(e,t,n){var r=e.move(n,5),i=Tu(t,e,n,r,100).getOr(r);return function(e,t,n){return e.point(t)>n.getInnerHeight()?c.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?c.some(-e.point(t)):c.none()}(e,i,t).fold(function(){return t.situsFromPoint(i.left(),e.point(i))},function(n){return t.scrollBy(0,n),t.situsFromPoint(i.left(),e.point(i)-n)})},Nu={tryUp:i.curry(Eu,Su),tryDown:i.curry(Eu,ku),ieTryUp:function(e,t){return e.situsFromPoint(t.left(),t.top()-5)},ieTryDown:function(e,t){return e.situsFromPoint(t.left(),t.bottom()+5)},getJumpSize:i.constant(5)},Au=In([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Ru=function(e){return ct.closest(e,"tr")},Ou={verify:function(e,t,n,r,i,o,a){return ct.closest(r,"td,th",a).bind(function(n){return ct.closest(t,"td,th",a).map(function(t){return Ae.eq(n,t)?Ae.eq(r,n)&&Kt(n)===i?o(t):Au.none("in same cell"):hn(Ru,[n,t]).fold(function(){return function(e,t,n){var r=e.getRect(t),i=e.getRect(n);return i.right>r.left&&i.left<r.right}(e,t,n)?Au.success():o(t)},function(e){return o(t)})})}).getOr(Au.none("default"))},cata:function(e,t,n,r,i){return e.fold(t,n,r,i)},adt:Au},Du={point:F.immutable("element","offset"),delta:F.immutable("element","deltaOffset"),range:F.immutable("element","start","finish"),points:F.immutable("begin","end"),text:F.immutable("element","text")},Pu=(F.immutable("ancestor","descendants","element","index"),F.immutable("parent","children","element","index")),Iu=function(e){return Le.parent(e).bind(function(t){var n=Le.children(t);return function(e,t){return T.findIndex(e,i.curry(Ae.eq,t))}(n,e).map(function(r){return Pu(t,n,e,r)})})},Bu=function(e){return"br"===Ve.name(e)},Mu=function(e,t,n){return t(e,n).bind(function(e){return Ve.isText(e)&&0===Xt.get(e).trim().length?Mu(e,t,n):c.some(e)})},Lu=function(e,t,n,r){return(Bu(t)?function(e,t,n){return n.traverse(t).orThunk(function(){return Mu(t,n.gather,e)}).map(n.relative)}(e,t,r):function(e,t,n,r){return function(e,t){return Le.child(e,t).filter(Bu).orThunk(function(){return Le.child(e,t-1).filter(Bu)})}(t,n).bind(function(t){return r.traverse(t).fold(function(){return Mu(t,r.gather,e).map(r.relative)},function(e){return Iu(e).map(function(e){return Va.on(e.parent(),e.index())})})})}(e,t,n,r)).map(function(e){return{start:i.constant(e),finish:i.constant(e)}})},Hu=Te.detect(),Fu=function(e,t,n,r,i,o){return 0===o?c.none():Wu(e,t,n,r,i).bind(function(a){var s=e.fromSitus(a),u=Ou.verify(e,n,r,s.finish(),s.foffset(),i.failure,t);return Ou.cata(u,function(){return c.none()},function(){return c.some(a)},function(a){return Ae.eq(n,a)&&0===r?zu(e,n,r,nu.moveUp,i):Fu(e,t,a,0,i,o-1)},function(a){return Ae.eq(n,a)&&r===Kt(a)?zu(e,n,r,nu.moveDown,i):Fu(e,t,a,Kt(a),i,o-1)})})},zu=function(e,t,n,r,i){return ou(e,t,n).bind(function(t){return ju(e,i,r(t,Nu.getJumpSize()))})},ju=function(e,t,n){return Hu.browser.isChrome()||Hu.browser.isSafari()||Hu.browser.isFirefox()||Hu.browser.isEdge()?t.otherRetry(e,n):Hu.browser.isIE()?t.ieRetry(e,n):c.none()},Wu=function(e,t,n,r,i){return ou(e,n,r).bind(function(t){return ju(e,i,t)})},Uu=function(e,t,n){return function(e,t,n){return e.getSelection().bind(function(r){return Lu(t,r.finish(),r.foffset(),n).fold(function(){return c.some(Du.point(r.finish(),r.foffset()))},function(i){var o=e.fromSitus(i);return function(e){return Ou.cata(e,function(e){return c.none()},function(){return c.none()},function(e){return c.some(Du.point(e,0))},function(e){return c.some(Du.point(e,Kt(e)))})}(Ou.verify(e,r.finish(),r.foffset(),o.finish(),o.foffset(),n.failure,t))})})}(e,t,n).bind(function(r){return Fu(e,t,r.element(),r.offset(),n,20).map(e.fromSitus)})},$u=Te.detect(),qu=function(e,t,n,r,o){return ct.closest(r,"td,th",t).bind(function(r){return ct.closest(r,"table",t).bind(function(a){return function(e,t){return function(e,t,n){return ut.ancestor(e,t,n).isSome()}(o,function(e){return Le.parent(e).exists(function(e){return Ae.eq(e,t)})})}(0,a)?Uu(e,t,n).bind(function(e){return ct.closest(e.finish(),"td,th",t).map(function(t){return{start:i.constant(r),finish:i.constant(t),range:i.constant(e)}})}):c.none()})})},Vu=function(e,t,n,r,i,o){return $u.browser.isIE()?c.none():o(r,t).orThunk(function(){return qu(e,t,n,r,i).map(function(e){var t=e.range();return Fs.response(c.some($s.makeSitus(t.start(),t.soffset(),t.finish(),t.foffset())),!0)})})},Xu=function(e,t,n,r,i,o,a){return qu(e,n,r,i,o).bind(function(e){return Zs(t,n,e.start(),e.finish(),a)})},Yu=function(e,t){return ct.closest(e,"tr",t).bind(function(e){return ct.closest(e,"table",t).bind(function(n){var r=rt.descendants(n,"tr");return Ae.eq(e,r[0])?xu.seekLeft(n,function(e){return Qt(e).isSome()},t).map(function(e){var t=Kt(e);return Fs.response(c.some($s.makeSitus(e,t,e,t)),!0)}):c.none()})})},Ku=function(e,t){return ct.closest(e,"tr",t).bind(function(e){return ct.closest(e,"table",t).bind(function(n){var r=rt.descendants(n,"tr");return Ae.eq(e,r[r.length-1])?xu.seekRight(n,function(e){return Gt(e).isSome()},t).map(function(e){return Fs.response(c.some($s.makeSitus(e,0,e,0)),!0)}):c.none()})})},Ju=function(e,t){return ct.closest(e,"td,th",t)},Gu={down:{traverse:Le.nextSibling,gather:xu.after,relative:Va.before,otherRetry:Nu.tryDown,ieRetry:Nu.ieTryDown,failure:Ou.adt.failedDown},up:{traverse:Le.prevSibling,gather:xu.before,relative:Va.before,otherRetry:Nu.tryUp,ieRetry:Nu.ieTryUp,failure:Ou.adt.failedUp}},Qu=F.immutable("rows","cols"),Zu=function(e,t,n,r){var i=function(e,t,n,r){var i=c.none(),o=function(){i=c.none()};return{mousedown:function(e){r.clear(t),i=Ju(e.target(),n)},mouseover:function(o){i.each(function(i){r.clear(t),Ju(o.target(),n).each(function(o){Nn(i,o,n).each(function(n){var a=n.boxes().getOr([]);(a.length>1||1===a.length&&!Ae.eq(i,o))&&(r.selectRange(t,a,n.start(),n.finish()),e.selectContents(o))})})})},mouseup:function(){i.each(o)}}}(Js(e),t,n,r);return{mousedown:i.mousedown,mouseover:i.mouseover,mouseup:i.mouseup}},el=function(e,t,n,r){var o=Js(e),a=function(){return r.clear(t),c.none()};return{keydown:function(e,s,u,l,f,d){var h=e.raw().which,p=!0===e.raw().shiftKey;return An(t,r.selectedSelector()).fold(function(){return Us.isDown(h)&&p?i.curry(Xu,o,t,n,Gu.down,l,s,r.selectRange):Us.isUp(h)&&p?i.curry(Xu,o,t,n,Gu.up,l,s,r.selectRange):Us.isDown(h)?i.curry(Vu,o,n,Gu.down,l,s,Ku):Us.isUp(h)?i.curry(Vu,o,n,Gu.up,l,s,Yu):c.none},function(e){var n=function(n){return function(){return Xr(n,function(n){return eu(n.rows(),n.cols(),t,e,r)}).fold(function(){return On(t,r.firstSelectedSelector(),r.lastSelectedSelector()).map(function(e){var n=Us.isDown(h)||d.isForward(h)?Va.after:Va.before;return o.setRelativeSelection(Va.on(e.first(),0),n(e.table())),r.clear(t),Fs.response(c.none(),!0)})},function(e){return c.some(Fs.response(c.none(),!0))})}};return Us.isDown(h)&&p?n([Qu(1,0)]):Us.isUp(h)&&p?n([Qu(-1,0)]):d.isBackward(h)&&p?n([Qu(0,-1),Qu(-1,0)]):d.isForward(h)&&p?n([Qu(0,1),Qu(1,0)]):Us.isNavigation(h)&&!1===p?a:c.none})()},keyup:function(e,i,o,a,s){return An(t,r.selectedSelector()).fold(function(){var u=e.raw().which;return 0==(!0===e.raw().shiftKey)?c.none():Us.isNavigation(u)?Qs(t,n,i,o,a,s,r.selectRange):c.none()},c.none)}}},tl=function(e){var t=function(t){Ge.remove(t,e.selected()),Ge.remove(t,e.firstSelected()),Ge.remove(t,e.lastSelected())},n=function(t){Ge.set(t,e.selected(),"1")},r=function(n){var r=rt.descendants(n,e.selectedSelector());T.each(r,t)};return{clear:r,selectRange:function(t,i,o,a){r(t),T.each(i,n),Ge.set(o,e.firstSelected(),"1"),Ge.set(a,e.lastSelected(),"1")},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},nl=function(e){return{get:function(){return function(e,t){return An(e,t)}(Lo.getBody(e),Pn.selectedSelector()).fold(function(){return void 0===e.selection.getStart()?Mn.none():Mn.single(e.selection)},function(e){return Mn.multiple(e)})}}},rl=ra.each,il=function(e){var t=[];function n(t){return function(){e.execCommand(t)}}rl("inserttable tableprops deletetable | cell row column".split(" "),function(n){"|"===n?t.push({text:"-"}):t.push(e.menuItems[n])}),e.addButton("table",{type:"menubutton",title:"Table",menu:t}),e.addButton("tableprops",{title:"Table properties",onclick:i.curry(ya,e,!0),icon:"table"}),e.addButton("tabledelete",{title:"Delete table",onclick:n("mceTableDelete")}),e.addButton("tablecellprops",{title:"Cell properties",onclick:n("mceTableCellProps")}),e.addButton("tablemergecells",{title:"Merge cells",onclick:n("mceTableMergeCells")}),e.addButton("tablesplitcells",{title:"Split cell",onclick:n("mceTableSplitCells")}),e.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:n("mceTableInsertRowBefore")}),e.addButton("tableinsertrowafter",{title:"Insert row after",onclick:n("mceTableInsertRowAfter")}),e.addButton("tabledeleterow",{title:"Delete row",onclick:n("mceTableDeleteRow")}),e.addButton("tablerowprops",{title:"Row properties",onclick:n("mceTableRowProps")}),e.addButton("tablecutrow",{title:"Cut row",onclick:n("mceTableCutRow")}),e.addButton("tablecopyrow",{title:"Copy row",onclick:n("mceTableCopyRow")}),e.addButton("tablepasterowbefore",{title:"Paste row before",onclick:n("mceTablePasteRowBefore")}),e.addButton("tablepasterowafter",{title:"Paste row after",onclick:n("mceTablePasteRowAfter")}),e.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:n("mceTableInsertColBefore")}),e.addButton("tableinsertcolafter",{title:"Insert column after",onclick:n("mceTableInsertColAfter")}),e.addButton("tabledeletecol",{title:"Delete column",onclick:n("mceTableDeleteCol")})},ol=function(e){var t=function(e){var t=e.getParam("table_toolbar",Uo);return""===t||!1===t?[]:d.isString(t)?t.split(/[ ,]/):d.isArray(t)?t:[]}(e);t.length>0&&e.addContextToolbar(function(t){return e.dom.is(t,"table")&&e.getBody().contains(t)},t.join(" "))},al=function(e,t){var n=c.none(),r=[],o=[],a=[],s=[],u=function(e){e.disabled(!0)},l=function(e){e.disabled(!1)},f=function(){var e=this;r.push(e),n.fold(function(){u(e)},function(t){l(e)})},d=function(){var e=this;o.push(e),n.fold(function(){u(e)},function(t){l(e)})};e.on("init",function(){e.on("nodechange",function(i){var f=c.from(e.dom.getParent(e.selection.getStart(),"th,td"));(n=f.bind(function(e){var n=Y.fromDom(e);return mt(n).map(function(e){return jn.forMenu(t,e,n)})})).fold(function(){T.each(r,u),T.each(o,u),T.each(a,u),T.each(s,u)},function(e){T.each(r,l),T.each(o,l),T.each(a,function(t){t.disabled(e.mergable().isNone())}),T.each(s,function(t){t.disabled(e.unmergable().isNone())})})})});var h=function(e,t,n,r){var i,o,a,s,u,l=r.getEl().getElementsByTagName("table")[0],c=r.isRtl()||"tl-tr"===r.parent().rel;for(l.nextSibling.innerHTML=t+1+" x "+(n+1),c&&(t=9-t),o=0;o<10;o++)for(i=0;i<10;i++)s=l.rows[o].childNodes[i].firstChild,u=(c?i>=t:i<=t)&&o<=n,e.dom.toggleClass(s,"mce-active",u),u&&(a=s);return a.parentNode},p=!1===function(e){return e.getParam("table_grid",!0,"boolean")}(e)?{text:"Table",icon:"table",context:"table",onclick:i.curry(ya,e)}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(t){t.aria&&(this.parent().hideAll(),t.stopImmediatePropagation(),ya(e))},onshow:function(){h(e,0,0,this.menu.items()[0])},onhide:function(){var t=this.menu.items()[0].getEl().getElementsByTagName("a");e.dom.removeClass(t,"mce-active"),e.dom.addClass(t[0],"mce-active")},menu:[{type:"container",html:function(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return(e+="</table>")+'<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(t){var n,r,i=t.target;"A"===i.tagName.toUpperCase()&&(n=parseInt(i.getAttribute("data-mce-x"),10),r=parseInt(i.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(n=9-n),n===this.lastX&&r===this.lastY||(h(e,n,r,t.control),this.lastX=n,this.lastY=r))},onclick:function(t){var n=this;"A"===t.target.tagName.toUpperCase()&&(t.preventDefault(),t.stopPropagation(),n.parent().cancel(),e.undoManager.transact(function(){ma(e,n.lastX+1,n.lastY+1)}),e.addVisual())}}]};function m(t){return function(){e.execCommand(t)}}var g={text:"Table properties",context:"table",onPostRender:f,onclick:i.curry(ya,e,!0)},v={text:"Delete table",context:"table",onPostRender:f,cmd:"mceTableDelete"},y={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:m("mceTableInsertRowBefore"),onPostRender:d},{text:"Insert row after",onclick:m("mceTableInsertRowAfter"),onPostRender:d},{text:"Delete row",onclick:m("mceTableDeleteRow"),onPostRender:d},{text:"Row properties",onclick:m("mceTableRowProps"),onPostRender:d},{text:"-"},{text:"Cut row",onclick:m("mceTableCutRow"),onPostRender:d},{text:"Copy row",onclick:m("mceTableCopyRow"),onPostRender:d},{text:"Paste row before",onclick:m("mceTablePasteRowBefore"),onPostRender:d},{text:"Paste row after",onclick:m("mceTablePasteRowAfter"),onPostRender:d}]},b={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:m("mceTableInsertColBefore"),onPostRender:d},{text:"Insert column after",onclick:m("mceTableInsertColAfter"),onPostRender:d},{text:"Delete column",onclick:m("mceTableDeleteCol"),onPostRender:d}]},w={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:m("mceTableCellProps"),onPostRender:d},{text:"Merge cells",onclick:m("mceTableMergeCells"),onPostRender:function(){var e=this;a.push(e),n.fold(function(){u(e)},function(t){e.disabled(t.mergable().isNone())})}},{text:"Split cell",onclick:m("mceTableSplitCells"),onPostRender:function(){var e=this;s.push(e),n.fold(function(){u(e)},function(t){e.disabled(t.unmergable().isNone())})}}]};e.addMenuItem("inserttable",p),e.addMenuItem("tableprops",g),e.addMenuItem("deletetable",v),e.addMenuItem("row",y),e.addMenuItem("column",b),e.addMenuItem("cell",w)};n.add("table",function(e){var t=Ha(e),n=function(e,t){var n=F.immutableBag(["mousedown","mouseover","mouseup","keyup","keydown"],[]),r=c.none(),o=tl(Pn);return e.on("init",function(a){var s=e.getWin(),u=Lo.getBody(e),l=Lo.getIsRoot(e),f=Zu(s,u,l,o),d=el(s,u,l,o),h=function(t,n){!0===t.raw().shiftKey&&(n.kill()&&t.kill(),n.selection().each(function(t){var n=Ka.relative(t.start(),t.finish()),r=gs(s,n);e.selection.setRng(r)}))},p=function(t){var n=v(t);if(n.raw().shiftKey&&Us.isNavigation(n.raw().which)){var r=e.selection.getRng(),i=Y.fromDom(r.startContainer),o=Y.fromDom(r.endContainer);d.keyup(n,i,r.startOffset,o,r.endOffset).each(function(e){h(n,e)})}},m=function(n){var r=v(n);t().each(function(e){e.hideBars()});var i=e.selection.getRng(),o=Y.fromDom(e.selection.getStart()),a=Y.fromDom(i.startContainer),s=Y.fromDom(i.endContainer),u=Wo(o).isRtl()?Us.rtl:Us.ltr;d.keydown(r,a,i.startOffset,s,i.endOffset,u).each(function(e){h(r,e)}),t().each(function(e){e.showBars()})},g=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},v=function(e){var t=Y.fromDom(e.target),n=function(){e.stopPropagation()},r=function(){e.preventDefault()},o=i.compose(r,n);return{target:i.constant(t),x:i.constant(g(e)?e.x:null),y:i.constant(g(e)?e.y:null),stop:n,prevent:r,kill:o,raw:i.constant(e)}},y=function(e){return 0===e.button},b=function(e){y(e)&&f.mousedown(v(e))},w=function(e){var t;(void 0===(t=e).buttons||0!=(1&t.buttons))&&f.mouseover(v(e))},x=function(e){y(e)&&f.mouseup(v(e))};e.on("mousedown",b),e.on("mouseover",w),e.on("mouseup",x),e.on("keyup",p),e.on("keydown",m),e.on("nodechange",function(){var t=e.selection,n=Y.fromDom(t.getStart()),r=Y.fromDom(t.getEnd()),a=mt(n),s=mt(r);a.bind(function(e){return s.bind(function(t){return Ae.eq(e,t)?c.some(!0):c.none()})}).fold(function(){o.clear(u)},i.noop)}),r=c.some(n({mousedown:b,mouseover:w,mouseup:x,keyup:p,keydown:m}))}),{clear:o.clear,destroy:function(){r.each(function(e){})}}}(e,t.lazyResize),r=function(e,t){var n=function(e){return"table"===Ve.name(Lo.getBody(e))},r=function(e){var t=e.getParam("table_clone_elements");return d.isString(t)?c.some(t.split(/[ ,]/)):Array.isArray(t)?c.some(t):c.none()}(e),o=function(t,n,i,o){return function(a,s){var u=rt.descendants(a,"td[data-mce-style],th[data-mce-style]");T.each(u,function(e){Ge.remove(e,"data-mce-style")});var l=o(),f=Y.fromDom(e.getDoc()),d=_r(Wo),h=rn(i,f,r);return n(a)?t(l,a,s,h,d).bind(function(t){return T.each(t.newRows(),function(t){ea(e,t.dom())}),T.each(t.newCells(),function(t){ta(e,t.dom())}),t.cursor().map(function(t){var n=e.dom.createRng();return n.setStart(t.dom(),0),n.setEnd(t.dom(),0),n})}):c.none()}};return{deleteRow:o(Bo.eraseRows,function(t){var r=Sr(t);return!1===n(e)||r.rows()>1},i.noop,t),deleteColumn:o(Bo.eraseColumns,function(t){var r=Sr(t);return!1===n(e)||r.columns()>1},i.noop,t),insertRowsBefore:o(Bo.insertRowsBefore,i.always,i.noop,t),insertRowsAfter:o(Bo.insertRowsAfter,i.always,i.noop,t),insertColumnsBefore:o(Bo.insertColumnsBefore,i.always,ar,t),insertColumnsAfter:o(Bo.insertColumnsAfter,i.always,ar,t),mergeCells:o(Bo.mergeCells,i.always,i.noop,t),unmergeCells:o(Bo.unmergeCells,i.always,i.noop,t),pasteRowsBefore:o(Bo.pasteRowsBefore,i.always,i.noop,t),pasteRowsAfter:o(Bo.pasteRowsAfter,i.always,i.noop,t),pasteCells:o(Bo.pasteCells,i.always,i.noop,t)}}(e,t.lazyWire),o=nl(e),a=kr(c.none());return wa(e,r,n,o,a),Wn(e,o,r,n),al(e,o),il(e),ol(e),e.on("PreInit",function(){e.serializer.addTempAttr(Pn.firstSelected()),e.serializer.addTempAttr(Pn.lastSelected())}),function(e){return e.getParam("table_tab_navigation",!0,"boolean")}(e)&&e.on("keydown",function(n){Hs(n,e,r,t.lazyWire)}),e.on("remove",function(){t.destroy(),n.destroy()}),function(e,t){return{insertTable:function(t,n){return ma(e,t,n)},setClipboardRows:function(e){return function(e,t){var n=T.map(e,Y.fromDom);t.set(c.from(n))}(e,t)},getClipboardRows:function(){return t.get().fold(function(){},function(e){return T.map(e,function(e){return e.dom()})})}}}(e,a)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=[["cool","cry","embarassed","foot-in-mouth"],["frown","innocent","kiss","laughing"],["money-mouth","sealed","smile","surprised"],["tongue-out","undecided","wink","yell"]],r=function(e){var r;return r='<table role="list" class="mce-grid">',t.each(n,function(n){r+="<tr>",t.each(n,function(t){var n=e+"/img/smiley-"+t+".gif";r+='<td><a href="#" data-mce-url="'+n+'" data-mce-alt="'+t+'" tabindex="-1" role="option" aria-label="'+t+'"><img src="'+n+'" style="width: 18px; height: 18px" role="presentation" /></a></td>'}),r+="</tr>"}),r+="</table>"};e.add("emoticons",function(e,t){!function(e,t){var n=r(t);e.addButton("emoticons",{type:"panelbutton",panel:{role:"application",autohide:!0,html:n,onclick:function(t){var n=e.dom.getParent(t.target,"a");n&&(function(e,t,n){e.insertContent(e.dom.createHTML("img",{src:t,alt:n}))}(e,n.getAttribute("data-mce-url"),n.getAttribute("data-mce-alt")),this.hide())}},tooltip:"Emoticons"})}(e,t)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],i=function(e){return e.getParam("textcolor_map",r)},o=function(e){return e.getParam("textcolor_rows",5)},a=function(e){return e.getParam("textcolor_cols",8)},s=function(e){return e.getParam("color_picker_callback",null)},u=function(e){return e.getParam("forecolor_cols",a(e))},l=function(e){return e.getParam("backcolor_cols",a(e))},c=s,f=tinymce.util.Tools.resolve("tinymce.util.I18n"),d=function(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)},h=function(e){return function(t){var n=t.control;n._color?e.execCommand("mceApplyTextcolor",n.settings.format,n._color):e.execCommand("mceRemoveTextcolor",n.settings.format)}},p=function(e,r){return function(i){var o,a=this.parent(),s=function(e,t){var n;return e.dom.getParents(e.selection.getStart(),function(e){var r;(r=e.style["forecolor"===t?"color":"background-color"])&&(n=r)}),n}(e,a.settings.format),u=function(t){a.hidePanel(),a.color(t),e.execCommand("mceApplyTextcolor",a.settings.format,t)};t.DOM.getParent(i.target,".mce-custom-color-btn")&&(a.hidePanel(),c(e).call(e,function(e){var t,i,o,s=a.panel.getEl().getElementsByTagName("table")[0];for(t=n.map(s.rows[s.rows.length-1].childNodes,function(e){return e.firstChild}),o=0;o<t.length&&(i=t[o]).getAttribute("data-mce-color");o++);if(o===r)for(o=0;o<r-1;o++)d(t[o],t[o+1].getAttribute("data-mce-color"));d(i,e),u(e)},s)),(o=i.target.getAttribute("data-mce-color"))?(this.lastId&&t.DOM.get(this.lastId).setAttribute("aria-selected","false"),i.target.setAttribute("aria-selected",!0),this.lastId=i.target.id,"transparent"===o?(a.hidePanel(),a.resetColor(),e.execCommand("mceRemoveTextcolor",a.settings.format)):u(o)):null!==o&&a.hidePanel()}},m=function(e,n){return function(){return function(e,n,r,i){var o,a,s,u,l,c,d,h=0,p=t.DOM.uniqueId("mcearia"),m=function(e,t){var n="transparent"===e;return'<td class="mce-grid-cell'+(n?" mce-colorbtn-trans":"")+'"><div id="'+p+"-"+h+++'" data-mce-color="'+(e||"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+f.translate(t)+'">'+(n?"&#215;":"")+"</div></td>"};for((o=function(e){var t,n=[];for(t=0;t<e.length;t+=2)n.push({text:e[t+1],color:"#"+e[t]});return n}(r)).push({text:f.translate("No color"),color:"transparent"}),s='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',u=o.length-1,c=0;c<n;c++){for(s+="<tr>",l=0;l<e;l++)s+=(d=c*e+l)>u?"<td></td>":m((a=o[d]).color,a.text);s+="</tr>"}if(i){for(s+='<tr><td colspan="'+e+'" class="mce-custom-color-btn"><div id="'+p+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+p+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+f.translate("Custom...")+"</button></div></td></tr>",s+="<tr>",l=0;l<e;l++)s+=m("","Custom color");s+="</tr>"}return s+"</tbody></table>"}(n?u(e):l(e),n?function(e){return e.getParam("forecolor_rows",o(e))}(e):function(e){return e.getParam("backcolor_rows",o(e))}(e),n?function(e){return e.getParam("forecolor_map",i(e))}(e):function(e){return e.getParam("backcolor_map",i(e))}(e),function(e){return"function"==typeof s(e)}(e))}};e.add("textcolor",function(e){(function(e){e.addCommand("mceApplyTextcolor",function(t,n){!function(e,t,n){e.undoManager.transact(function(){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()})}(e,t,n)}),e.addCommand("mceRemoveTextcolor",function(t){!function(e,t){e.undoManager.transact(function(){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()})}(e,t)})})(e),function(e){e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:m(e,!0),onclick:p(e,u(e))},onclick:h(e)}),e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:m(e,!1),onclick:p(e,l(e))},onclick:h(e)})}(e)})}()},function(e,t){!function(){"use strict";var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}},t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"***",end:"***",format:["bold","italic"]},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],r=function(e){return void 0!==e.textpattern_patterns?e.textpattern_patterns:n},i=tinymce.util.Tools.resolve("tinymce.util.Delay"),o=tinymce.util.Tools.resolve("tinymce.util.VK"),a=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),s=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=function(e,t,n,r){return t.substr(n-e.end.length-r,e.end.length)===e.end},l=function(e,t,n){return e-t-n.end.length-n.start.length>0},c=function(e,t){for(var n=0;n<e.length;n++)if(0===t.indexOf(e[n].start)&&(!e[n].end||t.lastIndexOf(e[n].end)===t.length-e[n].end.length))return e[n]},f=function(e,t,n,r){var i,o,a=function(e){return e.sort(function(e,t){return e.start.length>t.start.length?-1:e.start.length<t.start.length?1:0})}(e);for(o=0;o<a.length;o++)if(void 0!==(i=a[o]).end&&u(i,t,n,r)&&l(n,r,i))return i},d=function(e,t,n){if(!1!==t.collapsed){var r=t.startContainer,i=r.data,o=!0===n?1:0;if(3===r.nodeType){var a=f(e,i,t.startOffset,o);if(void 0!==a){var s=i.lastIndexOf(a.end,t.startOffset-o),u=i.lastIndexOf(a.start,s-a.end.length);if(s=i.indexOf(a.end,u+a.start.length),-1!==u){var l=document.createRange();l.setStart(r,u),l.setEnd(r,s+a.end.length);var d=c(e,l.toString());if(!(void 0===a||d!==a||r.data.length<=a.start.length+a.end.length))return{pattern:a,startOffset:u,endOffset:s}}}}}},h=function(e,t,n){var r=e.selection.getRng(!0),i=d(t,r,n);if(i)return function(e,t,n,r){var i=s.isArray(n.pattern.format)?n.pattern.format:[n.pattern.format];if(0!==s.grep(i,function(t){var n=e.formatter.get(t);return n&&n[0].inline}).length)return e.undoManager.transact(function(){t=function(e,t,n,r,i){return(e=r>0?e.splitText(r):e).splitText(n-r+t.end.length),e.deleteData(0,t.start.length),e.deleteData(e.data.length-t.end.length,t.end.length),e}(t,n.pattern,n.endOffset,n.startOffset),i.forEach(function(n){e.formatter.apply(n,{},t)})}),t}(e,r.startContainer,i)},p=function(e,t){return h(e,t,!0)},m=function(e,t){return h(e,t,!1)},g=function(e,t){var n,r,i,o,u,l,f,d,h,p,m;if(n=e.selection,r=e.dom,n.isCollapsed()&&(f=r.getParent(n.getStart(),"p"))){for(h=new a(f,f);u=h.next();)if(3===u.nodeType){o=u;break}if(o){if(!(d=c(t,o.data)))return;if(i=(p=n.getRng(!0)).startContainer,m=p.startOffset,o===i&&(m=Math.max(0,m-d.start.length)),s.trim(o.data).length===d.start.length)return;d.format&&(l=e.formatter.get(d.format))&&l[0].block&&(o.deleteData(0,d.start.length),e.formatter.apply(d.format,{},o),p.setStart(i,m),p.collapse(!0),n.setRng(p)),d.cmd&&e.undoManager.transact(function(){o.deleteData(0,d.start.length),e.execCommand(d.cmd)})}}},v=function(e,t,n){for(var r=0;r<e.length;r++)if(n(e[r],t))return!0},y=function(e,t){var n,r;(n=m(e,t))&&((r=e.dom.createRng()).setStart(n,n.data.length),r.setEnd(n,n.data.length),e.selection.setRng(r)),g(e,t)},b=function(e,t){var n,r,i,o,a;(n=p(e,t))&&(a=e.dom,r=n.data.slice(-1),/[\u00a0 ]/.test(r)&&(n.deleteData(n.data.length-1,1),i=a.doc.createTextNode(r),a.insertAfter(i,n.parentNode),(o=a.createRng()).setStart(i,1),o.setEnd(i,1),e.selection.setRng(o)))},w=function(e,t){return v(e,t,function(e,t){return e.charCodeAt(0)===t.charCode})},x=function(e,t){return v(e,t,function(e,t){return e===t.keyCode&&!1===o.modifierPressed(t)})};t.add("textpattern",function(t){var n=e(r(t.settings));return function(e,t){var n=[",",".",";",":","!","?"],r=[32];e.on("keydown",function(n){13!==n.keyCode||o.modifierPressed(n)||y(e,t.get())},!0),e.on("keyup",function(n){x(r,n)&&b(e,t.get())}),e.on("keypress",function(r){w(n,r)&&i.setEditorTimeout(e,function(){b(e,t.get())})})}(t,n),function(e){return{setPatterns:function(t){e.set(t)},getPatterns:function(){return e.get()}}}(n)})}()},function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Color"),n=function(e,t){e.find("#preview")[0].getEl().style.background=t},r=function(e,r){var i=t(r),o=i.toRgb();e.fromJSON({r:o.r,g:o.g,b:o.b,hex:i.toHex().substr(1)}),n(e,i.toHex())},i=function(e,t,i){var o=e.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:i,onchange:function(){var e=this.rgb();o&&(o.find("#r").value(e.r),o.find("#g").value(e.g),o.find("#b").value(e.b),o.find("#hex").value(this.value().substr(1)),n(o,this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var e,t,n=o.find("colorpicker")[0];if(e=this.name(),t=this.value(),"hex"===e)return r(o,t="#"+t),void n.value(t);t={r:o.find("#r").value(),g:o.find("#g").value(),b:o.find("#b").value()},n.value(t),r(o,t)}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){t("#"+o.toJSON().hex)}});r(o,i)};e.add("colorpicker",function(e){e.settings.color_picker_callback||(e.settings.color_picker_callback=function(t,n){i(e,t,n)})})}()},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=a(n(2)),o=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(t){function n(){return function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.default.View),r(n,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.column=e,this.listenTo(this.column,"destroy",this.remove),this.listenTo(this.column,"change:adding",this.fn_toggle_show),this.render()}},{key:"events",value:function(){return{"click .element-item":"fn_add_element"}}},{key:"render",value:function(){var t=this;if(console.log(drupalSettings.gavias_content_builder.params),this.column.get("adding")){var n="";n+='<div class="gpb-elements-list"><ul class="clearfix">',n+="<% _.each( drupalSettings.gavias_content_builder.element_fields, function( el, key ){ %>",n+='<% if (el.key != "gva_column"){ %>',n+='<li><span class="content-inner">',n+='<a href="#" class="element element-item element-item-<%= key %>" data-element_name="<%= key %>">',n+='<i class="<%= el.icon %>"></i><span><%= el.title %></span>',n+="</a>",n+="</span></li>",n+="<% } %>",n+="<% }) %>",n+="</ul></div>",this.template='<div class="modal"><div class="modal-dialog gpb-modal">'+n+"</div></div>",this.template=o.default.template(this.template,{variable:"data"})(this.column.toJSON()),this.setElement(this.template),e("body").append(this.el),e("body").find(this.$el).modal("show"),e("body").find(this.$el).on("hidden.bs.modal",function(e){t.column.set("adding",!1)})}return this}},{key:"fn_toggle_show",value:function(e){e.get("adding")||this.remove()}},{key:"_close",value:function(){e("body").find(this.$el).modal("hide"),this.column.set("adding",!1)}},{key:"fn_add_element",value:function(t){t.preventDefault();var n=e(t.target);"A"!==t.target.nodeName&&(n=e(t.target).parents("a:first"));var r=n.data();void 0!==r.elements&&delete r.elements,"gva_row"===r.element_name&&(r.row={settings:{element:"gva_row"},columns:{settings:{element:"gva_column"},elements:[],column:12}});var i=this.column.get("elements").add(r,{at:this.column.get("elements").length});return i&&i.set("create_edit_form",!0),this._close(),"gva_row"==r.element_name?e("body").removeClass("modal-open"):e("body").addClass("modal-open"),!1}}]),n}();t.default=s}).call(this,n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=l(n(2)),a=l(n(1)),s=l(n(9)),u=(l(n(0)),l(n(7)));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.View),i(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.element=t,this.listenTo(this.element,"destroy",this.remove),this.listenTo(this.element,"change:reRender",this.fn_re_render),this.listenTo(this.element.get("row"),"destroy",function(){e.element.destroy()}),this.listenTo(this.element,"change:create_edit_form",function(t,n){!0===n&&"gva_row"!=e.element.get("element_name")&&(e.editForm=new u.default(e.element,"Edit form"),t.set("editing",!0),t.unset("create_edit_form"))})}},{key:"events",value:function(){return{"click .gpb-action_delete:not(.gpb_action_delete_row)":"fn_remove","click .gpb-action_edit :not(.gpb_action_edit_row)":"fn_edit","click .gpb_drap-order":function(){return!1}}}},{key:"render",value:function(){var e=this.element.toJSON();if(e.cid=this.element.cid,void 0!==this.element.get("row"))this.template='<div class="gpb_el-content-inner gpb_row-el" data-cid="'+e.cid+'"></div>',this.setElement(this.template),this.$el.html(new s.default(this.element.get("row")).render().el),this.$(".gpb_row-content").addClass("disable-sortable");else{var t=this.element.get("element_name");t&&void 0!==drupalSettings.gavias_content_builder.element_fields[t]&&(e=r({},e,drupalSettings.gavias_content_builder.element_fields[t]));var n="";n+='<div class="gpb_el-content-inner <%= data.key %>" data-cid="<%= data.cid %>">',n+='<div class="gpb_action-button element-controls">',n+='<div class="left">',n+='<a href="#" class="gpb_drap-order"><i class="fa fa-arrows"></i></a>',n+='<a href="#" class="gpb-action_edit btn-border-none btn-action" title="Edit"><i class="fa fa-pencil" ></i></a>',n+='<a href="#" class="gpb-action_clone btn-border-none btn-action gpb-action_clone_element" title="Clone"><i class="fa fa-clone" ></i></a>',n+="</div>",n+='<div class="right">',n+='<a href="#" class="gpb-action_delete btn-border-none btn-action" title="Delete"><i class="fa fa-times" ></i></a>',n+="</div>",n+="</div>",n+='<div class="gpb_element-inner">',n+='<div class="element element-item">',n+='<span class="title"><%= data.title %></span>',n+='<span class="desc">',n+="<% _.each( data.fields, function( field ){ %>",n+="<% if (field.admin == true && data.settings[field.id]){ %>",n+='<span class="item-desc"><%= data.settings[field.id] %><span class="space">&nbsp;/&nbsp;</span></span>',n+="<% } %>",n+="<% }) %>",n+=" </span>",n+="</div>",n+="</div>",n+="</div>",this.template=a.default.template(n,{variable:"data"})(e),this.setElement(this.template)}return this}},{key:"fn_remove",value:function(e){return e.preventDefault(),confirm("You are sure delete this element ! Continue?")&&this.element.destroy(),!1}},{key:"fn_edit",value:function(e){return e.preventDefault(),!0!==this.element.get("editing")&&(this.editForm=new u.default(this.element,"Edit form"),this.element.set("editing",!0)),!1}},{key:"fn_re_render",value:function(e,t){!0===e.get("reRender")&&(this.$el.replaceWith(this.render().el),this.element.set("reRender",!1))}}]),t}();t.default=c},function(e,t,n){var r,i,o;i=[n(0),n(10),n(47),n(48),n(3),n(6)],void 0===(o="function"==typeof(r=function(e){return e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var r,i=n&&"left"===n?"scrollLeft":"scrollTop";return t[i]>0||(t[i]=1,r=t[i]>0,t[i]=0,r)},_create:function(){var t,n=this.options,r=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),n.autoHide&&e(this.element).on("mouseenter",function(){n.disabled||(r._removeClass("ui-resizable-autohide"),r._handles.show())}).on("mouseleave",function(){n.disabled||r.resizing||(r._addClass("ui-resizable-autohide"),r._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,n,r,i,o,a=this.options,s=this;if(this.handles=a.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),r=this.handles.split(","),this.handles={},n=0;n<r.length;n++)i="ui-resizable-"+(t=e.trim(r[n])),o=e("<div>"),this._addClass(o,"ui-resizable-handle "+i),o.css({zIndex:a.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(o);this._renderAxis=function(t){var n,r,i,o;for(n in t=t||this.element,this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:s._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(r=e(this.handles[n],this.element),o=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){s.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),s.axis=o&&o[1]?o[1]:"se")}),a.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles)((r=e(this.handles[n])[0])===t.target||e.contains(r,t.target))&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var n,r,i,o=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),r=this._num(this.helper.css("top")),o.containment&&(n+=e(o.containment).scrollLeft()||0,r+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:r},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:n,top:r},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===i?this.axis+"-resize":i),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r,i=this.originalMousePosition,o=this.axis,a=t.pageX-i.left||0,s=t.pageY-i.top||0,u=this._change[o];return this._updatePrevProperties(),!!u&&(n=u.apply(this,[t,a,s]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),r=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var n,r,i,o,a,s,u,l=this.options;return this._helper&&(i=(r=(n=this._proportionallyResizeElements).length&&/textarea/i.test(n[0].nodeName))&&this._hasScroll(n[0],"left")?0:this.sizeDiff.height,o=r?0:this.sizeDiff.width,a={width:this.helper.width()-o,height:this.helper.height()-i},s=parseFloat(this.element.css("left"))+(this.position.left-this.originalPosition.left)||null,u=parseFloat(this.element.css("top"))+(this.position.top-this.originalPosition.top)||null,l.animate||this.element.css(e.extend(a,{top:u,left:s})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,r,i,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,r=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,i=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),r>o.minHeight&&(o.minHeight=r),n<o.maxWidth&&(o.maxWidth=n),i<o.maxHeight&&(o.maxHeight=i)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,r=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===r&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===r&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,r=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,i=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,a=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,s=this.originalPosition.left+this.originalSize.width,u=this.originalPosition.top+this.originalSize.height,l=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),a&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),i&&(e.height=t.maxHeight),o&&l&&(e.left=s-t.minWidth),r&&l&&(e.left=s-t.maxWidth),a&&c&&(e.top=u-t.minHeight),i&&c&&(e.top=u-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],r=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],i=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)n[t]=parseFloat(r[t])||0,n[t]+=parseFloat(i[t])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize;return{left:this.originalPosition.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize;return{top:this.originalPosition.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),r=n.options,i=n._proportionallyResizeElements,o=i.length&&/textarea/i.test(i[0].nodeName),a=o&&n._hasScroll(i[0],"left")?0:n.sizeDiff.height,s=o?0:n.sizeDiff.width,u={width:n.size.width-s,height:n.size.height-a},l=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,c=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(u,c&&l?{top:c,left:l}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,r,i,o,a,s,u=e(this).resizable("instance"),l=u.options,c=u.element,f=l.containment,d=f instanceof e?f.get(0):/parent/.test(f)?c.parent().get(0):f;d&&(u.containerElement=e(d),/document/.test(f)||f===document?(u.containerOffset={left:0,top:0},u.containerPosition={left:0,top:0},u.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(d),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){n[e]=u._num(t.css("padding"+r))}),u.containerOffset=t.offset(),u.containerPosition=t.position(),u.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},r=u.containerOffset,i=u.containerSize.height,o=u.containerSize.width,a=u._hasScroll(d,"left")?d.scrollWidth:o,s=u._hasScroll(d)?d.scrollHeight:i,u.parentData={element:d,left:r.left,top:r.top,width:a,height:s}))},resize:function(t){var n,r,i,o,a=e(this).resizable("instance"),s=a.options,u=a.containerOffset,l=a.position,c=a._aspectRatio||t.shiftKey,f={top:0,left:0},d=a.containerElement,h=!0;d[0]!==document&&/static/.test(d.css("position"))&&(f=u),l.left<(a._helper?u.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-u.left:a.position.left-f.left),c&&(a.size.height=a.size.width/a.aspectRatio,h=!1),a.position.left=s.helper?u.left:0),l.top<(a._helper?u.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-u.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio,h=!1),a.position.top=a._helper?u.top:0),i=a.containerElement.get(0)===a.element.parent().get(0),o=/relative|absolute/.test(a.containerElement.css("position")),i&&o?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),n=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-f.left:a.offset.left-u.left)),r=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-f.top:a.offset.top-u.top)),n+a.size.width>=a.parentData.width&&(a.size.width=a.parentData.width-n,c&&(a.size.height=a.size.width/a.aspectRatio,h=!1)),r+a.size.height>=a.parentData.height&&(a.size.height=a.parentData.height-r,c&&(a.size.width=a.size.height*a.aspectRatio,h=!1)),h||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,r=t.containerOffset,i=t.containerPosition,o=t.containerElement,a=e(t.helper),s=a.offset(),u=a.outerWidth()-t.sizeDiff.width,l=a.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(o.css("position"))&&e(this).css({left:s.left-i.left-r.left,width:u,height:l}),t._helper&&!n.animate&&/static/.test(o.css("position"))&&e(this).css({left:s.left-i.left-r.left,width:u,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance").options;e(t.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,n){var r=e(this).resizable("instance"),i=r.options,o=r.originalSize,a=r.originalPosition,s={height:r.size.height-o.height||0,width:r.size.width-o.width||0,top:r.position.top-a.top||0,left:r.position.left-a.left||0};e(i.alsoResize).each(function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),i={},o=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(r[t]||0)+(s[t]||0);n&&n>=0&&(i[t]=n||null)}),t.css(i)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==e.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),r=n.options,i=n.size,o=n.originalSize,a=n.originalPosition,s=n.axis,u="number"==typeof r.grid?[r.grid,r.grid]:r.grid,l=u[0]||1,c=u[1]||1,f=Math.round((i.width-o.width)/l)*l,d=Math.round((i.height-o.height)/c)*c,h=o.width+f,p=o.height+d,m=r.maxWidth&&r.maxWidth<h,g=r.maxHeight&&r.maxHeight<p,v=r.minWidth&&r.minWidth>h,y=r.minHeight&&r.minHeight>p;r.grid=u,v&&(h+=l),y&&(p+=c),m&&(h-=l),g&&(p-=c),/^(se|s|e)$/.test(s)?(n.size.width=h,n.size.height=p):/^(ne)$/.test(s)?(n.size.width=h,n.size.height=p,n.position.top=a.top-d):/^(sw)$/.test(s)?(n.size.width=h,n.size.height=p,n.position.left=a.left-f):((p-c<=0||h-l<=0)&&(t=n._getPaddingPlusBorderDimensions(this)),p-c>0?(n.size.height=p,n.position.top=a.top-d):(p=c-t.height,n.size.height=p,n.position.top=a.top+o.height-p),h-l>0?(n.size.width=h,n.position.left=a.left-f):(h=l-t.width,n.size.width=h,n.position.left=a.left+o.width-h))}}),e.ui.resizable})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[n(0),n(3)],void 0===(o="function"==typeof(r=function(e){return e.fn.extend({disableSelection:(t="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(t+".ui-disableSelection",function(e){e.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}});var t})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r,i,o;i=[n(0),n(3)],void 0===(o="function"==typeof(r=function(e){return e.ui.plugin={add:function(t,n,r){var i,o=e.ui[t].prototype;for(i in r)o.plugins[i]=o.plugins[i]||[],o.plugins[i].push([n,r[i]])},call:function(e,t,n,r){var i,o=e.plugins[t];if(o&&(r||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(i=0;i<o.length;i++)e.options[o[i][0]]&&o[i][1].apply(e.element,n)}}})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61)},function(e,t,n){(function(e){!function(e){"use strict";e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;return e(this).one("bsTransitionEnd",function(){n=!0}),setTimeout(function(){n||e(r).trigger(e.support.transition.end)},t),this},e(function(){e.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.close=function(t){var r=e(this),i=r.attr("data-target");i||(i=(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,""));var o=e(i);function a(){o.detach().trigger("closed.bs.alert").remove()}t&&t.preventDefault(),o.length||(o=r.closest(".alert")),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",a).emulateTransitionEnd(n.TRANSITION_DURATION):a())};var r=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("bs.alert");i||r.data("bs.alert",i=new n(this)),"string"==typeof t&&i[t].call(r)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.isLoading=!1};function n(n){return this.each(function(){var r=e(this),i=r.data("bs.button"),o="object"==typeof n&&n;i||r.data("bs.button",i=new t(this,o)),"toggle"==n?i.toggle():n&&i.setState(n)})}t.VERSION="3.3.5",t.DEFAULTS={loadingText:"loading..."},t.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",o=r.data();t+="Text",null==o.resetText&&r.data("resetText",r[i]()),setTimeout(e.proxy(function(){r[i](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},t.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=n,e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var r=e(t.target);r.hasClass("btn")||(r=r.closest(".btn")),n.call(r,"toggle"),e(t.target).is('input[type="radio"]')||e(t.target).is('input[type="checkbox"]')||t.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};function n(n){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),o=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n),a="string"==typeof n?n:o.slide;i||r.data("bs.carousel",i=new t(this,o)),"number"==typeof n?i.to(n):a?i[a]():o.interval&&i.pause().cycle()})}t.VERSION="3.3.5",t.TRANSITION_DURATION=600,t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},t.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},t.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},t.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t);if(("prev"==e&&0===n||"next"==e&&n==this.$items.length-1)&&!this.options.wrap)return t;var r=(n+("prev"==e?-1:1))%this.$items.length;return this.$items.eq(r)},t.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},t.prototype.next=function(){if(!this.sliding)return this.slide("next")},t.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},t.prototype.slide=function(n,r){var i=this.$element.find(".item.active"),o=r||this.getItemForDirection(n,i),a=this.interval,s="next"==n?"left":"right",u=this;if(o.hasClass("active"))return this.sliding=!1;var l=o[0],c=e.Event("slide.bs.carousel",{relatedTarget:l,direction:s});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var f=e(this.$indicators.children()[this.getItemIndex(o)]);f&&f.addClass("active")}var d=e.Event("slid.bs.carousel",{relatedTarget:l,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(o.addClass(n),o[0].offsetWidth,i.addClass(s),o.addClass(s),i.one("bsTransitionEnd",function(){o.removeClass([n,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),u.sliding=!1,setTimeout(function(){u.$element.trigger(d)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)):(i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(d)),a&&this.cycle(),this}};var r=e.fn.carousel;e.fn.carousel=n,e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var i=function(t){var r,i=e(this),o=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var a=e.extend({},o.data(),i.data()),s=i.attr("data-slide-to");s&&(a.interval=!1),n.call(o,a),s&&o.data("bs.carousel").to(s),t.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);n.call(t,t.data())})})}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t=function(n,r){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,r),this.$trigger=e('[data-toggle="collapse"][href="#'+n.id+'"],[data-toggle="collapse"][data-target="#'+n.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function n(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function r(n){return this.each(function(){var r=e(this),i=r.data("bs.collapse"),o=e.extend({},t.DEFAULTS,r.data(),"object"==typeof n&&n);!i&&o.toggle&&/show|hide/.test(n)&&(o.toggle=!1),i||r.data("bs.collapse",i=new t(this,o)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.5",t.TRANSITION_DURATION=350,t.DEFAULTS={toggle:!0},t.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},t.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var n,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(n=i.data("bs.collapse"))&&n.transitioning)){var o=e.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){i&&i.length&&(r.call(i,"hide"),n||i.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var u=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[a](this.$element[0][u])}}}},t.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var n=e.Event("hide.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){var r=this.dimension();this.$element[r](this.$element[r]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!e.support.transition)return i.call(this);this.$element[r](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(t.TRANSITION_DURATION)}}},t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},t.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(t,r){var i=e(r);this.addAriaAndCollapsedClass(n(i),i)},this)).end()},t.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=r,e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var i=e(this);i.attr("data-target")||t.preventDefault();var o=n(i),a=o.data("bs.collapse")?"toggle":i.data();r.call(o,a)})}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t=".dropdown-backdrop",n='[data-toggle="dropdown"]',r=function(t){e(t).on("click.bs.dropdown",this.toggle)};function i(t){var n=t.attr("data-target");n||(n=(n=t.attr("href"))&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function o(r){r&&3===r.which||(e(t).remove(),e(n).each(function(){var t=e(this),n=i(t),o={relatedTarget:this};n.hasClass("open")&&(r&&"click"==r.type&&/input|textarea/i.test(r.target.tagName)&&e.contains(n[0],r.target)||(n.trigger(r=e.Event("hide.bs.dropdown",o)),r.isDefaultPrevented()||(t.attr("aria-expanded","false"),n.removeClass("open").trigger("hidden.bs.dropdown",o))))}))}r.VERSION="3.3.5",r.prototype.toggle=function(t){var n=e(this);if(!n.is(".disabled, :disabled")){var r=i(n),a=r.hasClass("open");if(o(),!a){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",o);var s={relatedTarget:this};if(r.trigger(t=e.Event("show.bs.dropdown",s)),t.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},r.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var r=e(this);if(t.preventDefault(),t.stopPropagation(),!r.is(".disabled, :disabled")){var o=i(r),a=o.hasClass("open");if(!a&&27!=t.which||a&&27==t.which)return 27==t.which&&o.find(n).trigger("focus"),r.trigger("click");var s=o.find(".dropdown-menu li:not(.disabled):visible a");if(s.length){var u=s.index(t.target);38==t.which&&u>0&&u--,40==t.which&&u<s.length-1&&u++,~u||(u=0),s.eq(u).trigger("focus")}}}};var a=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new r(this)),"string"==typeof t&&i[t].call(n)})},e.fn.dropdown.Constructor=r,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=a,this},e(document).on("click.bs.dropdown.data-api",o).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",n,r.prototype.toggle).on("keydown.bs.dropdown.data-api",n,r.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",r.prototype.keydown)}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};function n(n,r){return this.each(function(){var i=e(this),o=i.data("bs.modal"),a=e.extend({},t.DEFAULTS,i.data(),"object"==typeof n&&n);o||i.data("bs.modal",o=new t(this,a)),"string"==typeof n?o[n](r):a.show&&o.show(r)})}t.VERSION="3.3.5",t.TRANSITION_DURATION=300,t.BACKDROP_TRANSITION_DURATION=150,t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},t.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},t.prototype.show=function(n){var r=this,i=e.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:n});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(t.TRANSITION_DURATION):r.$element.trigger("focus").trigger(o)}))},t.prototype.hide=function(n){n&&n.preventDefault(),n=e.Event("hide.bs.modal"),this.$element.trigger(n),this.isShown&&!n.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal())},t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},t.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},t.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},t.prototype.backdrop=function(n){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=e.support.transition&&i;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!n)return;o?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):n()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){r.removeBackdrop(),n&&n()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):a()}else n&&n()},t.prototype.handleUpdate=function(){this.adjustDialog()},t.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},t.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},t.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},t.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=n,e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=e(this),i=r.attr("href"),o=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},o.data(),r.data());r.is("a")&&t.preventDefault(),o.one("show.bs.modal",function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),n.call(o,a,this)})}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};t.VERSION="3.3.5",t.TRANSITION_DURATION=150,t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},t.prototype.init=function(t,n,r){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),o=i.length;o--;){var a=i[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",u="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.getOptions=function(t){return(t=e.extend({},this.getDefaults(),this.$element.data(),t)).delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},t.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState)n.hoverState="in";else{if(clearTimeout(n.timeout),n.hoverState="in",!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)}},t.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),!n.isInStateTrue()){if(clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)}},t.prototype.show=function(){var n=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(n);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(n.isDefaultPrevented()||!r)return;var i=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,u=/\s?auto?\s?/i,l=u.test(s);l&&(s=s.replace(u,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),f=o[0].offsetWidth,d=o[0].offsetHeight;if(l){var h=s,p=this.getPosition(this.$viewport);s="bottom"==s&&c.bottom+d>p.bottom?"top":"top"==s&&c.top-d<p.top?"bottom":"right"==s&&c.right+f>p.width?"left":"left"==s&&c.left-f<p.left?"right":s,o.removeClass(h).addClass(s)}var m=this.getCalculatedOffset(s,c,f,d);this.applyPlacement(m,s);var g=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",g).emulateTransitionEnd(t.TRANSITION_DURATION):g()}},t.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,o=r[0].offsetHeight,a=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),t.top+=a,t.left+=s,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var u=r[0].offsetWidth,l=r[0].offsetHeight;"top"==n&&l!=o&&(t.top=t.top+o-l);var c=this.getViewportAdjustedDelta(n,t,u,l);c.left?t.left+=c.left:t.top+=c.top;var f=/top|bottom/.test(n),d=f?2*c.left-i+u:2*c.top-o+l,h=f?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(d,r[0][h],f)},t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},t.prototype.hide=function(n){var r=this,i=e(this.$tip),o=e.Event("hide.bs."+this.type);function a(){"in"!=r.hoverState&&i.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),n&&n()}if(this.$element.trigger(o),!o.isDefaultPrevented())return i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",a).emulateTransitionEnd(t.TRANSITION_DURATION):a(),this.hoverState=null,this},t.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},t.prototype.hasContent=function(){return this.getTitle()},t.prototype.getPosition=function(t){var n=(t=t||this.$element)[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=r?{top:0,left:0}:t.offset(),a={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,a,s,o)},t.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},t.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-o-a.scroll,u=t.top+o-a.scroll+r;s<a.top?i.top=a.top-s:u>a.top+a.height&&(i.top=a.top+a.height-u)}else{var l=t.left-o,c=t.left+o+n;l<a.left?i.left=a.left-l:c>a.right&&(i.left=a.left+a.width-c)}return i},t.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},t.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},t.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},t.prototype.enable=function(){this.enabled=!0},t.prototype.disable=function(){this.enabled=!1},t.prototype.toggleEnabled=function(){this.enabled=!this.enabled},t.prototype.toggle=function(t){var n=this;t&&((n=e(t.currentTarget).data("bs."+this.type))||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},t.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null})};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),o="object"==typeof n&&n;!i&&/destroy|hide/.test(n)||(i||r.data("bs.tooltip",i=new t(this,o)),"string"==typeof n&&i[n]())})},e.fn.tooltip.Constructor=t,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.5",t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),(t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype)).constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("bs.popover"),o="object"==typeof n&&n;!i&&/destroy|hide/.test(n)||(i||r.data("bs.popover",i=new t(this,o)),"string"==typeof n&&i[n]())})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";function t(n,r){this.$body=e(document.body),this.$scrollElement=e(n).is(document.body)?e(window):e(n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),o="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new t(this,o)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.5",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),o=/^#./.test(i)&&e(i);return o&&o.length&&o.is(":visible")&&[[o[n]().top+r,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=r)return a!=(e=o[o.length-1])&&this.activate(e);if(a&&t<i[0])return this.activeTarget=null,this.clear();for(e=i.length;e--;)a!=o[e]&&t>=i[e]&&(void 0===i[e+1]||t<i[e+1])&&this.activate(o[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t=function(t){this.element=e(t)};function n(n){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new t(this)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.5",t.TRANSITION_DURATION=150,t.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=(r=t.attr("href"))&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a"),o=e.Event("hide.bs.tab",{relatedTarget:t[0]}),a=e.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(o),t.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=e(r);this.activate(t.closest("li"),n),this.activate(s,s.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},t.prototype.activate=function(n,r,i){var o=r.find("> .active"),a=i&&e.support.transition&&(o.length&&o.hasClass("fade")||!!r.find("> .fade").length);function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),n.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(n[0].offsetWidth,n.addClass("in")):n.removeClass("fade"),n.parent(".dropdown-menu").length&&n.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}o.length&&a?o.one("bsTransitionEnd",s).emulateTransitionEnd(t.TRANSITION_DURATION):s(),o.removeClass("in")};var r=e.fn.tab;e.fn.tab=n,e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var i=function(t){t.preventDefault(),n.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(e)}).call(this,n(0))},function(e,t,n){(function(e){!function(e){"use strict";var t=function(n,r){this.options=e.extend({},t.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(n),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function n(n){return this.each(function(){var r=e(this),i=r.data("bs.affix"),o="object"==typeof n&&n;i||r.data("bs.affix",i=new t(this,o)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.5",t.RESET="affix affix-top affix-bottom",t.DEFAULTS={offset:0,target:window},t.prototype.getState=function(e,t,n,r){var i=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return i<n&&"top";if("bottom"==this.affixed)return null!=n?!(i+this.unpin<=o.top)&&"bottom":!(i+a<=e-r)&&"bottom";var s=null==this.affixed,u=s?i:o.top;return null!=n&&i<=n?"top":null!=r&&u+(s?a:t)>=e-r&&"bottom"},t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$target.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-e},t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=this.$element.height(),r=this.options.offset,i=r.top,o=r.bottom,a=Math.max(e(document).height(),e(document.body).height());"object"!=typeof r&&(o=i=r),"function"==typeof i&&(i=r.top(this.$element)),"function"==typeof o&&(o=r.bottom(this.$element));var s=this.getState(a,n,i,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var u="affix"+(s?"-"+s:""),l=e.Event(u+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(u).trigger(u.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-n-o})}};var r=e.fn.affix;e.fn.affix=n,e.fn.affix.Constructor=t,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),r=t.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),n.call(t,r)})})}(e)}).call(this,n(0))},function(e,t,n){var r,i,o;i=[n(0)],void 0===(o="function"==typeof(r=function(e){var t=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},n="notifyjs",r={t:"top",m:"middle",b:"bottom",l:"left",c:"center",r:"right"},i=["l","c","r"],o=["t","m","b"],a=["t","b","l","r"],s={t:"b",m:null,b:"t",l:"r",c:null,r:"l"},u={},l={name:"core",html:'<div class="'+n+'-wrapper">\n\t<div class="'+n+'-arrow"></div>\n\t<div class="'+n+'-container"></div>\n</div>',css:"."+n+"-corner {\n\tposition: fixed;\n\tmargin: 5px;\n\tz-index: 1050;\n}\n\n."+n+"-corner ."+n+"-wrapper,\n."+n+"-corner ."+n+"-container {\n\tposition: relative;\n\tdisplay: block;\n\theight: inherit;\n\twidth: inherit;\n\tmargin: 3px;\n}\n\n."+n+"-wrapper {\n\tz-index: 1;\n\tposition: absolute;\n\tdisplay: inline-block;\n\theight: 0;\n\twidth: 0;\n}\n\n."+n+"-container {\n\tdisplay: none;\n\tz-index: 1;\n\tposition: absolute;\n}\n\n."+n+"-hidable {\n\tcursor: pointer;\n}\n\n[data-notify-text],[data-notify-html] {\n\tposition: relative;\n}\n\n."+n+"-arrow {\n\tposition: absolute;\n\tz-index: 2;\n\twidth: 0;\n\theight: 0;\n}"},c={"border-radius":["-webkit-","-moz-"]},f=function(t,r){if(!t)throw"Missing Style name";if(!r)throw"Missing Style definition";if(!r.html)throw"Missing Style HTML";var i=u[t];i&&i.cssElem&&(window.console&&console.warn("notify: overwriting style '"+t+"'"),u[t].cssElem.remove()),r.name=t,u[t]=r;var o="";r.classes&&e.each(r.classes,function(t,i){return o+="."+n+"-"+r.name+"-"+t+" {\n",e.each(i,function(t,n){return c[t]&&e.each(c[t],function(e,r){return o+="\t"+r+t+": "+n+";\n"}),o+="\t"+t+": "+n+";\n"}),o+="}\n"}),r.css&&(o+="/* styles for "+r.name+" */\n"+r.css),o&&(r.cssElem=d(o),r.cssElem.attr("id","notify-"+r.name));var a={},s=e(r.html);h("html",s,a),h("text",s,a),r.fields=a},d=function(t){var n;(n=v("style")).attr("type","text/css"),e("head").append(n);try{n.html(t)}catch(e){n[0].styleSheet.cssText=t}return n},h=function(t,n,r){var i;return"html"!==t&&(t="text"),p(n,"["+(i="data-notify-"+t)+"]").each(function(){var n;(n=e(this).attr(i))||(n="notify!blank"),r[n]=t})},p=function(e,t){return e.is(t)?e:e.find(t)},m={clickToHide:!0,autoHide:!0,autoHideDelay:5e3,arrowShow:!0,arrowSize:5,breakNewLines:!0,elementPosition:"bottom",globalPosition:"top right",style:"bootstrap",className:"error",showAnimation:"slideDown",showDuration:400,hideAnimation:"slideUp",hideDuration:200,gap:5},g=function(t,n){var r;return(r=function(){}).prototype=t,e.extend(!0,new r,n)},v=function(t){return e("<"+t+"></"+t+">")},y={},b=function(t){var n;return t.is("[type=radio]")&&(n=t.parents("form:first").find("[type=radio]").filter(function(n,r){return e(r).attr("name")===t.attr("name")}),t=n.first()),t},w=function(e,t,n){var i;if("string"==typeof n)n=parseInt(n,10);else if("number"!=typeof n)return;if(!isNaN(n))return void 0!==e[i=r[s[t.charAt(0)]]]&&(t=r[i.charAt(0)],n=-n),void 0===e[t]?e[t]=n:e[t]+=n,null},x=function(e,t,n){if("l"===e||"t"===e)return 0;if("c"===e||"m"===e)return n/2-t/2;if("r"===e||"b"===e)return n-t;throw"Invalid alignment"},C=function(e){return C.e=C.e||v("div"),C.e.text(e).html()};function _(t,r,i){"string"==typeof i&&(i={className:i}),this.options=g(m,e.isPlainObject(i)?i:{}),this.loadHTML(),this.wrapper=e(l.html),this.options.clickToHide&&this.wrapper.addClass(n+"-hidable"),this.wrapper.data(n,this),this.arrow=this.wrapper.find("."+n+"-arrow"),this.container=this.wrapper.find("."+n+"-container"),this.container.append(this.userContainer),t&&t.length&&(this.elementType=t.attr("type"),this.originalElement=t,this.elem=b(t),this.elem.data(n,this),this.elem.before(this.wrapper)),this.container.hide(),this.run(r)}_.prototype.loadHTML=function(){var t;t=this.getStyle(),this.userContainer=e(t.html),this.userFields=t.fields},_.prototype.show=function(e,t){var n,r,i,o,a,s;if(s=this,r=function(){if(e||s.elem||s.destroy(),t)return t()},a=this.container.parent().parents(":hidden").length>0,i=this.container.add(this.arrow),n=[],a&&e)o="show";else if(a&&!e)o="hide";else if(!a&&e)o=this.options.showAnimation,n.push(this.options.showDuration);else{if(a||e)return r();o=this.options.hideAnimation,n.push(this.options.hideDuration)}return n.push(r),i[o].apply(i,n)},_.prototype.setGlobalPosition=function(){var t=this.getPosition(),i=t[0],o=t[1],a=r[i],s=r[o],u=i+"|"+o,l=y[u];if(!l){l=y[u]=v("div");var c={};c[a]=0,"middle"===s?c.top="45%":"center"===s?c.left="45%":c[s]=0,l.css(c).addClass(n+"-corner"),e("body").append(l)}return l.prepend(this.wrapper)},_.prototype.setElementPosition=function(){var n,u,l,c,f,d,h,p,m,g,v,y,b,C,_,S,k,T,E,N,A,R,O,D,P,I,B,M;for(O=(I=this.getPosition())[0],R=I[1],I[2],v=this.elem.position(),p=this.elem.outerHeight(),y=this.elem.outerWidth(),m=this.elem.innerHeight(),g=this.elem.innerWidth(),M=this.wrapper.position(),f=this.container.height(),d=this.container.width(),T=r[O],(h={})[A=r[N=s[O]]]="b"===O?p:"r"===O?y:0,w(h,"top",v.top-M.top),w(h,"left",v.left-M.left),C=0,S=(B=["top","left"]).length;C<S;C++)D=B[C],(E=parseInt(this.elem.css("margin-"+D),10))&&w(h,D,E);if(b=Math.max(0,this.options.gap-(this.options.arrowShow?l:0)),w(h,A,b),this.options.arrowShow){for(l=this.options.arrowSize,u=e.extend({},h),n=this.userContainer.css("border-color")||this.userContainer.css("border-top-color")||this.userContainer.css("background-color")||"white",_=0,k=a.length;_<k;_++)P=r[D=a[_]],D!==N&&(c=P===T?n:"transparent",u["border-"+P]=l+"px solid "+c);w(h,r[N],l),t.call(a,R)>=0&&w(u,r[R],2*l)}else this.arrow.hide();if(t.call(o,O)>=0?(w(h,"left",x(R,d,y)),u&&w(u,"left",x(R,l,g))):t.call(i,O)>=0&&(w(h,"top",x(R,f,p)),u&&w(u,"top",x(R,l,m))),this.container.is(":visible")&&(h.display="block"),this.container.removeAttr("style").css(h),u)return this.arrow.removeAttr("style").css(u)},_.prototype.getPosition=function(){var n,s,u,l,c,f,d;if(0===(n=function(t){var n;return n=[],e.each(t.split(/\W+/),function(e,t){var i;if(i=t.toLowerCase().charAt(0),r[i])return n.push(i)}),n}(this.options.position||(this.elem?this.options.elementPosition:this.options.globalPosition))).length&&(n[0]="b"),s=n[0],t.call(a,s)<0)throw"Must be one of ["+a+"]";return(1===n.length||(u=n[0],t.call(o,u)>=0&&(l=n[1],t.call(i,l)<0))||(c=n[0],t.call(i,c)>=0&&(f=n[1],t.call(o,f)<0)))&&(n[1]=(d=n[0],t.call(i,d)>=0?"m":"l")),2===n.length&&(n[2]=n[1]),n},_.prototype.getStyle=function(e){var t;if(e||(e=this.options.style),e||(e="default"),!(t=u[e]))throw"Missing style: "+e;return t},_.prototype.updateClasses=function(){var t,r;return t=["base"],e.isArray(this.options.className)?t=t.concat(this.options.className):this.options.className&&t.push(this.options.className),r=this.getStyle(),t=e.map(t,function(e){return n+"-"+r.name+"-"+e}).join(" "),this.userContainer.attr("class",t)},_.prototype.run=function(t,n){var r,i,o,a,s;if(e.isPlainObject(n)?e.extend(this.options,n):"string"===e.type(n)&&(this.options.className=n),!this.container||t){if(this.container||t){for(o in i={},e.isPlainObject(t)?i=t:i["notify!blank"]=t,i)r=i[o],(a=this.userFields[o])&&("text"===a&&(r=C(r),this.options.breakNewLines&&(r=r.replace(/\n/g,"<br/>"))),s="notify!blank"===o?"":"="+o,p(this.userContainer,"[data-notify-"+a+s+"]").html(r));this.updateClasses(),this.elem?this.setElementPosition():this.setGlobalPosition(),this.show(!0),this.options.autoHide&&(clearTimeout(this.autohideTimer),this.autohideTimer=setTimeout(this.show.bind(this,!1),this.options.autoHideDelay))}}else this.show(!1)},_.prototype.destroy=function(){this.wrapper.data(n,null),this.wrapper.remove()},e.notify=function(t,n,r){return t&&t.nodeName||t.jquery?e(t).notify(n,r):(r=n,new _(null,n=t,r)),t},e.fn.notify=function(t,r){return e(this).each(function(){var i=b(e(this)).data(n);i&&i.destroy(),new _(e(this),t,r)}),this},e.extend(e.notify,{defaults:function(t){return e.extend(m,t)},addStyle:f,pluginOptions:m,getStyle:function(e){return u[e]},insertCSS:d}),f("bootstrap",{html:"<div>\n<span data-notify-text></span>\n</div>",classes:{base:{"font-weight":"bold",padding:"8px 15px 8px 14px","text-shadow":"0 1px 0 rgba(255, 255, 255, 0.5)","background-color":"#fcf8e3",border:"1px solid #fbeed5","border-radius":"4px","white-space":"nowrap","padding-left":"25px","background-repeat":"no-repeat","background-position":"3px 7px"},error:{color:"#B94A48","background-color":"#F2DEDE","border-color":"#EED3D7","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAtRJREFUeNqkVc1u00AQHq+dOD+0poIQfkIjalW0SEGqRMuRnHos3DjwAH0ArlyQeANOOSMeAA5VjyBxKBQhgSpVUKKQNGloFdw4cWw2jtfMOna6JOUArDTazXi/b3dm55socPqQhFka++aHBsI8GsopRJERNFlY88FCEk9Yiwf8RhgRyaHFQpPHCDmZG5oX2ui2yilkcTT1AcDsbYC1NMAyOi7zTX2Agx7A9luAl88BauiiQ/cJaZQfIpAlngDcvZZMrl8vFPK5+XktrWlx3/ehZ5r9+t6e+WVnp1pxnNIjgBe4/6dAysQc8dsmHwPcW9C0h3fW1hans1ltwJhy0GxK7XZbUlMp5Ww2eyan6+ft/f2FAqXGK4CvQk5HueFz7D6GOZtIrK+srupdx1GRBBqNBtzc2AiMr7nPplRdKhb1q6q6zjFhrklEFOUutoQ50xcX86ZlqaZpQrfbBdu2R6/G19zX6XSgh6RX5ubyHCM8nqSID6ICrGiZjGYYxojEsiw4PDwMSL5VKsC8Yf4VRYFzMzMaxwjlJSlCyAQ9l0CW44PBADzXhe7xMdi9HtTrdYjFYkDQL0cn4Xdq2/EAE+InCnvADTf2eah4Sx9vExQjkqXT6aAERICMewd/UAp/IeYANM2joxt+q5VI+ieq2i0Wg3l6DNzHwTERPgo1ko7XBXj3vdlsT2F+UuhIhYkp7u7CarkcrFOCtR3H5JiwbAIeImjT/YQKKBtGjRFCU5IUgFRe7fF4cCNVIPMYo3VKqxwjyNAXNepuopyqnld602qVsfRpEkkz+GFL1wPj6ySXBpJtWVa5xlhpcyhBNwpZHmtX8AGgfIExo0ZpzkWVTBGiXCSEaHh62/PoR0p/vHaczxXGnj4bSo+G78lELU80h1uogBwWLf5YlsPmgDEd4M236xjm+8nm4IuE/9u+/PH2JXZfbwz4zw1WbO+SQPpXfwG/BBgAhCNZiSb/pOQAAAAASUVORK5CYII=)"},success:{color:"#468847","background-color":"#DFF0D8","border-color":"#D6E9C6","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAutJREFUeNq0lctPE0Ecx38zu/RFS1EryqtgJFA08YCiMZIAQQ4eRG8eDGdPJiYeTIwHTfwPiAcvXIwXLwoXPaDxkWgQ6islKlJLSQWLUraPLTv7Gme32zoF9KSTfLO7v53vZ3d/M7/fIth+IO6INt2jjoA7bjHCJoAlzCRw59YwHYjBnfMPqAKWQYKjGkfCJqAF0xwZjipQtA3MxeSG87VhOOYegVrUCy7UZM9S6TLIdAamySTclZdYhFhRHloGYg7mgZv1Zzztvgud7V1tbQ2twYA34LJmF4p5dXF1KTufnE+SxeJtuCZNsLDCQU0+RyKTF27Unw101l8e6hns3u0PBalORVVVkcaEKBJDgV3+cGM4tKKmI+ohlIGnygKX00rSBfszz/n2uXv81wd6+rt1orsZCHRdr1Imk2F2Kob3hutSxW8thsd8AXNaln9D7CTfA6O+0UgkMuwVvEFFUbbAcrkcTA8+AtOk8E6KiQiDmMFSDqZItAzEVQviRkdDdaFgPp8HSZKAEAL5Qh7Sq2lIJBJwv2scUqkUnKoZgNhcDKhKg5aH+1IkcouCAdFGAQsuWZYhOjwFHQ96oagWgRoUov1T9kRBEODAwxM2QtEUl+Wp+Ln9VRo6BcMw4ErHRYjH4/B26AlQoQQTRdHWwcd9AH57+UAXddvDD37DmrBBV34WfqiXPl61g+vr6xA9zsGeM9gOdsNXkgpEtTwVvwOklXLKm6+/p5ezwk4B+j6droBs2CsGa/gNs6RIxazl4Tc25mpTgw/apPR1LYlNRFAzgsOxkyXYLIM1V8NMwyAkJSctD1eGVKiq5wWjSPdjmeTkiKvVW4f2YPHWl3GAVq6ymcyCTgovM3FzyRiDe2TaKcEKsLpJvNHjZgPNqEtyi6mZIm4SRFyLMUsONSSdkPeFtY1n0mczoY3BHTLhwPRy9/lzcziCw9ACI+yql0VLzcGAZbYSM5CCSZg1/9oc/nn7+i8N9p/8An4JMADxhH+xHfuiKwAAAABJRU5ErkJggg==)"},info:{color:"#3A87AD","background-color":"#D9EDF7","border-color":"#BCE8F1","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QYFAhkSsdes/QAAA8dJREFUOMvVlGtMW2UYx//POaWHXg6lLaW0ypAtw1UCgbniNOLcVOLmAjHZolOYlxmTGXVZdAnRfXQm+7SoU4mXaOaiZsEpC9FkiQs6Z6bdCnNYruM6KNBw6YWewzl9z+sHImEWv+vz7XmT95f/+3/+7wP814v+efDOV3/SoX3lHAA+6ODeUFfMfjOWMADgdk+eEKz0pF7aQdMAcOKLLjrcVMVX3xdWN29/GhYP7SvnP0cWfS8caSkfHZsPE9Fgnt02JNutQ0QYHB2dDz9/pKX8QjjuO9xUxd/66HdxTeCHZ3rojQObGQBcuNjfplkD3b19Y/6MrimSaKgSMmpGU5WevmE/swa6Oy73tQHA0Rdr2Mmv/6A1n9w9suQ7097Z9lM4FlTgTDrzZTu4StXVfpiI48rVcUDM5cmEksrFnHxfpTtU/3BFQzCQF/2bYVoNbH7zmItbSoMj40JSzmMyX5qDvriA7QdrIIpA+3cdsMpu0nXI8cV0MtKXCPZev+gCEM1S2NHPvWfP/hL+7FSr3+0p5RBEyhEN5JCKYr8XnASMT0xBNyzQGQeI8fjsGD39RMPk7se2bd5ZtTyoFYXftF6y37gx7NeUtJJOTFlAHDZLDuILU3j3+H5oOrD3yWbIztugaAzgnBKJuBLpGfQrS8wO4FZgV+c1IxaLgWVU0tMLEETCos4xMzEIv9cJXQcyagIwigDGwJgOAtHAwAhisQUjy0ORGERiELgG4iakkzo4MYAxcM5hAMi1WWG1yYCJIcMUaBkVRLdGeSU2995TLWzcUAzONJ7J6FBVBYIggMzmFbvdBV44Corg8vjhzC+EJEl8U1kJtgYrhCzgc/vvTwXKSib1paRFVRVORDAJAsw5FuTaJEhWM2SHB3mOAlhkNxwuLzeJsGwqWzf5TFNdKgtY5qHp6ZFf67Y/sAVadCaVY5YACDDb3Oi4NIjLnWMw2QthCBIsVhsUTU9tvXsjeq9+X1d75/KEs4LNOfcdf/+HthMnvwxOD0wmHaXr7ZItn2wuH2SnBzbZAbPJwpPx+VQuzcm7dgRCB57a1uBzUDRL4bfnI0RE0eaXd9W89mpjqHZnUI5Hh2l2dkZZUhOqpi2qSmpOmZ64Tuu9qlz/SEXo6MEHa3wOip46F1n7633eekV8ds8Wxjn37Wl63VVa+ej5oeEZ/82ZBETJjpJ1Rbij2D3Z/1trXUvLsblCK0XfOx0SX2kMsn9dX+d+7Kf6h8o4AIykuffjT8L20LU+w4AZd5VvEPY+XpWqLV327HR7DzXuDnD8r+ovkBehJ8i+y8YAAAAASUVORK5CYII=)"},warn:{color:"#C09853","background-color":"#FCF8E3","border-color":"#FBEED5","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABJlBMVEXr6eb/2oD/wi7/xjr/0mP/ykf/tQD/vBj/3o7/uQ//vyL/twebhgD/4pzX1K3z8e349vK6tHCilCWbiQymn0jGworr6dXQza3HxcKkn1vWvV/5uRfk4dXZ1bD18+/52YebiAmyr5S9mhCzrWq5t6ufjRH54aLs0oS+qD751XqPhAybhwXsujG3sm+Zk0PTwG6Shg+PhhObhwOPgQL4zV2nlyrf27uLfgCPhRHu7OmLgAafkyiWkD3l49ibiAfTs0C+lgCniwD4sgDJxqOilzDWowWFfAH08uebig6qpFHBvH/aw26FfQTQzsvy8OyEfz20r3jAvaKbhgG9q0nc2LbZxXanoUu/u5WSggCtp1anpJKdmFz/zlX/1nGJiYmuq5Dx7+sAAADoPUZSAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfdBgUBGhh4aah5AAAAlklEQVQY02NgoBIIE8EUcwn1FkIXM1Tj5dDUQhPU502Mi7XXQxGz5uVIjGOJUUUW81HnYEyMi2HVcUOICQZzMMYmxrEyMylJwgUt5BljWRLjmJm4pI1hYp5SQLGYxDgmLnZOVxuooClIDKgXKMbN5ggV1ACLJcaBxNgcoiGCBiZwdWxOETBDrTyEFey0jYJ4eHjMGWgEAIpRFRCUt08qAAAAAElFTkSuQmCC)"}}}),e(function(){d(l.css).attr("id","core-notify"),e(document).on("click","."+n+"-hidable",function(t){e(this).trigger("notify-hide")}),e(document).on("notify-hide","."+n+"-wrapper",function(t){var r=e(this).data(n);r&&r.show(!1)})})})?r.apply(t,i):r)||(e.exports=o)}]);
var keyString="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
base64Encode = function(c) {
  var a = "";
  var k, h, f, j, g, e, d;
  var b = 0;
  c = UTF8Encode(c);
  while (b < c.length) {
    k = c.charCodeAt(b++); 
    h = c.charCodeAt(b++);
    f = c.charCodeAt(b++);
    j = k >> 2;
    g = ((k & 3) << 4) | (h >> 4);
    e = ((h & 15) << 2) | (f >> 6);
    d = f & 63;
    if (isNaN(h)) {
      e = d = 64
    } else {
      if (isNaN(f)) {
        d = 64
      }
    }
    a = a + keyString.charAt(j)
    + keyString.charAt(g)
    + keyString.charAt(e)
    + keyString.charAt(d)
  }
  return a
};

UTF8Encode = function(b) {
  b = b.replace(/\x0d\x0a/g, "\x0a");
  var a = "";
  for ( var e = 0; e < b.length; e++) {
    var d = b.charCodeAt(e);
    if (d < 128) {
      a += String.fromCharCode(d)
    } else {
      if ((d > 127) && (d < 2048)) {
        a += String.fromCharCode((d >> 6) | 192);
        a += String.fromCharCode((d & 63) | 128)
      } else {
        a += String.fromCharCode((d >> 12) | 224);
        a += String.fromCharCode(((d >> 6) & 63) | 128);
        a += String.fromCharCode((d & 63) | 128)
      }
    }
  }
  return a
};

GaviasCompare = function(a, b){
   if (a.index < b.index)
     return -1;
   if (a.index > b.index)
     return 1;
   return 0;
};

function randomString(length) {
    var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
    var result = '';
    for (var i = length; i > 0; --i) result += chars[Math.floor(Math.random() * chars.length)];
    return result;
}

//========= Main script ====================
 
(function ($) {
  $.fn.extend({insertcaret:function(t){return this.each(function(){if(document.selection){this.focus();var e=document.selection.createRange();e.text=t,this.focus()}else if(this.selectionStart||"0"==this.selectionStart){var s=this.selectionStart,i=this.selectionEnd,n=this.scrollTop;this.value=this.value.substring(0,s)+t+this.value.substring(i,this.value.length),this.focus(),this.selectionStart=s+t.length,this.selectionEnd=s+t.length,this.scrollTop=n}else this.value+=t,this.focus()})}});

   $(document).ready(function () {
     
      $('#gbb-form-setting').delegate(".input_datetime", 'click', function(e){
          e.preventDefault();
          $(this).datepicker({
               defaultDate: "",
               dateFormat: "yy-mm-dd",
               numberOfMonths: 1,
               showButtonPanel: true,
          });
           $(this).datepicker('show');
     });

      $('#save').removeAttr('disabled');
      $('#gavias-blockbuilder-setting').delegate('#save', 'click', function(){
        $(this).attr('disabled', 'true');
         gavias_save_blockbuilder();
         return false;
      })

      $('#gbb-form-setting').delegate('.gsc_display_view', 'change', function(){
        var $label = $(this).find(':selected').text();
        $(this).parents('#gbb-form-setting').find('.display-admin').val($label);
      });


   });

   function notify(style, text) {
      $.notify({
          title: 'Notification',
          text: text,
          image: '<i class="fa fa-bell" style="font-size: 30px; color: #fff;"></i>',
          hideAnimation: 'slideUp',

      }, {
          style: 'metro',
          className: style,
          autoHide: true,
          clickToHide: true,
          globalPosition: 'top right'
      });
   }

  function gavias_save_blockbuilder(){
      var result = $('#gavias-blockbuilder-setting input:not(.input-file-upload), #gavias-blockbuilder-setting select, #gavias-blockbuilder-setting textarea').serializeObject();
      result = $.extend({}, result);
      result =base64Encode(JSON.stringify(result));
        //console.log(result);
      var pid = $("input[name=gavias_content_builder_id]").val();
      var data = {
         data: result,
         pid: pid
      };
      notify('info', 'Please waiting Block Builder process !');
      $.ajax({
         url: drupalSettings.gavias_content_builder.saveConfigURL,
         type: 'POST',
         data: data,
         dataType: 'json',
         success: function (data) {
          $('#save').val('Save');
          notify('success', 'Block Builder setting updated');
          $('#save').removeAttr('disabled');
          if(drupalSettings.gavias_content_builder.destination==true){
            window.location = drupalSettings.gavias_content_builder.url_redirect;
          }
         },
         error: function (jqXHR, textStatus, errorThrown) {
           alert(textStatus + ":" + jqXHR.responseText);
           notify('black', 'Block Builder setting not updated');
           window.location = drupalSettings.gavias_content_builder.url_redirect;
         }
      });
   }

   function init_sortable_find(wrap, find, items){
      wrap.find(find).sortable({ 
         start: function(e, ui){
           ui.placeholder.width(ui.item.find('.gavias-blockbuilder-content').first().width() - 20);
           ui.placeholder.height(ui.item.height() - 20);
         },
         connectWith          : find,
         cursor               : 'move',
         forcePlaceholderSize : true, 
         placeholder          : 'gbb-placeholder',
         items                : items,
         opacity              : 1,
         handle               : '.bb-drap',
          receive              : function(event, ui){ 
            gbb_sort_rows();
         },
      }); 
      return wrap;  
   }

  function gbb_sortable_elements(){
    var wrap = $('#gbb-admin-wrap');
    wrap.find('.gbb-droppable-column').sortable({ 
      start: function(e, ui){
           ui.placeholder.width(150);
           ui.item.width(150);
           ui.placeholder.height(ui.item.height() - 20);
        },
        connectWith           : '.gbb-droppable-column',
        cursor                : 'move',
        forcePlaceholderSize  : true, 
        placeholder           : 'gbb-placeholder',
        items                 : '.gbb-item',
        opacity               : 0.9 ,  
        handle                : '.bb-el-drap',
        receive              : function(event, ui){ 
            var target_sid = jQuery(this).siblings('.gbb-column-id').val(); 
            var target_rid = jQuery(this).parents('.gbb-row').find('.gbb-row-id').val(); 
            ui.item.find('.element-parent').val(target_sid);
            ui.item.find('.element-row-parent').val(target_rid);
         }
    });
   }

   function gbb_sort_columns(){
    var wrap = $('#gbb-admin-wrap');
    return wrap.find('.gbb-row').each(function(){
      id = 0;
      $(this).find('.gbb-columns').each(function(){
        id++;
        $(this).find('input.gbb-column-id').val(id);
        $(this).find('input.element-parent').val(id);
      })
    })
   }

   function gbb_sort_rows(){
    var wrap = $('#gbb-admin-wrap');
    row_id = 0;
    wrap.find('.gbb-row').each(function(){
      row_id++;
      col_id = 0;
      $(this).find('input.gbb-row-id').val(row_id);
      $(this).find('.gbb-columns').each(function(){
        col_id++;
        $(this).find('input.column-parent').val(row_id);
        $(this).find('input.element-row-parent').val(row_id);
      })
    })
    $('input#gbb-row-id').val(row_id);
    return wrap;
   }

   function gbb_sortable_columns(){
     var wrap = $('#gbb-admin-wrap');
     var id=0;
      wrap.find('.gbb-droppable-row').sortable({ 
      start: function(e, ui){
           ui.placeholder.width(ui.item.find('.gavias-blockbuilder-content').first().width() - 20);
           ui.placeholder.height(ui.item.height() - 20);
        },
        connectWith           : '.gbb-droppable-row',
        cursor                : 'move',
        forcePlaceholderSize  : true, 
        placeholder           : 'gbb-placeholder',
        items                 : '.gbb-columns',
        opacity               : 0.9 ,
        handle                : '.bb-drap',
        receive              : function(event, ui){ 
            var target_rid = jQuery(this).siblings('.gbb-row-id').val(); 
            ui.item.find('.column-parent').val(target_rid);
            ui.item.find('.element-row-parent').val(target_rid);
         },
         update: function(){
          gbb_sort_columns();
         }
      });
   }

   function add_column(el, width, type){
    var blockbuilder_admin = $('#gbb-admin-wrap');
      var clone = $('#gbb-columns .gbb-columns').clone(true);
      clone.hide();
      var row_id = el.parents('.gbb-row').find('.gbb-row-id').val(); 
      var col_id = -1;
      var col_width = width;
      clone.removeClass('wb-4').addClass('wb-' + col_width);
      clone.find('input.column-size').val(col_width);
      clone.find('item-w-label').html(col_width);
      //Set value max column id
      el.parents('.gbb-row').find('input.gbb-column-id').each(function(){
        if( $(this).val() > col_id){
          col_id = $(this).val();
        }
      });
      if(col_id==-1) col_id = 0;

      $('#gbb-column-id').val($('#gbb-column-id').val()*1 + 1);
      clone.addClass('type-' + type);
      clone.find('.item-w-label').html(col_width);
      clone.find('.gbb-column-id').val(col_id*1 + 1);
      clone.find('input.column-parent').val(row_id);
      clone.find('input.column-type').val(type);
      el.parents('.gbb-row').find('.gbb-droppable-row').append(clone).find(".gbb-columns").fadeIn(500);
      gbb_sortable_elements();
      gbb_sortable_columns();
   }

   var IMCE_WINDOW = null;
   function gavias_block_builder(){
   		
   	var blockbuilder_admin = $('#gbb-admin-wrap');
     
      var _bb_sortable = '.gbb-sortable';
      var _bb_item = '.gbb-item';
      var _bb_items = '#gbb-items';
      var _bb_row = '.gbb-row';
      var _bb_column = '.gbb-columns';

   	if( ! blockbuilder_admin.length ) return false;	
   	
    blockbuilder_admin.sortable({ 
      start: function(e, ui){
           ui.placeholder.width(ui.item.find('.gavias-blockbuilder-content').first().width() - 20);
           ui.placeholder.height(ui.item.height() - 20);
        },
        cursor          : 'move',
        forcePlaceholderSize  : true, 
        placeholder       : 'gbb-placeholder',
        items           : '.gbb-row',
        opacity         : 0.9,
        handle               : '.bb-drap',
        update              : function(event, ui){ 
            gbb_sort_rows();
         },
    });
   	
    gbb_sortable_columns();
    gbb_sortable_elements();

      //Size element
      $('.gbb-plus').click(function(){
         var item = $(this).closest('.gbb-columns');
         var _isize = [ '1', '2', '3', '4', '5', '6', '7','8','9','10','11', '12' ];
         for( var i = 0; i < _isize.length-1; i++ ){
            var classes = 'wb-' + _isize[i].replace('/', '-');  //classes width bootstrap eg. wb-6
            var classes_new = 'wb-' + _isize[i+1].replace('/', '-'); //classes width bootstrap eg. wb-6
            if( ! item.hasClass( classes ) ) continue;
            item.removeClass( classes ).addClass( classes_new ).find('.column-size').val( _isize[i+1] );
            item.find('.item-w-label').text( _isize[i+1] );
            break;
         }  
      });
      
      $('.gbb-minus').click(function(){
         var item = $(this).closest('.gbb-columns');
          var _isize = [ '1', '2', '3', '4', '5', '6', '7','8','9','10','11', '12' ];
         
         for( var i = 1; i < _isize.length; i++ ){
            var classes = 'wb-' + _isize[i].replace('/', '-'); //classes width bootstrap eg. wb-6
            var classes_new = 'wb-' + _isize[i-1].replace('/', '-'); //classes width bootstrap eg. w-6
            if( ! item.hasClass( classes ) ) continue;
            
            item.removeClass( classes )
               .addClass( classes_new )
               .find('.column-size').val( _isize[i-1]);
            
            item.find('.item-w-label').text( _isize[i-1] );
            
            break;
         }     
      });

    // add row 
    var rowid = $('#gbb-row-id');
   	$('.bb-btn-row-add').click(function(){
   		var clone = $('#gbb-rows .gbb-row').clone(true);
         
        init_sortable_find(clone, _bb_sortable, _bb_item);

   		clone.hide().find('.gavias-blockbuilder-content > input').each(function() {
   				$(this).attr('name',$(this).attr('class')+'[]');
   			});
   		
   		rowid.val(rowid.val()*1+1);
   		clone.find('.gbb-row-id').val(rowid.val());
   		
   		blockbuilder_admin.append(clone).find(".gbb-row").fadeIn(500);
      gbb_sort_rows();
   	});

    // add column
    $('.gbb-add-column').click(function(){
      var col_width = $(this).attr('data-width');
      add_column($(this), col_width, '');
    });
    
    // add clear
    $('.gbb-add-clear').click(function(){
      add_column($(this), '12', 'column-clearfix');
    });

   	// clone row
   	$('.gbb-row .gbb-row-clone').click(function(){
   		var element = $(this).closest('.gbb-element');
   		element.find(_bb_sortable).sortable('destroy');
   		var clone = element.clone(true);
   		element.after(clone);
      gbb_sort_rows();
      gbb_sortable_columns();
      gbb_sortable_elements();
   	});

    // clone columns
    $('.gbb-columns .gbb-column-clone').click(function(){
      var wrap = $('#gbb-admin-wrap');
      var element = $(this).closest('.gbb-element');
      element.find(_bb_sortable).sortable('destroy');
      row_id = $(this).parents('gbb-row').find('input.gbb-row-id').val();
      var clone = element.clone(true);
      clone.find('input.element-parent').val(row_id);
      element.after(clone);
      gbb_sort_columns();
      gbb_sortable_columns();
      gbb_sortable_elements();
    }); 

    
   	// add item list toggle
   	$('.gbb-add').click(function(){
   		var parent = $(this).parent();
   		
   		if( parent.hasClass('focus') ){
   			parent.removeClass('focus');
        $(this).parents('.gbb-columns').css('z-index', '');
   		} else {
   			$('.gbb-add-element').removeClass('focus');
   			parent.addClass('focus');
        $(this).parents('.gbb-columns').css('z-index', 9);
   		}
   	});
   	
   	// add item 
   	$('.gbb-items a').click(function(){
   		$(this).closest('.gbb-add-element').removeClass('focus');
       $(this).parents('.gbb-columns').css('z-index', 9);
   		var parent = $(this).parents('.gbb-columns').find('.gbb-droppable');
   		var column_id = $(this).parents('.gbb-columns').find('.gbb-column-id').val(); 
      var row_id = $(this).parents('.gbb-row').find('.gbb-row-id').val(); 
      
   		var item = $(this).attr('class');
   		var clone = $(_bb_items).find('div.gbb-type-'+ item ).clone(true);
      
   		clone.hide().find('.gavias-blockbuilder-content input').each(function() {
   			$(this).attr('name',$(this).attr('class')+'[]');
   		});

   		clone.find('.element-parent').val(column_id);
      clone.find('.element-row-parent').val(row_id);
   		parent.append(clone).find(".gbb-item").fadeIn(500);
      gbb_sortable_elements();
      gbb_sortable_columns();
   	});
   	

      // delete el 
      $('.gbb-el-delete').click(function(){
         var item = $(this).closest('.gbb-element');
         if( confirm( "You are sure delete this element ! Continue?" ) ){
            item.fadeOut(500, function(){$(this).remove()});
          } else {
            return false;
          }
      });

      // delete column 
      $('.gbb-column-delete').click(function(){
         var item = $(this).closest('.gbb-columns');
         if( confirm( "You are sure delete this column ! Continue?" ) ){
            item.fadeOut(500, function(){
              $(this).remove()
              gbb_sort_columns();
            });
          } else {
            return false;
          }
      });

      //Delete row
      $('.gbb-row-delete').click(function(){
         var item = $(this).closest('.gbb-row');
         if( confirm( "You are sure delete this row ! Continue?" ) ){
            item.fadeOut(500, function(){
              $(this).remove();
              gbb_sort_rows();
            });
          } else {
            return false;
          }
      });

   	// clone el
   	$('.gbb-item .gbb-item-clone').click(function(){
   		var element = $(this).closest('.gbb-element');
   		var _clone = element.clone(true);
   		element.after(_clone);
   	});

    // form
   	var iresult = ''; var oresult = '';
   
   	$('.gbb-edit').click(function(){

      oresult = '';
      $('#gbb-form-setting').parent().find('.gavias-overlay').first().addClass('active').parents('body').addClass('gavias-overflow-hidden');
   		iresult = $(this).closest('.gbb-element');    
   		var _clone = iresult.children('.gbb-el-meta').clone(true);
   	  oresult = iresult.children('.gbb-el-meta').clone(true);
      //_clone.find('.CodeMirror').remove();

      $('#gbb-form-setting').prepend(_clone).show();
      $('#gbb-form-setting .gbb-el-meta').animate({scrollTop: 0}, 500);

   		iresult.children('.gbb-el-meta').remove();
      //runRender('html');
      tinymce.init({
        selector: '#gbb-form-setting textarea.code_html_tiny',
        height: 200,
        plugins: [
          'advlist autolink lists link image charmap anchor contextmenu pagebreak media searchreplace code fullscreen table',
          'emoticons textcolor textpattern colorpicker'
        ],
        toolbar1: 'insertfile undo redo | styleselect | bullist numlist outdent indent | link image | forecolor backcolor emoticons',
      });

      if (typeof(tinyMCE) != "undefined") {
        if (tinyMCE.activeEditor == null || tinyMCE.activeEditor.isHidden() != false) {
          tinyMCE.editors=[]; // remove any existing references
        }
      }
      if(drupalSettings.gavias_content_builder.check_imce=='on'){
        load_imce();
      }
      return;
   	});

    $('#gbb-form-setting .gbb-form-setting-save').click(function(){
        tinymce.remove(); 
        if(drupalSettings.gavias_content_builder.check_imce=='on'){
          close_imce();
        }  

        $('.tabs-ul.ui-sortable').sortable('destroy');
        var popup = $('#gbb-form-setting');
        var _clone = popup.find('.gbb-el-meta').clone(true);
        iresult.append(_clone);
        iresult.find('>.gavias-blockbuilder-content>.gbb-item-content>.item-bb-title').html(iresult.find('.display-admin').first().val());
        popup.fadeOut(50, function(){
          $(this).parent().find('.gavias-overlay').first().removeClass('active').parents('body').removeClass('gavias-overflow-hidden');
        })
       
        setTimeout(function(){
          popup.find('.gbb-el-meta').remove();
        }, 150);

      iresult = ''; oresult = '';
      return;
    });  

    $('#gbb-form-setting .gbb-form-setting-cancel').click(function(){
      tinymce.remove(); 
      if(drupalSettings.gavias_content_builder.check_imce=='on'){
        close_imce();
      }  
      $('.tabs-ul.ui-sortable').sortable('destroy');
      var popup = $('#gbb-form-setting');
      iresult.append(oresult);
      popup.fadeOut(50).parent().find('.gavias-overlay').first().removeClass('active').parents('body').removeClass('gavias-overflow-hidden');
      setTimeout(function(){
        popup.find('.gbb-el-meta').remove();
      }, 150);
      iresult = ''; oresult = '';
    });

  }

  (function (o) {
      jQuery.fn.clone = function () {
          var result = o.apply (this, arguments),
          old_input = this.find('textarea, select'),
          new_input = result.find('textarea, select');
          //set random id upload field
          result.find('.imce-url-input').each(function(){
            var random = randomString(10)
            $(this).attr('id', 'gva-upload-' + random);
            $(this).attr('id', 'gva-upload-' + random);
            $(this).attr('data-id', random);
            $(this).parents('.gva-upload-input').attr('data-id', '' + random);
          });
          
          //set random id upload field
          result.find('.gva-upload-image').each(function(){
            var random = randomString(10)
            $(this).attr('id', 'gva-upload-' + random);
            $(this).find('form.upload').attr('id', 'upload-' + random);
          });

          for (var i = 0, l = old_input.length; i < l; ++i)
            jQuery(new_input[i]).val( jQuery(old_input[i]).val() );
          
          return result;
      };
  }) (jQuery.fn.clone);

  $(document).ready(function(){
    gavias_block_builder();
  });

  $(document).mouseup(function(e){
   	if ($(".gbb-add-element").has(e.target).length === 0){
   		$(".gbb-add-element").removeClass('focus');
      $('.gbb-columns').css('z-index', '');
   	} 
   	if ($(".gbb-sc-add").has(e.target).length === 0){
   		$(".gbb-sc-add").removeClass('focus');
      $('.gbb-columns').css('z-index', '');
   	}
  });

  $(document).ready(function(e){
    $(".close-gbb-items").click(function(){
      $(".gbb-add-element").removeClass('focus');
      $('.gbb-columns').css('z-index', '');
    });
  });

  function getByClass(sClass){
    var aResult=[];
    var aEle=document.getElementsByTagName('*');
    for(var i=0;i<aEle.length;i++){
      /*foreach className*/
      var arr=aEle[i].className.split(/\s+/);
      for(var j=0;j<arr.length;j++){
        /*check class*/
        if(arr[j]==sClass){
          aResult.push(aEle[i]);
        }
      }
    }
    return aResult;
  };


  function runRender(type){
    var aBox=getByClass("code_"+type);
    for(var i=0;i < aBox.length; i++){
      var editor = false;
      if(!editor){
        editor = CodeMirror.fromTextArea(aBox[i], {
          lineNumbers: true,
          mode: "text/html",
        });
      }
      editor.on("blur", function() {editor.save()});
    }
  };


  $('.swith-language.nav-tabs li a').click(function(e){
    e.preventDefault();
    var id = $(this).attr('href');
    var w = $(this).parents('.multi-language');
    w.find('.swith-language.nav-tabs li a').removeClass('active');
    $(this).addClass('active');
    w.find('.swith-languages.tab-content .tab-pane').removeClass('active');
    w.find('.swith-languages.tab-content .tab-pane' + id).addClass('active');
  });

  function load_imce(){
    $('.imce-url-button').click(function(e){
      e.preventDefault();
      var url = Drupal.url('imce');
      var inputID = 'gva-upload-' + $(this).parents('.gva-upload-input').attr('data-id');
      url += (url.indexOf('?') === -1 ? '?' : '&') + 'sendto=gvaImceInput.urlSendto&inputId=' + inputID + '&type=link';
      $('#gva-upload-' + inputID).focus();
      if(IMCE_WINDOW == null || IMCE_WINDOW.closed){
        IMCE_WINDOW = window.open(url, '', 'width=' + Math.min(1000, parseInt(screen.availWidth * 0.8, 10)) + ',height=' + Math.min(800, parseInt(screen.availHeight * 0.8, 10)) + ',resizable=1');
      }
      return false;
    })
  }

  function close_imce(){
    try {
      if (IMCE_WINDOW.document.location.href == "about:blank") {
        IMCE_WINDOW.close();
        IMCE_WINDOW = undefined;
      }
    } catch (e) { }
  }

  var gvaImceInput = window.gvaImceInput = window.gvaImceInput || {
     urlSendto: function(File, win) {
      var url = File.getUrl();
      var el = $('#' + win.imce.getQuery('inputId'))[0];
      win.close();
      if (el) {
        var base_path = drupalSettings.gavias_content_builder.base_path;
        var url_new = '/' + url.replace(base_path, '');
        $(el).val(url_new);
        $(el).parents('.gva-upload-input').find('.gavias-image-demo').attr('src', url);
      }
    }
  }
  

})(jQuery);